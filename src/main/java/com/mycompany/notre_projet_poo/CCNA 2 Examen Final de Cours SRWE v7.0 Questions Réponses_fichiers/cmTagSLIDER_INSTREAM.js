!function(){var e={9652:function(e){function t(e){window.cmTag=window.cmTag||{},e=e||{},this.unitType=e.unitType,this.className=this.className||e.className}t.prototype.info=function(e,t){this.hasLoggerMethod("info")&&window.cmTag.logger.info("unit type: "+this.unitType+" class name: "+this.className+" - "+e,t)},t.prototype.debug=function(e,t){this.hasLoggerMethod("info")&&window.cmTag.logger.info("unit type: "+this.unitType+" class name: "+this.className+" - "+e,t)},t.prototype.error=function(e,t){this.hasLoggerMethod("error")&&window.cmTag.logger.error("unit type: "+this.unitType+" class name: "+this.className+" - "+e,t)},t.prototype.hasLoggerMethod=function(e){return window.cmTag&&window.cmTag.logger&&window.cmTag.logger[e]&&"function"==typeof window.cmTag.logger[e]},e.exports=t},2707:function(e,t,i){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,s=void 0,s=function(e,t){if("object"!==n(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!==n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===n(s)?s:String(s)),r)}var o,s}var o=i(9453),s=i(1999),a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.opions=t}var t,i,n;return t=e,(i=[{key:"getPreset",value:function(e){var t=e.key,i=e.value,n=e.unitType,r=e.platform;if(o[t]&&o[t][i]){var a=o[t],l=o[t].strength||1,c=o[t].atr||{};return c=s.extend(c,a[i].atr),a[i]&&a[i].units&&(c=this._getFromUnits(c,a[i].units,n,r)||c),{presetData:c,strength:l}}}},{key:"_getFromUnits",value:function(e,t,i,n){if(t[i]){var r=t[i].atr||{};return e=s.extend(e,r),t[i].platform&&(e=this._getByPlatform(e,t[i].platform,n)||e),e}}},{key:"_getByPlatform",value:function(e,t,i){if(t[i]){var n=t[i].atr||{};return e=s.extend(e,n)}}}])&&r(t.prototype,i),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();e.exports=a},2227:function(e){e.exports={strength:101,atr:{},1:{atr:{originId:15,"preroll.pubId":133128,"preroll.pubTagId":779408,"midroll.pubId":133128,"midroll.pubTagId":779408,"postroll.pubId":133128,"postroll.pubTagId":779408,pubId:133128,pubTagId:779408,player:{settings:{mprdct:0,cmbopps:!1,encwfrs:!1,mntmbtwfs:999,mintimwf:999e3,mxtmbtwfs:999,time_between_waterfall:999,frrst1aftrrst93:!1,rmvrvlwntwrk:!1}},onOutOfView:"pause",isPWOV:!1,noaop:1}},2:{atr:{isDebug:!0,originId:15,"preroll.pubId":133128,"preroll.pubTagId":779408,"midroll.pubId":133128,"midroll.pubTagId":779408,"postroll.pubId":133128,"postroll.pubTagId":779408,pubId:133128,pubTagId:779408,player:{settings:{mprdct:0,cmbopps:!1,encwfrs:!1}},onOutOfView:"pause"}},3:{atr:{isDebug:!0,originId:15,"preroll.pubId":133128,"preroll.pubTagId":1184655,"midroll.pubId":133128,"midroll.pubTagId":1184655,"postroll.pubId":133128,"postroll.pubTagId":1184655,pubId:133128,pubTagId:1184655,player:{settings:{mprdct:0,cmbopps:!1,encwfrs:!1}},isPWOV:!1}},4:{atr:{isDebug:!0,originId:15,"preroll.pubId":133128,"preroll.pubTagId":1046821,"midroll.pubId":133128,"midroll.pubTagId":1046821,"postroll.pubId":133128,"postroll.pubTagId":1046821,pubId:133128,pubTagId:1046821,player:{settings:{mprdct:0,cmbopps:!1,encwfrs:!1}},onOutOfView:"pause"}},5:{atr:{originId:15,"preroll.pubId":133128,"preroll.pubTagId":1633025,"midroll.pubId":133128,"midroll.pubTagId":1633025,"postroll.pubId":133128,"postroll.pubTagId":1633025,pubId:133128,pubTagId:1633025,player:{settings:{mprdct:0,cmbopps:!1,encwfrs:!1}},onOutOfView:"pause",isPWOV:!1}}}},5413:function(e){e.exports={strength:102,1:{atr:{player:{settings:{encwfrs:!1}}}}}},3365:function(e){e.exports={strength:101,atr:{},1:{atr:{pixels:{startWithABT:{isFire:!0},getAdAny:{isFire:!0},getAdNoRV:{isFire:!0},getAd:{isFire:!0},secondsToCloseTimer:{isFire:!0},secondsToCloseGlobalTimer:{isFire:!0},midrollCollapseTimer:{isFire:!0}}}},2:{atr:{pixels:{getAdAny:{isFire:!0},getAdNoRV:{isFire:!0},getAd:{isFire:!0}}}}}},5650:function(e){var t={atr:{},platform:{Desktop:{atr:{}},Mobile:{atr:{secondsBW:20}}}},i={strength:1,atr:{},101:{atr:{pubId:165757,pubTagId:946347,preroll:{pubId:165757,pubTagId:946347},midroll:{pubId:165757,pubTagId:946347},postroll:{pubId:165757,pubTagId:946347}}},2:{atr:{secondsToClose:120,secondsBW:20}},3:{atr:{secondsToClose:120,pubId:208401,pubTagId:1047981,preroll:{pubId:208401,pubTagId:1047981},midroll:{pubId:208401,pubTagId:1047981},postroll:{pubId:208401,pubTagId:1047981}},units:{FEED_MANAGER:t,INLINE_INSTREAM_OLD:t,INLINE_INSTREAM_VFORCE:t,SLIDER_INSTREAM:t,SLIDER_OUTSTREAM:t,WIDGET_ITEM:t}},4:{atr:{pubId:292045,pubTagId:1565025,preroll:{pubId:292045,pubTagId:1565025},midroll:{pubId:292045,pubTagId:1565025},postroll:{pubId:292045,pubTagId:1565025}}},5:{atr:{pubId:383725,pubTagId:2077655,preroll:{pubId:383725,pubTagId:2077655},midroll:{pubId:383725,pubTagId:2077655},postroll:{pubId:383725,pubTagId:2077655}}}};e.exports=i},2290:function(e){e.exports={strength:101,1:{atr:{predictors:{multiAd:{isActive:!0,predictPoints:{any:{qState:"q1"}}},playerReady:{isActive:!0,predictPoint:0},distancePixels:{isActive:!0,predictPoints:{1:{pixelsFromSelectors:10}}}}}},2:{atr:{predictors:{multiAd:{isActive:!0,predictPoints:{any:{qState:"q0"}}},playerReady:{isActive:!1},distancePixels:{isActive:!0,predictPoints:{1:{pixelsFromSelectors:10}}},firstScroll:{isActive:!0,predictPoints:[0,0]}}}},3:{atr:{predictors:{multiAd:{isActive:!0,predictPoints:{any:{qState:"q0"}}},playerReady:{isActive:!0,predictPoint:0},distancePixels:{isActive:!1},firstScroll:{isActive:!1}}}},4:{atr:{predictors:{multiAd:{isActive:!0,predictPoints:{any:{qState:"q1"}}},playerReady:{isActive:!0,predictPoint:0},distancePixels:{isActive:!1},firstScroll:{isActive:!1}}}},5:{atr:{predictors:{multiAd:{isActive:!1},playerReady:{isActive:!0,predictPoint:0},distancePixels:{isActive:!1},firstScroll:{isActive:!1}}}},99:{atr:{predictors:{autoKill:{isActive:!1},getAdFail:{isActive:!1},multiAd:{isActive:!1},playerReady:{isActive:!1},distancePercent:{isActive:!1},distancePixels:{isActive:!1},firstScroll:{isActive:!1}}}},101:{atr:{predictors:{multiAd:{isActive:!0,predictPoints:{any:{qState:"q1"}}},playerReady:{isActive:!0,predictPoint:0},distancePixels:{isActive:!0,predictPoints:{1:{pixelsFromSelectors:10}}}}}}}},9453:function(e,t,i){var n={};n.demo=i(2227),n.level=i(5650),n.isFireAllPixels=i(3365),n.predictorsPresets=i(2290),n.isDebug=i(5413),e.exports=n},3474:function(e){e.exports={"AR-EG":"إعلان","AR-AE":"إعلان","AR-SA":"إعلان","CS-CZ":"Reklama","DA-DK":"Annonce","DE-DE":"Anzeige","DE-AT":"Anzeige","DE-CH":"Anzeige","EL-GR":"Ad","EN-AE":"Ad","EN-AU":"Ad","EN-CA":"Ad","EN-GB":"Ad","EN-IE":"Ad","EN-IN":"Ad","EN-SG":"Ad","EN-PH":"Ad","EN-MY":"Ad","EN-NZ":"Ad","EN-US":"Ad","EN-ZA":"Ad","EN-XL":"Ad","ES-ES":"Publicidad","ES-AR":"Patrocinado","ES-CO":"Patrocinado","ES-CL":"Patrocinado","ES-PE":"Patrocinado","ES-MX":"Patrocinado","ES-US":"Patrocinado","ES-XL":"Patrocinado","ES-VE":"Patrocinado","EN-ID":"Ad","FI-FI":"Mainos","FR-FR":"Sponsorisé","FR-BE":"Sponsorisé","FR-CA":"Pub","FR-CH":"Sponsorisé","HE-IL":"מודעה","HI-IN":"एड","HU-HU":"Hird.","ID-ID":"Ad","IT-IT":"Ann.","JA-JP":"PR","KO-KR":"AD","NB-NO":"Annonse","NL-NL":"Adv","NL-BE":"Adv","PL-PL":"Reklama","PT-BR":"Publicidade","PT-PT":"Pub","RU-RU":"Реклама","SV-SE":"Annons","TH-TH":"Ad","TR-TR":"R","VI-VN":"Ad","ZH-CN":"广告 ","ZH-TW":"廣告","ZH-HK":"廣告"}},2130:function(e){e.exports={UNIT_TYPES:{INLINE:0,INTERSTITIAL:1,SLIDER_OUTSTREAM:2,SLIDER_INSTREAM:3,EXPANDABLE:4,"300X600":5,INLINE_FEED:6,COFFEEBREAK:7,SLIDESHOW:8,INLINE_INSTREAM:9,COFFEEBREAK_MOBILE:10,"300X600_MOBILE":11,INLINE_MOBILE:12,INTERSTITIAL_MOBILE:14,SLIDER_OUTSTREAM_MOBILE:15,SLIDER_INSTREAM_MOBILE:16,EXPANDABLE_MOBILE:17,INLINE_INSTREAM_MOBILE:18,INLINE_OUT_OF_VIEW:19,INLINE_OUT_OF_VIEW_MOBILE:20,INLINE_VIEWABILITY_EXPAND:21,INLINE_VIEWABILITY_EXPAND_MOBILE:22,INLINE_INSTREAM_VIEWABILITY_EXPAND:23,INLINE_INSTREAM_VIEWABILITY_EXPAND_MOBILE:24,INLINE_FEED_MOBILE:25,WIDGET_ITEM:26,WIDGET_ITEM_MOBILE:27,NEW_INLINE:28,NEW_INLINE_MOBILE:29,NEW_INLINE_ADJACENT:30,NEW_INLINE_ADJACENT_MOBILE:31,FEED_MANAGER:32,FEED_MANAGER_MOBILE:33,MSN_WIDGET:34,SLIDER_INSTREAM_VFORCE:36,SLIDER_INSTREAM_MOBILE_VFORCE:37},STREAM_TYPES:{IN_STREAM:1,OUT_STREAM:0},UNITS_STREAM_TYPE:{INLINE:0,INTERSTITIAL:0,SLIDER_OUTSTREAM:0,SLIDER_INSTREAM:1,EXPANDABLE:1,"300X600":1,OMNI_TAG:0},APPEND_TYPE:{BEFORE_BEGIN:0,AFTER_BEGIN:1,BEFORE_END:2,AFTER_END:3,APPEND_IN_FIRST:4},INVALID_SELECTOR_TAG_NAMES:{IMG:0,UL:1,BUTTON:3,INPUT:4,LABEL:5},OMNI_TAG_UNIT_NAMES:{rightrail1:1,rightrail2:2,rightrail3:3,inlineTop:4,inlineMiddle:5,inlineBottom:6,interstitial:7,sliderOutstream1:8,sliderOutstream2:9,sliderInstream1:10,sliderInstream2:11,coffeeBreak:12,expandable1:13,expandable2:14,expandable3:15,invalidUnitName:1e3},ROLL_TYPE:{preroll:0,"pre-roll":0,midroll:-1,"mid-roll":-1,postroll:-2,"post-roll":-2},TAB_STATE:{focus:0,blur:1,tabOut:2},DFP_KEYWORDS:["google","dfp","gpt"],MIME_TYPES:{1:"video/mp4",5:"video/webm",7:"video/ogg",10:"video/mp4",11:"video/ogg",12:"video/webm"},SUB_UNIT_TYPE:{PLAIN:0,START_FROM_SLIDER:1,DETACH_TO_SLIDER:2,SUPER_SLIDER:3,INLINE_SINGLE_SELECTOR:4,INLINE_MULTI_SELECTOR:5,STICKY_BELOW:6,STICKY_ABOVE:7,STICKY_BELOW_ABOVE:8,WIDGET:9,MID_ARTICLE_AS_FEED:10},FEED_SELECTOR:"tbl-feed-container",RECO_REEL_SUB_UNIT_TYPE:{PLAIN:0,START_FROM_SLIDER_RBOX:1,DETACH_TO_SLIDER_RBOX:2},AD_CHOICE_TYPE:{TITLE:"title",VIDEO_AD:"videoAd",SLIDER:"slider"},REPLAY_AD_CLICK:{ALL:"all",RESTART_PLAYER:"restartPlayer"},DISPLAY_FILLER:{BEFORE_AD:{NONE:"none",D2D:"d2d",CONTENT:"content",STATIC:"static",none:"none"},BETWEEN_ADS:{LOADING:"loading",D2D:"d2d",CONTENT:"content",STATIC:"static",none:"none"},ON_TIMEOUT:{CLOSE:"close",D2D:"d2d",CONTENT:"content",STATIC:"static",none:"none"}},TITLE_POSITION:{ABOVE:"above",BELOW:"below"},DEBUG_DATA:{pn:"pn",sqg:"sqg",sqv:"sqv",rv:"rv",sqp:"sqp",rvps:"rvps",rvvs:"rvvs",pps:"pps",ppsc:"ppsc",vms:"vms",gpps:"gpps",gppsc:"gppsc",ft:"ft",fsc:"fsc",fpc:"fpc",sa:"sa",pi:"pi",dt:"dt",vb:"vb",dur:"dur",ttv:"ttv",bovpg:"bovpg",bovpv:"bovpv",be:"be",pap:"pap",mty:"mty",esv:"esv",rot:"rot",roid:"roid",rom:"rom",tti:"tti"},DEBUG_DATA_PIXELS:{ft:"ft",fsc:"fsc",fpc:"fpc"},PREDICT_NAMES:{distancePercentPredict:0,distancePixelsPredict:1,getAdFailPredict:2,multiAdPredict:4,playerReadyPredict:5,autoKillPredict:7,firstScrollPredict:8,emptyQueuePredict:9,intersectionPredict:11,fullEligibilityPredict:12,mp4Predict:17,timePredict:19,msnFullEligibilityPredict:23,feedInViewPredict:24,recoReelPredict:25,postRepeatPredictor:26},ANIMATION_TYPE:{none:0,attaching:1,detaching:2,expanding:3,collapsing:4},ANIMATION_TIMER:{none:0,sliderClose:1e3},FLOATING_VIEW_TOP_COMPONENT:{video:0,loading:1,repeat:2,d2d:3,content:4},FRAME_TYPE:{plainPage:0,friendlyIframe:1,nonFriendlyIframe:2,amp:3,inApp:4},CHECK_FOR_RV_PRIORITY:{onEligibility:"hasReachedEligibility",pixelsFromSelector:"hasReachedPixelsFromSelector",intersectionPercent:"intersectionPercent",beforeLoaderEnd:"beforeLoaderEnd"},TIMER_NAMES:{viewability:"viewability",viewabilityOneS:"viewabilityOneS",viewability100:"viewability100",viewabilityAMP:"viewabilityAMP"},AD_STATUS:{new:0,adLoaded:1,startAd:2,adImpression:3,adPlay:4,adError:5,adComplete:6},GENERAL_ERROR:{1:"empty data from player"},CSS_PROPERTIES_FROM_RBOX:["font","@font-face","font-family","font-feature-settings","@font-feature-values","font-kerning","font-language-override","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-weight","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","line-break","line-height","outline","outline-color","outline-offset","outline-style","outline-width","text-decoration-line","text-underline-position","padding","padding-bottom","padding-left","padding-right","padding-top","margin","margin-bottom","margin-left","margin-right","margin-top","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","text-transform","z-index","text-align","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-style","text-indent","text-justify","text-orientation","text-overflow","text-shadow","text-transform","text-underline-position","direction","color"],NATIVE_AD:{DESC_TITLE_FONT_RATIO:.8,FIT_TO_SIZE:{TITLE:"title",FULL:"full",NONE:"none"}},UNIT_QUERY_LANGUAGE:{SUPPORTED_CONFIG_FLAGS:["stickyCard"],MAPPING:[{search:"@Ad@",replaceWith:"activeAd"}]},RV_TYPES:{NON_RV:0,RV:1,ANY:"any"},MEDIA_TYPE:{MP4:1,VPAID:2},MEDIA_TYPE_ID_TO_NAME:{1:"video",2:"vpaid",6:"omid"},VIDEO_READY_STATE:{HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4},TRC_PERFORMANCE_ACTIONS:{START:"Start",STOP:"Stop"},OS:{IOS:"iOS"},BROWSER:{IE:"IE",EDGE:"Edge",FIREFOX:"Firefox"},WF_ACTION:{START:"start",STOP:"stop"},TIME_UNITS:{SECOND:1e3},MINUTELY_AD_STATUS:{PLAY:"play",CLOSE:"close"},DEFAULT_TIME_LIMITS:{REPEAT_SLIDER_TIMER_SECS:5e3},CANCEL_GET_AD_REASONS:{LOST_ELIGIBILITY:"cancelGetAdOnLostEligibility"},ARROW_KEYS_CODES:{LEFT:37,UP:38,RIGHT:39,DOWN:40},INSERT_OPTIONS:{BEFORE:"before",AFTER:"after"},PAUSE_REASONS:{UNKNOWN:"unknown",LOST_ELIGIBILITY:"lost eligibility",BLOCKED_BY_EXTERNAL_UNIT:"blocked by external unit",AD_SWAPPED:"ad swapped",UNIT_TERMINATED:"unit terminated",SLIDER_LOST_ELIGIBILITY:"slider lost eligibility",PERMANENT_CLOSE:"permanent close"}}},5264:function(e){e.exports={player:void 0,oppsula:void 0,pms:void 0,serviceLoader:void 0,microServices:{base_url:"//vidstat.taboola.com/",async:!0,PMS:{version:"2.2.1"}}}},2167:function(e,t,i){var n=i(1999);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,s=void 0,s=function(e,t){if("object"!==r(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===r(s)?s:String(s)),n)}var o,s}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.model=t.model,this.subModel=t.subModel?t.subModel:null,this.observerOptions={root:null,rootMargin:"0px",threshold:n.buildObserverThresholdList()},this.model.get("detachToSlider.isStartFromSlider")?this._createSliderObserver():this._createFeedObserver()}var t,i,r;return t=e,(i=[{key:"_createSliderObserver",value:function(){this.intersectionObserver=new IntersectionObserver(function(e){var t=this;e.map((function(e){t.updateModel("isViewableAMP",e.intersectionRect.height+5>=t.model.get("detachToSlider.height"))}))}.bind(this),this.observerOptions)}},{key:"_createFeedObserver",value:function(){this.intersectionObserver=new IntersectionObserver(function(e){var t=this;e.map((function(e){t.updateModel("isViewableAMP",e.intersectionRatio>.5)}))}.bind(this),this.observerOptions)}},{key:"startObserver",value:function(e){this.updateModel("isViewableAMP",!1),this.intersectionObserver.observe(e)}},{key:"stopObserver",value:function(e){this.intersectionObserver.unobserve(e),this.intersectionObserver.disconnect()}},{key:"updateModel",value:function(e,t){null!=this.subModel&&this.subModel.set(e,t),this.model.set(e,t)}}])&&o(t.prototype,i),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();e.exports=s},5422:function(e){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function i(e,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,s=void 0,s=function(e,i){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,i||"default");if("object"!==t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(e)}(o,"string"),"symbol"===t(s)?s:String(s)),r)}var o,s}var n=null,r=function(e){return/\{\s*\[native code\]\s*\}/.test(""+e)},o=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n||(n=this),n}var t,o,s;return t=e,(o=[{key:"set",value:function(e,t,i){r(window[e])&&r(window[e].prototype[t])||(this.iframe||this.createIframe(),this.iframe.contentWindow[e].prototype[t]&&(window[e].prototype||(window[e]=function(){}),window[e].prototype[t]=this.iframe.contentWindow[e].prototype[t],i&&(window[e]=this.iframe.contentWindow[e])))}},{key:"setWindowFunctions",value:function(e){e&&(this.iframe||this.createIframe(),e.split(",").forEach(function(e){var t=e.split(".");this.setWindowNestedFunctions(window,t)}.bind(this)))}},{key:"createIframe",value:function(){this.iframe=document.createElement("iframe"),this.iframe.style.width=0,this.iframe.style.height=0,this.iframe.style.visibility="hidden",this.iframe.style.display="none",document.body.appendChild(this.iframe)}},{key:"setWindowNestedFunctions",value:function(e,t){var i=t.shift();0==t.length?e[i]=this.iframe.contentWindow[i]:this.setWindowNestedFunctions(e[i],t)}}])&&i(t.prototype,o),s&&i(t,s),Object.defineProperty(t,"prototype",{writable:!1}),e}();e.exports=new o},9006:function(e){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function i(e,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,s=void 0,s=function(e,i){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,i||"default");if("object"!==t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(e)}(o,"string"),"symbol"===t(s)?s:String(s)),r)}var o,s}var n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.arrayFrom()}var t,n,r;return t=e,n=[{key:"arrayFrom",value:function(){var e,t,i,n;Array.from||(Array.from=(e=Object.prototype.toString,t=function(t){return"function"==typeof t||"[object Function]"===e.call(t)},i=Math.pow(2,53)-1,n=function(e){var t=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t}(e);return Math.min(Math.max(t,0),i)},function(e){var i=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var r,o=arguments.length>1?arguments[1]:void 0;if(void 0!==o){if(!t(o))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(r=arguments[2])}for(var s,a=n(i.length),l=t(this)?Object(new this(a)):new Array(a),c=0;c<a;)s=i[c],l[c]=o?void 0===r?o(s,c):o.call(r,s,c):s,c+=1;return l.length=a,l}))}}],n&&i(t.prototype,n),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();e.exports=n},3629:function(e,t,i){var n=i(1999),r=i(2130),o=i(5422),s=i(9006),a=function(e){n.trcPerformanceMeasurement(e.trcPerformanceMeasurementEnabled,"videoBeforeCMTagNativeCode",r.TRC_PERFORMANCE_ACTIONS.START),o.set("Function","bind"),o.set("Event","constructor",!0),o.set("Array","forEach",!1),o.set("Array","every",!1),o.setWindowFunctions(e.nativeFunctions),n.trcPerformanceMeasurement(e.trcPerformanceMeasurementEnabled,"videoBeforeCMTagNativeCode",r.TRC_PERFORMANCE_ACTIONS.STOP),new s,window.cmTag.customDataForTest={startWithABT:!1},!!e.gaFactor&&n.isFactor(parseInt(e.gaFactor))&&window.addEventListener("error",(function(t){try{if(-1==t.filename.indexOf("infra/cmTag"))return;var i={timestamp:(new Date).toISOString(),message:t.message,lineNum:t.lineno,fullUrl:window.location.href,userAgent:window.navigator.userAgent,firedStartWithABT:window.cmTag.customDataForTest.startWithABT,unitType:e.unitType};t.error&&(i.callStack=t.error.stack);var n=new XMLHttpRequest;n.open("POST","//vidanalytics.taboola.com/putes/cm_units_error_logs",!0),n.setRequestHeader("Content-type","application/x-www-form-urlencoded");var r=JSON.stringify(i);n.send(r)}catch(t){}}))};e.exports=a},7904:function(e,t,i){e.exports={beforeCMTag:i(3629)}},5545:function(e,t,i){"use strict";i.d(t,{Z:function(){return s}});var n=i(4187);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,s=void 0,s=function(e,t){if("object"!==r(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===r(s)?s:String(s)),n)}var o,s}var s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.unitType,r=t.className,o=t.logger,s=void 0===o?n.Z.getInstance():o,a=t.version,l=t.isDebug,c=void 0===l||l;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._logger=s,this.unitType=i,this.className=r,this.version=a,this.isDebug=c}var t,i,r;return t=e,(i=[{key:"info",value:function(e,t){this._logger.info("unit type: ".concat(this.unitType,", ")+"class name: ".concat(this.className," - ").concat(e),t)}},{key:"success",value:function(e,t){this._logger.success("unit type: ".concat(this.unitType,", ")+"class name: ".concat(this.className," - ").concat(e),t)}},{key:"important",value:function(e,t){this._logger.important("unit type: ".concat(this.unitType,", ")+"class name: ".concat(this.className," - ").concat(e),t)}},{key:"warning",value:function(e,t){this._logger.warning("unit type: ".concat(this.unitType,", ")+"class name: ".concat(this.className," - ").concat(e),t)}},{key:"pixel",value:function(e,t){this._logger.pixel("unit type: ".concat(this.unitType,", ")+"class name: ".concat(this.className," - ").concat(e),t)}},{key:"debug",value:function(e,t){this.isDebug&&this._logger.debug("unit type: ".concat(this.unitType,", ")+"class name: ".concat(this.className," - ").concat(e),t)}},{key:"error",value:function(e,t){this.isDebug&&this._logger.error("unit type: ".concat(this.unitType,", ")+"class name: ".concat(this.className," - ").concat(e),t)}},{key:"predict",value:function(e){this._logger.predict("unit type: ".concat(this.unitType,", predictor: ").concat(this.className,", predictlog: ").concat(e))}}])&&o(t.prototype,i),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()},4187:function(e,t,i){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(e,t,i){return r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct.bind():function(e,t,i){var n=[null];n.push.apply(n,t);var r=new(Function.bind.apply(e,n));return i&&o(r,i.prototype),r},r.apply(null,arguments)}function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function s(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,s=void 0,s=function(e,t){if("object"!==n(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!==n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===n(s)?s:String(s)),r)}var o,s}i.d(t,{Z:function(){return v}});var a=function(){function e(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"instance"in this.constructor)throw new Error("Cannot instantiate more than one '".concat(this.constructor.name,"'"));if("Singleton"==this.constructor.name)throw new Error("Cannot instantiate abstract class 'Singleton'");this.constructor.instance=this}var t,i,n;return t=e,n=[{key:"getInstance",value:function(){return"instance"in this||this.create.apply(this,arguments),this.instance}},{key:"create",value:function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return r(e,i)}}],(i=null)&&s(t.prototype,i),n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),l=i(9057);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function u(e,t,i){return u=p()?Reflect.construct.bind():function(e,t,i){var n=[null];n.push.apply(n,t);var r=new(Function.bind.apply(e,n));return i&&h(r,i.prototype),r},u.apply(null,arguments)}function d(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if("object"!==c(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===c(o)?o:String(o)),n)}var r,o}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function f(e){var t=p();return function(){var i,n=m(e);if(t){var r=m(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return function(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,i)}}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}var y=i(1999),v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(o,e);var t,i,n,r=f(o);function o(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.addTrace,n=void 0!==i&&i,s=t.isDebug,a=void 0!==s&&s,l=t.isConsole,c=void 0===l?a:l,u=t.isSaveLog,d=void 0===u?a:u,h=t.extraLogGA,f=void 0!==h&&h,p=(t.version,t.isGA);return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=r.call(this)).addTrace=n,e.isDebug=y.parseBool(a),e.isConsole=y.parseBool(c),e.isSaveLog=y.parseBool(d),e.isGA=y.parseBool(p),e.extraLogGA=f,e.dataIndexName="units_debug_logs",e.isDebug&&(window.cmLogs=window.cmLogs||[]),e.initModel={},e}return t=o,n=[{key:"create",value:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return u(o,t)}}],(i=[{key:"pushLog",value:function(e,t){this.isDebug&&this._hasConsoleMethod("log")&&(window.cmLogs.push({ts:(new Date).getTime(),message:e,obj:t}),"cmTag: init"===e&&(this.initModel=t,this.initModel["debugDataStore.indexName"]&&(this.dataIndexName=this.initModel["debugDataStore.indexName"]),console.log("cmTag: init obj:",JSON.stringify(t)),this.sessionID=this.getUniqSessionId(),this.showSessionID()),this.initModel["debugDataStore.isActive"]&&this.sendToServer(e,t))}},{key:"info",value:function(e,t){this.isDebug&&this._hasConsoleMethod("info")&&(console.info("cmTag: ".concat(e),t),this.pushLog("cmTag: ".concat(e),t),this.addTrace&&this._hasConsoleMethod("trace")&&console.trace())}},{key:"debug",value:function(e,t){this.isDebug&&this._hasConsoleMethod("log")&&(console.log("%ccmTag: ".concat(e),"color: RoyalBlue",t),this.pushLog("cmTag: ".concat(e),t))}},{key:"error",value:function(e,t){this._hasConsoleMethod("error")&&(console.error("cmTag: ".concat(e),t),this.pushLog("cmTag: ".concat(e),t))}},{key:"ga",value:function(e,t,i){return this.extraLogGA&&this.info("GA extra log",{unitType:e,action:t,version:i}),this._ga.send(e,t,i)}},{key:"success",value:function(e,t){this.isDebug&&this._hasConsoleMethod("log")&&(console.log("%ccmTag: ".concat(e),"color: green",t),this.pushLog("cmTag: ".concat(e),t))}},{key:"important",value:function(e,t){this.isDebug&&this._hasConsoleMethod("log")&&(console.log("%ccmTag: ".concat(e),"color: purple",t),this.pushLog("cmTag: ".concat(e),t))}},{key:"warning",value:function(e,t){this.isDebug&&this._hasConsoleMethod("log")&&(console.log("%ccmTag: ".concat(e),"color: orange",t),this.pushLog("cmTag: ".concat(e),t))}},{key:"pixel",value:function(e,t){this.isDebug&&this._hasConsoleMethod("log")&&(console.log("%ccmTag: ".concat(e),"color: #00A0B2",t),this.pushLog("cmTag: ".concat(e),t))}},{key:"sendToServer",value:function(e,t){var i="no data";try{var n=JSON.stringify(t);t&&(i=n)}catch(e){}var r="".concat(this.initModel["player.settings.kbnul"],"/putes/").concat(this.dataIndexName);l.default.ajax({type:"POST",url:r,data:JSON.stringify({message:e,dataObject:i,timestamp:(new Date).toISOString(),sessionID:this.sessionID}),contentType:"text/plain"})}},{key:"getUniqSessionId",value:function(){return"".concat(this.getRandomNumber()).concat(this.getRandomNumber()).concat(this.getRandomNumber())}},{key:"showSessionID",value:function(){var e=document.createElement("div");e.setAttribute("id","_cm-session-id-div"),e.setAttribute("style","background: black; color: wheat; position: fixed; top: 0; left: 0;z-index:999999999");var t=document.createTextNode("SessionID: ".concat(this.sessionID)),i=document.createElement("button");i.innerHTML="X",i.addEventListener("click",(function(){document.querySelector("#_cm-session-id-div").remove()})),e.appendChild(t),e.appendChild(i),document.querySelector("body").appendChild(e)}},{key:"getRandomNumber",value:function(){return Math.floor(10*Math.random())}},{key:"_hasConsoleMethod",value:function(e){return console&&console[e]&&"function"==typeof console[e]}},{key:"predict",value:function(e){this.info("%c ".concat(e),"color: #bada55")}}])&&d(t.prototype,i),n&&d(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(a)},9245:function(e,t,i){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,s=void 0,s=function(e,t){if("object"!==n(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!==n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===n(s)?s:String(s)),r)}var o,s}var o=i(9288),s=i(1999),a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.callBacks={},this.model=t,this._mapCallbackNames(),this._setCallbacks()}var t,i,n;return t=e,(i=[{key:"_setCallbacks",value:function(){this._isValidCallback(this.callbackNames.conversion)&&(this.callBacks.onConversion=this._getCallbackFromModel("onConversion"),o.on("global:creativeEvent",this._onGlobalCreativeEvent.bind(this,this.callbackNames.conversion))),this._isValidCallback(this.callbackNames.fill)&&(this.callBacks.onFilledImpression=this._getCallbackFromModel("onFilledImpression"),o.on("filledImpression",this._onGlobalCreativeEvent.bind(this,this.callbackNames.fill))),this._isValidCallback(this.callbackNames.impression)&&(this.callBacks.onImpression=this._getCallbackFromModel("onImpression"),o.on("onImpression",this._onGlobalCreativeEvent.bind(this,this.callbackNames.impression))),this._isValidCallback(this.callbackNames.play)&&(this.callBacks.onPlay=this._getCallbackFromModel("onPlay"),o.on("global:adState:playing",this._onGlobalCreativeEvent.bind(this,this.callbackNames.play))),this._isValidCallback(this.callbackNames.terminate)&&(this.callBacks.onTerminate=this._getCallbackFromModel("onTerminate"),o.once("global:closeState:changed",this._onGlobalCreativeEvent.bind(this,this.callbackNames.terminate))),this._isValidCallback(this.callbackNames.passback)&&(this.callBacks.onPassback=this._getCallbackFromModel("onPassback"),o.once("global:passback",this._onGlobalCreativeEvent.bind(this,this.callbackNames.passback)))}},{key:"_getCallbackFromModel",value:function(e){return this.model[e]||this.model.get(e)}},{key:"_onGlobalCreativeEvent",value:function(e,t){e=e||{},this.callBacks[e.type]&&this.callBacks[e.type](t),e.name&&s.dispatchTRC("api::video."+e.name,this.model)}},{key:"_isValidCallback",value:function(e){var t=this._getCallbackFromModel(e.type);if("string"==typeof t){var i=this._getCallbackFunction(t);t=new Function("additionalData",i),delete this.model[e.type],delete this.model.attributes[e.type],Object.defineProperty(this.model,e.type,{value:t})}return!(!s.isFunction(t)&&!this._isApiCallbackExist(e.name))}},{key:"_getCallbackFunction",value:function(e){var t=e.substr(e.indexOf("{")+1);return t.substr(0,t.lastIndexOf("}"))}},{key:"_isApiCallbackExist",value:function(e){if(TRC&&TRC._taboolaClone)for(var t=0;t<TRC._taboolaClone.length;t++)if(TRC._taboolaClone[t].listenTo=="video."+e)return!0;return!1}},{key:"_mapCallbackNames",value:function(){this.callbackNames={conversion:{type:"onConversion",name:"conversion"},fill:{type:"onFilledImpression",name:"fill"},impression:{type:"onImpression",name:"impression"},play:{type:"onPlay",name:"play"},terminate:{type:"onTerminate",name:"terminate"},passback:{type:"onPassback",name:"passback"}}}}])&&r(t.prototype,i),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();e.exports=a},9791:function(e,t,i){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,s=void 0,s=function(e,t){if("object"!==n(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!==n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===n(s)?s:String(s)),r)}var o,s}var o=i(1999),s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,i,n;return t=e,(i=[{key:"addUnit",value:function(e,t){o.isEmpty(window.TRC.videoUnitList)&&(window.TRC.videoUnitList={}),this.unitsList=window.TRC.videoUnitList||{},this.unitsList[e]=t,window.TRC.videoUnitList=this.unitsList,this._listenUnitsEvents(e)}},{key:"_listenUnitsEvents",value:function(e){this.unitsList[e].on("change:isUnitEligible",this._onUnitEligibilityChange.bind(this,e))}},{key:"_onUnitEligibilityChange",value:function(e,t,i){o.size(this.unitsList)>1&&(!0===i||!1===i)&&this._decidePlayOrPause()}},{key:"_decidePlayOrPause",value:function(){var e=this,t=[];o.each(this.unitsList,(function(i){var n=i.get("redId"),r="CUSTOM"==e._getUnitType(n);e._isUnitEligibleToPlay(n)?t.push({redId:n,viewPercent:i.get("unitViewablePercent"),isCustomVideo:r}):r&&e._pauseUnit(n)})),t.length>0&&(t=this._sortViewableUnits(t),o.each(t,(function(t,i){0===i?e._playUnit(t.redId):t.isCustomVideo&&e._pauseUnit(t.redId)})))}},{key:"_sortViewableUnits",value:function(e){return e.sort((function(e,t){return e.isCustomVideo===t.isCustomVideo?t.viewPercent-e.viewPercent:!e.isCustomVideo&&t.isCustomVideo?-1:1}))}},{key:"_pauseUnit",value:function(e){this.unitsList[e].set("multiUnitManager.state","pause")}},{key:"_playUnit",value:function(e){this.unitsList[e].set("multiUnitManager.state","play")}},{key:"_isUnitEligibleToPlay",value:function(e){return this.unitsList[e].get("isEligibleToPlay")||this.unitsList[e].get("isUnitEligible")||this.unitsList[e].get("isUnitViewable")}},{key:"_isUnitAllowToPlay",value:function(e){return"pause"!=this.unitsList[e].get("multiUnitManager.state")&&this._isUnitEligibleToPlay(e)}},{key:"_isUnitPlaying",value:function(e){return this.unitsList[e].get("generalPlayingUnitState")}},{key:"_getUnitType",value:function(e){return this.unitsList[e].get("unitType")}}])&&r(t.prototype,i),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();cmTag.multiUnitManager=cmTag.multiUnitManager||new s,e.exports=cmTag.multiUnitManager},2384:function(e){e.exports={JP:!0}},9831:function(e){e.exports={readyState:"ready",adManagerState:{empty:"empty",hasAds:"hasAds",stopped:"stopped",paused:"paused"},adState:{failed:"failed",playing:"playing",paused:"paused",continueAd:"continueAd",completed:"completed",autoKill:"autoKill",repeating:"repeating",skipped:"skipped"},adQState:{impression:"impression",q0:"q0",q1:"q1",q2:"q2",q3:"q3",completed:"completed",repeating:"repeating"},getAdState:{notCalled:"notCalled",gettingAd:"gettingAd",gotAd:"gotAd",waiting:"waiting",failed:"failed",stopped:"stopped",finished:"finished"},playerState:{error:"error",stopped:"stopped",closed:"closed",restarted:"restarted"},containerViewState:{rendered:"rendered",eligible:"eligible",playing:"playing",collapsed:"collapsed",attached:"attached",detached:"detached"},videoViewState:{rendered:"rendered",attached:"attached",detached:"detached"},repeatState:{hiding:"hiding",showing:"showing",spinning:"spinning",clicked:"clicked"},loadingViewState:{hiding:"hiding",showing:"showing",clicked:"clicked"},clickThruState:{clicked:"clicked",waiting:"waiting"},timerState:{working:"started",paused:"paused",stopped:"stopped",done:"done"},closeState:{terminate:"terminate",containerViewClosed:"containerViewClosed",videoViewClosed:"videoViewClosed",adManagerStop:"adManagerStop",playerClosed:"playerClosed"},tabState:{focus:"focus",blur:"blur",tabOut:"tabOut"},rvHandlerState:{working:"working",idle:"idle"},floatingView:{detach:"detach",attach:"attach",postAttach:"postAttach",permanentClosed:"permanentClosed"},externalUnit:{playing:"playing",stopped:"stopped"},brandingDisplayState:{show:"show",hide:"hide"},storiesUnitState:{videoImpression:"videoImpression",videoPause:"videoPause",videoResume:"videoResume",videoEnd:"videoEnd",videoViewable:"videoViewable"},storiesRboxState:{onVideoCardDisplayed:"onVideoCardDisplayed",categoriesHidden:"categoriesHidden",categoriesDisplay:"categoriesDisplay",videoSkipped:"videoSkipped"}}},9861:function(e,t,i){"use strict";i.r(t);var n=i(2130),r=i.n(n),o=i(9057);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}var a=i(1999),l=a.flatten;a.mixin({parseBool:function(e){return"true"===e||!0===e||1===e||"1"===e},el:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=document.createElement(e);for(var n in t)null!=t[n]&&(i[n]=t[n]);return i},loadJs:function(e,t){return document.head.appendChild(a.el("script",{src:e,onload:t,async:!0}))},loadCss:function(e,t){return document.head.appendChild(a.el("link",{href:e,onload:t,rel:"stylesheet",type:"text/css"}))},loadJsArr:function(e,t){var i;t&&(i=e.length);for(var n=0;n<e.length;n++)e[n].indexOf(".css")>-1?a.loadCss(e[n],r):a.loadJs(e[n],r);function r(){0===--i&&t()}},getUrlVars:function(e){for(var t,i=[],n=(e=e||window).location.href.slice(e.location.href.indexOf("?")+1).split("&"),r=0;r<n.length;r++)t=n[r].split("="),i.push(t[0]),i[t[0]]=t[1];return i},firePixelConditional:function(e,t,i,n){e&&a.firePixel(t,i,n)},firePixel:function(e,t,i){e&&(i&&(e=a.addParametersToUrl(e,i,-1===e.indexOf("?"))),cmTag.logger.pixel("firing pixel: "+t+" url: "+e),document.createElement("IMG").src=e)},fireIframePixel:function(e,t){if(e){cmTag.logger.pixel("firing pixel: "+t+" url: "+e);var i=document.createElement("iframe");i.src=e,i.style.display="none";var n=document.getElementsByTagName("body")[0];n||(n=document.getElementsByTagName("html")[0]),n||(n=document.getElementsByTagName("div")[0]),n?n.appendChild(i):cmTag.logger.debug("fireIframePixel","Failed to fire iframe pixel.")}else cmTag.logger.pixel("fireIframePixel","Url empty.")},getViewabilityPercent:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.offsetHeight,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.offsetWidth,n=e.getBoundingClientRect(),r=Math.max(0,n.top),o=Math.min(a.viewport().height,n.bottom),s=Math.max(0,n.left);return 100*(o-r)*(Math.min(a.viewport().width,n.right)-s)/(t*i)},isVisible:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.offsetHeight,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.offsetWidth,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:50;return a.getViewabilityPercent(e,t,i)>=n},viewport:function(){return{get height(){return a.viewport().object.document.documentElement.clientHeight},get width(){return a.viewport().object.document.documentElement.clientWidth},get object(){return top}}},getVideoHeight:function(e){var t=parseInt(9/16*e);return isNaN(t)?0:t},getVideoWidth:function(e){var t=parseInt(16/9*e);return isNaN(t)?0:t},getVideoBestSize:function(e,t){var i=this.getVideoHeight(e);return t>=i?t=i:e=this.getVideoWidth(t),{width:e,height:t}},getVideoHeightByRatio:function(e,t){var i=parseInt(1/t*e);return isNaN(i)?0:i},getVideoWidthByRatio:function(e,t){var i=parseInt(t*e);return isNaN(i)?0:i},isElementInHead:function(e){if(!e)return!1;for(;e!==document.body&&e!==document.head;)e=e.parentNode;return e===document.head},getViewPercent:function(e,t,i,n,r){var s,l=a.isEmpty(n)?(0,o.default)(this.getTopWindow()):(0,o.default)(n);s=window.taboolaBridge&&window.taboolaBridge.active?this.calcViewportPositionInApp(n):{top:0,left:0,right:l.width(),bottom:l.height()};var c=Number(i)||0,u=Number(t)||0,d=r?e.getClientRects()[0]:e.getBoundingClientRect(),h={top:d.top,left:d.left};if(h.right=h.left+u,h.bottom=h.top+c,s.right<h.left||s.left>h.right||s.bottom<h.top||s.top>h.bottom)return 0;var f=Math.min(1,(h.bottom-s.top)/c),p=Math.min(1,(s.bottom-h.top)/c);return Math.min(1,(h.right-s.left)/u)*Math.min(1,(s.right-h.left)/u)*f*p*100},isViewable:function(e,t,i,n){var r=a.getViewPercent(e,t,i);return!(r<=0)&&r>=(n=n||100)},getViewPercentageDeltas:function(e,t,i){var n=(0,o.default)(window),r={top:n.scrollTop(),left:n.scrollLeft()};r.right=r.left+n.width(),r.bottom=r.top+n.height();var s=Number(i)||0,a=Number(t)||0,l=(0,o.default)(e).offset();return l.right=l.left+a,l.bottom=l.top+s,{top:Math.min(1,(l.bottom-r.top)/s),bottom:Math.min(1,(r.bottom-l.top)/s),left:Math.min(1,(l.right-r.left)/a),right:Math.min(1,(r.right-l.left)/a)}},getValidSelectorElements:function(e,t,i){var n=[];return t=t||100,i=i||0,e&&a.isArray(e)&&(n=a.filter(e,(function(e){var n=e.getBoundingClientRect();return n.width>=t&&n.height>=i&&!a.has(r().INVALID_SELECTOR_TAG_NAMES,e.tagName)}))),n},filterObject:function(e,t){if(e){for(var i={},n=0;n<t.length;n++){var r=e[t[n]];void 0!==r&&(i[t[n]]=r)}return i}},assignWithoutUndefinedValues:function(e,t){for(var i in t)void 0!==t[i]&&(e[i]=t[i]);return e},stripObject:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:100;if(e){var s={};for(var l in e)if(!(l in t)){var c=e[l];n&&a.isElement(c)||i&&a.isFunction(c)||(r&&!a.isFunction(c)&&a.isObject(c)&&(c=o>0?this.stripObject(c,[],i,n,r,o--):"{stripElements} - value is Object, but max depth reached."),s[l]=c)}return s}},arrayToObj:function(e){if(e){for(var t={},i=0;i<e.length;i++)void 0!==e[i]&&(t[i]=e[i]);return t}},getTopOfEl:function(e){if(e){var t=e,i=0;if(document.getElementById||document.all)do{for(e.offsetLeft-e.scrollLeft,i+=e.offsetTop-e.scrollTop,e=e.offsetParent,t=a.getParentNode(t);t!=e;)t.scrollLeft,i-=t.scrollTop,t=a.getParentNode(t)}while(e&&e.offsetParent);else document.layers&&(i+=e.y,e.x);return i}},getParentNode:function(e){return e.parentNode&&e.parentNode.host?e.parentNode.host:e.parentNode},getLeftOfEl:function(e){return window.pageXOffset+e.getBoundingClientRect().left},PrefixedEvent:function(e,t,i,n){i=i.toLowerCase(),a.each(["webkit","moz","MS","o",""],(function(r){e[t](r+i,n)}))},oneAnimationEnd:function(e,t){var i=a.debounce(t,200);this.PrefixedEvent(e,"one","transitionend",i),this.PrefixedEvent(e,"one","animationend",i)},addParametersToUrl:function(e,t,i){var n=e;return n+=i?"?":"&",o.default.each(t,(function(e,t){void 0!==t&&""!==t&&(n+=e+"="+t+"&")})),n},skipTransitionCss:function(e,t){e.addClass("none-transition"),e.css(t),this.flushCss(e[0]),e.removeClass("none-transition")},flushCss:function(e){e.offsetHeight},getTopWindow:function(){var e=window;try{for(;e.document!==e.top.document;)e=e.top;return e}catch(e){return window}},isInIframe:function(e){return!!e&&(e.inIframe||e.inDFP)},isInFriendlyIframe:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cmTag.config.iframeData;return!!e&&(this.isInIframe(e)&&e.isFriendlyIframe)},hideDFPIframe:function(e){if(this.isInFriendlyIframe(e)){e.iframe.style.display="none";for(var t=e.iframe.parentNode;a.some(r().DFP_KEYWORDS,(function(e){return-1!==t.id.indexOf(e)}));)t.style.display="none",t=t.parentNode}},onceDocReady:function(e){return/complete|loaded|interactive/.test(document.readyState)&&document.body?e():(0,o.default)("document").one("DOMContentLoaded",e),this},crc32:function(e){if(!e||"string"!=typeof e)return 0;var t;void 0===t&&(t=0);var i=0;t^=-1;for(var n=0,r=(e=this.utf8Encode(e)).length;n<r;n++)i=255&(t^e.charCodeAt(n)),t=t>>>8^"0x"+"00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D".substr(9*i,8);return-1^t},utf8Encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",i=0;i<e.length;i++){var n=e.charCodeAt(i);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t},isMouseOver:function(e){return 0!==e.filter(":hover").length},rollNumbers:function(e){return!!e&&100*Math.random()<e},isFactor:function(e){return a.isNumber(e)&&e===a.random(1,e)},sendMail:function(e,t,i){function n(){emailjs.init("user_kHlYxxusLRTxC6yr3PjQl"),emailjs.send("gmail","units_support",e).then(t,i)}t=t||function(){},i=i||function(){},window.emailjs?n():a.loadJs("//cdn.emailjs.com/dist/email.min.js",n)},isValidEmail:function(e){return!0},toCssObj:function(e){return"string"==typeof e?JSON.parse(e):e},isLayerVisible:function(e){function t(e,t){return window.getComputedStyle?document.defaultView.getComputedStyle(e,null)[t]:e.currentStyle?e.currentStyle[t]:void 0}return function e(i,n,r,o,s,a,l){var c=i.parentNode;return!!function(e){for(;e=e.parentNode;)if(e===document)return!0;return!1}(i)&&(9===c.nodeType||"0"!==t(i,"opacity")&&"none"!==t(i,"display")&&"hidden"!==t(i,"visibility")&&(void 0!==n&&void 0!==r&&void 0!==o&&void 0!==s&&void 0!==a&&void 0!==l||(n=i.offsetTop,s=i.offsetLeft,o=n+i.offsetHeight,r=s+i.offsetWidth,a=i.offsetWidth,l=i.offsetHeight),!c||("hidden"!==t(c,"overflow")&&"scroll"!==t(c,"overflow")||!(s+2>c.offsetWidth+c.scrollLeft||s+a-2<c.scrollLeft||n+2>c.offsetHeight+c.scrollTop||n+l-2<c.scrollTop))&&(i.offsetParent===c&&(s+=c.offsetLeft,n+=c.offsetTop),e(c,n,r,o,s,a,l))))}(e)},getOffset:function(e,t){if(e&&Array.isArray(e)&&e[0]&&(e=e[0]),e){if(1===t)return(0,o.default)(e).offset();var i=e,n=e,r=0,s=0;if(document.getElementById||document.all)do{for(s+=e.offsetLeft-e.scrollLeft,r+=e.offsetTop-e.scrollTop,e=e.offsetParent,n=a.getParentNode(n);n&&n!=e;)s-=n.scrollLeft,r-=n.scrollTop,n=a.getParentNode(n)}while(e&&e.offsetParent);else document.layers&&(r+=e.y,s+=e.x);return{top:r,left:(0,o.default)(i).offset().left||s}}},flatten:function(e){var t={};for(var i in e)t[i]=e[i];return t},cssObjToString:function(e){var t=!!document.documentMode,i=!t&&!!window.StyleMedia,n=window.navigator.userAgent.indexOf("Firefox")>-1;return(t||i||n)&&(e=this.flatten(e)),JSON.stringify(e)},isModel:function(e,t,i){return i?i.model.get(e)===t:this.model.get(e)===t},generateGuid:function(e,t){var i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),n=[],r=0;for(t=t||i.length,e=e||22,r=0;r<e;r++)n[r]=i[0|Math.random()*t];return n.join("")},isObserverSupported:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=window[e],n=void 0!==i,r=!1;return n&&(r=-1!==i.toString().indexOf("[native code]")),r||t&&n},isHeightValid:function(e){var t=!0;return e||(t=!1),t},isWidthValid:function(e){var t=!0;return e||(t=!1),t},setTrcObserver:function(e){s(TRC.intersections)&&TRC.intersections.observe&&TRC.intersections.observe(e)},dispatchTRC:function(e,t){if(window.TRC&&window.TRC.dispatch)try{window.TRC.dispatch(e),cmTag.logger&&cmTag.logger.info&&cmTag.logger.info("dispatched TRC event: ".concat(e))}catch(i){t&&t.set("TRCDispatchFailed",!0),cmTag.logger&&cmTag.logger.error&&cmTag.logger.error("dispatched TRC event: ".concat(e," is failed, error: ").concat(i))}},dispatchTRCWithPayload:function(e,t,i){if(window.TRC&&window.TRC.dispatch)try{window.TRC.dispatch(e,t),cmTag.logger&&cmTag.logger.info&&cmTag.logger.info("dispatched TRC event: ".concat(e))}catch(t){i&&i.set("TRCDispatchFailed",!0),cmTag.logger&&cmTag.logger.error&&cmTag.logger.error("dispatched TRC event: ".concat(e," is failed, error: ").concat(t))}},getOffsetWithContainer:function(e,t,i){if(!i)return this.getOffset(e,t);var n=this.getOffset(e,t),r=this.getOffset((0,o.default)(i));return{top:n.top-r.top,left:n.left-r.left}},getIframeDocument:function(e){try{if(e.tagName&&"iframe"==e.tagName.toLowerCase())return e.contentWindow.console.error&&(e.contentWindow.console.error=function(){}),e.contentDocument}catch(e){return null}},DOMIterator:function(e,t,i,n){var r=this;try{var o=this.getIframeDocument(e)||e;if(!o)return;o.querySelectorAll(t).forEach((function(e){r.DOMIterator(e,t,i,n)})),i(o.querySelectorAll(n))}catch(e){}},isBrowserIE11:function(e){return-1!==e.name.indexOf("ie")&&11===e.version},forceElementRedrawWithBorderChange:function(e,t,i){if(this.isBrowserIE11(e)&&!i){var n=(0,o.default)(t);n&&n.css&&(n.css("border","1px solid transparent"),setTimeout(function(){n&&n.css&&n.css("border","none")}.bind(n)))}},hasPassedPixelFromSelector:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3?arguments[3]:void 0;if(e){var r,s;if(e.nodeType)r=[e];else{var a=e.toString();r=s=(0,o.default)(a)}n&&(r=this.getValidSelectorElements(s));var l=r[0];if(t=(0,o.default)(t)[0],window.taboolaBridge){var c=taboolaBridge.data;if(c&&c.boundingClientRect){var u=c.boundingClientRect.top-c.rootBounds.bottom,d=u<i;return cmTag.logger.info("###hasPassedPixelsFromSelector"+d+" - "+u+"/"+i),d}}var h=void 0!==t,f=h?t.clientHeight:window.innerHeight,p=h?f+t.scrollTop:f+window.pageYOffset,m=i;return this.getTopOfEl(l)-m<=p}},getViewportHeight:function(e){return void 0!==(e=(0,o.default)(e)[0])?e.clientHeight:window.innerHeight},calcViewportPositionInApp:function(e){var t=window.taboolaBridge.data,i=t.boundingClientRect;return{top:i.y<0?0-i.y:0,left:0,right:i.width,bottom:i.y>t.rootBounds.height?0:Math.abs(i.y-t.rootBounds.height)}},getOrganicCard:function(){var e=TRCImpl.boxes||{};for(var t in e){var i=e[t]||{},n=i.isFeedCard,r=!1;if(i.itemsTypes&&i.itemsTypes["is-organic"]&&(r=i.itemsTypes["is-organic"]),r&&n&&i.boxes.length)return i.mode}},getRootElementFontSize:function(){return parseFloat(getComputedStyle(document.documentElement).fontSize)},convertRem:function(e){return e*this.getRootElementFontSize()},flattenArray:function(e,t){return l(e,t,!1)},offsetFromBottomOfViewPort:function(e){return e.getBoundingClientRect().top-(window.innerHeight||document.documentElement.clientHeight)},sendingEventToTaboolaBridge:function(e,t){window.taboolaBridge&&window.taboolaBridge.emit("videoEvent",{type:e,value:t})},recoReelPlayStateAnimation:function(e,t,i){var n=(0,o.default)('[data-progress-bar-index="'.concat(t,'"] .tbl-progress-runner'),e)[0],r=(0,o.default)(".videoCube_".concat(t+1,"_child .thumbBlock"),e)[0];n&&(n.style.webkitAnimationPlayState=i,n.style.animationPlayState=i),r&&(r.style.webkitAnimationPlayState=i,r.style.animationPlayState=i)},getRandomFromList:function(e){return!(e.length<1)&&e[Math.floor(Math.random()*e.length)]},isSendBeaconSupported:function(){return!(!navigator||!a.isFunction(navigator.sendBeacon))},getSubUnitType:function(e){var t=e.isMidArticle,i=e.isSticky,n=e.isDetachBelow,o=e.isDetachAbove,s=e.isStartFromSlider,a=e.isDetachToSlider;return t?r().SUB_UNIT_TYPE.MID_ARTICLE_AS_FEED:i||!s||a?i||s||!a?!i&&s&&a?r().SUB_UNIT_TYPE.SUPER_SLIDER:i&&n&&!o?r().SUB_UNIT_TYPE.STICKY_BELOW:i&&!n&&o?r().SUB_UNIT_TYPE.STICKY_ABOVE:i&&n&&o?r().SUB_UNIT_TYPE.STICKY_BELOW_ABOVE:void 0:r().SUB_UNIT_TYPE.DETACH_TO_SLIDER:r().SUB_UNIT_TYPE.START_FROM_SLIDER},getRecoReelSubUnitType:function(e){var t=e.isRecoReelEnableRboxSlider||!1,i=e.isRecoReelStartFromRboxSlider||!1;return t&&i?r().RECO_REEL_SUB_UNIT_TYPE.START_FROM_SLIDER_RBOX:t&&!i?r().RECO_REEL_SUB_UNIT_TYPE.DETACH_TO_SLIDER_RBOX:r().RECO_REEL_SUB_UNIT_TYPE.PLAIN},isReadMoreOnPage:function(){return window.TRC&&void 0!==window.TRC.readMoreVisible},isMidArticleOnReadMorePage:function(e){return this.isReadMoreOnPage()&&e},isReadMoreObserverNeededOnPage:function(e,t){return e&&t&&window.TRC&&window.TRC.readMoreVisible&&a.isObserverSupported("IntersectionObserver")},trcPerformanceMeasurement:function(e,t,i){try{if(e&&a.isTRCPerformanceEnabled()){var n="".concat(t).concat(i);window.TRC.performance.mark(n,null,"","",t,window.TRC.PerfEvenType[i.toUpperCase()])}}catch(e){}},isTRCPerformanceEnabled:function(){return window.TRC&&window.TRC.performance&&window.TRC.performance.mark},copyCSSFromPlaceholder:function(e,t,i){if(e&&t&&i&&0!==i.length){var n=window.getComputedStyle(t),r={};a.forEach(i,(function(e){r[e]=n[e]})),e.css(r)}},getDeltaBetweenRects:function(e,t){if(!e)return t||{};if(!t)return e||{};var i={};for(var n in e)if(void 0!==t[n]){var r=e[n]-t[n];r&&(i[n]=r)}return i},buildObserverThresholdList:function(){for(var e=[],t=1;t<=20;t++){var i=t/20;e.push(i)}return e.push(0),e},getRequiredHeight:function(e,t){var i=t.get("width"),n=document.querySelector("[".concat(e,"]"));if(n){var r=n.getBoundingClientRect().width;return a.getVideoHeight(r)}return a.getVideoHeight(i)},getFeedTitleHeight:function(){var e=document.querySelector(".tbl-feed-header");return e?(0,o.default)(e).height():0},getPlacement:function(e){var t=e.get("placement");return t=(t=t.replace("Feed - ","")).split(" |")[0]},getMarginToStartCard:function(e,t,i){if(this.isPlacementWithScAdjacency(e)){var n=document.querySelector(t);if(n)return(0,o.default)(n).offset().top-(0,o.default)(i).offset().top}return 0},isPlacementWithScAdjacency:function(e){return e.get("placementWithScAdjacency")===a.getPlacement(e)},isLanguageRTL:function(e){var t=e.get("language");return e.get("rtlLanguagesArray").includes(t)},loadFromTRC:function(e,t,i,n){this.isServiceValid(e,t)&&this.isServiceLoadedOnTRC(e,t)&&this.onServiceLoaded(e,t,i,n)},isServiceValid:function(e,t){return e&&t},isServiceLoadedOnTRC:function(e,t){return window.TRC&&window.TRC[e]&&window.TRC[e][t]},onServiceLoaded:function(e,t,i,n){if(i)try{i(window.TRC[e][t])}catch(e){n&&n()}},isSliderCutOffEnabled:function(e,t){return e.get("isSliderCutOff")&&t&&!t.alwsldr},clickThru:function(e){this.model.get("isInAppBridgeOn")&&window.taboolaBridge&&window.taboolaMobile&&window.taboolaMobile.getSupportedFeatures&&window.taboolaMobile.getSupportedFeatures().VideoClick?window.taboolaBridge.emit("videoClick",e):window.open(e)}})},9288:function(e,t,i){"use strict";var n,r,o;function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}(o=this)||(o={}),o.Backbone||(o.Backbone={}),n=[i(1999),i(9057),t],r=function(e,t,i){o.Backbone=function(e,t,i,n){var r=e.Backbone,o=[],a=(o.push,o.slice);o.splice,t.VERSION="1.1.2",t.$=n,t.noConflict=function(){return e.Backbone=r,this},t.emulateHTTP=!1,t.emulateJSON=!1;var l=t.Events={on:function(e,t,i){return u(this,"on",e,[t,i])&&t?(this._events||(this._events={}),(this._events[e]||(this._events[e]=[])).push({callback:t,context:i,ctx:i||this}),this):this},once:function(e,t,n){if(!u(this,"once",e,[t,n])||!t)return this;var r=this,o=i.once((function(){r.off(e,o),t.apply(this,arguments)}));return o._callback=t,this.on(e,o,n)},off:function(e,t,n){var r,o,s,a,l,c,d,h;if(!this._events||!u(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events=void 0,this;for(l=0,c=(a=e?[e]:i.keys(this._events)).length;l<c;l++)if(e=a[l],s=this._events[e]){if(this._events[e]=r=[],t||n)for(d=0,h=s.length;d<h;d++)o=s[d],(t&&t!==o.callback&&t!==o.callback._callback||n&&n!==o.context)&&r.push(o);r.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=a.call(arguments,1);if(!u(this,"trigger",e,t))return this;var i=this._events[e],n=this._events.all;return i&&d(i,t),n&&d(n,arguments),this},stopListening:function(e,t,n){var r=this._listeningTo;if(!r)return this;var o=!t&&!n;for(var a in n||"object"!==s(t)||(n=this),e&&((r={})[e._listenId]=e),r)(e=r[a]).off(t,n,this),(o||i.isEmpty(e._events))&&delete this._listeningTo[a];return this}},c=/\s+/,u=function(e,t,i,n){if(!i)return!0;if("object"===s(i)){for(var r in i)e[t].apply(e,[r,i[r]].concat(n));return!1}if(c.test(i)){for(var o=i.split(c),a=0,l=o.length;a<l;a++)e[t].apply(e,[o[a]].concat(n));return!1}return!0},d=function(e,t){var i,n=-1,r=e.length,o=t[0],s=t[1],a=t[2];switch(t.length){case 0:for(;++n<r;)(i=e[n]).callback.call(i.ctx);return;case 1:for(;++n<r;)(i=e[n]).callback.call(i.ctx,o);return;case 2:for(;++n<r;)(i=e[n]).callback.call(i.ctx,o,s);return;case 3:for(;++n<r;)(i=e[n]).callback.call(i.ctx,o,s,a);return;default:for(;++n<r;)(i=e[n]).callback.apply(i.ctx,t);return}},h={listenTo:"on",listenToOnce:"once"};i.each(h,(function(e,t){l[t]=function(t,n,r){return(this._listeningTo||(this._listeningTo={}))[t._listenId||(t._listenId=i.uniqueId("l"))]=t,r||"object"!==s(n)||(r=this),t[e](n,r,this),this}})),l.bind=l.on,l.unbind=l.off,i.extend(t,l);var f=t.Model=function(e,t){var n=e||{};t||(t={}),this.cid=i.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(n=this.parse(n,t)||{}),n=i.defaults({},n,i.result(this,"defaults")),this.set(n,t),this.changed={},this.initialize.apply(this,arguments)};i.extend(f.prototype,l,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return i.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return i.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,n){var r,o,a,l,c,u,d,h;if(null==e)return this;if("object"===s(e)?(o=e,n=t):(o={})[e]=t,n||(n={}),!this._validate(o,n))return!1;for(r in a=n.unset,c=n.silent,l=[],u=this._changing,this._changing=!0,u||(this._previousAttributes=i.clone(this.attributes),this.changed={}),h=this.attributes,d=this._previousAttributes,this.idAttribute in o&&(this.id=o[this.idAttribute]),o)t=o[r],i.isEqual(h[r],t)||l.push(r),i.isEqual(d[r],t)?delete this.changed[r]:this.changed[r]=t,a?delete h[r]:h[r]=t;if(!c){l.length&&(this._pending=n);for(var f=0,p=l.length;f<p;f++)this.trigger("change:"+l[f],this,h[l[f]],n)}if(u)return this;if(!c)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,i.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,i.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!i.isEmpty(this.changed):i.has(this.changed,e)},changedAttributes:function(e){if(!e)return!!this.hasChanged()&&i.clone(this.changed);var t,n=!1,r=this._changing?this._previousAttributes:this.attributes;for(var o in e)i.isEqual(r[o],t=e[o])||((n||(n={}))[o]=t);return n},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(e){void 0===(e=e?i.clone(e):{}).parse&&(e.parse=!0);var t=this,n=e.success;return e.success=function(i){if(!t.set(t.parse(i,e),e))return!1;n&&n(t,i,e),t.trigger("sync",t,i,e)},B(this,e),this.sync("read",this,e)},save:function(e,t,n){var r,o,a,l=this.attributes;if(null==e||"object"===s(e)?(r=e,n=t):(r={})[e]=t,n=i.extend({validate:!0},n),r&&!n.wait){if(!this.set(r,n))return!1}else if(!this._validate(r,n))return!1;r&&n.wait&&(this.attributes=i.extend({},l,r)),void 0===n.parse&&(n.parse=!0);var c=this,u=n.success;return n.success=function(e){c.attributes=l;var t=c.parse(e,n);if(n.wait&&(t=i.extend(r||{},t)),i.isObject(t)&&!c.set(t,n))return!1;u&&u(c,e,n),c.trigger("sync",c,e,n)},B(this,n),"patch"==(o=this.isNew()?"create":n.patch?"patch":"update")&&(n.attrs=r),a=this.sync(o,this,n),r&&n.wait&&(this.attributes=l),a},destroy:function(e){e=e?i.clone(e):{};var t=this,n=e.success,r=function(){t.trigger("destroy",t,t.collection,e)};if(e.success=function(i){(e.wait||t.isNew())&&r(),n&&n(t,i,e),t.isNew()||t.trigger("sync",t,i,e)},this.isNew())return e.success(),!1;B(this,e);var o=this.sync("delete",this,e);return e.wait||r(),o},url:function(){var e=i.result(this,"urlRoot")||i.result(this.collection,"url")||j();return this.isNew()?e:e.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},i.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=i.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return!n||(this.trigger("invalid",this,n,i.extend(t,{validationError:n})),!1)}});var p=["keys","values","pairs","invert","pick","omit"];i.each(p,(function(e){f.prototype[e]=function(){var t=a.call(arguments);return t.unshift(this.attributes),i[e].apply(i,t)}}));var m=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,i.extend({silent:!0},t))},y={add:!0,remove:!0,merge:!0},v={add:!0,remove:!1};i.extend(m.prototype,l,{model:f,initialize:function(){},toJSON:function(e){return this.map((function(t){return t.toJSON(e)}))},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,i.extend({merge:!1},t,v))},remove:function(e,t){var n,r,o,s,a=!i.isArray(e);for(t||(t={}),n=0,r=(e=a?[e]:i.clone(e)).length;n<r;n++)(s=e[n]=this.get(e[n]))&&(delete this._byId[s.id],delete this._byId[s.cid],o=this.indexOf(s),this.models.splice(o,1),this.length--,t.silent||(t.index=o,s.trigger("remove",s,this,t)),this._removeReference(s,t));return a?e[0]:e},set:function(e,t){(t=i.defaults({},t,y)).parse&&(e=this.parse(e,t));var n,r,o,s,a,l,c,u=!i.isArray(e);e=u?e?[e]:[]:i.clone(e);var d=t.at,h=this.model,p=this.comparator&&null==d&&!1!==t.sort,m=i.isString(this.comparator)?this.comparator:null,v=[],g=[],b={},_=t.add,w=t.merge,S=t.remove,P=!(p||!_||!S)&&[];for(n=0,r=e.length;n<r;n++){if(o=(a=e[n]||{})instanceof f?s=a:a[h.prototype.idAttribute||"id"],l=this.get(o))S&&(b[l.cid]=!0),w&&(a=a===s?s.attributes:a,t.parse&&(a=l.parse(a,t)),l.set(a,t),p&&!c&&l.hasChanged(m)&&(c=!0)),e[n]=l;else if(_){if(!(s=e[n]=this._prepareModel(a,t)))continue;v.push(s),this._addReference(s,t)}s=l||s,!P||!s.isNew()&&b[s.id]||P.push(s),b[s.id]=!0}if(S){for(n=0,r=this.length;n<r;++n)b[(s=this.models[n]).cid]||g.push(s);g.length&&this.remove(g,t)}if(v.length||P&&P.length)if(p&&(c=!0),this.length+=v.length,null!=d)for(n=0,r=v.length;n<r;n++)this.models.splice(d+n,0,v[n]);else{P&&(this.models.length=0);var T=P||v;for(n=0,r=T.length;n<r;n++)this.models.push(T[n])}if(c&&this.sort({silent:!0}),!t.silent){for(n=0,r=v.length;n<r;n++)(s=v[n]).trigger("add",s,this,t);(c||P&&P.length)&&this.trigger("sort",this,t)}return u?e[0]:e},reset:function(e,t){t||(t={});for(var n=0,r=this.models.length;n<r;n++)this._removeReference(this.models[n],t);return t.previousModels=this.models,this._reset(),e=this.add(e,i.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,i.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return this.add(e,i.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(){return a.apply(this.models,arguments)},get:function(e){if(null!=e)return this._byId[e]||this._byId[e.id]||this._byId[e.cid]},at:function(e){return this.models[e]},where:function(e,t){return i.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"]((function(t){for(var i in e)if(e[i]!==t.get(i))return!1;return!0}))},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),i.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(i.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return i.invoke(this.models,"get",e)},fetch:function(e){void 0===(e=e?i.clone(e):{}).parse&&(e.parse=!0);var t=e.success,n=this;return e.success=function(i){var r=e.reset?"reset":"set";n[r](i,e),t&&t(n,i,e),n.trigger("sync",n,i,e)},B(this,e),this.sync("read",this,e)},create:function(e,t){if(t=t?i.clone(t):{},!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var n=this,r=t.success;return t.success=function(e,i){t.wait&&n.add(e,t),r&&r(e,i,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof f)return e;(t=t?i.clone(t):{}).collection=this;var n=new this.model(e,t);return n.validationError?(this.trigger("invalid",this,n.validationError,t),!1):n},_addReference:function(e,t){this._byId[e.cid]=e,null!=e.id&&(this._byId[e.id]=e),e.collection||(e.collection=this),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,i,n){("add"!==e&&"remove"!==e||i===this)&&("destroy"===e&&this.remove(t,n),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))}});var g=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];i.each(g,(function(e){m.prototype[e]=function(){var t=a.call(arguments);return t.unshift(this.models),i[e].apply(i,t)}}));var b=["groupBy","countBy","sortBy","indexBy"];i.each(b,(function(e){m.prototype[e]=function(t,n){var r=i.isFunction(t)?t:function(e){return e.get(t)};return i[e](this.models,r,n)}}));var _=t.View=function(e){this.cid=i.uniqueId("view"),e||(e={}),i.extend(this,i.pick(e,S)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},w=/^(\S+)\s*(.*)$/,S=["model","collection","el","id","attributes","className","tagName","events"];i.extend(_.prototype,l,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,i){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],!1!==i&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=i.result(this,"events")))return this;for(var t in this.undelegateEvents(),e){var n=e[t];if(i.isFunction(n)||(n=this[e[t]]),n){var r=t.match(w),o=r[1],s=r[2];n=i.bind(n,this),o+=".delegateEvents"+this.cid,""===s?this.$el.on(o,n):this.$el.on(o,s,n)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"),!1);else{var e=i.extend({},i.result(this,"attributes"));this.id&&(e.id=i.result(this,"id")),this.className&&(e.class=i.result(this,"className"));var n=t.$("<"+i.result(this,"tagName")+">").attr(e);this.setElement(n,!1)}}}),t.sync=function(e,n,r){var o=T[e];i.defaults(r||(r={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var s={type:o,dataType:"json"};if(r.url||(s.url=i.result(n,"url")||j()),null!=r.data||!n||"create"!==e&&"update"!==e&&"patch"!==e||(s.contentType="application/json",s.data=JSON.stringify(r.attrs||n.toJSON(r))),r.emulateJSON&&(s.contentType="application/x-www-form-urlencoded",s.data=s.data?{model:s.data}:{}),r.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){s.type="POST",r.emulateJSON&&(s.data._method=o);var a=r.beforeSend;r.beforeSend=function(e){if(e.setRequestHeader("X-HTTP-Method-Override",o),a)return a.apply(this,arguments)}}"GET"===s.type||r.emulateJSON||(s.processData=!1),"PATCH"===s.type&&P&&(s.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=r.xhr=t.ajax(i.extend(s,r));return n.trigger("request",n,l,r),l};var P=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),T={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var A=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},E=/\((.*?)\)/g,C=/(\(\?)?:\w+/g,O=/\*\w+/g,k=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend(A.prototype,l,{initialize:function(){},route:function(e,n,r){i.isRegExp(e)||(e=this._routeToRegExp(e)),i.isFunction(n)&&(r=n,n=""),r||(r=this[n]);var o=this;return t.history.route(e,(function(i){var s=o._extractParameters(e,i);o.execute(r,s),o.trigger.apply(o,["route:"+n].concat(s)),o.trigger("route",n,s),t.history.trigger("route",o,n,s)})),this},execute:function(e,t){e&&e.apply(this,t)},navigate:function(e,i){return t.history.navigate(e,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var e,t=i.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(k,"\\$&").replace(E,"(?:$1)?").replace(C,(function(e,t){return t?e:"([^/?]+)"})).replace(O,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var n=e.exec(t).slice(1);return i.map(n,(function(e,t){return t===n.length-1?e||null:e?decodeURIComponent(e):null}))}});var D=t.History=function(){this.handlers=[],i.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},R=/^[#\/]|\s+$/g,I=/^\/+|\/+$/g,x=/msie [\w.]+/,N=/\/$/,V=/#.*$/;D.started=!1,i.extend(D.prototype,l,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=decodeURI(this.location.pathname+this.location.search);var i=this.root.replace(N,"");e.indexOf(i)||(e=e.slice(i.length))}else e=this.getHash();return e.replace(R,"")},start:function(e){if(D.started)throw new Error("Backbone.history has already been started");D.started=!0,this.options=i.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=this.getFragment(),r=document.documentMode,o=x.exec(navigator.userAgent.toLowerCase())&&(!r||r<=7);if(this.root=("/"+this.root+"/").replace(I,"/"),o&&this._wantsHashChange){var s=t.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=s.hide().appendTo("body")[0].contentWindow,this.navigate(n)}this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!o?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=n;var a=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&a.hash&&(this.fragment=this.getHash().replace(R,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),D.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();if(t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()},loadUrl:function(e){return e=this.fragment=this.getFragment(e),i.any(this.handlers,(function(t){if(t.route.test(e))return t.callback(e),!0}))},navigate:function(e,t){if(!D.started)return!1;t&&!0!==t||(t={trigger:!!t});var i=this.root+(e=this.getFragment(e||""));if(e=e.replace(V,""),this.fragment!==e){if(this.fragment=e,""===e&&"/"!==i&&(i=i.slice(0,-1)),this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,i){if(i){var n=e.href.replace(/(javascript:|#).*$/,"");e.replace(n+"#"+t)}else e.hash="#"+t}}),t.history=new D;var L=function(e,t){var n,r=this;n=e&&i.has(e,"constructor")?e.constructor:function(){return r.apply(this,arguments)},i.extend(n,r,t);var o=function(){this.constructor=n};return o.prototype=r.prototype,n.prototype=new o,e&&i.extend(n.prototype,e),n.__super__=r.prototype,n};f.extend=m.extend=A.extend=_.extend=D.extend=L;var j=function(){throw new Error('A "url" property or function must be specified')},B=function(e,t){var i=t.error;t.error=function(n){i&&i(e,n,t),e.trigger("error",e,n,t)}};return t}(o,i,e,t)}.apply(t,n),void 0===r||(e.exports=r)},2782:function(e,t,i){var n,r,o;function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}var a=i(1999),l=i(9288);(function(){var e,t,i,n,r,o,s,c=[].slice;i=function(e){var t,n;return!a.isObject(e)||a.isFunction(e)||e instanceof l.Collection||e instanceof l.Model?e:a.isDate(e)?new Date(e.getTime()):a.isRegExp(e)?new RegExp(e.source,e.toString().replace(/.*\//,"")):e instanceof HTMLElement||e.nodeType&&1===e.nodeType?e:e instanceof CSSStyleDeclaration?JSON.stringify(s(e)):(n=a.isArray(e||a.isArguments(e)),t=function(e,t,r){return n?e.push(i(t)):e[r]=i(t),e},a.reduce(e,t,n?[]:{}))},s=function(e){var t=!!document.documentMode,i=!t&&!!window.StyleMedia;if(!t&&!i)return e;var n={};for(var r in e)n[r]=e[r];return n},o=function(e){return null!=e&&((e.prototype==={}.prototype||e.prototype===Object.prototype)&&a.isObject(e)&&!a.isArray(e)&&!a.isFunction(e)&&!a.isDate(e)&&!a.isRegExp(e)&&!a.isArguments(e))},t=function(e){return a.filter(a.keys(e),(function(t){return o(e[t])}))},e=function(e){return a.filter(a.keys(e),(function(t){return a.isArray(e[t])}))},r=function(i,n,o){var s,l,c,u,d,h,f,p;if(null==o&&(o=20),o<=0)return console.warn("_.deepExtend(): Maximum depth of recursion hit."),a.extend(i,n);for(l=function(e){return n[e]=r(i[e],n[e],o-1)},d=0,f=(u=a.intersection(t(i),t(n))).length;d<f;d++)l(u[d]);for(s=function(e){return n[e]=a.union(i[e],n[e])},h=0,p=(c=a.intersection(e(i),e(n))).length;h<p;h++)s(c[h]);return a.extend(i,n)},n=function(){var e,t,n,o;if(n=2<=arguments.length?c.call(arguments,0,o=arguments.length-1):(o=0,[]),t=arguments[o++],a.isNumber(t)||(n.push(t),t=20),n.length<=1)return n[0];if(t<=0)return a.extend.apply(this,n);for(e=n.shift();n.length>0;)e=r(e,i(n.shift()),t);return e},a.mixin({deepClone:i,isBasicObject:o,basicObjects:t,arrays:e,deepExtend:n})}).call(this),r=[i(1999),i(9288)],n=function(t,i){function n(e){var i={},r=u.keyPathSeparator;for(var o in e){var s=e[o];if(s&&s.constructor===Object&&!t.isEmpty(s)){var a=n(s);for(var l in a){var c=a[l];i[o+r+l]=c}}else i[o]=s}return i}function r(e,i,n){for(var r=u.keyPathSeparator,o=i.split(r),s=e,a=0,l=o.length;a<l;a++){if(n&&!t.has(s,o[a]))return!1;if(null==(s=s[o[a]])&&a<l-1&&(s={}),void 0===s)return!!n||s}return!!n||s}function o(e,i,n,r){r=r||{};for(var o=u.keyPathSeparator,s=i.split(o),a=e,l=0,c=s.length;l<c&&void 0!==a;l++){var d=s[l];l===c-1?r.unset?delete a[d]:a[d]=n:(void 0!==a[d]&&t.isObject(a[d])||(a[d]={}),a=a[d])}}function a(e){var i={};return"object"!==s(e)?e:(t.each(e,(function(e,t,n){i[t]=l(e)})),i)}function l(e){if(e&&"["===e[0]&&"]"===e[e.length-1]){var i;try{i=JSON.parse(e)}catch(t){i=e}e=i}if(t.isArray(e)){var n=[];return t.each(e,(function(e){n.push(l(e))})),n}return"object"!==s(e)||t.isElement(e)?"true"===e||!0===e||"false"!==e&&!1!==e&&(""===e||isNaN(e)?e:Number(e)):a(e)}function c(e,t){o(e,t,null,{unset:!0})}var u=i.Model.extend({constructor:function(e,i){var n,r=e||{};this.cid=t.uniqueId("c"),this.attributes={},i&&i.collection&&(this.collection=i.collection),i&&i.parse&&(r=this.parse(r,i)||{}),(n=t.result(this,"defaults"))&&(r=t.deepExtend({},n,r)),this.set(r,i),this.changed={},this.initialize.apply(this,arguments)},toJSON:function(e){return t.deepClone(this.attributes)},get:function(e){return r(this.attributes,e)},set:function(e,i,l){var d=this,h=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return function(e){var f,p,m,y,v,g,b,_;if(null==e)return d;if("object"===s(e)?(p=e,l=i||{}):(p={})[e]=i,h&&(p=a(p)),l||(l={}),!d._validate(p,l))return!1;for(f in m=l.unset,v=l.silent,y=[],g=d._changing,d._changing=!0,g||(d._previousAttributes=t.deepClone(d.attributes),d.changed={}),_=d.attributes,b=d._previousAttributes,d.idAttribute in p&&(d.id=p[d.idAttribute]),p=n(p))i=p[f],t.isEqual(r(_,f),i)||y.push(f),t.isEqual(r(b,f),i)?c(d.changed,f):o(d.changed,f,i),m?c(_,f):o(_,f,i);if(!v){y.length&&(d._pending=!0);for(var w=u.keyPathSeparator,S=0,P=y.length;S<P;S++){e=y[S],d.trigger("change:"+e,d,r(_,e),l);for(var T=e.split(w),A=T.length-1;A>0;A--){var E=t.first(T,A).join(w),C=E+w+"*";d.trigger("change:"+C,d,r(_,E),l),d.trigger("change:"+E,d,r(_,e),l)}}}if(g)return d;if(!v)for(;d._pending;)d._pending=!1,d.trigger("change",d,l);return d._pending=!1,d._changing=!1,d}(e)},clear:function(e){var i={},r=n(this.attributes);for(var o in r)i[o]=void 0;return this.set(i,t.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!t.isEmpty(this.changed):void 0!==r(this.changed,e)},changedAttributes:function(e){if(!e)return!!this.hasChanged()&&n(this.changed);var i=this._changing?this._previousAttributes:this.attributes;e=n(e),i=n(i);var r,o=!1;for(var s in e)t.isEqual(i[s],r=e[s])||((o||(o={}))[s]=r);return o},previous:function(e){return null!=e&&this._previousAttributes?r(this._previousAttributes,e):null},previousAttributes:function(){return t.deepClone(this._previousAttributes)}});return u.keyPathSeparator=".",i.DeepModel=u,e.exports=u,i},void 0===(o="function"==typeof n?n.apply(t,r):n)||(e.exports=o)},2447:function(e,t,i){"use strict";i.d(t,{O:function(){return s},s:function(){return m}});var n=i(1231);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,s=void 0,s=function(e,t){if("object"!==r(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===r(s)?s:String(s)),n)}var o,s}i(1999);var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,i,r;return t=e,(i=[{key:"createStateHandlers",value:function(e){(0,n.L)(this,e)}}])&&o(t.prototype,i),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),a=i(9288),l=i.n(a);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function u(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if("object"!==c(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===c(o)?o:String(o)),n)}var r,o}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=f(e);if(t){var r=f(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return function(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,i)}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=i(1999),m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(s,e);var t,i,r,o=h(s);function s(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),o.call(this,e)}return t=s,(i=[{key:"renderTemplate",value:function(){if(this.template&&this.model&&(this.template=p.template(this.template),this.$el.append(this.template(this.model.attributes)),this.ui)){var e={};for(var t in this.ui)e[t]=this.$el.find(this.ui[t]);this.ui=e}}},{key:"createStateHandlers",value:function(e){(0,n.L)(this,e)}}])&&u(t.prototype,i),r&&u(t,r),Object.defineProperty(t,"prototype",{writable:!1}),s}(l().View)},1231:function(e,t,i){"use strict";function n(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return r(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}i.d(t,{L:function(){return s}});var o=i(1999),s=function(e,t){if(e.model&&o.isArray(t)){var i=function(e){var t,i=e.self,r=e.funcName,s=e.withBind,a=e.args;o.isString(r)&&o.isFunction(i[r])&&(s?(t=i[r]).bind.apply(t,[i].concat(n(a)))():i[r].apply(i,n(a)))};o.each(t,function(t){var n=t.event,r=t.funcName,s=t.isListenOnce,a=void 0!==s&&s,l=t.withBind,c=void 0===l||l;if(o.isArray(n)&&function(t){var n=t.event,r=t.funcName,s=t.isListenOnce,a=t.withBind,l=s?"listenToOnce":"listenTo",c=!0,u=!1,d=[];o.forEach(n,function(e){var t=e.split(":")[0],i=e.split(":")[1];d.push({eventName:t,stateName:i})}.bind(e));var h=function(t){if(!s||!u){var n=!0;o.forEach(d,(function(t){(void 0!==e.model.get(t.eventName)?e.model.get(t.eventName).toString():void 0)!==t.stateName&&(n=!1)})),n&&c?(c=!1,u=!0,i({self:e,funcName:r,withBind:a,args:arguments})):n||t()}};o.forEach(n,function(t){!function(e){var t=e.self,i=e.event,n=e.func,r=e.listen,o=e.isListenOnce,s=e.onEventNotEqual,a=i.split(":")[0],l=i.split(":")[1],c=function(){var e=function(){};o&&(e=function(){t.model.listenToOnce(t.model,"change:".concat(a),c)}),t.model.get(a).toString()===l?n.call(t,e):o?(s(),e()):s()}.bind(t);t.model[r](t.model,"change:".concat(a),c)}({self:e,func:h,event:t,withBind:a,listen:l,isListenOnce:s,onEventNotEqual:function(){c=!0}.bind(e)})}.bind(e))}({event:n,funcName:r,isListenOnce:a,withBind:c}),o.isString(n)&&o.isString(r)){var u=a?"listenToOnce":"listenTo";n.match(":")?function(e){var t=e.self,n=e.funcName,r=e.event,o=e.withBind,s=e.listen,a=e.isListenOnce,l=r.split(":")[0],c=r.split(":")[1],u=function(){t.model.get(l).toString()==c?i({self:t,funcName:n,withBind:o,args:arguments}):a&&t.model.listenToOnce(t.model,"change:".concat(l),u)}.bind(t);t.model[s](t.model,"change:".concat(l),u)}({self:e,funcName:r,event:n,withBind:c,listen:u,isListenOnce:a}):e.model[u](e.model,"change:".concat(n),function(){i({self:e,funcName:r,withBind:c,args:arguments})}.bind(e))}}.bind(e))}}},9057:function(e,t,i){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}i.r(t);var r=function(){Array.prototype.forEach=function(e){for(var t=0;t<this.length;t++)e(this[t],t,this)};var e=function(){var e,t,i,r,o,s,a=[],l=a.slice,c=a.filter,u=window.document,d={},h={},f={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},p=/^\s*<(\w+|!)[^>]*>/,m=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,y=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,v=/^(?:body|html)$/i,g=/([A-Z])/g,b=["val","css","html","text","data","width","height","offset"],_=u.createElement("table"),w=u.createElement("tr"),S={tr:u.createElement("tbody"),tbody:_,thead:_,tfoot:_,td:w,th:w,"*":u.createElement("div")},P=/complete|loaded|interactive/,T=/^[\w-]*$/,A={},E=A.toString,C={},O=u.createElement("div"),k={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},D=Array.isArray||function(e){return e instanceof Array};function R(e){return null==e?String(e):A[E.call(e)]||"object"}function I(e){return"function"==R(e)}function x(e){return null!=e&&e==e.window}function N(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE}function V(e){return"object"==R(e)}function L(e){return V(e)&&!x(e)&&Object.getPrototypeOf(e)==Object.prototype}function j(e){return"number"==typeof e.length}function B(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function M(e){return e in h?h[e]:h[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function F(e,t){return"number"!=typeof t||f[B(e)]?t:t+"px"}function U(e){return"children"in e?l.call(e.children):i.map(e.childNodes,(function(e){if(1==e.nodeType)return e}))}function W(i,n,r){for(t in n)r&&(L(n[t])||D(n[t]))?(L(n[t])&&!L(i[t])&&(i[t]={}),D(n[t])&&!D(i[t])&&(i[t]=[]),W(i[t],n[t],r)):n[t]!==e&&(i[t]=n[t])}function H(e,t){return null==t?i(e):i(e).filter(t)}function z(e,t,i,n){return I(t)?t.call(e,i,n):t}function $(e,t,i){try{null==i?e.removeAttribute(t):e.setAttribute(t,i)}catch(e){}}function G(t,i){var n=t.className||"",r=n&&n.baseVal!==e;if(i===e)return r?n.baseVal:n;r?n.baseVal=i:t.className=i}function q(e){try{return e?"true"==e||"false"!=e&&("null"==e?null:+e+""==e?+e:/^[\[\{]/.test(e)?i.parseJSON(e):e):e}catch(t){return e}}function Y(e,t){t(e);for(var i=0,n=e.childNodes.length;i<n;i++)Y(e.childNodes[i],t)}return C.matches=function(e,t){if(!t||!e||1!==e.nodeType)return!1;var i=e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(i)return i.call(e,t);var n,r=e.parentNode,o=!r;return o&&(r=O).appendChild(e),n=~C.qsa(r,t).indexOf(e),o&&O.removeChild(e),n},o=function(e){return e.replace(/-+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))},s=function(e){return c.call(e,(function(t,i){return e.indexOf(t)==i}))},C.fragment=function(t,n,r){var o,s,a;return m.test(t)&&(o=i(u.createElement(RegExp.$1))),o||(t.replace&&(t=t.replace(y,"<$1></$2>")),n===e&&(n=p.test(t)&&RegExp.$1),n in S||(n="*"),(a=S[n]).innerHTML=""+t,o=i.each(l.call(a.childNodes),(function(){a.removeChild(this)}))),L(r)&&(s=i(o),i.each(r,(function(e,t){b.indexOf(e)>-1?s[e](t):s.attr(e,t)}))),o},C.Z=function(e,t){return(e=e||[]).__proto__=i.fn,e.selector=t||"",e},C.isZ=function(e){return e instanceof C.Z},C.init=function(t,n){var r,o;if(!t)return C.Z();if("string"==typeof t)if("<"==(t=t.trim())[0]&&p.test(t))r=C.fragment(t,RegExp.$1,n),t=null;else{if(n!==e)return i(n).find(t);r=C.qsa(u,t)}else{if(I(t))return i(u).ready(t);if(C.isZ(t))return t;if(D(t))o=t,r=c.call(o,(function(e){return null!=e}));else if(V(t))r=[t],t=null;else if(p.test(t))r=C.fragment(t.trim(),RegExp.$1,n),t=null;else{if(n!==e)return i(n).find(t);r=C.qsa(u,t)}}return C.Z(r,t)},(i=function(e,t){return C.init(e,t)}).extend=function(e){try{window.TRC&&window.TRC.performance&&window.TRC.performance.mark&&window.TRC.PerfEvenType&&window.TRC.performance.mark("videoExtendFuncStart",null,"","","videoExtendFunc",window.TRC.PerfEvenType.START)}catch(e){}var t,i=l.call(arguments,1);"boolean"==typeof e&&(t=e,e=i.shift()),i.forEach((function(i){W(e,i,t)}));try{window.TRC&&window.TRC.performance&&window.TRC.performance.mark&&window.TRC.PerfEvenType&&window.TRC.performance.mark("videoExtendFuncStop",null,"","","videoExtendFunc",window.TRC.PerfEvenType.STOP)}catch(e){}return e},C.qsa=function(e,t){var i,n="#"==t[0],r=!n&&"."==t[0],o=n||r?t.slice(1):t,s=T.test(o);return N(e)&&s&&n?(i=e.getElementById(o))?[i]:[]:1!==e.nodeType&&9!==e.nodeType?[]:l.call(s&&!n?r?e.getElementsByClassName(o):e.getElementsByTagName(t):e.querySelectorAll(t))},i.contains=u.documentElement.contains?function(e,t){return e!==t&&e.contains(t)}:function(e,t){for(;t&&(t=t.parentNode);)if(t===e)return!0;return!1},i.type=R,i.isFunction=I,i.isWindow=x,i.isArray=D,i.isPlainObject=L,i.isEmptyObject=function(e){var t;for(t in e)return!1;return!0},i.inArray=function(e,t,i){return a.indexOf.call(t,e,i)},i.camelCase=o,i.trim=function(e){return null==e?"":String.prototype.trim.call(e)},i.uuid=0,i.support={},i.expr={},i.map=function(e,t){var n,r,o,s,a=[];if(j(e))for(r=0;r<e.length;r++)null!=(n=t(e[r],r))&&a.push(n);else for(o in e)null!=(n=t(e[o],o))&&a.push(n);return(s=a).length>0?i.fn.concat.apply([],s):s},i.each=function(e,t){var i,n;if(j(e)){for(i=0;i<e.length;i++)if(!1===t.call(e[i],i,e[i]))return e}else for(n in e)if(!1===t.call(e[n],n,e[n]))return e;return e},i.grep=function(e,t){return c.call(e,t)},window.JSON&&(i.parseJSON=JSON.parse),i.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),(function(e,t){A["[object "+t+"]"]=t.toLowerCase()})),i.fn={forEach:a.forEach,reduce:a.reduce,push:a.push,sort:a.sort,indexOf:a.indexOf,concat:a.concat,map:function(e){return i(i.map(this,(function(t,i){return e.call(t,i,t)})))},slice:function(){return i(l.apply(this,arguments))},ready:function(e){return P.test(u.readyState)&&u.body?e(i):u.addEventListener("DOMContentLoaded",(function(){e(i)}),!1),this},get:function(t){return t===e?l.call(this):this[t>=0?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each((function(){null!=this.parentNode&&this.parentNode.removeChild(this)}))},each:function(e){return a.every.call(this,(function(t,i){return!1!==e.call(t,i,t)})),this},filter:function(e){return I(e)?this.not(this.not(e)):i(c.call(this,(function(t){return C.matches(t,e)})))},add:function(e,t){return i(s(this.concat(i(e,t))))},is:function(e){return this.length>0&&C.matches(this[0],e)},not:function(t){var n=[];if(I(t)&&t.call!==e)this.each((function(e){t.call(this,e)||n.push(this)}));else{var r="string"==typeof t?this.filter(t):j(t)&&I(t.item)?l.call(t):i(t);this.forEach((function(e){r.indexOf(e)<0&&n.push(e)}))}return i(n)},has:function(e){return this.filter((function(){return V(e)?i.contains(this,e):i(this).find(e).size()}))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!V(e)?e:i(e)},last:function(){var e=this[this.length-1];return e&&!V(e)?e:i(e)},find:function(e){var t=this;return e?"object"==n(e)?i(e).filter((function(){var e=this;return a.some.call(t,(function(t){return i.contains(t,e)}))})):1==this.length?i(C.qsa(this[0],e)):this.map((function(){return C.qsa(this,e)})):i()},closest:function(e,t){var r=this[0],o=!1;for("object"==n(e)&&(o=i(e));r&&!(o?o.indexOf(r)>=0:C.matches(r,e));)r=r!==t&&!N(r)&&r.parentNode;return i(r)},parents:function(e){for(var t=[],n=this;n.length>0;)n=i.map(n,(function(e){if((e=e.parentNode)&&!N(e)&&t.indexOf(e)<0)return t.push(e),e}));return H(t,e)},parent:function(e){return H(s(this.pluck("parentNode")),e)},children:function(e){return H(this.map((function(){return U(this)})),e)},contents:function(){return this.map((function(){return l.call(this.childNodes)}))},siblings:function(e){return H(this.map((function(e,t){return c.call(U(t.parentNode),(function(e){return e!==t}))})),e)},empty:function(){return this.each((function(){this.innerHTML=""}))},pluck:function(e){return i.map(this,(function(t){return t[e]}))},show:function(){return this.each((function(){var e,t,i;"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=(e=this.nodeName,d[e]||(t=u.createElement(e),u.body.appendChild(t),i=getComputedStyle(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),"none"==i&&(i="block"),d[e]=i),d[e]))}))},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){var t=I(e);if(this[0]&&!t)var n=i(e).get(0),r=n.parentNode||this.length>1;return this.each((function(o){i(this).wrapAll(t?e.call(this,o):r?n.cloneNode(!0):n)}))},wrapAll:function(e){if(this[0]){var t;for(i(this[0]).before(e=i(e));(t=e.children()).length;)e=t.first();i(e).append(this)}return this},wrapInner:function(e){var t=I(e);return this.each((function(n){var r=i(this),o=r.contents(),s=t?e.call(this,n):e;o.length?o.wrapAll(s):r.append(s)}))},unwrap:function(){return this.parent().each((function(){i(this).replaceWith(i(this).children())})),this},clone:function(){return this.map((function(){return this.cloneNode(!0)}))},hide:function(){return this.css("display","none")},toggle:function(t){return this.each((function(){var n=i(this);(t===e?"none"==n.css("display"):t)?n.show():n.hide()}))},prev:function(e){return i(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return i(this.pluck("nextElementSibling")).filter(e||"*")},html:function(e){return 0 in arguments?this.each((function(t){var n=this.innerHTML;i(this).empty().append(z(this,e,t,n))})):0 in this?this[0].innerHTML:null},text:function(e){return 0 in arguments?this.each((function(t){var i=z(this,e,t,this.textContent);this.textContent=null==i?"":""+i})):0 in this?this[0].textContent:null},attr:function(i,n){var r;return"string"!=typeof i||1 in arguments?this.each((function(e){if(1===this.nodeType)if(V(i))for(t in i)$(this,t,i[t]);else $(this,i,z(this,n,e,this.getAttribute(i)))})):this.length&&1===this[0].nodeType?!(r=this[0].getAttribute(i))&&i in this[0]?this[0][i]:r:e},removeAttr:function(e){return this.each((function(){1===this.nodeType&&e.split(" ").forEach((function(e){$(this,e)}),this)}))},prop:function(e,t){return e=k[e]||e,1 in arguments?this.each((function(i){this[e]=z(this,t,i,this[e])})):this[0]&&this[0][e]},data:function(t,i){var n="data-"+t.replace(g,"-$1").toLowerCase(),r=1 in arguments?this.attr(n,i):this.attr(n);return null!==r?q(r):e},val:function(e){return 0 in arguments?this.each((function(t){this.value=z(this,e,t,this.value)})):this[0]&&(this[0].multiple?i(this[0]).find("option").filter((function(){return this.selected})).pluck("value"):this[0].value)},offset:function(e){if(e)return this.each((function(t){var n=i(this),r=z(this,e,t,n.offset()),o=n.offsetParent().offset(),s={top:r.top-o.top,left:r.left-o.left};"static"==n.css("position")&&(s.position="relative"),n.css(s)}));if(!this.length)return null;var t=this[0].getBoundingClientRect();return{left:t.left+window.pageXOffset,top:t.top+window.pageYOffset,width:Math.round(t.width),height:Math.round(t.height)}},css:function(e,n){if(arguments.length<2){var r,s=this[0];if(!s)return;if(r=getComputedStyle(s,""),"string"==typeof e)return s.style[o(e)]||r.getPropertyValue(e);if(D(e)){var a={};return i.each(e,(function(e,t){a[t]=s.style[o(t)]||r.getPropertyValue(t)})),a}}var l="";if("string"==R(e))n||0===n?l=B(e)+":"+F(e,n):this.each((function(){this.style.removeProperty(B(e))}));else for(t in e)e[t]||0===e[t]?l+=B(t)+":"+F(t,e[t])+";":this.each((function(){this.style.removeProperty(B(t))}));return this.each((function(){this.style.cssText+=";"+l}))},index:function(e){return e?this.indexOf(i(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return!!e&&a.some.call(this,(function(e){return this.test(G(e))}),M(e))},addClass:function(e){return e?this.each((function(t){if("className"in this){r=[];var n=G(this);z(this,e,t,n).split(/\s+/g).forEach((function(e){i(this).hasClass(e)||r.push(e)}),this),r.length&&G(this,n+(n?" ":"")+r.join(" "))}})):this},removeClass:function(t){return this.each((function(i){if("className"in this){if(t===e)return G(this,"");r=G(this),z(this,t,i,r).split(/\s+/g).forEach((function(e){r=r.replace(M(e)," ")})),G(this,r.trim())}}))},toggleClass:function(t,n){return t?this.each((function(r){var o=i(this);z(this,t,r,G(this)).split(/\s+/g).forEach((function(t){(n===e?!o.hasClass(t):n)?o.addClass(t):o.removeClass(t)}))})):this},scrollTop:function(t){if(this.length){var i="scrollTop"in this[0];return t===e?i?this[0].scrollTop:this[0].pageYOffset:this.each(i?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})}},scrollLeft:function(t){if(this.length){var i="scrollLeft"in this[0];return t===e?i?this[0].scrollLeft:this[0].pageXOffset:this.each(i?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})}},position:function(){if(this.length){var e=this[0],t=this.offsetParent(),n=this.offset(),r=v.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(i(e).css("margin-top"))||0,n.left-=parseFloat(i(e).css("margin-left"))||0,r.top+=parseFloat(i(t[0]).css("border-top-width"))||0,r.left+=parseFloat(i(t[0]).css("border-left-width"))||0,{top:n.top-r.top,left:n.left-r.left}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent||u.body;e&&!v.test(e.nodeName)&&"static"==i(e).css("position");)e=e.offsetParent;return e}))}},i.fn.detach=i.fn.remove,["width","height"].forEach((function(t){var n=t.replace(/./,(function(e){return e[0].toUpperCase()}));i.fn[t]=function(r){var o,s=this[0];return r===e?x(s)?s["inner"+n]:N(s)?s.documentElement["scroll"+n]:(o=this.offset())&&o[t]:this.each((function(e){(s=i(this)).css(t,z(this,r,e,s[t]()))}))}})),["after","prepend","before","append"].forEach((function(e,t){var n=t%2;i.fn[e]=function(){var e,r,o=i.map(arguments,(function(t){return"object"==(e=R(t))||"array"==e||null==t?t:C.fragment(t)})),s=this.length>1;return o.length<1?this:this.each((function(e,a){r=n?a:a.parentNode,a=0==t?a.nextSibling:1==t?a.firstChild:2==t?a:null;var l=i.contains(u.documentElement,r);o.forEach((function(e){if(s)e=e.cloneNode(!0);else if(!r)return i(e).remove();r.insertBefore(e,a),l&&Y(e,(function(e){null==e.nodeName||"SCRIPT"!==e.nodeName.toUpperCase()||e.type&&"text/javascript"!==e.type||e.src||window.eval.call(window,e.innerHTML)}))}))}))},i.fn[n?e+"To":"insert"+(t?"Before":"After")]=function(t){return i(t)[e](this),this}})),C.Z.prototype=i.fn,C.uniq=s,C.deserializeValue=q,i.zepto=C,i}(),t=e;return function(e){var t,i=1,n=Array.prototype.slice,r=e.isFunction,o=function(e){return"string"==typeof e},s={},a={},l="onfocusin"in window,c={focus:"focusin",blur:"focusout"},u={mouseenter:"mouseover",mouseleave:"mouseout"};function d(e){return e._zid||(e._zid=i++)}function h(e,t,i,n){if((t=f(t)).ns)var r=(o=t.ns,new RegExp("(?:^| )"+o.replace(" "," .* ?")+"(?: |$)"));var o;return(s[d(e)]||[]).filter((function(e){return e&&(!t.e||e.e==t.e)&&(!t.ns||r.test(e.ns))&&(!i||d(e.fn)===d(i))&&(!n||e.sel==n)}))}function f(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function p(e,t){return e.del&&!l&&e.e in c||!!t}function m(e){return u[e]||l&&c[e]||e}function y(i,n,r,o,a,l,c){var h=d(i),y=s[h]||(s[h]=[]);n.split(/\s/).forEach((function(n){if("ready"==n)return e(document).ready(r);var s=f(n);s.fn=r,s.sel=a,s.e in u&&(r=function(t){var i=t.relatedTarget;if(!i||i!==this&&!e.contains(this,i))return s.fn.apply(this,arguments)}),s.del=l;var d=l||r;s.proxy=function(e){if(!(e=S(e)).isImmediatePropagationStopped()){e.data=o;var n=d.apply(i,e._args==t?[e]:[e].concat(e._args));return!1===n&&(e.preventDefault(),e.stopPropagation()),n}},s.i=y.length,y.push(s),"addEventListener"in i&&i.addEventListener(m(s.e),s.proxy,p(s,c))}))}function v(e,t,i,n,r){var o=d(e);(t||"").split(/\s/).forEach((function(t){h(e,t,i,n).forEach((function(t){delete s[o][t.i],"removeEventListener"in e&&e.removeEventListener(m(t.e),t.proxy,p(t,r))}))}))}a.click=a.mousedown=a.mouseup=a.mousemove="MouseEvents",e.event={add:y,remove:v},e.proxy=function(t,i){var s=2 in arguments&&n.call(arguments,2);if(r(t)){var a=function(){return t.apply(i,s?s.concat(n.call(arguments)):arguments)};return a._zid=d(t),a}if(o(i))return s?(s.unshift(t[i],t),e.proxy.apply(null,s)):e.proxy(t[i],t);throw new TypeError("expected function")},e.fn.bind=function(e,t,i){return this.on(e,t,i)},e.fn.unbind=function(e,t){return this.off(e,t)},e.fn.one=function(e,t,i,n){return this.on(e,t,i,n,1)};var g=function(){return!0},b=function(){return!1},_=/^([A-Z]|returnValue$|layer[XY]$)/,w={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function S(i,n){return!n&&i.isDefaultPrevented||(n||(n=i),e.each(w,(function(e,t){var r=n[e];i[e]=function(){return this[t]=g,r&&r.apply(n,arguments)},i[t]=b})),(n.defaultPrevented!==t?n.defaultPrevented:"returnValue"in n?!1===n.returnValue:n.getPreventDefault&&n.getPreventDefault())&&(i.isDefaultPrevented=g)),i}function P(e){var i,n={originalEvent:e};for(i in e)_.test(i)||e[i]===t||(n[i]=e[i]);return S(n,e)}e.fn.delegate=function(e,t,i){return this.on(t,e,i)},e.fn.undelegate=function(e,t,i){return this.off(t,e,i)},e.fn.live=function(t,i){return e(document.body).delegate(this.selector,t,i),this},e.fn.die=function(t,i){return e(document.body).undelegate(this.selector,t,i),this},e.fn.on=function(i,s,a,l,c){var u,d,h=this;return i&&!o(i)?(e.each(i,(function(e,t){h.on(e,s,a,t,c)})),h):(o(s)||r(l)||!1===l||(l=a,a=s,s=t),(r(a)||!1===a)&&(l=a,a=t),!1===l&&(l=b),h.each((function(t,r){c&&(u=function(e){return v(r,e.type,l),l.apply(this,arguments)}),s&&(d=function(t){var i,o=e(t.target).closest(s,r).get(0);if(o&&o!==r)return i=e.extend(P(t),{currentTarget:o,liveFired:r}),(u||l).apply(o,[i].concat(n.call(arguments,1)))}),y(r,i,l,a,s,d||u)})))},e.fn.off=function(i,n,s){var a=this;return i&&!o(i)?(e.each(i,(function(e,t){a.off(e,n,t)})),a):(o(n)||r(s)||!1===s||(s=n,n=t),!1===s&&(s=b),a.each((function(){v(this,i,s,n)})))},e.fn.trigger=function(t,i){return(t=o(t)||e.isPlainObject(t)?e.Event(t):S(t))._args=i,this.each((function(){t.type in c&&"function"==typeof this[t.type]?this[t.type]():"dispatchEvent"in this?this.dispatchEvent(t):e(this).triggerHandler(t,i)}))},e.fn.triggerHandler=function(t,i){var n,r;return this.each((function(s,a){(n=P(o(t)?e.Event(t):t))._args=i,n.target=a,e.each(h(a,t.type||t),(function(e,t){if(r=t.proxy(n),n.isImmediatePropagationStopped())return!1}))})),r},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach((function(t){e.fn[t]=function(e){return 0 in arguments?this.bind(t,e):this.trigger(t)}})),e.Event=function(e,t){o(e)||(e=(t=e).type);var i=document.createEvent(a[e]||"Events"),n=!0;if(t)for(var r in t)"bubbles"==r?n=!!t[r]:i[r]=t[r];return i.initEvent(e,n,!0),S(i)}}(e),function(e){var t,i,n=0,r=window.document,o=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,s=/^(?:text|application)\/javascript/i,a=/^(?:text|application)\/xml/i,l="application/json",c="text/html",u=/^\s*$/,d=r.createElement("a");function h(t,i,n,o){if(t.global)return function(t,i,n){var r=e.Event(i);return e(t).trigger(r,n),!r.isDefaultPrevented()}(i||r,n,o)}function f(e,t){var i=t.context;if(!1===t.beforeSend.call(i,e,t)||!1===h(t,i,"ajaxBeforeSend",[e,t]))return!1;h(t,i,"ajaxSend",[e,t])}function p(e,t,i,n){var r=i.context,o="success";i.success.call(r,e,o,t),n&&n.resolveWith(r,[e,o,t]),h(i,r,"ajaxSuccess",[t,i,e]),y(o,t,i)}function m(e,t,i,n,r){var o=n.context;n.error.call(o,i,t,e),r&&r.rejectWith(o,[i,t,e]),h(n,o,"ajaxError",[i,n,e||t]),y(t,i,n)}function y(t,i,n){var r=n.context;n.complete.call(r,i,t),h(n,r,"ajaxComplete",[i,n]),function(t){t.global&&!--e.active&&h(t,null,"ajaxStop")}(n)}function v(){}function g(e,t){return""==t?e:(e+"&"+t).replace(/[&?]{1,2}/,"?")}function b(t,i,n,r){return e.isFunction(i)&&(r=n,n=i,i=void 0),e.isFunction(n)||(r=n,n=void 0),{url:t,data:i,success:n,dataType:r}}d.href=window.location.href,e.active=0,e.ajaxJSONP=function(t,i){if(!("type"in t))return e.ajax(t);var o,s,a=t.jsonpCallback,l=(e.isFunction(a)?a():a)||"jsonp"+ ++n,c=r.createElement("script"),u=window[l],d=function(t){e(c).triggerHandler("error",t||"abort")},h={abort:d};return i&&i.promise(h),e(c).on("load error",(function(n,r){clearTimeout(s),e(c).off().remove(),"error"!=n.type&&o?p(o[0],h,t,i):m(null,r||"error",h,t,i),window[l]=u,o&&e.isFunction(u)&&u(o[0]),u=o=void 0})),!1===f(h,t)?(d("abort"),h):(window[l]=function(){o=arguments},c.src=t.url.replace(/\?(.+)=\?/,"?$1="+l),r.head.appendChild(c),t.timeout>0&&(s=setTimeout((function(){d("timeout")}),t.timeout)),h)},e.ajaxSettings={type:"GET",beforeSend:v,success:v,error:v,complete:v,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:l,xml:"application/xml, text/xml",html:c,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},e.ajax=function(n){var o,y=e.extend({},n||{}),b=e.Deferred&&e.Deferred();for(t in e.ajaxSettings)void 0===y[t]&&(y[t]=e.ajaxSettings[t]);!function(t){t.global&&0==e.active++&&h(t,null,"ajaxStart")}(y),y.crossDomain||((o=r.createElement("a")).href=y.url,o.href=o.href,y.crossDomain=d.protocol+"//"+d.host!=o.protocol+"//"+o.host),y.url||(y.url=window.location.toString()),function(t){t.processData&&t.data&&"string"!=e.type(t.data)&&(t.data=e.param(t.data,t.traditional)),!t.data||t.type&&"GET"!=t.type.toUpperCase()||(t.url=g(t.url,t.data),t.data=void 0)}(y);var _=y.dataType,w=/\?.+=\?/.test(y.url);if(w&&(_="jsonp"),!1!==y.cache&&(n&&!0===n.cache||"script"!=_&&"jsonp"!=_)||(y.url=g(y.url,"_="+Date.now())),"jsonp"==_)return w||(y.url=g(y.url,y.jsonp?y.jsonp+"=?":!1===y.jsonp?"":"callback=?")),e.ajaxJSONP(y,b);var S,P=y.accepts[_],T={},A=function(e,t){T[e.toLowerCase()]=[e,t]},E=/^([\w-]+:)\/\//.test(y.url)?RegExp.$1:window.location.protocol,C=y.xhr(),O=C.setRequestHeader;if(b&&b.promise(C),y.crossDomain||A("X-Requested-With","XMLHttpRequest"),A("Accept",P||"*/*"),(P=y.mimeType||P)&&(P.indexOf(",")>-1&&(P=P.split(",",2)[0]),C.overrideMimeType&&C.overrideMimeType(P)),(y.contentType||!1!==y.contentType&&y.data&&"GET"!=y.type.toUpperCase())&&A("Content-Type",y.contentType||"application/x-www-form-urlencoded"),y.headers)for(i in y.headers)A(i,y.headers[i]);if(C.setRequestHeader=A,C.onreadystatechange=function(){if(4==C.readyState){C.onreadystatechange=v,clearTimeout(S);var t,i=!1;if(C.status>=200&&C.status<300||304==C.status||0==C.status&&"file:"==E){_=_||function(e){return e&&(e=e.split(";",2)[0]),e&&(e==c?"html":e==l?"json":s.test(e)?"script":a.test(e)&&"xml")||"text"}(y.mimeType||C.getResponseHeader("content-type")),t=C.responseText;try{"script"==_?(0,eval)(t):"xml"==_?t=C.responseXML:"json"==_&&(t=u.test(t)?null:e.parseJSON(t))}catch(e){i=e}i?m(i,"parsererror",C,y,b):p(t,C,y,b)}else m(C.statusText||null,C.status?"error":"abort",C,y,b)}},!1===f(C,y))return C.abort(),m(null,"abort",C,y,b),C;if(y.xhrFields)for(i in y.xhrFields)C[i]=y.xhrFields[i];var k=!("async"in y)||y.async;for(i in C.open(y.type,y.url,k,y.username,y.password),T)O.apply(C,T[i]);return y.timeout>0&&(S=setTimeout((function(){C.onreadystatechange=v,C.abort(),m(null,"timeout",C,y,b)}),y.timeout)),C.send(y.data?y.data:null),C},e.get=function(){return e.ajax(b.apply(null,arguments))},e.post=function(){var t=b.apply(null,arguments);return t.type="POST",e.ajax(t)},e.getJSON=function(){var t=b.apply(null,arguments);return t.dataType="json",e.ajax(t)},e.fn.load=function(t,i,n){if(!this.length)return this;var r,s=this,a=t.split(/\s/),l=b(t,i,n),c=l.success;return a.length>1&&(l.url=a[0],r=a[1]),l.success=function(t){s.html(r?e("<div>").html(t.replace(o,"")).find(r):t),c&&c.apply(s,arguments)},e.ajax(l),this};var _=encodeURIComponent;function w(t,i,n,r){var o,s=e.isArray(i),a=e.isPlainObject(i);e.each(i,(function(i,l){o=e.type(l),r&&(i=n?r:r+"["+(a||"object"==o||"array"==o?i:"")+"]"),!r&&s?t.add(l.name,l.value):"array"==o||!n&&"object"==o?w(t,l,n,i):t.add(i,l)}))}e.param=function(t,i){var n=[];return n.add=function(t,i){e.isFunction(i)&&(i=i()),null==i&&(i=""),this.push(_(t)+"="+_(i))},w(n,t,i),n.join("&").replace(/%20/g,"+")}}(e),function(e){e.fn.serializeArray=function(){var t,i,n=[],r=function e(i){if(i.forEach)return i.forEach(e);n.push({name:t,value:i})};return this[0]&&e.each(this[0].elements,(function(n,o){i=o.type,(t=o.name)&&"fieldset"!=o.nodeName.toLowerCase()&&!o.disabled&&"submit"!=i&&"reset"!=i&&"button"!=i&&"file"!=i&&("radio"!=i&&"checkbox"!=i||o.checked)&&r(e(o).val())})),n},e.fn.serialize=function(){var e=[];return this.serializeArray().forEach((function(t){e.push(encodeURIComponent(t.name)+"="+encodeURIComponent(t.value))})),e.join("&")},e.fn.submit=function(t){if(0 in arguments)this.bind("submit",t);else if(this.length){var i=e.Event("submit");this.eq(0).trigger(i),i.isDefaultPrevented()||this.get(0).submit()}return this}}(e),function(e){"__proto__"in{}||e.extend(e.zepto,{Z:function(t,i){return t=t||[],e.extend(t,e.fn),t.selector=i||"",t.__Z=!0,t},isZ:function(t){return"array"===e.type(t)&&"__Z"in t}});try{getComputedStyle(void 0)}catch(e){var t=getComputedStyle;window.getComputedStyle=function(e,i){try{return t(e,i)}catch(e){return null}}}}(e),t}();t.default=r},701:function(e){var t;function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function n(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===i(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r={singleAd:{name:"singleAd",playerType:"singleAd",priority:1,defaultConfigFile:"./SingleAd/DefaultSingleAdConfig",unitsConfigFiles:(t={FEED_MANAGER:"./SingleAd/units/SingleAdFeedManagerConfig",FEED_MANAGER_MOBILE:"./SingleAd/units/SingleAdFeedManagerConfig",WIDGET_ITEM:"./SingleAd/units/SingleAdWidgetItemConfig",WIDGET_ITEM_MOBILE:"./SingleAd/units/SingleAdWidgetItemConfig",INLINE_INSTREAM:"./SingleAd/units/SingleAdInlineConfig",INLINE_MOBILE:"./SingleAd/units/SingleAdInlineConfig"},n(t,"WIDGET_ITEM_MOBILE","./SingleAd/units/SingleAdWidgetItemConfig"),n(t,"SLIDER_INSTREAM","./SingleAd/units/SingleAdSliderConfig"),n(t,"SLIDER_MOBILE","./SingleAd/units/SingleAdSliderConfig"),t)},rv:{name:"rv",priority:3},adjacency:{name:"adjacency",playerType:"adjacencyAd",priority:2,defaultConfigFile:"./Adjacency/DefaultAdjacencyConfig.js",unitsConfigFiles:{FEED_MANAGER:"./Adjacency/units/AdjacFeedManagerConfig.js",FEED_MANAGER_MOBILE:"./Adjacency/units/AdjacFeedManagerConfig.js",WIDGET_ITEM:"./Adjacency/units/AdjacencyWidgetItemConfig",WIDGET_ITEM_MOBILE:"./Adjacency/units/AdjacencyWidgetItemConfig",RECO_REEL_WIDGET:"./Adjacency/units/AdjacencyRecoReelWidgetConfig.js"}},hip:{name:"hip",playerType:"hipAd",defaultConfigFile:"./Hip/DefaultHipConfig.js",unitsConfigFiles:{FEED_MANAGER:"./Hip/units/HipFeedManagerConfig.js",FEED_MANAGER_MOBILE:"./Hip/units/HipFeedManagerConfig.js"}},replayable:{name:"replayable",defaultConfigFile:"./Replayable/DefaultReplayableConfig.js",unitsConfigFiles:{FEED_MANAGER:"./Replayable/units/ReplayableAdFeedManagerConfig.js",FEED_MANAGER_MOBILE:"./Replayable/units/ReplayableAdFeedManagerConfig.js",INLINE_INSTREAM:"./Replayable/units/ReplayableAdInlineConfig.js",INLINE_MOBILE:"./Replayable/units/ReplayableAdInlineConfig.js",WIDGET_ITEM:"./Replayable/units/ReplayableAdWidgetItemConfig.js",WIDGET_ITEM_MOBILE:"./Replayable/units/ReplayableAdWidgetItemConfig.js"},priority:4}};e.exports=r},914:function(e,t,i){"use strict";i.r(t);var n=i(5545),r=i(2447),o=i(701),s=i.n(o);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function l(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if("object"!==a(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===a(o)?o:String(o)),n)}var r,o}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=d(e);if(t){var r=d(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return function(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,i)}}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}var h,f=i(1999),p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(d,e);var t,r,o,a=u(d);function d(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),(t=a.call(this)).model=e.model||{},t.log=new n.Z({unitType:t.model.get("unitType"),className:constructor.name,version:t.model.get("version"),isDebug:t.model.get("isDebug")}),t.configHierarchy=t._getConfigHierarchy(),t}return t=d,(r=[{key:"_getConfigHierarchy",value:function(){return f.sortBy(s(),(function(e){return e.priority})).reverse()}},{key:"getConfig",value:function(e){var t={};for(var i in this.configHierarchy){var n=this.configHierarchy[i].name,r=e[n],o=s()[n];r&&o&&(this.log.info("creating config for",n),f.extend(t,this._getDefaultConfig(n)),f.extend(t,this._getUnitConfig(n)))}return t}},{key:"getConfigForKey",value:function(e){var t={},i=s()[e]&&s()[e].name;return i&&(this.log.info("creating config for",i),f.extend(t,this._getDefaultConfig(i)),f.extend(t,this._getUnitConfig(i))),t}},{key:"_getDefaultConfig",value:function(e){var t=s()[e].defaultConfigFile;return this.loadFile(t)}},{key:"_getUnitConfig",value:function(e){var t=this.model.get("unitType"),i=s()[e]&&s()[e].unitsConfigFiles,n=i&&i[t];return this.loadFile(n)}},{key:"loadFile",value:function(e){if(e)return i(7418)("./".concat(e.replace("./","").replace(".js",""))).default}}])&&l(t.prototype,r),o&&l(t,o),Object.defineProperty(t,"prototype",{writable:!1}),d}(r.O),m=function(e){return h||(h=new p(e)),h};t.default=m},5449:function(e,t,i){"use strict";i.r(t);t.default={"stickyCard.isActive":!1,"stickyCard.restrictions.adTypeNotAllowed":!0}},8699:function(e,t,i){"use strict";i.r(t);t.default={setAdConfigAfter:"onAdSetToUnits",revertAfter:"_adVideoEnd",isNeedAdjacCard:!0,adjacCardPlacement:1}},256:function(e,t,i){"use strict";i.r(t);t.default={isReplayAd:!0,isMultiAd:!1}},1152:function(e,t,i){"use strict";i.r(t);t.default={setAdConfigAfter:"onAdSetToUnits",isTakeoverWidget:!0,isForceDontDie:!0,"detachToSlider.isDetachToSlider":!1,isMultiAd:!1,isReplayAd:!0,isKeepViewOnMidroll:!0}},3912:function(e,t,i){"use strict";i.r(t);t.default={}},4279:function(e,t,i){"use strict";i.r(t);t.default={setAdConfigAfter:"onAdSetToUnits",revertAfter:"_adVideoEnd","stickyCard.isActive":!1,"stickyCard.restrictions.adTypeNotAllowed":!0,hipCardPlacement:1,isNeedHipCard:!0,isNeedAdjacCard:!0,adjacCardPlacement:1}},7613:function(e,t,i){"use strict";i.r(t);t.default={}},7723:function(e,t,i){"use strict";i.r(t);t.default={setAdConfigAfter:"setSubModel",isReplayable:!0}},3353:function(e,t,i){"use strict";i.r(t);t.default={isReplayable:!0}},6333:function(e,t,i){"use strict";i.r(t);t.default={isReplayable:!0}},7507:function(e,t,i){"use strict";i.r(t);t.default={isMultiAd:!1}},9579:function(e,t,i){"use strict";i.r(t);t.default={setAdConfigAfter:"setSubModel",isPlacementSingleAd:!0,"continueToPlayInNexCard.isActive":!1}},3205:function(e,t,i){"use strict";i.r(t);t.default={isMultiAd:!1,isReplayAd:!0}},7642:function(e,t,i){"use strict";i.r(t);t.default={isReplayAd:!0}},6505:function(e,t,i){"use strict";i.r(t);t.default={setAdConfigAfter:"onAdSetToUnits",stopPredicts:!0,isKeepViewOnMidroll:!0,isKeepUnitOnMidroll:!0,isPlacementSingleAd:!0,isReplayAd:!0,isPreventNextAd:!0}},334:function(e,t,i){"use strict";var n=i(3879),r=i(9057),o=i(1999);t.Z=n.Z.extend({initialize:function(){n.Z.prototype.initialize.call(this),"mrss"===this.get("contentLoadType")?r.default.ajax({url:this.get("player.urls.contentLocation"),dataType:"xml",success:this._onMrssLoad.bind(this)}):"direct"===this.get("contentLoadType")?this.set("player.playlist",[{id:0,title:"",link:"",url:this.get("player.urls.contentLocation")||this.get("pVideoUrl"),type:"video/mp4",image:""}]):(window.category=this.get("category"),o.loadJs(this.get("player.urls.contentLocation"),this._onContentLoad.bind(this))),this.set("pubId",this.get("preroll.pubId")),this.set("pubTagId",this.get("preroll.pubTagId"))},_onMrssLoad:function(e){var t=[];(0,r.default)(e).find("item").each((function(e,i){i=(0,r.default)(i);var n={};n.id=e,n.title=i.find("title").text(),n.link=i.find("link").text(),n.url=i.find("media\\:content,content").attr("url"),n.type=i.find("media\\:content,content").attr("type"),n.image=i.find("media\\:thumbnail,thumbnail").attr("url"),t.push(n)})),this.set("player.playlist",t)},_onContentLoad:function(){window.playlist.forEach((function(e,t,i){i[t].image=this.get("player.urls.contentImagesLocation")+"/"+e.image,i[t].title=e.title.replace(/([A-Z])/g,"$1").replace(/^./,(function(e){return e.toUpperCase()})),i[t].url=this.get("player.urls.organicContentVideosLocation")+"/"+i[t].filename,i[t].name=i[t].filename,i[t].type="video/mp4"}),this),this.set("player.playlist",window.playlist)},getScheduleArr:function(){var e=[];return e.push(this._getSchedule("pre-roll",this.get("preroll.pubId"),this.get("preroll.pubTagId"))),e.push(this._getSchedule("mid-roll",this.get("midroll.pubId"),this.get("midroll.pubTagId"))),e.push(this._getSchedule("post-roll",this.get("postroll.pubId"),this.get("postroll.pubTagId"))),e}})},3879:function(e,t,i){"use strict";var n=i(9288),r=i.n(n),o=(i(2782),i(9652)),s=i.n(o),a=i(5264),l=i.n(a),c=i(2130),u=i.n(c),d=i(9831),h=i.n(d),f=(i(9861),i(1999));t.Z=r().DeepModel.extend({STATE:{READY:0,GOT_AD:1,PLAYING:2,PAUSED:3,PAUSED_BY_USER:4,STOPPED_BY_USER:5,DETACHED:6,ATTACHED:7,DONE:8,PLAYER_READY:9,PLAYER_CLOSE:10,PLAYER_STOP:11,AD_STOPPED:12,OPT_OUT:13,OPEN_WITH_PAUSE:14,WAITING_FOR_EXPAND:15,REPEAT_STAND_BY:16,REPEAT_SPINNING:17,SKIPPED_BY_USER:18},defaults:{isDebug:!1},storage:{},initialize:function(){this.log=new(s())({unitType:this.get("unitType"),className:"BaseUnitModel"}),this._parseFrameType();var e=this.get("demo");e&&this.set("preset.demo",e),this.get("isDebug")&&this.set("preset.isDebug",1);var t=this.get("isFireAllPixels");t&&this.set("preset.isFireAllPixels",t);var i=this.get("predictorsPresets");i&&this.set("preset.predictorsPresets",i);var n=this._getSettingsByConditions();this.set(n.preset);var r=this._getPresets(l().pms);for(var o in this.log.info("Presets Settings: ",[r.weakerThenSetByCon,r.strongerThenSetByCon]),r.weakerThenSetByCon)this.set(r.weakerThenSetByCon[o].presetData);for(var a in this.set(n.settings),r.strongerThenSetByCon)this.set(r.strongerThenSetByCon[a].presetData);this._setUrlParameters(),this._processPushArray(),this.get("baseReport")&&this.get("oppsBasePath)")&&this.set("oppsBasePath",this.get("baseReport")),this.set("isUseObserverChanged",!1),this.get("isUseObserver")&&!f.isObserverSupported("IntersectionObserver",this.get("isUseNonNativeObserver"))&&(this.set("isUseObserver",!1),this.set("isUseObserverChanged",!0)),this.get("isUseObserverForCardLocator")&&!f.isObserverSupported("IntersectionObserver",this.get("isUseNonNativeObserver"))&&this.set("isUseObserverForCardLocator",!1),this.volume=this.get("volume"),this.set("volume","off"),this._bindEvents(),this.log.info("unit model created:",this.attributes),this._handleABTest(),this._handleLiteUnitPixels(),(this.get("isApiPassbackExist")||this.get("onPassback"))&&(this.set("dlywf",!1),this.set("player.settings.rvfrquesttsemttr","any")),"body"===String(this.get("videoContainerSelector")).toLowerCase()&&this.set("videoContainerSelector",!1),this._setQueriesFunctions(),this._setCrossUnitCommunication(),this.get("isChangePredictPointsWithAny")&&this._changeAnyToZeroInPredictors(),this.get("disableAttachWhenStartFromSlider")&&this._decideSuperSlider(),!0===this.get("isGetRv1OnlyForEligible")&&(this.set("isGetRv1OnlyForEligible.isActive",!0),this.set("isGetRv1OnlyForEligible.delayPrediction",!0))},get:function(e){var t=r().DeepModel.prototype.get.call(this,e);if(!t||"string"!=typeof t)return t;for(var i=t.match(/\{\{(.*?)\}\}/g);i;){for(var n=0;n<i.length;n++){var o=i[n].substr(2,i[n].length-4),s=r().DeepModel.prototype.get.call(this,o);s||(s=""),t=t.replace(i[n],s)}i=t.match(/\{\{(.*?)\}\}/g)}return t},_setQueriesFunctions:function(){var e=this;f.forEach(u().UNIT_QUERY_LANGUAGE.SUPPORTED_CONFIG_FLAGS,(function(t){var i=e.get("".concat(t,".restrictions"));f.forEach(i,(function(i,n,r){var o="".concat(t,".restrictions.").concat(n),s=e.get("".concat(o,".queries"));if(s){var a=e.get("".concat(o,".default"));a=f.isBoolean(a)?a:'"'.concat(a,'"');var l=e._getQueryFunction(s,a);e.set("".concat(o,".decisionFunction"),l)}}))}))},_getQueryFunction:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n="";f.forEach(e,(function(e){n+=t._getQueryIfStatment(e)})),i=void 0!==i?"return ".concat(i,";"):"";var r="".concat(n,"\n").concat(i);return new Function("model","activeAd",r)},_getQueryIfStatment:function(e){var t=e.rule,i=e.valueIfTrue;return i=f.isBoolean(i)?i:'"'.concat(i,'"'),f.forEach(u().UNIT_QUERY_LANGUAGE.MAPPING,(function(e){t=t.split(e.search).join(e.replaceWith)}),this),"if(".concat(t,"){return ").concat(i,"};\n")},getPixel:function(e){!this.pixel&&this._createPixel();var t=this.get(e);if("pixels.conversion"===e&&r().trigger("global:creativeEvent",{type:"conversion"}),t&&t.isFire)return this.pixel({type:t.type||"",pixelId:t.id,timestamp:Date.now(),subUnit:this.get("subUnitType")})},_createPixel:function(){var e=this.get("pixels.url")+"?cijs=convusmp&ttype={{type}}&cisd=convusmp&cipid="+this.get("cipid")+"&crid="+this.get("creativeId")+"&dast="+this.get("dast")+"&cmcv=&pix={{pixelId}}&cb={{timestamp}}&uv="+this.get("unitVersion")+"&tms={{timestamp}}&su={{subUnit}}";this.get("abTest")&&(e+="&abt="+this.get("abTest")),this.get("referrerUrl")&&(e+="&ru="+this.get("referrerUrl")),e+="&ft="+this.get("frameType"),e=this._addPixelParameter("tagCpmFloor","cft",e),e=this._addPixelParameter("unitId","blid",e),e=this._addPixelParameter("unitName","unm",e),e=this._addPixelParameter("debugKey1","dk1",e),e=this._addPixelParameter("debugKey2","dk2",e),e=this._addPixelParameter("order","order",e),this.pixel=f.template(e)},_addPixelParameter:function(e,t,i){return(this.get(e)||0===this.get(e)||!1===this.get(e))&&(i+="&"+t+"="+this.get(e)),i},getImpressionPixel:function(){this.get("player.isFire99")},_getSchedule:function(e,t,i){return{roll_type:e,url:this.get("player.urls.vpaidLocation"),volume:"on"===this.get("volume")?100:0,mute:"on"!==this.get("volume"),oid:this.get("originId"),mfp:this.get("mfp"),sortOrderType:this.get("sortOrderType"),ad_parameters:JSON.stringify(this.get("demandConfig")),pubid:t,tagid:i,defaultTagTimeout:this.get("defaultTagTimeout"),totaltimeout:this.get("totalTimeout"),noaop:this.get("noaop"),skip_vast:!0}},_handleABTest:function(){if(this.get("abTest")&&this.get("pixels.startWithABT.isFire")){window.cmTag.customDataForTest.startWithABT=!0;var e={debug:"pn:!sqg:!torgn:"+(window.performance.timeOrigin?window.performance.timeOrigin:"")+"!ts:"+Date.now()};f.firePixel(this.getPixel("pixels.startWithABT"),"AB Test started",e)}},_handleLiteUnitPixels:function(){f.firePixel(this.getPixel("pixels.unitLoaded"),"Unit loaded from lite unit",{mntl:this.get("preset.level")}),f.firePixel(this.getPixel("pixels.unitLoadedWithFill"),"Unit loaded from lite unit with fill")},_processPushArray:function(){var e=this.get("pushedArr")||[];"FEED_MANAGER"!==this.get("unitType")&&"INLINE_FEED"!==this.get("unitType")&&"MSN_WIDGET"!==this.get("unitType")&&"WIDGET_ITEM"!==this.get("unitType")||this._setFeedManagerSubType(e);var t={};if(e)for(var i in e.forEach((function(e){var i=Object.keys(e)[0];t[i]||(t[i]=[]),t[i].push(e[i])})),t){var n=t[i],r=this.get(i);r&&n.push(r);var o=n.sort().join("!");this.set(i,o)}},_setFeedManagerSubType:function(e){var t=this.get("stickyCard.isActive"),i=this.get("detachToSlider.isDetachBelow"),n=this.get("detachToSlider.isDetachAbove"),r=this.get("detachToSlider.isStartFromSlider"),o=this.get("detachToSlider.isDetachToSlider"),s="ufm";t||r||o?t||!r||o?t||r||!o?!t&&r&&o?s+="_vD":t&&i&&!n?s+="_vE":t&&!i&&n?s+="_vF":t&&i&&n&&(s+="_vG"):s+="_vC":s+="_vB":s+="_vA",e.push({abTest:s})},_removeSoundOnHover:function(){var e,t=this.get("wurfl.browser.name").toLowerCase(),i=this.get("wurfl.browser.version"),n=this.get("noSoundBrowsers");n&&n[t]&&(e=n[t].minVersion),i>=e&&this.set("volume","off")},setStorage:function(e,t){this.storage[e]=t},getStorage:function(e){return this.storage[e]},setNextAd:function(e){this.setStorage("nextAd",e)},setNextSliderCutOffAd:function(e){this.setStorage("nextSliderCutOffAd",e)},getNextSliderCutOffAd:function(){var e=this.getStorage("nextSliderCutOffAd");return this.setNextSliderCutOffAd(void 0),e},peekNextSliderCutOffAd:function(){return this.getStorage("nextSliderCutOffAd")},getNextAd:function(){var e=this.getStorage("nextAd");return e&&(this.log.info("NEXT AD TYPE = "+parseInt(e.adData.requiredViewability?"1":"0"),e),e.isUsed=!0),this.setStorage("nextAd",void 0),setTimeout(this.set.bind(this,"hasReadyAd",!1),0),e},getNextAdRv:function(){var e=this.getStorage("nextAd");if(e)return e.adData.requiredViewability},peekNextAd:function(){return this.getStorage("nextAd")},_bindEvents:function(){this.on("change:getAdState",this._onAdImpression)},_onAdImpression:function(){"gotAd"!==this.get("getAdState")||this._gotAd||(this.log.info("Triggering filledImpression event."),r().trigger("filledImpression",{lineItemId:this.get("lineItemId"),placement:this.get("placement"),redId:this.get("redId")}),this._gotAd=!0)},_setUrlParameters:function(){for(var e,t,i,n=this._getWindow(),r=n.location.href.slice(n.location.href.indexOf("?")+1).split("&"),o=0;o<r.length;o++)0===(t=(e=r[o].split("="))[0]).indexOf("cm_")&&(t=t.slice(3),i=decodeURIComponent(e[1]),this.set(t,i))},_getWindow:function(){var e=this.get("isStayInIframe"),t=this.get("iframeData");return!0===e&&f.isInFriendlyIframe(t)||!f.getTopWindow?window:f.getTopWindow()},_getPresets:function(e){var t={strongerThenSetByCon:[],weakerThenSetByCon:[]},i=this.get("isMobile")?"Mobile":"Desktop";for(var n in this.get("preset")){var r=e.getPreset({key:n,value:this.get("preset.".concat(n)),unitType:this.get("unitName"),platform:i});r&&(r.strength>100?t.strongerThenSetByCon.push(r):t.weakerThenSetByCon.push(r))}return t.strongerThenSetByCon=f.sortBy(t.strongerThenSetByCon,"strength"),t.weakerThenSetByCon=f.sortBy(t.weakerThenSetByCon,"strength"),t},increaseCounter:function(e){var t=this.get(e);t?t++:t=1,this.set(e,t)},decreaseCounter:function(e){var t=this.get(e);!t||t<=0||(t--,this.set(e,t))},_parseFrameType:function(){var e=u().FRAME_TYPE.plainPage;void 0!==window.taboolaMobile?e=u().FRAME_TYPE.inApp:window.TRC&&window.TRC.isAMP?e=u().FRAME_TYPE.amp:f.isInIframe(this.get("iframeData"))&&(e=f.isInFriendlyIframe(this.get("iframeData"))?u().FRAME_TYPE.friendlyIframe:u().FRAME_TYPE.nonFriendlyIframe),this.set("frameType",e),this.set("player.settings.frameType",e)},_getSettingsByConditions:function(){var e={preset:{},settings:{}},t=this.get("settingsByConditions");if(t&&t.length>0)for(var i=0;i<t.length;i++){var n=t[i].conditions,r=t[i].settings;if(this._checkConditions(n))for(var o in r)-1!==o.indexOf("preset")?e.preset[o]=r[o]:e.settings[o]=r[o]}return e},_checkConditions:function(e){for(var t=!0,i=0;i<e.length;i++)if(e[i].val&&"function"==typeof e[i].val){var n=e[i].val(this);this.get(e[i].key)!==n&&(t=!1)}else this.get(e[i].key)!==e[i].val&&(t=!1);return t},fireUnitDelayedPixel:function(){f.firePixel(this.getPixel("pixels.unitDelayed"),"unit delayed")},fireUnitLoadAfterDelayPixel:function(){f.firePixel(this.getPixel("pixels.unitLoadAfterDelay"),"unit delayed")},isLoadcomponent:function(e,t){return this.get("displayFiller."+t)===e},appendArray:function(e,t,i){var n=this.get(e);f.isArray(n)||(n=[]),i&&n.includes(t)||(n.push(t),this.set(e,n))},handleAutoPlayData:function(e){this.log.info("autoplayDetector returned",e),this.set("AutoPlayDetectorData",e),e&&e.unmuted&&e.unmuted.supported?(this.set("volume",this.volume),this.set("autoplaySoundOn",!0)):(this.set("volume","off"),this.set("autoplaySoundOn",!1)),this.log.info("Unit set volume to: ",this.get("volume"))},_setStickyCardParams:function(){this.set("detachToSlider.isDetachAbove",!1),this.set("detachToSlider.isDetachBelow",!0),this.set("detachToSlider.isDetachToSlider",!0),this.set("detachToSlider.isStartFromSlider",!1),this.set("animation.detach",this.get("stickyCard.detachAnimationTime"))},_setCrossUnitCommunication:function(){if(this.get("isUseCrossUnitCommunication")){if(0===document.querySelectorAll("._cm-communication-input").length){var e=document.createElement("div");e.className="_cm-communication-input",e.setAttribute("data-unit-info",""),document.querySelector("body").appendChild(e)}this._observeCrossUnitCommunication()}},_observeCrossUnitCommunication:function(){if(this.get("isObserveCrossUnitCommunication")){var e=document.querySelector("._cm-communication-input");this.crossUnitCommunicatioObserver=new MutationObserver(this._updateCrossUnitData.bind(this)),this.crossUnitCommunicatioObserver.observe(e,{attributes:!0,childList:!1,subtree:!1}),this.on("closeState:".concat(h().closeState.terminate),this._stopCrossUnitCommunicationObserver),this._updateCrossUnitData()}},_updateCrossUnitCommunication:function(e){this.get("isUseCrossUnitCommunication")&&this.get("isUpdateCrossUnitCommunication")&&document.querySelector("._cm-communication-input").setAttribute("data-cross-unit-info",JSON.stringify(e))},_updateCrossUnitData:function(e,t){var i=document.querySelector("._cm-communication-input").dataset.crossUnitInfo;i&&i.unit!==this.get("unitType")&&this.set("crossUnitInfo",JSON.parse(i))},_stopCrossUnitCommunicationObserver:function(){this.crossUnitCommunicatioObserver.disconnect()},fireCancelGetAdOnEligibilityLost:function(){f.firePixel(this.getPixel("pixels.cancelGetAdOnEligibilityLost"),"cancel GetAd on EligibilityLost")},_changeAnyToZeroInPredictors:function(){var e=this,t=this.get("predictors");t&&(Object.keys(t).forEach((function(i){var n=t[i].predictPoints,r=t[i].predictPoint,o=t[i].allowedPredictPoints;n&&(t[i].predictPoints=e._validateAndChangePredictPointsIfAny(n)),o&&(t[i].allowedPredictPoints=e._validateAndChangePredictPointsIfAny(o)),r&&(t[i].predictPoint=e._validateAndChangePredictPointsIfAny(r))})),this.set("predictors",{}),this.set("predictors",t))},_validateAndChangePredictPointsIfAny:function(e){return"string"==typeof e&&"any"===e.toLowerCase()?0:e},_decideSuperSlider:function(){this.get("detachToSlider.isStartFromSlider")&&this.set("detachToSlider.isDetachToSlider",!0)}})},9836:function(e,t,i){var n=i(9288),r=(i(1999),i(9652));e.exports=n.View.extend({className:"_cm-detach",events:{"click ":"_onClick"},initialize:function(e){this.log=new r({unitType:e.unitType,className:"detachButtonView"}),this.container=e.container,this._rendered=!1},render:function(){if(!this._rendered){var e=this.model.get("components.DetachButtonView.imageLocation");this.$el.css("background-image",'url("'+e+'") !important'),this.container.appendChild(this.el)}},_onClick:function(){this.$el.trigger("cm:detach:click")},hide:function(){this.$el.hide()}})},6042:function(e,t,i){"use strict";var n=i(9288),r=i(9306);e.exports=n.Collection.extend({model:r})},9306:function(e,t,i){"use strict";var n=i(9288);e.exports=n.DeepModel.extend({defaults:{id:0,filename:"",image:"",title:"",vidlength:"",active:!1,clicked:!1}})},3049:function(e,t,i){"use strict";var n=i(334),r=i(9057);t.Z=n.Z.extend({defaults:r.default.extend(!0,{},n.Z.prototype.defaults,{adTitle:"",isShowOnAd:!0,isSoundOnHover:!0,isViewable:!1,isViewabilityTabCheck:!1,isViewavility100Slider:!0,secondsToAd:"3",tags:"",waterfallRetries:6,width:402,preroll:{pubId:198827,pubTagId:1020237},midroll:{pubId:198827,pubTagId:1020237},postroll:{pubId:198827,pubTagId:1020237},position:{horizontal:"right",vertical:"bottom"},pixels:{firstOpens:{id:31501758,type:5,isFire:!0}},liquidSize:{isActive:!1,widthPercent:33,minWidth:200},components:{adChoice:{isActive:!0,fallbackUrl:"https://popup.taboola.com/en",icon:"//cdn.taboola.com/static/c5/c5ef96bc-30ab-456a-b3d5-a84f367c6a46.svg",videoAd:{isActive:!0,text:"Ad",style:{},logoStyle:{}}}},isChangePredictPointsWithAny:!1})})},6789:function(e,t,i){"use strict";var n=i(334),r=i(9057);t.Z=n.Z.extend({defaults:r.default.extend(!0,{},n.Z.prototype.defaults,{adTitle:"",category:"mobilecontent1",defaultTagTimeout:30,isShowOnAd:!0,isSoundOnHover:!0,isViewable:!1,isViewabilityTabCheck:!1,isViewavility100Slider:!0,secondsToAd:"1",secondsBW:1,tags:"",timeBetweenAds:1,waterfallRetries:6,width:200,isMobile:!0,position:{horizontal:"right",vertical:"bottom"},preroll:{pubId:198827,pubTagId:1020237},midroll:{pubId:198827,pubTagId:1020237},postroll:{pubId:198827,pubTagId:1020237},pixels:{firstOpens:{id:31501758,type:5,isFire:!0}},player:{settings:{mprdct:.015},playlist:[]},components:{TimerView:{hasTimer:!0},OptOut:{hasOptOut:!1},adChoice:{isActive:!0,fallbackUrl:"https://popup.taboola.com/en",icon:"//cdn.taboola.com/static/c5/c5ef96bc-30ab-456a-b3d5-a84f367c6a46.svg",videoAd:{isActive:!0,text:"Ad",style:{},logoStyle:{}}}},liquidSize:{isActive:!1,widthPercent:33,minWidth:200},isChangePredictPointsWithAny:!1})})},2023:function(e,t,i){"use strict";i.r(t);t.default='<div class="_cm-timer-circle"> <div class="_cm-timer-mask _cm-timer-full"> <div class="_cm-timer-fill"></div> </div> <div class="_cm-timer-mask _cm-timer-half"> <div class="_cm-timer-fill"></div> <div class="_cm-timer-fill _cm-timer-fix"></div> </div> </div> <div class="_cm-timer-inset"> <span></span> </div> '},6609:function(e,t,i){"use strict";function n(e){var t=arguments.length,i=void 0,n=void 0;for(i=1;i<t;i++)for(n in arguments[i])e[n]=arguments[i][n];return e}function r(e,t){var i,r,o=arguments.length,s=void 0;for(e.prototype=(i=t.prototype,(r=function(){}).prototype=i,new r),e.prototype.constructor=e,s=2;s<o;s++)n(e.prototype,arguments[s]);return e}e=i.hmd(e);var o=["<nothing>"],s="end",a="value",l="error",c="any";function u(e,t){var i=void 0,n=void 0,r=void 0,o=void 0;if(0===e.length)return t;if(0===t.length)return e;for(o=0,i=new Array(e.length+t.length),n=e.length,r=0;r<n;r++,o++)i[o]=e[r];for(n=t.length,r=0;r<n;r++,o++)i[o]=t[r];return i}function d(e,t){var i=e.length,n=void 0;for(n=0;n<i;n++)if(e[n]===t)return n;return-1}function h(e,t){var i=e.length,n=void 0;for(n=0;n<i;n++)if(t(e[n]))return n;return-1}function f(e){var t=e.length,i=new Array(t),n=void 0;for(n=0;n<t;n++)i[n]=e[n];return i}function p(e,t){var i=e.length,n=void 0,r=void 0,o=void 0;if(t>=0&&t<i){if(1===i)return[];for(n=new Array(i-1),r=0,o=0;r<i;r++)r!==t&&(n[o]=e[r],o++);return n}return e}function m(e,t){var i=e.length,n=new Array(i),r=void 0;for(r=0;r<i;r++)n[r]=t(e[r]);return n}function y(e,t,i){e===c?t(i):e===i.type&&(e===a||e===l?t(i.value):t())}function v(){this._items=[],this._spies=[],this._inLoop=0,this._removedItems=null}function g(){this._dispatcher=new v,this._active=!1,this._alive=!0,this._activating=!1,this._logHandlers=null,this._spyHandlers=null}function b(){g.call(this)}function _(){g.call(this),this._currentEvent=null}n(v.prototype,{add:function(e,t){return this._items=u(this._items,[{type:e,fn:t}]),this._items.length},remove:function(e,t){var i=h(this._items,(function(i){return i.type===e&&i.fn===t}));return 0!==this._inLoop&&-1!==i&&(null===this._removedItems&&(this._removedItems=[]),this._removedItems.push(this._items[i])),this._items=p(this._items,i),this._items.length},addSpy:function(e){return this._spies=u(this._spies,[e]),this._spies.length},removeSpy:function(e){return this._spies=p(this._spies,this._spies.indexOf(e)),this._spies.length},dispatch:function(e){this._inLoop++;for(var t=0,i=this._spies;null!==this._spies&&t<i.length;t++)i[t](e);for(var n=0,r=this._items;n<r.length&&null!==this._items;n++)null!==this._removedItems&&(o=this._removedItems,s=r[n],-1!==d(o,s))||y(r[n].type,r[n].fn,e);var o,s;this._inLoop--,0===this._inLoop&&(this._removedItems=null)},cleanup:function(){this._items=null,this._spies=null}}),n(g.prototype,{_name:"observable",_onActivation:function(){},_onDeactivation:function(){},_setActive:function(e){this._active!==e&&(this._active=e,e?(this._activating=!0,this._onActivation(),this._activating=!1):this._onDeactivation())},_clear:function(){this._setActive(!1),this._dispatcher.cleanup(),this._dispatcher=null,this._logHandlers=null},_emit:function(e,t){switch(e){case a:return this._emitValue(t);case l:return this._emitError(t);case s:return this._emitEnd()}},_emitValue:function(e){this._alive&&this._dispatcher.dispatch({type:a,value:e})},_emitError:function(e){this._alive&&this._dispatcher.dispatch({type:l,value:e})},_emitEnd:function(){this._alive&&(this._alive=!1,this._dispatcher.dispatch({type:s}),this._clear())},_on:function(e,t){return this._alive?(this._dispatcher.add(e,t),this._setActive(!0)):y(e,t,{type:s}),this},_off:function(e,t){this._alive&&(0===this._dispatcher.remove(e,t)&&this._setActive(!1));return this},onValue:function(e){return this._on(a,e)},onError:function(e){return this._on(l,e)},onEnd:function(e){return this._on(s,e)},onAny:function(e){return this._on(c,e)},offValue:function(e){return this._off(a,e)},offError:function(e){return this._off(l,e)},offEnd:function(e){return this._off(s,e)},offAny:function(e){return this._off(c,e)},observe:function(e,t,i){var n=this,r=!1,o=e&&"function"!=typeof e?e:{value:e,error:t,end:i},c=function(e){e.type===s&&(r=!0),e.type===a&&o.value?o.value(e.value):e.type===l&&o.error?o.error(e.value):e.type===s&&o.end&&o.end(e.value)};return this.onAny(c),{unsubscribe:function(){r||(n.offAny(c),r=!0)},get closed(){return r}}},_ofSameType:function(e,t){return e.prototype.getType()===this.getType()?e:t},setName:function(e,t){return this._name=t?e._name+"."+t:e,this},log:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.toString(),t=void 0,i=function(i){var n="<"+i.type+(t?":current":"")+">";i.type===s?console.log(e,n):console.log(e,n,i.value)};return this._alive&&(this._logHandlers||(this._logHandlers=[]),this._logHandlers.push({name:e,handler:i})),t=!0,this.onAny(i),t=!1,this},offLog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.toString();if(this._logHandlers){var t=h(this._logHandlers,(function(t){return t.name===e}));-1!==t&&(this.offAny(this._logHandlers[t].handler),this._logHandlers.splice(t,1))}return this},spy:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.toString(),t=function(t){var i="<"+t.type+">";t.type===s?console.log(e,i):console.log(e,i,t.value)};return this._alive&&(this._spyHandlers||(this._spyHandlers=[]),this._spyHandlers.push({name:e,handler:t}),this._dispatcher.addSpy(t)),this},offSpy:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.toString();if(this._spyHandlers){var t=h(this._spyHandlers,(function(t){return t.name===e}));-1!==t&&(this._dispatcher.removeSpy(this._spyHandlers[t].handler),this._spyHandlers.splice(t,1))}return this}}),g.prototype.toString=function(){return"["+this._name+"]"},r(b,g,{_name:"stream",getType:function(){return"stream"}}),r(_,g,{_name:"property",_emitValue:function(e){this._alive&&(this._currentEvent={type:a,value:e},this._activating||this._dispatcher.dispatch({type:a,value:e}))},_emitError:function(e){this._alive&&(this._currentEvent={type:l,value:e},this._activating||this._dispatcher.dispatch({type:l,value:e}))},_emitEnd:function(){this._alive&&(this._alive=!1,this._activating||this._dispatcher.dispatch({type:s}),this._clear())},_on:function(e,t){return this._alive&&(this._dispatcher.add(e,t),this._setActive(!0)),null!==this._currentEvent&&y(e,t,this._currentEvent),this._alive||y(e,t,{type:s}),this},getType:function(){return"property"}});var w=new b;function S(){return w}function P(e){function t(e,t){var i=this;b.call(this),this._wait=e,this._intervalId=null,this._$onTick=function(){return i._onTick()},this._init(t)}return r(t,b,{_init:function(){},_free:function(){},_onTick:function(){},_onActivation:function(){this._intervalId=setInterval(this._$onTick,this._wait)},_onDeactivation:function(){null!==this._intervalId&&(clearInterval(this._intervalId),this._intervalId=null)},_clear:function(){b.prototype._clear.call(this),this._$onTick=null,this._free()}},e),t}w._emitEnd(),w._name="never";var T=P({_name:"later",_init:function(e){var t=e.x;this._x=t},_free:function(){this._x=null},_onTick:function(){this._emitValue(this._x),this._emitEnd()}});var A=P({_name:"interval",_init:function(e){var t=e.x;this._x=t},_free:function(){this._x=null},_onTick:function(){this._emitValue(this._x)}});var E=P({_name:"sequentially",_init:function(e){var t=e.xs;this._xs=f(t)},_free:function(){this._xs=null},_onTick:function(){1===this._xs.length?(this._emitValue(this._xs[0]),this._emitEnd()):this._emitValue(this._xs.shift())}});var C=P({_name:"fromPoll",_init:function(e){var t=e.fn;this._fn=t},_free:function(){this._fn=null},_onTick:function(){var e=this._fn;this._emitValue(e())}});function O(e){function t(t){return e._emitValue(t),e._active}function i(t){return e._emit(t.type,t.value),e._active}return{value:t,error:function(t){return e._emitError(t),e._active},end:function(){return e._emitEnd(),e._active},event:i,emit:t,emitEvent:i}}var k=P({_name:"withInterval",_init:function(e){var t=e.fn;this._fn=t,this._emitter=O(this)},_free:function(){this._fn=null,this._emitter=null},_onTick:function(){(0,this._fn)(this._emitter)}});function D(e){b.call(this),this._fn=e,this._unsubscribe=null}function R(e){return new D(e)}function I(e,t){switch(t){case 0:return function(){return e()};case 1:return function(t){return e(t[0])};case 2:return function(t){return e(t[0],t[1])};case 3:return function(t){return e(t[0],t[1],t[2])};case 4:return function(t){return e(t[0],t[1],t[2],t[3])};default:return function(t){return e.apply(null,t)}}}r(D,b,{_name:"stream",_onActivation:function(){var e=(0,this._fn)(O(this));this._unsubscribe="function"==typeof e?e:null,this._active||this._callUnsubscribe()},_callUnsubscribe:function(){null!==this._unsubscribe&&(this._unsubscribe(),this._unsubscribe=null)},_onDeactivation:function(){this._callUnsubscribe()},_clear:function(){b.prototype._clear.call(this),this._fn=null}});var x=[["addEventListener","removeEventListener"],["addListener","removeListener"],["on","off"]];function N(e){this._currentEvent={type:"value",value:e,current:!0}}function V(e){return new N(e)}function L(e){this._currentEvent={type:"error",value:e,current:!0}}function j(e,t){return function(i,n){var r=this;e.call(this),this._source=i,this._name=i._name+"."+t,this._init(n),this._$handleAny=function(e){return r._handleAny(e)}}}function B(e){return{_init:function(){},_free:function(){},_handleValue:function(e){this._emitValue(e)},_handleError:function(e){this._emitError(e)},_handleEnd:function(){this._emitEnd()},_handleAny:function(e){switch(e.type){case a:return this._handleValue(e.value);case l:return this._handleError(e.value);case s:return this._handleEnd()}},_onActivation:function(){this._source.onAny(this._$handleAny)},_onDeactivation:function(){this._source.offAny(this._$handleAny)},_clear:function(){e.prototype._clear.call(this),this._source=null,this._$handleAny=null,this._free()}}}function M(e,t){var i=j(b,e);return r(i,b,B(b),t),i}function F(e,t){var i=j(_,e);return r(i,_,B(_),t),i}r(N,_,{_name:"constant",_active:!1,_activating:!1,_alive:!1,_dispatcher:null,_logHandlers:null}),r(L,_,{_name:"constantError",_active:!1,_activating:!1,_alive:!1,_dispatcher:null,_logHandlers:null});var U=F("toProperty",{_init:function(e){var t=e.fn;this._getInitialCurrent=t},_onActivation:function(){if(null!==this._getInitialCurrent){var e=this._getInitialCurrent;this._emitValue(e())}this._source.onAny(this._$handleAny)}});function W(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null!==t&&"function"!=typeof t)throw new Error("You should call toProperty() with a function or no arguments.");return new U(e,{fn:t})}var H=M("changes",{_handleValue:function(e){this._activating||this._emitValue(e)},_handleError:function(e){this._activating||this._emitError(e)}});function z(){if("function"==typeof Promise)return Promise;throw new Error("There isn't default Promise, use shim or parameter")}var $=function(e){var t,i=e.Symbol;return"function"==typeof i?i.observable?t=i.observable:(t=i("observable"),i.observable=t):t="@@observable",t}("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==i.g?i.g:e),G=$.default?$.default:$;function q(e){this._observable=e.takeErrors(1)}function Y(){return new q(this)}function K(e,t,i){for(var n in e)e.hasOwnProperty(n)&&(t.push(n),i.push(e[n]))}function Q(e,t,i){var n=this;b.call(this),this._activeCount=e.length,this._sources=u(e,t),this._combinator=i,this._aliveCount=0,this._latestValues=new Array(this._sources.length),this._latestErrors=new Array(this._sources.length),function(e,t){var i=e.length,n=void 0;for(n=0;n<i;n++)e[n]=t}(this._latestValues,o),this._emitAfterActivation=!1,this._endAfterActivation=!1,this._latestErrorIndex=0,this._$handlers=[];for(var r=function(e){n._$handlers.push((function(t){return n._handleAny(e,t)}))},s=0;s<this._sources.length;s++)r(s)}function Z(e,t,i){return"function"==typeof t&&(i=t,t=void 0),Array.isArray(e)?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments[2];if(!Array.isArray(t))throw new Error("Combine can only combine active and passive collections of the same type.");return i=i?I(i,e.length+t.length):function(e){return e},0===e.length?S():new Q(e,t,i)}(e,t,i):function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments[2];if("object"!=typeof t||Array.isArray(t))throw new Error("Combine can only combine active and passive collections of the same type.");var n=[],r=[],o=[];return K(e,n,r),K(t,n,o),0===r.length?S():new Q(r,o,(function(e){for(var t={},r=e.length-1;0<=r;r--)t[n[r]]=e[r];return i?i(t):t}))}(e,t,i)}n(q.prototype,{subscribe:function(e,t,i){var n=this,r="function"==typeof e?{next:e,error:t,complete:i}:e,o=function(e){e.type===s&&(c=!0),e.type===a&&r.next?r.next(e.value):e.type===l&&r.error?r.error(e.value):e.type===s&&r.complete&&r.complete(e.value)};this._observable.onAny(o);var c=!1;return{unsubscribe:function(){c=!0,n._observable.offAny(o)},get closed(){return c}}}}),q.prototype[G]=function(){return this},r(Q,b,{_name:"combine",_onActivation:function(){this._aliveCount=this._activeCount;for(var e=this._activeCount;e<this._sources.length;e++)this._sources[e].onAny(this._$handlers[e]);for(var t=0;t<this._activeCount;t++)this._sources[t].onAny(this._$handlers[t]);this._emitAfterActivation&&(this._emitAfterActivation=!1,this._emitIfFull()),this._endAfterActivation&&this._emitEnd()},_onDeactivation:function(){var e=this._sources.length,t=void 0;for(t=0;t<e;t++)this._sources[t].offAny(this._$handlers[t])},_emitIfFull:function(){for(var e=!0,t=!1,i=this._latestValues.length,n=new Array(i),r=new Array(i),s=0;s<i;s++)n[s]=this._latestValues[s],r[s]=this._latestErrors[s],n[s]===o&&(e=!1),void 0!==r[s]&&(t=!0);if(e){var a=this._combinator;this._emitValue(a(n))}t&&this._emitError(function(e){for(var t=void 0,i=0;i<e.length;i++)void 0!==e[i]&&(void 0===t||t.index<e[i].index)&&(t=e[i]);return t.error}(r))},_handleAny:function(e,t){t.type===a||t.type===l?(t.type===a&&(this._latestValues[e]=t.value,this._latestErrors[e]=void 0),t.type===l&&(this._latestValues[e]=o,this._latestErrors[e]={index:this._latestErrorIndex++,error:t.value}),e<this._activeCount&&(this._activating?this._emitAfterActivation=!0:this._emitIfFull())):e<this._activeCount&&(this._aliveCount--,0===this._aliveCount&&(this._activating?this._endAfterActivation=!0:this._emitEnd()))},_clear:function(){b.prototype._clear.call(this),this._sources=null,this._latestValues=null,this._latestErrors=null,this._combinator=null,this._$handlers=null}});var X={empty:function(){return S()},concat:function(e,t){return e.merge(t)},of:function(e){return V(e)},map:function(e,t){return t.map(e)},bimap:function(e,t,i){return i.mapErrors(e).map(t)},ap:function(e,t){return Z([e,t],(function(e,t){return e(t)}))},chain:function(e,t){return t.flatMap(e)}},J=Object.freeze({Observable:X}),ee={_init:function(e){var t=e.fn;this._fn=t},_free:function(){this._fn=null},_handleValue:function(e){var t=this._fn;this._emitValue(t(e))}},te=M("map",ee),ie=F("map",ee),ne=function(e){return e};function re(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ne;return new(e._ofSameType(te,ie))(e,{fn:t})}var oe={_init:function(e){var t=e.fn;this._fn=t},_free:function(){this._fn=null},_handleValue:function(e){(0,this._fn)(e)&&this._emitValue(e)}},se=M("filter",oe),ae=F("filter",oe),le=function(e){return e};var ce={_init:function(e){var t=e.n;this._n=t,t<=0&&this._emitEnd()},_handleValue:function(e){0!==this._n&&(this._n--,this._emitValue(e),0===this._n&&this._emitEnd())}},ue=M("take",ce),de=F("take",ce);var he={_init:function(e){var t=e.n;this._n=t,t<=0&&this._emitEnd()},_handleError:function(e){0!==this._n&&(this._n--,this._emitError(e),0===this._n&&this._emitEnd())}},fe=M("takeErrors",he),pe=F("takeErrors",he);var me={_init:function(e){var t=e.fn;this._fn=t},_free:function(){this._fn=null},_handleValue:function(e){(0,this._fn)(e)?this._emitValue(e):this._emitEnd()}},ye=M("takeWhile",me),ve=F("takeWhile",me),ge=function(e){return e};var be={_init:function(){this._lastValue=o},_free:function(){this._lastValue=null},_handleValue:function(e){this._lastValue=e},_handleEnd:function(){this._lastValue!==o&&this._emitValue(this._lastValue),this._emitEnd()}},_e=M("last",be),we=F("last",be);var Se={_init:function(e){var t=e.n;this._n=Math.max(0,t)},_handleValue:function(e){0===this._n?this._emitValue(e):this._n--}},Pe=M("skip",Se),Te=F("skip",Se);var Ae={_init:function(e){var t=e.fn;this._fn=t},_free:function(){this._fn=null},_handleValue:function(e){var t=this._fn;null===this._fn||t(e)||(this._fn=null),null===this._fn&&this._emitValue(e)}},Ee=M("skipWhile",Ae),Ce=F("skipWhile",Ae),Oe=function(e){return e};var ke={_init:function(e){var t=e.fn;this._fn=t,this._prev=o},_free:function(){this._fn=null,this._prev=null},_handleValue:function(e){var t=this._fn;this._prev!==o&&t(this._prev,e)||(this._prev=e,this._emitValue(e))}},De=M("skipDuplicates",ke),Re=F("skipDuplicates",ke),Ie=function(e,t){return e===t};function xe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ie;return new(e._ofSameType(De,Re))(e,{fn:t})}var Ne={_init:function(e){var t=e.fn,i=e.seed;this._fn=t,this._prev=i},_free:function(){this._prev=null,this._fn=null},_handleValue:function(e){if(this._prev!==o){var t=this._fn;this._emitValue(t(this._prev,e))}this._prev=e}},Ve=M("diff",Ne),Le=F("diff",Ne);function je(e,t){return[e,t]}var Be=F("scan",{_init:function(e){var t=e.fn,i=e.seed;this._fn=t,this._seed=i,i!==o&&this._emitValue(i)},_free:function(){this._fn=null,this._seed=null},_handleValue:function(e){var t=this._fn;null===this._currentEvent||this._currentEvent.type===l?this._emitValue(this._seed===o?e:t(this._seed,e)):this._emitValue(t(this._currentEvent.value,e))}});var Me=M("flatten",{_init:function(e){var t=e.fn;this._fn=t},_free:function(){this._fn=null},_handleValue:function(e){for(var t=(0,this._fn)(e),i=0;i<t.length;i++)this._emitValue(t[i])}}),Fe=function(e){return e};var Ue={},We={_init:function(e){var t=this,i=e.wait;this._wait=Math.max(0,i),this._buff=[],this._$shiftBuff=function(){var e=t._buff.shift();e===Ue?t._emitEnd():t._emitValue(e)}},_free:function(){this._buff=null,this._$shiftBuff=null},_handleValue:function(e){this._activating?this._emitValue(e):(this._buff.push(e),setTimeout(this._$shiftBuff,this._wait))},_handleEnd:function(){this._activating?this._emitEnd():(this._buff.push(Ue),setTimeout(this._$shiftBuff,this._wait))}},He=M("delay",We),ze=F("delay",We);var $e=Date.now?function(){return Date.now()}:function(){return(new Date).getTime()},Ge={_init:function(e){var t=this,i=e.wait,n=e.leading,r=e.trailing;this._wait=Math.max(0,i),this._leading=n,this._trailing=r,this._trailingValue=null,this._timeoutId=null,this._endLater=!1,this._lastCallTime=0,this._$trailingCall=function(){return t._trailingCall()}},_free:function(){this._trailingValue=null,this._$trailingCall=null},_handleValue:function(e){if(this._activating)this._emitValue(e);else{var t=$e();0!==this._lastCallTime||this._leading||(this._lastCallTime=t);var i=this._wait-(t-this._lastCallTime);i<=0?(this._cancelTrailing(),this._lastCallTime=t,this._emitValue(e)):this._trailing&&(this._cancelTrailing(),this._trailingValue=e,this._timeoutId=setTimeout(this._$trailingCall,i))}},_handleEnd:function(){this._activating?this._emitEnd():this._timeoutId?this._endLater=!0:this._emitEnd()},_cancelTrailing:function(){null!==this._timeoutId&&(clearTimeout(this._timeoutId),this._timeoutId=null)},_trailingCall:function(){this._emitValue(this._trailingValue),this._timeoutId=null,this._trailingValue=null,this._lastCallTime=this._leading?$e():0,this._endLater&&this._emitEnd()}},qe=M("throttle",Ge),Ye=F("throttle",Ge);var Ke={_init:function(e){var t=this,i=e.wait,n=e.immediate;this._wait=Math.max(0,i),this._immediate=n,this._lastAttempt=0,this._timeoutId=null,this._laterValue=null,this._endLater=!1,this._$later=function(){return t._later()}},_free:function(){this._laterValue=null,this._$later=null},_handleValue:function(e){this._activating?this._emitValue(e):(this._lastAttempt=$e(),this._immediate&&!this._timeoutId&&this._emitValue(e),this._timeoutId||(this._timeoutId=setTimeout(this._$later,this._wait)),this._immediate||(this._laterValue=e))},_handleEnd:function(){this._activating?this._emitEnd():this._timeoutId&&!this._immediate?this._endLater=!0:this._emitEnd()},_later:function(){var e=$e()-this._lastAttempt;if(e<this._wait&&e>=0)this._timeoutId=setTimeout(this._$later,this._wait-e);else{if(this._timeoutId=null,!this._immediate){var t=this._laterValue;this._laterValue=null,this._emitValue(t)}this._endLater&&this._emitEnd()}}},Qe=M("debounce",Ke),Ze=F("debounce",Ke);var Xe={_init:function(e){var t=e.fn;this._fn=t},_free:function(){this._fn=null},_handleError:function(e){var t=this._fn;this._emitError(t(e))}},Je=M("mapErrors",Xe),et=F("mapErrors",Xe),tt=function(e){return e};var it={_init:function(e){var t=e.fn;this._fn=t},_free:function(){this._fn=null},_handleError:function(e){(0,this._fn)(e)&&this._emitError(e)}},nt=M("filterErrors",it),rt=F("filterErrors",it),ot=function(e){return e};var st={_handleValue:function(){}},at=M("ignoreValues",st),lt=F("ignoreValues",st);var ct={_handleError:function(){}},ut=M("ignoreErrors",ct),dt=F("ignoreErrors",ct);var ht={_handleEnd:function(){}},ft=M("ignoreEnd",ht),pt=F("ignoreEnd",ht);var mt={_init:function(e){var t=e.fn;this._fn=t},_free:function(){this._fn=null},_handleEnd:function(){var e=this._fn;this._emitValue(e()),this._emitEnd()}},yt=M("beforeEnd",mt),vt=F("beforeEnd",mt);var gt={_init:function(e){var t=e.min,i=e.max;this._max=i,this._min=t,this._buff=[]},_free:function(){this._buff=null},_handleValue:function(e){this._buff=function(e,t,i){var n=Math.min(i,e.length+1),r=e.length-n+1,o=new Array(n),s=void 0;for(s=r;s<n;s++)o[s-r]=e[s];return o[n-1]=t,o}(this._buff,e,this._max),this._buff.length>=this._min&&this._emitValue(this._buff)}},bt=M("slidingWindow",gt),_t=F("slidingWindow",gt);var wt={_init:function(e){var t=e.fn,i=e.flushOnEnd;this._fn=t,this._flushOnEnd=i,this._buff=[]},_free:function(){this._buff=null},_flush:function(){null!==this._buff&&0!==this._buff.length&&(this._emitValue(this._buff),this._buff=[])},_handleValue:function(e){this._buff.push(e),(0,this._fn)(e)||this._flush()},_handleEnd:function(){this._flushOnEnd&&this._flush(),this._emitEnd()}},St=M("bufferWhile",wt),Pt=F("bufferWhile",wt),Tt=function(e){return e};var At={_init:function(e){var t=e.count,i=e.flushOnEnd;this._count=t,this._flushOnEnd=i,this._buff=[]},_free:function(){this._buff=null},_flush:function(){null!==this._buff&&0!==this._buff.length&&(this._emitValue(this._buff),this._buff=[])},_handleValue:function(e){this._buff.push(e),this._buff.length>=this._count&&this._flush()},_handleEnd:function(){this._flushOnEnd&&this._flush(),this._emitEnd()}},Et=M("bufferWithCount",At),Ct=F("bufferWithCount",At);var Ot={_init:function(e){var t=this,i=e.wait,n=e.count,r=e.flushOnEnd;this._wait=i,this._count=n,this._flushOnEnd=r,this._intervalId=null,this._$onTick=function(){return t._flush()},this._buff=[]},_free:function(){this._$onTick=null,this._buff=null},_flush:function(){null!==this._buff&&(this._emitValue(this._buff),this._buff=[])},_handleValue:function(e){this._buff.push(e),this._buff.length>=this._count&&(clearInterval(this._intervalId),this._flush(),this._intervalId=setInterval(this._$onTick,this._wait))},_handleEnd:function(){this._flushOnEnd&&0!==this._buff.length&&this._flush(),this._emitEnd()},_onActivation:function(){this._intervalId=setInterval(this._$onTick,this._wait),this._source.onAny(this._$handleAny)},_onDeactivation:function(){null!==this._intervalId&&(clearInterval(this._intervalId),this._intervalId=null),this._source.offAny(this._$handleAny)}},kt=M("bufferWithTimeOrCount",Ot),Dt=F("bufferWithTimeOrCount",Ot);var Rt={_init:function(e){var t,i=e.transducer;this._xform=i((t=this,{"@@transducer/step":function(e,i){return t._emitValue(i),null},"@@transducer/result":function(){return t._emitEnd(),null}}))},_free:function(){this._xform=null},_handleValue:function(e){null!==this._xform["@@transducer/step"](null,e)&&this._xform["@@transducer/result"](null)},_handleEnd:function(){this._xform["@@transducer/result"](null)}},It=M("transduce",Rt),xt=F("transduce",Rt);var Nt={_init:function(e){var t=e.fn;this._handler=t,this._emitter=O(this)},_free:function(){this._handler=null,this._emitter=null},_handleAny:function(e){this._handler(this._emitter,e)}},Vt=M("withHandler",Nt),Lt=F("withHandler",Nt);var jt=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function Bt(e,t){var i=this;b.call(this),this._buffers=m(e,(function(e){return jt(e)?f(e):[]})),this._sources=m(e,(function(e){return jt(e)?S():e})),this._combinator=t?I(t,this._sources.length):function(e){return e},this._aliveCount=0,this._$handlers=[];for(var n=function(e){i._$handlers.push((function(t){return i._handleAny(e,t)}))},r=0;r<this._sources.length;r++)n(r)}function Mt(e,t){return 0===e.length?S():new Bt(e,t)}r(Bt,b,{_name:"zip",_onActivation:function(){for(;this._isFull();)this._emit();var e=this._sources.length;this._aliveCount=e;for(var t=0;t<e&&this._active;t++)this._sources[t].onAny(this._$handlers[t])},_onDeactivation:function(){for(var e=0;e<this._sources.length;e++)this._sources[e].offAny(this._$handlers[e])},_emit:function(){for(var e=new Array(this._buffers.length),t=0;t<this._buffers.length;t++)e[t]=this._buffers[t].shift();var i=this._combinator;this._emitValue(i(e))},_isFull:function(){for(var e=0;e<this._buffers.length;e++)if(0===this._buffers[e].length)return!1;return!0},_handleAny:function(e,t){t.type===a&&(this._buffers[e].push(t.value),this._isFull()&&this._emit()),t.type===l&&this._emitError(t.value),t.type===s&&(this._aliveCount--,0===this._aliveCount&&this._emitEnd())},_clear:function(){b.prototype._clear.call(this),this._sources=null,this._buffers=null,this._combinator=null,this._$handlers=null}});var Ft=function(e){return e};function Ut(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.queueLim,n=void 0===i?0:i,r=t.concurLim,o=void 0===r?-1:r,s=t.drop,a=void 0===s?"new":s;b.call(this),this._queueLim=n<0?-1:n,this._concurLim=o<0?-1:o,this._drop=a,this._queue=[],this._curSources=[],this._$handleSubAny=function(t){return e._handleSubAny(t)},this._$endHandlers=[],this._currentlyAdding=null,0===this._concurLim&&this._emitEnd()}function Wt(e){Ut.call(this),this._addAll(e),this._initialised=!0}function Ht(e){return 0===e.length?S():new Wt(e)}function zt(e){var t=this;b.call(this),this._generator=e,this._source=null,this._inLoop=!1,this._iteration=0,this._$handleAny=function(e){return t._handleAny(e)}}r(Ut,b,{_name:"abstractPool",_add:function(e,t){t=t||Ft,-1===this._concurLim||this._curSources.length<this._concurLim?this._addToCur(t(e)):-1===this._queueLim||this._queue.length<this._queueLim?this._addToQueue(t(e)):"old"===this._drop&&(this._removeOldest(),this._add(e,t))},_addAll:function(e){var t=this;!function(e,t){var i=e.length,n=void 0;for(n=0;n<i;n++)t(e[n])}(e,(function(e){return t._add(e)}))},_remove:function(e){-1===this._removeCur(e)&&this._removeQueue(e)},_addToQueue:function(e){this._queue=u(this._queue,[e])},_addToCur:function(e){if(this._active){if(!e._alive)return e._currentEvent&&this._emit(e._currentEvent.type,e._currentEvent.value),void(this._active&&(0!==this._queue.length?this._pullQueue():0===this._curSources.length&&this._onEmpty()));this._currentlyAdding=e,e.onAny(this._$handleSubAny),this._currentlyAdding=null,e._alive?(this._curSources=u(this._curSources,[e]),this._active&&this._subToEnd(e)):0!==this._queue.length?this._pullQueue():0===this._curSources.length&&this._onEmpty()}else this._curSources=u(this._curSources,[e])},_subToEnd:function(e){var t=this,i=function(){return t._removeCur(e)};this._$endHandlers.push({obs:e,handler:i}),e.onEnd(i)},_subscribe:function(e){e.onAny(this._$handleSubAny),this._active&&this._subToEnd(e)},_unsubscribe:function(e){e.offAny(this._$handleSubAny);var t=h(this._$endHandlers,(function(t){return t.obs===e}));-1!==t&&(e.offEnd(this._$endHandlers[t].handler),this._$endHandlers.splice(t,1))},_handleSubAny:function(e){e.type===a?this._emitValue(e.value):e.type===l&&this._emitError(e.value)},_removeQueue:function(e){var t=d(this._queue,e);return this._queue=p(this._queue,t),t},_removeCur:function(e){this._active&&this._unsubscribe(e);var t=d(this._curSources,e);return this._curSources=p(this._curSources,t),-1!==t&&(0!==this._queue.length?this._pullQueue():0===this._curSources.length&&this._onEmpty()),t},_removeOldest:function(){this._removeCur(this._curSources[0])},_pullQueue:function(){0!==this._queue.length&&(this._queue=f(this._queue),this._addToCur(this._queue.shift()))},_onActivation:function(){for(var e=0,t=this._curSources;e<t.length&&this._active;e++)this._subscribe(t[e])},_onDeactivation:function(){for(var e=0,t=this._curSources;e<t.length;e++)this._unsubscribe(t[e]);null!==this._currentlyAdding&&this._unsubscribe(this._currentlyAdding)},_isEmpty:function(){return 0===this._curSources.length},_onEmpty:function(){},_clear:function(){b.prototype._clear.call(this),this._queue=null,this._curSources=null,this._$handleSubAny=null,this._$endHandlers=null}}),r(Wt,Ut,{_name:"merge",_onEmpty:function(){this._initialised&&this._emitEnd()}}),r(zt,b,{_name:"repeat",_handleAny:function(e){e.type===s?(this._source=null,this._getSource()):this._emit(e.type,e.value)},_getSource:function(){if(!this._inLoop){this._inLoop=!0;for(var e=this._generator;null===this._source&&this._alive&&this._active;)this._source=e(this._iteration++),this._source?this._source.onAny(this._$handleAny):this._emitEnd();this._inLoop=!1}},_onActivation:function(){this._source?this._source.onAny(this._$handleAny):this._getSource()},_onDeactivation:function(){this._source&&this._source.offAny(this._$handleAny)},_clear:function(){b.prototype._clear.call(this),this._generator=null,this._source=null,this._$handleAny=null}});var $t=function(e){return new zt(e)};function Gt(e){return $t((function(t){return e.length>t&&e[t]})).setName("concat")}function qt(){Ut.call(this)}function Yt(e,t,i){var n=this;Ut.call(this,i),this._source=e,this._fn=t,this._mainEnded=!1,this._lastCurrent=null,this._$handleMain=function(e){return n._handleMain(e)}}function Kt(e,t){Yt.call(this,e,t)}function Qt(e,t){return function(i,n,r){var s=this;e.call(this),this._primary=i,this._secondary=n,this._name=i._name+"."+t,this._lastSecondary=o,this._$handleSecondaryAny=function(e){return s._handleSecondaryAny(e)},this._$handlePrimaryAny=function(e){return s._handlePrimaryAny(e)},this._init(r)}}function Zt(e){return{_init:function(){},_free:function(){},_handlePrimaryValue:function(e){this._emitValue(e)},_handlePrimaryError:function(e){this._emitError(e)},_handlePrimaryEnd:function(){this._emitEnd()},_handleSecondaryValue:function(e){this._lastSecondary=e},_handleSecondaryError:function(e){this._emitError(e)},_handleSecondaryEnd:function(){},_handlePrimaryAny:function(e){switch(e.type){case a:return this._handlePrimaryValue(e.value);case l:return this._handlePrimaryError(e.value);case s:return this._handlePrimaryEnd(e.value)}},_handleSecondaryAny:function(e){switch(e.type){case a:return this._handleSecondaryValue(e.value);case l:return this._handleSecondaryError(e.value);case s:this._handleSecondaryEnd(e.value),this._removeSecondary()}},_removeSecondary:function(){null!==this._secondary&&(this._secondary.offAny(this._$handleSecondaryAny),this._$handleSecondaryAny=null,this._secondary=null)},_onActivation:function(){null!==this._secondary&&this._secondary.onAny(this._$handleSecondaryAny),this._active&&this._primary.onAny(this._$handlePrimaryAny)},_onDeactivation:function(){null!==this._secondary&&this._secondary.offAny(this._$handleSecondaryAny),this._primary.offAny(this._$handlePrimaryAny)},_clear:function(){e.prototype._clear.call(this),this._primary=null,this._secondary=null,this._lastSecondary=null,this._$handleSecondaryAny=null,this._$handlePrimaryAny=null,this._free()}}}function Xt(e,t){var i=Qt(b,e);return r(i,b,Zt(b),t),i}function Jt(e,t){var i=Qt(_,e);return r(i,_,Zt(_),t),i}r(qt,Ut,{_name:"pool",plug:function(e){return this._add(e),this},unplug:function(e){return this._remove(e),this}}),r(Yt,Ut,{_onActivation:function(){Ut.prototype._onActivation.call(this),this._active&&this._source.onAny(this._$handleMain)},_onDeactivation:function(){Ut.prototype._onDeactivation.call(this),this._source.offAny(this._$handleMain),this._hadNoEvSinceDeact=!0},_handleMain:function(e){e.type===a&&(this._activating&&this._hadNoEvSinceDeact&&this._lastCurrent===e.value||this._add(e.value,this._fn),this._lastCurrent=e.value,this._hadNoEvSinceDeact=!1);e.type===l&&this._emitError(e.value),e.type===s&&(this._isEmpty()?this._emitEnd():this._mainEnded=!0)},_onEmpty:function(){this._mainEnded&&this._emitEnd()},_clear:function(){Ut.prototype._clear.call(this),this._source=null,this._lastCurrent=null,this._$handleMain=null}}),r(Kt,Yt,{_handleMain:function(e){e.type===l&&(this._activating&&this._hadNoEvSinceDeact&&this._lastCurrent===e.value||this._add(e.value,this._fn),this._lastCurrent=e.value,this._hadNoEvSinceDeact=!1);e.type===a&&this._emitValue(e.value),e.type===s&&(this._isEmpty()?this._emitEnd():this._mainEnded=!0)}});var ei={_handlePrimaryValue:function(e){this._lastSecondary!==o&&this._lastSecondary&&this._emitValue(e)},_handleSecondaryEnd:function(){this._lastSecondary!==o&&this._lastSecondary||this._emitEnd()}},ti=Xt("filterBy",ei),ii=Jt("filterBy",ei);var ni=function(e,t){return t};var ri={_handlePrimaryValue:function(e){this._lastSecondary!==o&&this._emitValue(e)},_handleSecondaryEnd:function(){this._lastSecondary===o&&this._emitEnd()}},oi=Xt("skipUntilBy",ri),si=Jt("skipUntilBy",ri);var ai={_handleSecondaryValue:function(){this._emitEnd()}},li=Xt("takeUntilBy",ai),ci=Jt("takeUntilBy",ai);var ui={_init:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).flushOnEnd,t=void 0===e||e;this._buff=[],this._flushOnEnd=t},_free:function(){this._buff=null},_flush:function(){null!==this._buff&&(this._emitValue(this._buff),this._buff=[])},_handlePrimaryEnd:function(){this._flushOnEnd&&this._flush(),this._emitEnd()},_onActivation:function(){this._primary.onAny(this._$handlePrimaryAny),this._alive&&null!==this._secondary&&this._secondary.onAny(this._$handleSecondaryAny)},_handlePrimaryValue:function(e){this._buff.push(e)},_handleSecondaryValue:function(){this._flush()},_handleSecondaryEnd:function(){this._flushOnEnd||this._emitEnd()}},di=Xt("bufferBy",ui),hi=Jt("bufferBy",ui);var fi={_init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.flushOnEnd,i=void 0===t||t,n=e.flushOnChange,r=void 0!==n&&n;this._buff=[],this._flushOnEnd=i,this._flushOnChange=r},_free:function(){this._buff=null},_flush:function(){null!==this._buff&&(this._emitValue(this._buff),this._buff=[])},_handlePrimaryEnd:function(){this._flushOnEnd&&this._flush(),this._emitEnd()},_handlePrimaryValue:function(e){this._buff.push(e),this._lastSecondary===o||this._lastSecondary||this._flush()},_handleSecondaryEnd:function(){this._flushOnEnd||this._lastSecondary!==o&&!this._lastSecondary||this._emitEnd()},_handleSecondaryValue:function(e){this._flushOnChange&&!e&&this._flush(),this._lastSecondary=e}},pi=Xt("bufferWhileBy",fi),mi=Jt("bufferWhileBy",fi);var yi=function(){return!1},vi=function(){return!0};var gi={_init:function(e){var t=e.fn;this._fn=t},_free:function(){this._fn=null},_handleValue:function(e){var t=(0,this._fn)(e);t.convert?this._emitError(t.error):this._emitValue(e)}},bi=M("valuesToErrors",gi),_i=F("valuesToErrors",gi),wi=function(e){return{convert:!0,error:e}};var Si={_init:function(e){var t=e.fn;this._fn=t},_free:function(){this._fn=null},_handleError:function(e){var t=(0,this._fn)(e);t.convert?this._emitValue(t.value):this._emitError(e)}},Pi=M("errorsToValues",Si),Ti=F("errorsToValues",Si),Ai=function(e){return{convert:!0,value:e}};var Ei={_handleError:function(e){this._emitError(e),this._emitEnd()}},Ci=M("endOnError",Ei),Oi=F("endOnError",Ei);g.prototype.toProperty=function(e){return W(this,e)},g.prototype.changes=function(){return new H(this)},g.prototype.toPromise=function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:z(),i=null;return new t((function(t,n){e.onAny((function(e){e.type===s&&null!==i?((i.type===a?t:n)(i.value),i=null):i=e}))}))}(this,e)},g.prototype.toESObservable=Y,g.prototype[G]=Y,g.prototype.map=function(e){return re(this,e)},g.prototype.filter=function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:le;return new(e._ofSameType(se,ae))(e,{fn:t})}(this,e)},g.prototype.take=function(e){return function(e,t){return new(e._ofSameType(ue,de))(e,{n:t})}(this,e)},g.prototype.takeErrors=function(e){return function(e,t){return new(e._ofSameType(fe,pe))(e,{n:t})}(this,e)},g.prototype.takeWhile=function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ge;return new(e._ofSameType(ye,ve))(e,{fn:t})}(this,e)},g.prototype.last=function(){return new((e=this)._ofSameType(_e,we))(e);var e},g.prototype.skip=function(e){return function(e,t){return new(e._ofSameType(Pe,Te))(e,{n:t})}(this,e)},g.prototype.skipWhile=function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Oe;return new(e._ofSameType(Ee,Ce))(e,{fn:t})}(this,e)},g.prototype.skipDuplicates=function(e){return xe(this,e)},g.prototype.diff=function(e,t){return function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o;return new(e._ofSameType(Ve,Le))(e,{fn:t||je,seed:i})}(this,e,t)},g.prototype.scan=function(e,t){return function(e,t){return new Be(e,{fn:t,seed:arguments.length>2&&void 0!==arguments[2]?arguments[2]:o})}(this,e,t)},g.prototype.flatten=function(e){return function(e){return new Me(e,{fn:arguments.length>1&&void 0!==arguments[1]?arguments[1]:Fe})}(this,e)},g.prototype.delay=function(e){return function(e,t){return new(e._ofSameType(He,ze))(e,{wait:t})}(this,e)},g.prototype.throttle=function(e,t){return function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=i.leading,r=void 0===n||n,o=i.trailing,s=void 0===o||o;return new(e._ofSameType(qe,Ye))(e,{wait:t,leading:r,trailing:s})}(this,e,t)},g.prototype.debounce=function(e,t){return function(e,t){var i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).immediate,n=void 0!==i&&i;return new(e._ofSameType(Qe,Ze))(e,{wait:t,immediate:n})}(this,e,t)},g.prototype.mapErrors=function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tt;return new(e._ofSameType(Je,et))(e,{fn:t})}(this,e)},g.prototype.filterErrors=function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ot;return new(e._ofSameType(nt,rt))(e,{fn:t})}(this,e)},g.prototype.ignoreValues=function(){return new((e=this)._ofSameType(at,lt))(e);var e},g.prototype.ignoreErrors=function(){return new((e=this)._ofSameType(ut,dt))(e);var e},g.prototype.ignoreEnd=function(){return new((e=this)._ofSameType(ft,pt))(e);var e},g.prototype.beforeEnd=function(e){return function(e,t){return new(e._ofSameType(yt,vt))(e,{fn:t})}(this,e)},g.prototype.slidingWindow=function(e,t){return function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return new(e._ofSameType(bt,_t))(e,{min:i,max:t})}(this,e,t)},g.prototype.bufferWhile=function(e,t){return function(e,t){var i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).flushOnEnd,n=void 0===i||i;return new(e._ofSameType(St,Pt))(e,{fn:t||Tt,flushOnEnd:n})}(this,e,t)},g.prototype.bufferWithCount=function(e,t){return function(e,t){var i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).flushOnEnd,n=void 0===i||i;return new(e._ofSameType(Et,Ct))(e,{count:t,flushOnEnd:n})}(this,e,t)},g.prototype.bufferWithTimeOrCount=function(e,t,i){return function(e,t,i){var n=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).flushOnEnd,r=void 0===n||n;return new(e._ofSameType(kt,Dt))(e,{wait:t,count:i,flushOnEnd:r})}(this,e,t,i)},g.prototype.transduce=function(e){return function(e,t){return new(e._ofSameType(It,xt))(e,{transducer:t})}(this,e)},g.prototype.withHandler=function(e){return function(e,t){return new(e._ofSameType(Vt,Lt))(e,{fn:t})}(this,e)},g.prototype.thru=function(e){return e(this)},g.prototype.combine=function(e,t){return Z([this,e],t)},g.prototype.zip=function(e,t){return Mt([this,e],t)},g.prototype.merge=function(e){return Ht([this,e])},g.prototype.concat=function(e){return Gt([this,e])};g.prototype.flatMap=function(e){return new Yt(this,e).setName(this,"flatMap")},g.prototype.flatMapLatest=function(e){return new Yt(this,e,{concurLim:1,drop:"old"}).setName(this,"flatMapLatest")},g.prototype.flatMapFirst=function(e){return new Yt(this,e,{concurLim:1}).setName(this,"flatMapFirst")},g.prototype.flatMapConcat=function(e){return new Yt(this,e,{queueLim:-1,concurLim:1}).setName(this,"flatMapConcat")},g.prototype.flatMapConcurLimit=function(e,t){return new Yt(this,e,{queueLim:-1,concurLim:t}).setName(this,"flatMapConcurLimit")},g.prototype.flatMapErrors=function(e){return new Kt(this,e).setName(this,"flatMapErrors")},g.prototype.filterBy=function(e){return i=e,new((t=this)._ofSameType(ti,ii))(t,i);var t,i},g.prototype.sampledBy=function(e,t){return function(e,t,i){return Z([t],[e],i?function(e,t){return i(t,e)}:ni).setName(e,"sampledBy")}(this,e,t)},g.prototype.skipUntilBy=function(e){return i=e,new((t=this)._ofSameType(oi,si))(t,i);var t,i},g.prototype.takeUntilBy=function(e){return i=e,new((t=this)._ofSameType(li,ci))(t,i);var t,i},g.prototype.bufferBy=function(e,t){return function(e,t,i){return new(e._ofSameType(di,hi))(e,t,i)}(this,e,t)},g.prototype.bufferWhileBy=function(e,t){return function(e,t,i){return new(e._ofSameType(pi,mi))(e,t,i)}(this,e,t)};var ki=!0;function Di(e){if(ki&&console&&"function"==typeof console.warn){console.warn(e,"\nHere is an Error object for you containing the call stack:",new Error)}}g.prototype.awaiting=function(e){return Di("You are using deprecated .awaiting() method, see https://github.com/kefirjs/kefir/issues/145"),function(e,t){var i=Ht([re(e,vi),re(t,yi)]);return(i=W(i=xe(i),yi)).setName(e,"awaiting")}(this,e)},g.prototype.valuesToErrors=function(e){return Di("You are using deprecated .valuesToErrors() method, see https://github.com/kefirjs/kefir/issues/149"),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:wi;return new(e._ofSameType(bi,_i))(e,{fn:t})}(this,e)},g.prototype.errorsToValues=function(e){return Di("You are using deprecated .errorsToValues() method, see https://github.com/kefirjs/kefir/issues/149"),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ai;return new(e._ofSameType(Pi,Ti))(e,{fn:t})}(this,e)},g.prototype.endOnError=function(){return Di("You are using deprecated .endOnError() method, see https://github.com/kefirjs/kefir/issues/150"),new((e=this)._ofSameType(Ci,Oi))(e);var e};var Ri={Observable:g,Stream:b,Property:_,never:S,later:function(e,t){return new T(e,{x:t})},interval:function(e,t){return new A(e,{x:t})},sequentially:function(e,t){return 0===t.length?S():new E(e,{xs:t})},fromPoll:function(e,t){return new C(e,{fn:t})},withInterval:function(e,t){return new k(e,{fn:t})},fromCallback:function(e){var t=!1;return R((function(i){t||(e((function(e){i.emit(e),i.end()})),t=!0)})).setName("fromCallback")},fromNodeCallback:function(e){var t=!1;return R((function(i){t||(e((function(e,t){e?i.error(e):i.emit(t),i.end()})),t=!0)})).setName("fromNodeCallback")},fromEvents:function(e,t,i){for(var n=void 0,r=void 0,o=0;o<x.length;o++)if("function"==typeof e[x[o][0]]&&"function"==typeof e[x[o][1]]){n=x[o][0],r=x[o][1];break}if(void 0===n)throw new Error("target don't support any of addEventListener/removeEventListener, addListener/removeListener, on/off method pair");return function(e,t,i){return R((function(n){var r=i?function(){n.emit(function(e,t,i){var n=i?i.length:0;if(null!=t)return 0===n?e.call(t):e.apply(t,i);switch(n){case 0:return e();case 1:return e(i[0]);case 2:return e(i[0],i[1]);case 3:return e(i[0],i[1],i[2]);case 4:return e(i[0],i[1],i[2],i[3]);default:return e.apply(null,i)}}(i,this,arguments))}:function(e){n.emit(e)};return e(r),function(){return t(r)}})).setName("fromSubUnsub")}((function(i){return e[n](t,i)}),(function(i){return e[r](t,i)}),i).setName("fromEvents")},stream:R,constant:V,constantError:function(e){return new L(e)},fromPromise:function(e){var t=!1,i=R((function(i){if(!t){var n=e.then((function(e){i.emit(e),i.end()}),(function(e){i.error(e),i.end()}));n&&"function"==typeof n.done&&n.done(),t=!0}}));return W(i,null).setName("fromPromise")},fromESObservable:function(e){var t=e[G]?e[G]():e;return R((function(e){var i=t.subscribe({error:function(t){e.error(t),e.end()},next:function(t){e.emit(t)},complete:function(){e.end()}});return i.unsubscribe?function(){i.unsubscribe()}:i})).setName("fromESObservable")},combine:Z,zip:Mt,merge:Ht,concat:Gt,Pool:qt,pool:function(){return new qt},repeat:$t,staticLand:J};Ri.Kefir=Ri,t.ZP=Ri},9644:function(e){e.exports=function(e){function t(e){delete installedChunks[e]}function i(e){var t=document.getElementsByTagName("head")[0],i=document.createElement("script");i.type="text/javascript",i.charset="utf-8",i.src=f.p+"hot_updater/hot-update.js",t.appendChild(i)}function n(){return new Promise((function(e,t){if("undefined"==typeof XMLHttpRequest)return t(new Error("No browser support"));try{var i=new XMLHttpRequest,n=f.p+"hot_updater/hot-update.json";i.open("GET",n,!0),i.timeout=1e4,i.send(null)}catch(e){return t(e)}i.onreadystatechange=function(){if(4===i.readyState)if(0===i.status)t(new Error("Manifest request to "+n+" timed out."));else if(404===i.status)e();else if(200!==i.status&&304!==i.status)t(new Error("Manifest request to "+n+" failed."));else{try{var r=JSON.parse(i.responseText)}catch(e){return void t(e)}e(r)}}}))}function r(e){var t=R[e];if(!t)return f;var i=function(i){return t.hot.active?(R[i]?R[i].parents.indexOf(e)<0&&R[i].parents.push(e):(S=[e],m=i),t.children.indexOf(i)<0&&t.children.push(i)):(console.warn("[HMR] unexpected require("+i+") from disposed module "+e),S=[]),f(i)};for(var n in f)Object.prototype.hasOwnProperty.call(f,n)&&"e"!==n&&Object.defineProperty(i,n,function(e){return{configurable:!0,enumerable:!0,get:function(){return f[e]},set:function(t){f[e]=t}}}(n));return i.e=function(e){function t(){C--,"prepare"===A&&(O[e]||u(e),0===C&&0===E&&d())}return"ready"===A&&s("prepare"),C++,f.e(e).then(t,(function(e){throw t(),e}))},i}function o(e){var t={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:m!==e,active:!0,accept:function(e,i){if(void 0===e)t._selfAccepted=!0;else if("function"==typeof e)t._selfAccepted=e;else if("object"==typeof e)for(var n=0;n<e.length;n++)t._acceptedDependencies[e[n]]=i||function(){};else t._acceptedDependencies[e]=i||function(){}},decline:function(e){if(void 0===e)t._selfDeclined=!0;else if("object"==typeof e)for(var i=0;i<e.length;i++)t._declinedDependencies[e[i]]=!0;else t._declinedDependencies[e]=!0},dispose:function(e){t._disposeHandlers.push(e)},addDisposeHandler:function(e){t._disposeHandlers.push(e)},removeDisposeHandler:function(e){var i=t._disposeHandlers.indexOf(e);i>=0&&t._disposeHandlers.splice(i,1)},check:l,apply:h,status:function(e){if(!e)return A;T.push(e)},addStatusHandler:function(e){T.push(e)},removeStatusHandler:function(e){var t=T.indexOf(e);t>=0&&T.splice(t,1)},data:w[e]};return m=void 0,t}function s(e){A=e;for(var t=0;t<T.length;t++)T[t].call(null,e)}function a(e){return+e+""===e?+e:e}function l(e){if("idle"!==A)throw new Error("check() is only allowed in idle status");return b=e,s("check"),n().then((function(e){if(!e)return s("idle"),null;k={},O={},D=e.c,g=e.h,s("prepare");var t=new Promise((function(e,t){y={resolve:e,reject:t}}));return v={},u(0),"prepare"===A&&0===C&&0===E&&d(),t}))}function c(e,t){if(D[e]&&k[e]){for(var i in k[e]=!1,t)Object.prototype.hasOwnProperty.call(t,i)&&(v[i]=t[i]);0==--E&&0===C&&d()}}function u(e){D[e]?(k[e]=!0,E++,i(e)):O[e]=!0}function d(){s("ready");var e=y;if(y=null,e)if(b)h(b).then((function(t){e.resolve(t)}),(function(t){e.reject(t)}));else{var t=[];for(var i in v)Object.prototype.hasOwnProperty.call(v,i)&&t.push(a(i));e.resolve(t)}}function h(i){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];e.indexOf(n)<0&&e.push(n)}}if("ready"!==A)throw new Error("apply() is only allowed in ready status");i=i||{};var r,o,l,c,u,d={},h=[],p={},m=function(){console.warn("[HMR] unexpected require("+b.moduleId+") to disposed module")};for(var y in v)if(Object.prototype.hasOwnProperty.call(v,y)){var b;u=a(y),b=v[y]?function(e){for(var t=[e],i={},r=t.slice().map((function(e){return{chain:[e],id:e}}));r.length>0;){var o=r.pop(),s=o.id,a=o.chain;if((c=R[s])&&!c.hot._selfAccepted){if(c.hot._selfDeclined)return{type:"self-declined",chain:a,moduleId:s};if(c.hot._main)return{type:"unaccepted",chain:a,moduleId:s};for(var l=0;l<c.parents.length;l++){var u=c.parents[l],d=R[u];if(d){if(d.hot._declinedDependencies[s])return{type:"declined",chain:a.concat([u]),moduleId:s,parentId:u};t.indexOf(u)>=0||(d.hot._acceptedDependencies[s]?(i[u]||(i[u]=[]),n(i[u],[s])):(delete i[u],t.push(u),r.push({chain:a.concat([u]),id:u})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:i}}(u):{type:"disposed",moduleId:y};var P=!1,T=!1,E=!1,C="";switch(b.chain&&(C="\nUpdate propagation: "+b.chain.join(" -> ")),b.type){case"self-declined":i.onDeclined&&i.onDeclined(b),i.ignoreDeclined||(P=new Error("Aborted because of self decline: "+b.moduleId+C));break;case"declined":i.onDeclined&&i.onDeclined(b),i.ignoreDeclined||(P=new Error("Aborted because of declined dependency: "+b.moduleId+" in "+b.parentId+C));break;case"unaccepted":i.onUnaccepted&&i.onUnaccepted(b),i.ignoreUnaccepted||(P=new Error("Aborted because "+u+" is not accepted"+C));break;case"accepted":i.onAccepted&&i.onAccepted(b),T=!0;break;case"disposed":i.onDisposed&&i.onDisposed(b),E=!0;break;default:throw new Error("Unexception type "+b.type)}if(P)return s("abort"),Promise.reject(P);if(T)for(u in p[u]=v[u],n(h,b.outdatedModules),b.outdatedDependencies)Object.prototype.hasOwnProperty.call(b.outdatedDependencies,u)&&(d[u]||(d[u]=[]),n(d[u],b.outdatedDependencies[u]));E&&(n(h,[b.moduleId]),p[u]=m)}var O,k,I=[];for(o=0;o<h.length;o++)u=h[o],R[u]&&R[u].hot._selfAccepted&&I.push({module:u,errorHandler:R[u].hot._selfAccepted});s("dispose"),Object.keys(D).forEach((function(e){!1===D[e]&&t(e)}));for(var x,N=h.slice();N.length>0;)if(u=N.pop(),c=R[u]){var V={},L=c.hot._disposeHandlers;for(l=0;l<L.length;l++)(r=L[l])(V);for(w[u]=V,c.hot.active=!1,delete R[u],l=0;l<c.children.length;l++){var j=R[c.children[l]];j&&(x=j.parents.indexOf(u))>=0&&j.parents.splice(x,1)}}for(u in d)if(Object.prototype.hasOwnProperty.call(d,u)&&(c=R[u]))for(k=d[u],l=0;l<k.length;l++)O=k[l],(x=c.children.indexOf(O))>=0&&c.children.splice(x,1);for(u in s("apply"),_=g,p)Object.prototype.hasOwnProperty.call(p,u)&&(e[u]=p[u]);var B=null;for(u in d)if(Object.prototype.hasOwnProperty.call(d,u)){c=R[u],k=d[u];var M=[];for(o=0;o<k.length;o++)O=k[o],r=c.hot._acceptedDependencies[O],M.indexOf(r)>=0||M.push(r);for(o=0;o<M.length;o++){r=M[o];try{r(k)}catch(e){i.onErrored&&i.onErrored({type:"accept-errored",moduleId:u,dependencyId:k[o],error:e}),i.ignoreErrored||B||(B=e)}}}for(o=0;o<I.length;o++){var F=I[o];u=F.module,S=[u];try{f(u)}catch(e){if("function"==typeof F.errorHandler)try{F.errorHandler(e)}catch(t){i.onErrored&&i.onErrored({type:"self-accept-error-handler-errored",moduleId:u,error:t,orginalError:e}),i.ignoreErrored||B||(B=t),B||(B=e)}else i.onErrored&&i.onErrored({type:"self-accept-errored",moduleId:u,error:e}),i.ignoreErrored||B||(B=e)}}return B?(s("fail"),Promise.reject(B)):(s("idle"),new Promise((function(e){e(h)})))}function f(t){if(R[t])return R[t].exports;var i=R[t]={i:t,l:!1,exports:{},hot:o(t),parents:(P=S,S=[],P),children:[]};return e[t].call(i.exports,i,i.exports,r(t)),i.l=!0,i.exports}var p=this.webpackHotUpdate;this.webpackHotUpdate=function(e,t){c(e,t),p&&p(e,t)};var m,y,v,g,b=!0,_="255595f2969a639d5f69",w={},S=[],P=[],T=[],A="idle",E=0,C=0,O={},k={},D={},R={};return f.m=e,f.c=R,f.i=function(e){return e},f.d=function(e,t,i){f.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},f.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return f.d(t,"a",t),t},f.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},f.p="",f.h=function(){return _},r(0)(f.s=0)}({"./package.json":function(e,t){e.exports={name:"oppsula",version:"1.4.4",description:"React Webpack Babel Starter Kit",main:"dist/oppsula.js",scripts:{build:"webpack --config webpack.config.js --devtool false -p","build-oppsula":"webpack --config webpack.config.js",start:"webpack-dev-server --progress --profile --colors --hot --https",lint:"eslint --ext js --ext jsx src || exit 0",dev:"webpack-dev-server  --config webpack.config.js  --hot --https",test:"export NODE_ENV=test && jest --watchAll",uploadToCdn:"node ./buildComands/uplod-to-s3.js"},repository:{type:"git",url:"https://github.com/alicoding/react-webpack-babel"},author:"Ali Al Dallal",license:"MIT",homepage:"https://github.com/alicoding/react-webpack-babel#readme",dependencies:{"babel-preset-es2015":"^6.24.1","base-64":"^0.1.0",bulma:"^0.6.1",child_process:"^1.0.2","fs-extra":"^10.0.0","gulp-s3-upload":"^1.7.0","normalize.css":"^7.0.0","string-replace-webpack-plugin":"^0.1.3"},devDependencies:{"babel-cli":"^6.26.0","babel-core":"^6.26.0","babel-jest":"^21.2.0","babel-loader":"^7.1.2","babel-plugin-module-resolver":"^3.0.0","babel-plugin-transform-class-properties":"^6.24.1","babel-plugin-transform-decorators-legacy":"^1.3.4","babel-plugin-transform-runtime":"^6.23.0","babel-preset-env":"^1.6.1","babel-preset-react":"^6.24.1","babel-runtime":"^6.26.0",eslint:"^4.11.0","eslint-plugin-jest":"^21.3.2","eslint-plugin-react":"^7.5.1","extract-text-webpack-plugin":"^3.0.2","file-loader":"^1.1.5",gulp:"^4.0.2","html-webpack-plugin":"^2.30.1",jest:"^21.2.1",jsdom:"^9.12.0",loglevel:"^1.6.0","url-loader":"^0.6.2",webpack:"^2.7.0","webpack-cleanup-plugin":"^0.5.1","webpack-dev-server":"^2.11.2"},jest:{verbose:!0,bail:!0,collectCoverage:!0,coverageDirectory:"coverage",moduleNameMapper:{"\\.(jpe?g|png|gif|eot|otf|webp|svg|ttf|woff2?|mp[34]|webm|wav|m4a|aac|oga)$":"<rootDir>/__mocks__/fileMock.js","\\.(css|less|s[ac]ss|styl)$":"<rootDir>/__mocks__/styleMock.js"},globals:{window:{}},moduleFileExtensions:["js","jsx"],moduleDirectories:["node_modules"]}}},"./src/consts.js":function(e,t,i){"use strict";e.exports={KIBANA_URL:"vidanalytics.taboola.com/putes/units-ads-analytics",SERVICES:{UNIT:"unit",PLAYER:"player"},EXTRA_PARAMS_EXCEPTIONS:["vidCurrentTime"],OPPS_PARAMETERS_MAPING:{player:{pstn:"pstn",mob:"isMobile",pv:"playerVersion",fdScore:"fdScore",abt:"ab_test",agl:"preset.level",su:"subUnitType",dtsvrRoundTripAverageDuration:"performance.dtsvrRoundTripAverageDuration",sts:"playerRepeatCount",ft:"frameType",be:"playerHasRvInQ",pt:"ab_test",width:"width",height:"height",cmDast:"auc_dast"},unit:{pstn:"pstn",mob:"isMobile",unv:"unit_version",unit_type:"unit_type",fdScore:"fdScore",abt:"abTest",agl:"preset.level",awr:"performance.dtsvrRoundTripAverageDuration",pm:"performance.performanceMeasurment",su:"subUnitType",ft:"frameType",mp:"modifiedPlacement",vstt:"isInTab",cmDast:"cmDast"}},MAX_ES_STRING_LENGTH:32766}},"./src/index.js":function(e,t,i){"use strict";var n=i("./src/oppsula.js");try{if(window.cmTag){var r=window.cmTag.config.ms||{};r.oppsula=r.oppsula||{},r.oppsula["1.4.4"]=n,window.cmTag.set("ms",r)}}catch(e){}try{window.TRC&&(window.TRC.oppsula=window.TRC.oppsula||{},window.TRC.oppsula["1.4.4"]=n)}catch(e){}e.exports={}},"./src/oppsula.js":function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=i("./src/requestManager.js"),s=i("./src/store.js"),a=i("./src/utils.js"),l=i("./src/consts.js"),c=i("./package.json").version,u=function(){function e(t,i){n(this,e);var r=this._getRedId(t)||"red_id_"+(new Date).getTime();this._initGlobalInstances();var l=window.TRC.oppsulaInstances[c],u=this;if(l.hasOwnProperty(r)&&void 0!==l[r])(u=l[r]).store.setModel(i,t);else{var d=t.get("player.urls.oppsRequest")||t.get("opps_base_path")+"/OpportunityServlet",h=t.get("player.urls.nonBllboppsRequest")||t.get("non_bllb_opps_base_path")+"/OpportunityServlet",f=t.get("sendBeacon");u.redId=r,u.opps=[],u.fireOppsInterval=null,u.stopped=!1,u.unloadCallbacks=[],u.fireOppsCallbacks=[],u.store=new s,u.unloadEventName=a.isOnIOS()?"pagehide":"beforeunload",u._setFireOppsBeforeUnload(),u.store.setModel(i,t),u.oppRequest=new o(d,f,u.store.get(i,"psthdrs")),u.nonBllbOppRequest=new o(h,f,u.store.get(i,"psthdrs")),l[r]=u}return u._setFireOppsInterval(i),l[r]}return r(e,[{key:"_initGlobalInstances",value:function(){window.TRC.hasOwnProperty("oppsulaInstances")||(window.TRC.oppsulaInstances={}),window.TRC.oppsulaInstances.hasOwnProperty(c)||(window.TRC.oppsulaInstances[c]={})}},{key:"registerCallback",value:function(e,t){this[e].push(t)}},{key:"unRegisterCallback",value:function(e,t){this[e].splice(this[e].indexOf(t),1)}},{key:"_activateCallbacks",value:function(e){for(var t=0;t<this[e].length;t++){var i=this[e][t];this[e].splice(this[e].indexOf(i),1),i()}}},{key:"_getRedId",value:function(e){if(e)return e.get("redId")||e.get("red_id")}},{key:"_addAbTests",value:function(e,t){return(e.requiredViewabilityDrawn?"!ronrv":"")+(e.moatSampling?"!mtsmp":"")+(this.store.get(t,"isReadMoreOnPage")?"!rdmr":"")}},{key:"_getDebugDataStr",value:function(e,t){if(t.setDebugDataFunc)return t.setDebugDataFunc();var i=this.store.get("debugDataFunc");return i?i():t.vpaidWrapperData&&t.vpaidWrapperData.debugData?t.vpaidWrapperData.debugData:this.store.get(e,"debugStr")||void 0}},{key:"_addExtraParams",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];for(var i in e)l.EXTRA_PARAMS_EXCEPTIONS.indexOf(i)<0&&(t[i]=e[i])}},{key:"_addCmTagParams",value:function(e,t){var i=this.store.get(e,"oppsQS")||{};Object.assign(t,i)}},{key:"_addDelayedParams",value:function(e,t,i,n){var r=this._getDelayedParams(t,i,n)||{};Object.assign(e,r)}},{key:"_getDelayedParams",value:function(e,t,i){var n=l.OPPS_PARAMETERS_MAPING[e],r=this.store.get(e,n.width),o=this.store.get(e,n.height);return{"auc-dast":this.store.get(e,n.cmDast)||void 0,sts:i.STS||this.store.get(e,n.sts),wp:i.WP,vpd:t.pubId||i.VPD,vptd:t.tagId||i.VPTD,vmt:(t.isRon?1:0)||i.VMT||0,pt:a.crc32(this.store.get(e,n.pt)||999),w:r||void 0,h:o||void 0,rv:t.requiredViewability}}},{key:"buildOppsData",value:function(e,t,i){var n=l.OPPS_PARAMETERS_MAPING[e],r=i.tagItem,o=i.debugData?i.debugData:i&&i.extraData?i.extraData.debugData:this._getDebugDataStr(e,r),s=r.lineItemStats,c=i.extraData||{},u=i.playerParams||{},d=r.vpaidWrapperData||(r.vpaidWrapper&&r.vpaidWrapper.tag?r.vpaidWrapper.tag.vpaidWrapperData:void 0),h={tms:Date.now(),st:a.getStreamType(r.rollType),sts:this.store.get(e,n.sts),rs:r.sequenceId,os:1*r.waterfallTagId+1,d:(new Date).getTime()-r.created,rst:t,dast:r.vidDast||r.dast,pstn:this.store.get(e,n.pstn)||1,dp:a.crc32(r.dp),mob:a.boolToInt(this.store.get(e,n.mob)),vstt:e===l.SERVICES.UNIT?this.store.get(e,"vstt")?1:0:a.boolToInt(!document.hidden),unv:this.store.get(e,n.unv),unt:a.crc32(this.store.get(e,n.unit_type)),abt:""+this.store.get(e,n.abt)+this._addAbTests(r,e),frd:this.store.get(e,n.fdScore),agl:this.store.get(e,n.agl),rp:d&&d.vastPrice,mty:r.mty||d&&d.mediatype,fv_t:s&&s.tries,fv_c:s&&s.conversions,fv_f:s&&s.fails,fv_fr:s&&s.failsRow,awr:this.store.get(e,n.awr),pm:this.store.get(e,n.pm),dbg:o,su:this.store.get(e,n.su),pdast:i.playerDAST,extpvid:window.TRCImpl&&window.TRCImpl.external_page_view,vpd:r.pubId,vptd:r.tagId,pv:this.store.get(e,n.pv)||999,vmt:Number(r.isRon)||0,ft:this.store.get(e,n.ft),ttv:r.timeToVimp,bovpv:r.bovpv,bovpg:r.bovpg,be:this.store.get(e,n.be)?1:0,pap:void 0!==r.pap?r.pap:"",rv:r.requiredViewability,mp:this.store.get(e,n.mp),sp:i.activeData?i.activeData.sp:void 0,prdid:void 0!==i.predictorId?i.predictorId:void 0};return this._addCmTagParams(e,h),this._addExtraParams(c,h),this._addDelayedParams(h,e,r,u),h}},{key:"send",value:function(e,t,i){if(!this.stopped){var n=this.buildOppsData(e,t,i);this._isBillableEvent(e,t)||!this.store.get(e,"cmbopps")?this.oppRequest.send(a.stringify([n]),t):this.opps.push(n)}}},{key:"_setFireOppsInterval",value:function(e){this.stopped||this.fireOppsInterval||(this.fireOpps=this._fireOpps.bind(this),this.fireOppsInterval=setInterval(this.fireOpps,this.store.get(e,"timbtopps")))}},{key:"destroy",value:function(){this.stopped||(this._activateCallbacks("unloadCallbacks"),window.removeEventListener(this.unloadEventName,this._destroy),this.fireOppsInterval=clearInterval(this.fireOppsInterval),this._fireOpps(),this.stopped=!0,this.store&&this.store.destroy(),this.store=this.fireOpps=this._destroy=void 0,window.TRC.oppsulaInstances[c][this.redId]=void 0)}},{key:"_fireOpps",value:function(){this.stopped||(this._activateCallbacks("fireOppsCallbacks"),this.opps.length>0&&this.nonBllbOppRequest.send(a.stringify(this.opps)),this.opps=[])}},{key:"_setFireOppsBeforeUnload",value:function(){this._destroy=this.destroy.bind(this),window.addEventListener(this.unloadEventName,this._destroy)}},{key:"_isBillableEvent",value:function(e,t){return this.store.getBillableEvents(e).indexOf(parseInt(t))>-1}}]),e}();e.exports=u},"./src/requestManager.js":function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0;n(this,e),this.useSendBeacon=this._isSendBeaconSupported()&&i,this.baseUrl=t,this.useSendBeacon||(this.async=null==o||o,this.withCredentials=null==s||s,this.timeout=a||5e3,this.contentType=r||"application/x-www-form-urlencoded")}return r(e,[{key:"_isSendBeaconSupported",value:function(){return!(!navigator||"function"!=typeof navigator.sendBeacon)}},{key:"_onFail",value:function(){this.gotResponse||(this.gotResponse=!0)}},{key:"send",value:function(e,t){this.useSendBeacon?this._sendBeacon(e,t):this._sendXHR(e,t)}},{key:"_sendBeacon",value:function(e,t){var i=this.baseUrl+(void 0!==t?"?rst="+t:"");navigator.sendBeacon(i,e)}},{key:"_sendXHR",value:function(e,t){if(this.baseUrl){var i=new XMLHttpRequest;return this._setHttpParams(i,e,t),this._setHttpEvents(i),i.send(e),!0}}},{key:"_setHttpParams",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=this.baseUrl+(void 0!==i?"?rst="+i:"");e.open(t?"POST":"GET",n,!0),e.withCredentials=this.withCredentials,e.setRequestHeader("Content-type",this.contentType),e.async=this.async,e.timeout=this.timeout,e.gotResponse=!1}},{key:"_setHttpEvents",value:function(e){e.addEventListener("error",this._onFail),e.addEventListener("abort",this._onFail),e.addEventListener("timeout",this._onFail),e.addEventListener("readystatechange",(function(e){if(4==this.readyState){if(this.gotResponse)return;this.gotResponse=!0}}))}}]),e}();e.exports=o},"./src/store.js":function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=(function(e){e&&e.__esModule}(i("./src/utils.js")),function(){function e(t,i){n(this,e),this.service=i,this.models={},this.data={psthdrs:"application/json",timbtopps:2e3}}return r(e,[{key:"setModel",value:function(e,t){this.models[e]=t}},{key:"get",value:function(e,t){if(t&&this.models.hasOwnProperty(e)){var i=this.models[e].get(t)||void 0;return void 0!==i?i:this._getFromData(t)}}},{key:"getBillableEvents",value:function(e){return(this.get(e,"billableEvents")||[]).concat((this.get(e,"bllblevt")||"").split(",").map((function(e){return parseInt(e)})))}},{key:"_getFromData",value:function(e){return-1===(e=e.toString()).indexOf(".")?this.data[e]:e.split(".").reduce((function(e,t){return e&&e[t]}),this.data)}},{key:"destroy",value:function(){this.models=this.data=void 0}}]),e}());e.exports=o},"./src/utils.js":function(e,t,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(e){return e&&e.__esModule?e:{default:e}}(i("./src/consts.js"));e.exports={getOppsServletBaseUrl:function(e){var t=e.get("ms_data.opps_base_path");return this.setUrlPrefix(t)+(/.*\/$/g.test(t)?"":"/")+"OpportunityServlet"},utf8Encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",i=0;i<e.length;i++){var n=e.charCodeAt(i);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t},crc32:function(e){if(!e||"string"!=typeof e)return 0;var t=void 0,i="00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D";void 0===t&&(t=0);var n=0;t^=-1;for(var r=0,o=(e=this.utf8Encode(e)).length;r<o;r++)n=255&(t^e.charCodeAt(r)),t=t>>>8^"0x"+i.substr(9*n,8);return-1^t},boolToInt:function(e){return e?1:0},assignWithoutUndefinedValues:function(e,t){for(var i in t)void 0!==t[i]&&(e[i]=t[i]);return e},setUrlPrefix:function(e){return"string"!=typeof e||0!==(e=e.replace(/^(http[s]?:|ftp:)/g,"")).indexOf("//")&&(e="//"+e),e},stringify:function(e,t){try{var i=[];return JSON.stringify(e,(function(e,t){if(null!=t&&"object"==(void 0===t?"undefined":n(t))){if(i.indexOf(t)>-1)return;i.push(t)}return t}),t)}catch(e){return""}},fireOpp:function(e){try{(new Image).src=e}catch(e){}},generateGuid:function(e,t){var i=BASE64URICHARS,n=[],r=0;for(t=t||i.length,e=e||22,r=0;r<e;r++)n[r]=i[0|Math.random()*t];return n.join("")},writeToElasticByIndex:function(e,t){var i=new XMLHttpRequest;i.open("POST","//"+r.default.KIBANA_URL,!0);var n={player_id:"123456",created:(new Date).toISOString(),event:e,timestamp:(new Date).toISOString()};Object.assign(n,t),i.send(this.stringify(this.reduceESdataSize(n)))},reduceESdataSize:function(e){return this.objectSizeCalculator(e,!0),e},objectSizeCalculator:function(e,t){var i=[];return function e(o,s,a){var l=0;if(void 0===o)l=0;else if("boolean"==typeof o)l=4;else if("string"==typeof o)t&&o.length>r.default.MAX_ES_STRING_LENGTH&&(o=s[a]="STRING TOO LONG"),l=2*o.length;else if("number"==typeof o)l=8;else if("function"==typeof o)try{l=2*o.toString().length}catch(e){}else if("object"===(void 0===o?"undefined":n(o))&&-1===i.indexOf(o))for(var a in i[i.length]=o,o)l+=8,l+=e(o[a],o,a);return l}(e,e,null)},flattenParams:function(e){var t=[];for(var i in e)t.push(i+"="+e[i]);return t.join("&")},isOnIOS:function(){return navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPhone/i)},getStreamType:function(e){var t=0,i={"pre-roll":0,preroll:0,"mid-roll":-1,midroll:-1,"post-roll":-2,postroll:-2};return i.hasOwnProperty(e)&&(t=i[e]),t}}},0:function(e,t,i){e.exports=i("./src/index.js")}})},5666:function(e){var t=function(e){"use strict";var t,i=Object.prototype,n=i.hasOwnProperty,r=Object.defineProperty||function(e,t,i){e[t]=i.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,i){return e[t]=i}}function u(e,t,i,n){var o=t&&t.prototype instanceof v?t:v,s=Object.create(o.prototype),a=new D(n||[]);return r(s,"_invoke",{value:E(e,i,a)}),s}function d(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var h="suspendedStart",f="suspendedYield",p="executing",m="completed",y={};function v(){}function g(){}function b(){}var _={};c(_,s,(function(){return this}));var w=Object.getPrototypeOf,S=w&&w(w(R([])));S&&S!==i&&n.call(S,s)&&(_=S);var P=b.prototype=v.prototype=Object.create(_);function T(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function i(r,o,s,a){var l=d(e[r],e,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==typeof u&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){i("next",e,s,a)}),(function(e){i("throw",e,s,a)})):t.resolve(u).then((function(e){c.value=e,s(c)}),(function(e){return i("throw",e,s,a)}))}a(l.arg)}var o;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return o=o?o.then(r,r):r()}})}function E(e,t,i){var n=h;return function(r,o){if(n===p)throw new Error("Generator is already running");if(n===m){if("throw"===r)throw o;return I()}for(i.method=r,i.arg=o;;){var s=i.delegate;if(s){var a=C(s,i);if(a){if(a===y)continue;return a}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===h)throw n=m,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=p;var l=d(e,t,i);if("normal"===l.type){if(n=i.done?m:f,l.arg===y)continue;return{value:l.arg,done:i.done}}"throw"===l.type&&(n=m,i.method="throw",i.arg=l.arg)}}}function C(e,i){var n=i.method,r=e.iterator[n];if(r===t)return i.delegate=null,"throw"===n&&e.iterator.return&&(i.method="return",i.arg=t,C(e,i),"throw"===i.method)||"return"!==n&&(i.method="throw",i.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var o=d(r,e.iterator,i.arg);if("throw"===o.type)return i.method="throw",i.arg=o.arg,i.delegate=null,y;var s=o.arg;return s?s.done?(i[e.resultName]=s.value,i.next=e.nextLoc,"return"!==i.method&&(i.method="next",i.arg=t),i.delegate=null,y):s:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,y)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function R(e){if(e){var i=e[s];if(i)return i.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function i(){for(;++r<e.length;)if(n.call(e,r))return i.value=e[r],i.done=!1,i;return i.value=t,i.done=!0,i};return o.next=o}}return{next:I}}function I(){return{value:t,done:!0}}return g.prototype=b,r(P,"constructor",{value:b,configurable:!0}),r(b,"constructor",{value:g,configurable:!0}),g.displayName=c(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c(e,l,"GeneratorFunction")),e.prototype=Object.create(P),e},e.awrap=function(e){return{__await:e}},T(A.prototype),c(A.prototype,a,(function(){return this})),e.AsyncIterator=A,e.async=function(t,i,n,r,o){void 0===o&&(o=Promise);var s=new A(u(t,i,n,r),o);return e.isGeneratorFunction(i)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},T(P),c(P,l,"Generator"),c(P,s,(function(){return this})),c(P,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),i=[];for(var n in t)i.push(n);return i.reverse(),function e(){for(;i.length;){var n=i.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=R,D.prototype={constructor:D,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var i in this)"t"===i.charAt(0)&&n.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var i=this;function r(n,r){return a.type="throw",a.arg=e,i.next=n,r&&(i.method="next",i.arg=t),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var l=n.call(s,"catchLoc"),c=n.call(s,"finallyLoc");if(l&&c){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),k(i),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var n=i.completion;if("throw"===n.type){var r=n.arg;k(i)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,i,n){return this.delegate={iterator:R(e),resultName:i,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},7418:function(e,t,i){var n={"./AdTypeConfig":701,"./AdTypeConfig.js":701,"./AdTypeTranslator":914,"./AdTypeTranslator.js":914,"./Adjacency/DefaultAdjacencyConfig":5449,"./Adjacency/DefaultAdjacencyConfig.js":5449,"./Adjacency/units/AdjacFeedManagerConfig":8699,"./Adjacency/units/AdjacFeedManagerConfig.js":8699,"./Adjacency/units/AdjacencyRecoReelWidgetConfig":256,"./Adjacency/units/AdjacencyRecoReelWidgetConfig.js":256,"./Adjacency/units/AdjacencyWidgetItemConfig":1152,"./Adjacency/units/AdjacencyWidgetItemConfig.js":1152,"./Hip/DefaultHipConfig":3912,"./Hip/DefaultHipConfig.js":3912,"./Hip/units/HipFeedManagerConfig":4279,"./Hip/units/HipFeedManagerConfig.js":4279,"./Replayable/DefaultReplayableConfig":7613,"./Replayable/DefaultReplayableConfig.js":7613,"./Replayable/units/ReplayableAdFeedManagerConfig":7723,"./Replayable/units/ReplayableAdFeedManagerConfig.js":7723,"./Replayable/units/ReplayableAdInlineConfig":3353,"./Replayable/units/ReplayableAdInlineConfig.js":3353,"./Replayable/units/ReplayableAdWidgetItemConfig":6333,"./Replayable/units/ReplayableAdWidgetItemConfig.js":6333,"./SingleAd/DefaultSingleAdConfig":7507,"./SingleAd/DefaultSingleAdConfig.js":7507,"./SingleAd/units/SingleAdFeedManagerConfig":9579,"./SingleAd/units/SingleAdFeedManagerConfig.js":9579,"./SingleAd/units/SingleAdInlineConfig":3205,"./SingleAd/units/SingleAdInlineConfig.js":3205,"./SingleAd/units/SingleAdSliderConfig":7642,"./SingleAd/units/SingleAdSliderConfig.js":7642,"./SingleAd/units/SingleAdWidgetItemConfig":6505,"./SingleAd/units/SingleAdWidgetItemConfig.js":6505};function r(e){var t=o(e);return i(t)}function o(e){if(!i.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=o,e.exports=r,r.id=7418},1999:function(e,t,i){e.exports=function(){var e="1.13.6",t="object"==typeof self&&self.self===self&&self||"object"==typeof i.g&&i.g.global===i.g&&i.g||Function("return this")()||{},n=Array.prototype,r=Object.prototype,o="undefined"!=typeof Symbol?Symbol.prototype:null,s=n.push,a=n.slice,l=r.toString,c=r.hasOwnProperty,u="undefined"!=typeof ArrayBuffer,d="undefined"!=typeof DataView,h=Array.isArray,f=Object.keys,p=Object.create,m=u&&ArrayBuffer.isView,y=isNaN,v=isFinite,g=!{toString:null}.propertyIsEnumerable("toString"),b=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],_=Math.pow(2,53)-1;function w(e,t){return t=null==t?e.length-1:+t,function(){for(var i=Math.max(arguments.length-t,0),n=Array(i),r=0;r<i;r++)n[r]=arguments[r+t];switch(t){case 0:return e.call(this,n);case 1:return e.call(this,arguments[0],n);case 2:return e.call(this,arguments[0],arguments[1],n)}var o=Array(t+1);for(r=0;r<t;r++)o[r]=arguments[r];return o[t]=n,e.apply(this,o)}}function S(e){var t=typeof e;return"function"===t||"object"===t&&!!e}function P(e){return null===e}function T(e){return void 0===e}function A(e){return!0===e||!1===e||"[object Boolean]"===l.call(e)}function E(e){return!(!e||1!==e.nodeType)}function C(e){var t="[object "+e+"]";return function(e){return l.call(e)===t}}var O=C("String"),k=C("Number"),D=C("Date"),R=C("RegExp"),I=C("Error"),x=C("Symbol"),N=C("ArrayBuffer"),V=C("Function"),L=t.document&&t.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof L&&(V=function(e){return"function"==typeof e||!1});var j=V,B=C("Object"),M=d&&B(new DataView(new ArrayBuffer(8))),F="undefined"!=typeof Map&&B(new Map),U=C("DataView");function W(e){return null!=e&&j(e.getInt8)&&N(e.buffer)}var H=M?W:U,z=h||C("Array");function $(e,t){return null!=e&&c.call(e,t)}var G=C("Arguments");!function(){G(arguments)||(G=function(e){return $(e,"callee")})}();var q=G;function Y(e){return!x(e)&&v(e)&&!isNaN(parseFloat(e))}function K(e){return k(e)&&y(e)}function Q(e){return function(){return e}}function Z(e){return function(t){var i=e(t);return"number"==typeof i&&i>=0&&i<=_}}function X(e){return function(t){return null==t?void 0:t[e]}}var J=X("byteLength"),ee=Z(J),te=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function ie(e){return m?m(e)&&!H(e):ee(e)&&te.test(l.call(e))}var ne=u?ie:Q(!1),re=X("length");function oe(e){for(var t={},i=e.length,n=0;n<i;++n)t[e[n]]=!0;return{contains:function(e){return!0===t[e]},push:function(i){return t[i]=!0,e.push(i)}}}function se(e,t){t=oe(t);var i=b.length,n=e.constructor,o=j(n)&&n.prototype||r,s="constructor";for($(e,s)&&!t.contains(s)&&t.push(s);i--;)(s=b[i])in e&&e[s]!==o[s]&&!t.contains(s)&&t.push(s)}function ae(e){if(!S(e))return[];if(f)return f(e);var t=[];for(var i in e)$(e,i)&&t.push(i);return g&&se(e,t),t}function le(e){if(null==e)return!0;var t=re(e);return"number"==typeof t&&(z(e)||O(e)||q(e))?0===t:0===re(ae(e))}function ce(e,t){var i=ae(t),n=i.length;if(null==e)return!n;for(var r=Object(e),o=0;o<n;o++){var s=i[o];if(t[s]!==r[s]||!(s in r))return!1}return!0}function ue(e){return e instanceof ue?e:this instanceof ue?void(this._wrapped=e):new ue(e)}function de(e){return new Uint8Array(e.buffer||e,e.byteOffset||0,J(e))}ue.VERSION=e,ue.prototype.value=function(){return this._wrapped},ue.prototype.valueOf=ue.prototype.toJSON=ue.prototype.value,ue.prototype.toString=function(){return String(this._wrapped)};var he="[object DataView]";function fe(e,t,i,n){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var r=typeof e;return("function"===r||"object"===r||"object"==typeof t)&&pe(e,t,i,n)}function pe(e,t,i,n){e instanceof ue&&(e=e._wrapped),t instanceof ue&&(t=t._wrapped);var r=l.call(e);if(r!==l.call(t))return!1;if(M&&"[object Object]"==r&&H(e)){if(!H(t))return!1;r=he}switch(r){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return o.valueOf.call(e)===o.valueOf.call(t);case"[object ArrayBuffer]":case he:return pe(de(e),de(t),i,n)}var s="[object Array]"===r;if(!s&&ne(e)){if(J(e)!==J(t))return!1;if(e.buffer===t.buffer&&e.byteOffset===t.byteOffset)return!0;s=!0}if(!s){if("object"!=typeof e||"object"!=typeof t)return!1;var a=e.constructor,c=t.constructor;if(a!==c&&!(j(a)&&a instanceof a&&j(c)&&c instanceof c)&&"constructor"in e&&"constructor"in t)return!1}n=n||[];for(var u=(i=i||[]).length;u--;)if(i[u]===e)return n[u]===t;if(i.push(e),n.push(t),s){if((u=e.length)!==t.length)return!1;for(;u--;)if(!fe(e[u],t[u],i,n))return!1}else{var d,h=ae(e);if(u=h.length,ae(t).length!==u)return!1;for(;u--;)if(!$(t,d=h[u])||!fe(e[d],t[d],i,n))return!1}return i.pop(),n.pop(),!0}function me(e,t){return fe(e,t)}function ye(e){if(!S(e))return[];var t=[];for(var i in e)t.push(i);return g&&se(e,t),t}function ve(e){var t=re(e);return function(i){if(null==i)return!1;var n=ye(i);if(re(n))return!1;for(var r=0;r<t;r++)if(!j(i[e[r]]))return!1;return e!==Pe||!j(i[ge])}}var ge="forEach",be="has",_e=["clear","delete"],we=["get",be,"set"],Se=_e.concat(ge,we),Pe=_e.concat(we),Te=["add"].concat(_e,ge,be),Ae=F?ve(Se):C("Map"),Ee=F?ve(Pe):C("WeakMap"),Ce=F?ve(Te):C("Set"),Oe=C("WeakSet");function ke(e){for(var t=ae(e),i=t.length,n=Array(i),r=0;r<i;r++)n[r]=e[t[r]];return n}function De(e){for(var t=ae(e),i=t.length,n=Array(i),r=0;r<i;r++)n[r]=[t[r],e[t[r]]];return n}function Re(e){for(var t={},i=ae(e),n=0,r=i.length;n<r;n++)t[e[i[n]]]=i[n];return t}function Ie(e){var t=[];for(var i in e)j(e[i])&&t.push(i);return t.sort()}function xe(e,t){return function(i){var n=arguments.length;if(t&&(i=Object(i)),n<2||null==i)return i;for(var r=1;r<n;r++)for(var o=arguments[r],s=e(o),a=s.length,l=0;l<a;l++){var c=s[l];t&&void 0!==i[c]||(i[c]=o[c])}return i}}var Ne=xe(ye),Ve=xe(ae),Le=xe(ye,!0);function je(){return function(){}}function Be(e){if(!S(e))return{};if(p)return p(e);var t=je();t.prototype=e;var i=new t;return t.prototype=null,i}function Me(e,t){var i=Be(e);return t&&Ve(i,t),i}function Fe(e){return S(e)?z(e)?e.slice():Ne({},e):e}function Ue(e,t){return t(e),e}function We(e){return z(e)?e:[e]}function He(e){return ue.toPath(e)}function ze(e,t){for(var i=t.length,n=0;n<i;n++){if(null==e)return;e=e[t[n]]}return i?e:void 0}function $e(e,t,i){var n=ze(e,He(t));return T(n)?i:n}function Ge(e,t){for(var i=(t=He(t)).length,n=0;n<i;n++){var r=t[n];if(!$(e,r))return!1;e=e[r]}return!!i}function qe(e){return e}function Ye(e){return e=Ve({},e),function(t){return ce(t,e)}}function Ke(e){return e=He(e),function(t){return ze(t,e)}}function Qe(e,t,i){if(void 0===t)return e;switch(null==i?3:i){case 1:return function(i){return e.call(t,i)};case 3:return function(i,n,r){return e.call(t,i,n,r)};case 4:return function(i,n,r,o){return e.call(t,i,n,r,o)}}return function(){return e.apply(t,arguments)}}function Ze(e,t,i){return null==e?qe:j(e)?Qe(e,t,i):S(e)&&!z(e)?Ye(e):Ke(e)}function Xe(e,t){return Ze(e,t,1/0)}function Je(e,t,i){return ue.iteratee!==Xe?ue.iteratee(e,t):Ze(e,t,i)}function et(e,t,i){t=Je(t,i);for(var n=ae(e),r=n.length,o={},s=0;s<r;s++){var a=n[s];o[a]=t(e[a],a,e)}return o}function tt(){}function it(e){return null==e?tt:function(t){return $e(e,t)}}function nt(e,t,i){var n=Array(Math.max(0,e));t=Qe(t,i,1);for(var r=0;r<e;r++)n[r]=t(r);return n}function rt(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))}ue.toPath=We,ue.iteratee=Xe;var ot=Date.now||function(){return(new Date).getTime()};function st(e){var t=function(t){return e[t]},i="(?:"+ae(e).join("|")+")",n=RegExp(i),r=RegExp(i,"g");return function(e){return e=null==e?"":""+e,n.test(e)?e.replace(r,t):e}}var at={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},lt=st(at),ct=st(Re(at)),ut=ue.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},dt=/(.)^/,ht={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},ft=/\\|'|\r|\n|\u2028|\u2029/g;function pt(e){return"\\"+ht[e]}var mt=/^\s*(\w|\$)+\s*$/;function yt(e,t,i){!t&&i&&(t=i),t=Le({},t,ue.templateSettings);var n=RegExp([(t.escape||dt).source,(t.interpolate||dt).source,(t.evaluate||dt).source].join("|")+"|$","g"),r=0,o="__p+='";e.replace(n,(function(t,i,n,s,a){return o+=e.slice(r,a).replace(ft,pt),r=a+t.length,i?o+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'":n?o+="'+\n((__t=("+n+"))==null?'':__t)+\n'":s&&(o+="';\n"+s+"\n__p+='"),t})),o+="';\n";var s,a=t.variable;if(a){if(!mt.test(a))throw new Error("variable is not a bare identifier: "+a)}else o="with(obj||{}){\n"+o+"}\n",a="obj";o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{s=new Function(a,"_",o)}catch(e){throw e.source=o,e}var l=function(e){return s.call(this,e,ue)};return l.source="function("+a+"){\n"+o+"}",l}function vt(e,t,i){var n=(t=He(t)).length;if(!n)return j(i)?i.call(e):i;for(var r=0;r<n;r++){var o=null==e?void 0:e[t[r]];void 0===o&&(o=i,r=n),e=j(o)?o.call(e):o}return e}var gt=0;function bt(e){var t=++gt+"";return e?e+t:t}function _t(e){var t=ue(e);return t._chain=!0,t}function wt(e,t,i,n,r){if(!(n instanceof t))return e.apply(i,r);var o=Be(e.prototype),s=e.apply(o,r);return S(s)?s:o}var St=w((function(e,t){var i=St.placeholder,n=function(){for(var r=0,o=t.length,s=Array(o),a=0;a<o;a++)s[a]=t[a]===i?arguments[r++]:t[a];for(;r<arguments.length;)s.push(arguments[r++]);return wt(e,n,this,this,s)};return n}));St.placeholder=ue;var Pt=w((function(e,t,i){if(!j(e))throw new TypeError("Bind must be called on a function");var n=w((function(r){return wt(e,n,t,this,i.concat(r))}));return n})),Tt=Z(re);function At(e,t,i,n){if(n=n||[],t||0===t){if(t<=0)return n.concat(e)}else t=1/0;for(var r=n.length,o=0,s=re(e);o<s;o++){var a=e[o];if(Tt(a)&&(z(a)||q(a)))if(t>1)At(a,t-1,i,n),r=n.length;else for(var l=0,c=a.length;l<c;)n[r++]=a[l++];else i||(n[r++]=a)}return n}var Et=w((function(e,t){var i=(t=At(t,!1,!1)).length;if(i<1)throw new Error("bindAll must be passed function names");for(;i--;){var n=t[i];e[n]=Pt(e[n],e)}return e}));function Ct(e,t){var i=function(n){var r=i.cache,o=""+(t?t.apply(this,arguments):n);return $(r,o)||(r[o]=e.apply(this,arguments)),r[o]};return i.cache={},i}var Ot=w((function(e,t,i){return setTimeout((function(){return e.apply(null,i)}),t)})),kt=St(Ot,ue,1);function Dt(e,t,i){var n,r,o,s,a=0;i||(i={});var l=function(){a=!1===i.leading?0:ot(),n=null,s=e.apply(r,o),n||(r=o=null)},c=function(){var c=ot();a||!1!==i.leading||(a=c);var u=t-(c-a);return r=this,o=arguments,u<=0||u>t?(n&&(clearTimeout(n),n=null),a=c,s=e.apply(r,o),n||(r=o=null)):n||!1===i.trailing||(n=setTimeout(l,u)),s};return c.cancel=function(){clearTimeout(n),a=0,n=r=o=null},c}function Rt(e,t,i){var n,r,o,s,a,l=function(){var c=ot()-r;t>c?n=setTimeout(l,t-c):(n=null,i||(s=e.apply(a,o)),n||(o=a=null))},c=w((function(c){return a=this,o=c,r=ot(),n||(n=setTimeout(l,t),i&&(s=e.apply(a,o))),s}));return c.cancel=function(){clearTimeout(n),n=o=a=null},c}function It(e,t){return St(t,e)}function xt(e){return function(){return!e.apply(this,arguments)}}function Nt(){var e=arguments,t=e.length-1;return function(){for(var i=t,n=e[t].apply(this,arguments);i--;)n=e[i].call(this,n);return n}}function Vt(e,t){return function(){if(--e<1)return t.apply(this,arguments)}}function Lt(e,t){var i;return function(){return--e>0&&(i=t.apply(this,arguments)),e<=1&&(t=null),i}}var jt=St(Lt,2);function Bt(e,t,i){t=Je(t,i);for(var n,r=ae(e),o=0,s=r.length;o<s;o++)if(t(e[n=r[o]],n,e))return n}function Mt(e){return function(t,i,n){i=Je(i,n);for(var r=re(t),o=e>0?0:r-1;o>=0&&o<r;o+=e)if(i(t[o],o,t))return o;return-1}}var Ft=Mt(1),Ut=Mt(-1);function Wt(e,t,i,n){for(var r=(i=Je(i,n,1))(t),o=0,s=re(e);o<s;){var a=Math.floor((o+s)/2);i(e[a])<r?o=a+1:s=a}return o}function Ht(e,t,i){return function(n,r,o){var s=0,l=re(n);if("number"==typeof o)e>0?s=o>=0?o:Math.max(o+l,s):l=o>=0?Math.min(o+1,l):o+l+1;else if(i&&o&&l)return n[o=i(n,r)]===r?o:-1;if(r!=r)return(o=t(a.call(n,s,l),K))>=0?o+s:-1;for(o=e>0?s:l-1;o>=0&&o<l;o+=e)if(n[o]===r)return o;return-1}}var zt=Ht(1,Ft,Wt),$t=Ht(-1,Ut);function Gt(e,t,i){var n=(Tt(e)?Ft:Bt)(e,t,i);if(void 0!==n&&-1!==n)return e[n]}function qt(e,t){return Gt(e,Ye(t))}function Yt(e,t,i){var n,r;if(t=Qe(t,i),Tt(e))for(n=0,r=e.length;n<r;n++)t(e[n],n,e);else{var o=ae(e);for(n=0,r=o.length;n<r;n++)t(e[o[n]],o[n],e)}return e}function Kt(e,t,i){t=Je(t,i);for(var n=!Tt(e)&&ae(e),r=(n||e).length,o=Array(r),s=0;s<r;s++){var a=n?n[s]:s;o[s]=t(e[a],a,e)}return o}function Qt(e){var t=function(t,i,n,r){var o=!Tt(t)&&ae(t),s=(o||t).length,a=e>0?0:s-1;for(r||(n=t[o?o[a]:a],a+=e);a>=0&&a<s;a+=e){var l=o?o[a]:a;n=i(n,t[l],l,t)}return n};return function(e,i,n,r){var o=arguments.length>=3;return t(e,Qe(i,r,4),n,o)}}var Zt=Qt(1),Xt=Qt(-1);function Jt(e,t,i){var n=[];return t=Je(t,i),Yt(e,(function(e,i,r){t(e,i,r)&&n.push(e)})),n}function ei(e,t,i){return Jt(e,xt(Je(t)),i)}function ti(e,t,i){t=Je(t,i);for(var n=!Tt(e)&&ae(e),r=(n||e).length,o=0;o<r;o++){var s=n?n[o]:o;if(!t(e[s],s,e))return!1}return!0}function ii(e,t,i){t=Je(t,i);for(var n=!Tt(e)&&ae(e),r=(n||e).length,o=0;o<r;o++){var s=n?n[o]:o;if(t(e[s],s,e))return!0}return!1}function ni(e,t,i,n){return Tt(e)||(e=ke(e)),("number"!=typeof i||n)&&(i=0),zt(e,t,i)>=0}var ri=w((function(e,t,i){var n,r;return j(t)?r=t:(t=He(t),n=t.slice(0,-1),t=t[t.length-1]),Kt(e,(function(e){var o=r;if(!o){if(n&&n.length&&(e=ze(e,n)),null==e)return;o=e[t]}return null==o?o:o.apply(e,i)}))}));function oi(e,t){return Kt(e,Ke(t))}function si(e,t){return Jt(e,Ye(t))}function ai(e,t,i){var n,r,o=-1/0,s=-1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var a=0,l=(e=Tt(e)?e:ke(e)).length;a<l;a++)null!=(n=e[a])&&n>o&&(o=n);else t=Je(t,i),Yt(e,(function(e,i,n){((r=t(e,i,n))>s||r===-1/0&&o===-1/0)&&(o=e,s=r)}));return o}function li(e,t,i){var n,r,o=1/0,s=1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var a=0,l=(e=Tt(e)?e:ke(e)).length;a<l;a++)null!=(n=e[a])&&n<o&&(o=n);else t=Je(t,i),Yt(e,(function(e,i,n){((r=t(e,i,n))<s||r===1/0&&o===1/0)&&(o=e,s=r)}));return o}var ci=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function ui(e){return e?z(e)?a.call(e):O(e)?e.match(ci):Tt(e)?Kt(e,qe):ke(e):[]}function di(e,t,i){if(null==t||i)return Tt(e)||(e=ke(e)),e[rt(e.length-1)];var n=ui(e),r=re(n);t=Math.max(Math.min(t,r),0);for(var o=r-1,s=0;s<t;s++){var a=rt(s,o),l=n[s];n[s]=n[a],n[a]=l}return n.slice(0,t)}function hi(e){return di(e,1/0)}function fi(e,t,i){var n=0;return t=Je(t,i),oi(Kt(e,(function(e,i,r){return{value:e,index:n++,criteria:t(e,i,r)}})).sort((function(e,t){var i=e.criteria,n=t.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(i<n||void 0===n)return-1}return e.index-t.index})),"value")}function pi(e,t){return function(i,n,r){var o=t?[[],[]]:{};return n=Je(n,r),Yt(i,(function(t,r){var s=n(t,r,i);e(o,t,s)})),o}}var mi=pi((function(e,t,i){$(e,i)?e[i].push(t):e[i]=[t]})),yi=pi((function(e,t,i){e[i]=t})),vi=pi((function(e,t,i){$(e,i)?e[i]++:e[i]=1})),gi=pi((function(e,t,i){e[i?0:1].push(t)}),!0);function bi(e){return null==e?0:Tt(e)?e.length:ae(e).length}function _i(e,t,i){return t in i}var wi=w((function(e,t){var i={},n=t[0];if(null==e)return i;j(n)?(t.length>1&&(n=Qe(n,t[1])),t=ye(e)):(n=_i,t=At(t,!1,!1),e=Object(e));for(var r=0,o=t.length;r<o;r++){var s=t[r],a=e[s];n(a,s,e)&&(i[s]=a)}return i})),Si=w((function(e,t){var i,n=t[0];return j(n)?(n=xt(n),t.length>1&&(i=t[1])):(t=Kt(At(t,!1,!1),String),n=function(e,i){return!ni(t,i)}),wi(e,n,i)}));function Pi(e,t,i){return a.call(e,0,Math.max(0,e.length-(null==t||i?1:t)))}function Ti(e,t,i){return null==e||e.length<1?null==t||i?void 0:[]:null==t||i?e[0]:Pi(e,e.length-t)}function Ai(e,t,i){return a.call(e,null==t||i?1:t)}function Ei(e,t,i){return null==e||e.length<1?null==t||i?void 0:[]:null==t||i?e[e.length-1]:Ai(e,Math.max(0,e.length-t))}function Ci(e){return Jt(e,Boolean)}function Oi(e,t){return At(e,t,!1)}var ki=w((function(e,t){return t=At(t,!0,!0),Jt(e,(function(e){return!ni(t,e)}))})),Di=w((function(e,t){return ki(e,t)}));function Ri(e,t,i,n){A(t)||(n=i,i=t,t=!1),null!=i&&(i=Je(i,n));for(var r=[],o=[],s=0,a=re(e);s<a;s++){var l=e[s],c=i?i(l,s,e):l;t&&!i?(s&&o===c||r.push(l),o=c):i?ni(o,c)||(o.push(c),r.push(l)):ni(r,l)||r.push(l)}return r}var Ii=w((function(e){return Ri(At(e,!0,!0))}));function xi(e){for(var t=[],i=arguments.length,n=0,r=re(e);n<r;n++){var o=e[n];if(!ni(t,o)){var s;for(s=1;s<i&&ni(arguments[s],o);s++);s===i&&t.push(o)}}return t}function Ni(e){for(var t=e&&ai(e,re).length||0,i=Array(t),n=0;n<t;n++)i[n]=oi(e,n);return i}var Vi=w(Ni);function Li(e,t){for(var i={},n=0,r=re(e);n<r;n++)t?i[e[n]]=t[n]:i[e[n][0]]=e[n][1];return i}function ji(e,t,i){null==t&&(t=e||0,e=0),i||(i=t<e?-1:1);for(var n=Math.max(Math.ceil((t-e)/i),0),r=Array(n),o=0;o<n;o++,e+=i)r[o]=e;return r}function Bi(e,t){if(null==t||t<1)return[];for(var i=[],n=0,r=e.length;n<r;)i.push(a.call(e,n,n+=t));return i}function Mi(e,t){return e._chain?ue(t).chain():t}function Fi(e){return Yt(Ie(e),(function(t){var i=ue[t]=e[t];ue.prototype[t]=function(){var e=[this._wrapped];return s.apply(e,arguments),Mi(this,i.apply(ue,e))}})),ue}Yt(["pop","push","reverse","shift","sort","splice","unshift"],(function(e){var t=n[e];ue.prototype[e]=function(){var i=this._wrapped;return null!=i&&(t.apply(i,arguments),"shift"!==e&&"splice"!==e||0!==i.length||delete i[0]),Mi(this,i)}})),Yt(["concat","join","slice"],(function(e){var t=n[e];ue.prototype[e]=function(){var e=this._wrapped;return null!=e&&(e=t.apply(e,arguments)),Mi(this,e)}}));var Ui=Fi({__proto__:null,VERSION:e,restArguments:w,isObject:S,isNull:P,isUndefined:T,isBoolean:A,isElement:E,isString:O,isNumber:k,isDate:D,isRegExp:R,isError:I,isSymbol:x,isArrayBuffer:N,isDataView:H,isArray:z,isFunction:j,isArguments:q,isFinite:Y,isNaN:K,isTypedArray:ne,isEmpty:le,isMatch:ce,isEqual:me,isMap:Ae,isWeakMap:Ee,isSet:Ce,isWeakSet:Oe,keys:ae,allKeys:ye,values:ke,pairs:De,invert:Re,functions:Ie,methods:Ie,extend:Ne,extendOwn:Ve,assign:Ve,defaults:Le,create:Me,clone:Fe,tap:Ue,get:$e,has:Ge,mapObject:et,identity:qe,constant:Q,noop:tt,toPath:We,property:Ke,propertyOf:it,matcher:Ye,matches:Ye,times:nt,random:rt,now:ot,escape:lt,unescape:ct,templateSettings:ut,template:yt,result:vt,uniqueId:bt,chain:_t,iteratee:Xe,partial:St,bind:Pt,bindAll:Et,memoize:Ct,delay:Ot,defer:kt,throttle:Dt,debounce:Rt,wrap:It,negate:xt,compose:Nt,after:Vt,before:Lt,once:jt,findKey:Bt,findIndex:Ft,findLastIndex:Ut,sortedIndex:Wt,indexOf:zt,lastIndexOf:$t,find:Gt,detect:Gt,findWhere:qt,each:Yt,forEach:Yt,map:Kt,collect:Kt,reduce:Zt,foldl:Zt,inject:Zt,reduceRight:Xt,foldr:Xt,filter:Jt,select:Jt,reject:ei,every:ti,all:ti,some:ii,any:ii,contains:ni,includes:ni,include:ni,invoke:ri,pluck:oi,where:si,max:ai,min:li,shuffle:hi,sample:di,sortBy:fi,groupBy:mi,indexBy:yi,countBy:vi,partition:gi,toArray:ui,size:bi,pick:wi,omit:Si,first:Ti,head:Ti,take:Ti,initial:Pi,last:Ei,rest:Ai,tail:Ai,drop:Ai,compact:Ci,flatten:Oi,without:Di,uniq:Ri,unique:Ri,union:Ii,intersection:xi,difference:ki,unzip:Ni,transpose:Ni,zip:Vi,object:Li,range:ji,chunk:Bi,mixin:Fi,default:ue});return Ui._=Ui,Ui}()}},t={};function i(n){var r=t[n];if(void 0!==r)return r.exports;var o=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.loaded=!0,o.exports}i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,{a:t}),t},i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.hmd=function(e){return(e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){"use strict";var e=i(2130),t=i.n(e),n=i(2447),r=i(5545),o=i(9831),s=i.n(o);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function l(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if("object"!==a(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===a(o)?o:String(o)),n)}var r,o}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=d(e);if(t){var r=d(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return function(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,i)}}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}var h=i(1999),f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(a,e);var i,n,o,s=u(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=s.call(this,e.model)).model=e.model,t.onPredict=e.onPredict,t.adProperties=e.adProperties,t.onPredictCallback=e.onPredictCallback,t.currentKey=0,t.log=new r.Z({unitType:t.model.get("unitType"),className:"basePredictService",version:t.model.get("version"),isDebug:t.model.get("isDebug")}),t._bindEvents(),t}return i=a,(n=[{key:"_bindEvents",value:function(){}},{key:"_setCuerrentKey",value:function(e){this.currentKey=h.last(e.split(".")),this.model.set("adsManagerLastPredictKey",this.currentKey)}},{key:"_predicted",value:function(e){if(!this.model.get("isGetRv1OnlyForEligible.isActive")||e!=t().RV_TYPES.RV||this.model.get("isEligibleToPlay")){if(this.model.set("lastPredictPoint",e),this.model.set("lastPredictPath",this.predictPath),this.model.get(this.predictPath+".isStartWF")&&this.startWf&&(this.log.info("startWF predicted"),this.startWf()),this._checkIsGet1OnlyOnAdLoaded()&&parseInt(e)===t().RV_TYPES.RV&&!this.model.get("playerHasRvInQ"))return this.log.warning("no rv=1 in adLoaded skipping predict"),void this.model.set("isSkippedDistancePredict",!0);this.predictPath&&!this.model.get(this.predictPath+".isActive")||(this._logPredict(e),this.onPredict(e,this.log.className,this.adProperties))}else this.model.get("isGetRv1OnlyForEligible.delayPrediction")&&this._delayRvPredict(e)}},{key:"_checkIsGet1OnlyOnAdLoaded",value:function(){var e=this.model.get("predictors.isGet1OnlyAfterAdLoaded");return this.predictPath&&void 0!==this.model.get("".concat(this.predictPath,".isGet1OnlyAfterAdLoaded"))&&(e=this.model.get("".concat(this.predictPath,".isGet1OnlyAfterAdLoaded"))),e}},{key:"_logPredict",value:function(e){var t="predicted with key: "+e;this.adProperties?this.log.info(t+" with properties: ",this.adProperties):this.log.info(t)}},{key:"_delayRvPredict",value:function(e){this.delayedPredictPointKey=e,this.delayStartTimeStamp=Date.now(),this.model.set("delayRvPredict",t().PREDICT_NAMES[this._getPredictName()]),this.createStateHandlers([{event:"isEligibleToPlay:true",funcName:"_predictOnDelayRvPredict",isListenOnce:!0}])}},{key:"_predictOnDelayRvPredict",value:function(){this.model.set("executeDelayedRvPredict",{name:t().PREDICT_NAMES[this._getPredictName()],time:Date.now()-this.delayStartTimeStamp}),this._predicted(this.delayedPredictPointKey)}},{key:"_getPredictName",value:function(){return this.predictPath.split(".")[1]}}])&&l(i.prototype,n),o&&l(i,o),Object.defineProperty(i,"prototype",{writable:!1}),a}(n.O),p=f;function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function y(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if("object"!==m(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===m(o)?o:String(o)),n)}var r,o}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=b(e);if(t){var r=b(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return function(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,i)}}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(s,e);var t,i,n,o=g(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=o.call(this,e)).log=new r.Z({unitType:t.model.get("unitType"),className:"autoKillPredict",version:t.model.get("version"),isDebug:t.model.get("isDebug")}),t.predictPath="predictors.autoKill",t.predictPoint="".concat(t.predictPath,".predictPoint"),t.allowedPredictPoint=t.model.get("".concat(t.predictPath,".allowedPredictPoint")),t.log.predict("predict created"),t}return t=s,(i=[{key:"_bindEvents",value:function(){this.createStateHandlers([{event:"adState:autoKill",funcName:"_onAutoKillPredict"}])}},{key:"_onAutoKillPredict",value:function(){if(this._canPredict()){var e=this._getLastAutoKilledAdKey();this.log.predict("predicted with key ".concat(e)),setTimeout(this._predicted.bind(this,e),0)}else this.log.predict("Not allowed to predict")}},{key:"_canPredict",value:function(){return this.allowedPredictPoint===this._getLastAutoKilledAdKey()}},{key:"_getLastAutoKilledAdKey",value:function(){return this.model.get("lastAutoKilledPredict")}}])&&y(t.prototype,i),n&&y(t,n),Object.defineProperty(t,"prototype",{writable:!1}),s}(p),w=_,S=i(9057),P=i(9288),T=i.n(P),A=i(1999),E=function(e,t){e.model=t,e.parentSelectorStr=void 0,e.model.get("permanentCard")?e.parentSelectorStr='[data-card-index="'.concat(e.model.get("permanentCard"),'"]'):e.model.get("predictors.isUseWidgetSelector")?e.parentSelectorStr=e.model.get("widgetSelector"):e.model.get("isRecoReelAboveFeed")?e.parentSelectorStr=e.model.get("aboveFeedSelector"):e.parentSelectorStr=e.model.get("parentSelector");return{getParentSelector:function(){if(e.parentSelectorStr){var t=e.parentSelectorStr.toString(),i=(0,S.default)(t);return e.model.get("predictors.isNeedValidateParentSelector")?A.getValidSelectorElements(i)[0]:i[0]}},calcPredicts:function(){var t=e.model.get(e.predictPoints);A.each(t,(function(t,i){e._calcPredict(t,i)}))}}};function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function O(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if("object"!==C(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==C(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===C(o)?o:String(o)),n)}var r,o}var k,D=i(1999),R=function(){function e(t,i,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.conf=t,this.log=new r.Z({unitType:"Manager",className:"ScrollManager",version:this.conf.version,isDebug:this.conf.isDebug}),this.log.info("Created"),this.window=i||window,this.$window=(0,S.default)(window),this.windowHeight=this.$window.height(),this.windowWidth=this.$window.width(),this.scrollElement=D.isEmpty(n)?this.window:(0,S.default)(n)[0],this.$scrollElement=(0,S.default)(this.scrollElement),this.timeBetweenEvents=100,this.lastTimeStamp=0,this.lastScrollTop=this.$scrollElement.scrollTop(),this.pps=0,this.ppsChange=0,this.vms=1/0,this.direction=1,this.maxMSBetweenEvents=2e3,this.scrollEndTimeout=this.conf.scrollEndTimeout;var o=D.throttle(this.onScroll.bind(this),this.timeBetweenEvents);this.scrollElement.addEventListener("scroll",o)}var t,i,n;return t=e,(i=[{key:"getPps",value:function(){return this.pps}},{key:"onScroll",value:function(e){clearTimeout(this.scrollEnd),this.pps=0;var t=e.timeStamp-this.lastTimeStamp;this.lastTimeStamp=e.timeStamp;var i=this.$scrollElement.scrollTop()-this.lastScrollTop;this.lastScrollTop=this.$scrollElement.scrollTop(),this.direction=i<0?-1:1,t<this.maxMSBetweenEvents&&this.changePPS(i/t*1e3),D.parseBool(this.conf.isLogScroll)&&this.log.info("onScroll - pps: "+this.direction*this.pps),this.scrollEnd=setTimeout(this.onScrollEnd.bind(this),this.scrollEndTimeout)}},{key:"onScrollEnd",value:function(){D.parseBool(this.conf.isLogScroll)&&this.log.warning("onScrollEnd"),this.changePPS(0),D.forEach(this.onScrollEndCBList,function(e){e()}.bind(this))}},{key:"changePPS",value:function(e){this.ppsChange=e-this.pps,this.pps=e,0===this.pps&&(this.vms=1/0),this.vms=this.windowHeight/this.pps*1e3,D.forEach(this.onScrollPPSChange,(function(e){setTimeout(e,0)}))}},{key:"registerForPPSChange",value:function(e){this.onScrollPPSChange=this.onScrollPPSChange||[];var t=this.onScrollPPSChange.indexOf(e);return-1!==t?t:this.onScrollPPSChange.push(e)-1}},{key:"deRegisterForPPSChange",value:function(e){var t=this.onScrollPPSChange.indexOf(e);this.onScrollPPSChange.splice(t,1)}},{key:"registerForScrollEnd",value:function(e){this.onScrollEndCBList=this.onScrollEndCBList||[];var t=this.onScrollEndCBList.indexOf(e);return-1!==t?t:this.onScrollEndCBList.push(e)-1}},{key:"deRegisterForScrollEnd",value:function(e){var t=this.onScrollEndCBList.indexOf(e);this.onScrollEndCBList.splice(t,1)}}])&&O(t.prototype,i),n&&O(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),I=function(e,t,i){return k||(k=new R(e,t,i)),k};function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function N(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if("object"!==x(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==x(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===x(o)?o:String(o)),n)}var r,o}function V(e,t){return V=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},V(e,t)}function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=j(e);if(t){var r=j(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return function(e,t){if(t&&("object"===x(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,i)}}function j(e){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},j(e)}i(1999);var B=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&V(e,t)}(s,e);var t,i,n,o=L(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=o.call(this,e)).log=new r.Z({unitType:t.model.get("unitType"),className:"baseDistancePredicts",version:t.model.get("version"),isDebug:t.model.get("isDebug")}),t}return t=s,(i=[{key:"_initPredict",value:function(e){this.predictPoint=e.predictPoint,this.predictKey=e.predictKey,this.startWf=e.startWfFunc,this.utils=E(this,this.model),this.scrollManager=new I,this._setParentSelector()}},{key:"_setParentSelector",value:function(){if(!this.isSelectorFound){var e=this.utils.getParentSelector();e?(this.isSelectorFound=!0,this.parentSelector=e,this.log.info("parentSelector found staring to predict viewability"),this._bindEvents(),this._calcPredict()):(this.log.info("no parentSelector can't predict distance waiting for parentSelector"),T().once("window:scroll:change",this._setParentSelector.bind(this)),this.model.listenToOnce(this.model,"change:parentSelector",this._setParentSelector.bind(this)))}}},{key:"_bindEvents",value:function(){this.parentSelector&&(window.taboolaBridge&&!this.registeredOnNotifyExternalRects&&(this.registeredOnNotifyExternalRects=!0,window.taboolaBridge.on("notifyExternalRects",this._calcPredict.bind(this))),T().once("window:scroll:change",this._calcPredict.bind(this)))}},{key:"_calcPredict",value:function(){}},{key:"_onDistancePredicted",value:function(e){if(this.log.predict("predict key ".concat(e,": max pps = ").concat(this.maxPPS,", current pps = ").concat(this.scrollManager.pps)),this.maxPPS&&Math.abs(this.scrollManager.pps)>this.maxPPS)return this.log.warning("Distance Predicted, speed is too high",this.scrollManager.pps),this.model.set("isSkippedDistancePredict",!0),void this.log.predict("predict key ".concat(e,": skipping on pps"));this.log.warning("Distance Predicted, speed is OK",this.scrollManager.pps),this.log.predict("predict key ".concat(e,": predicted")),this._predicted(e)}}])&&N(t.prototype,i),n&&N(t,n),Object.defineProperty(t,"prototype",{writable:!1}),s}(p),M=B;function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}function U(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if("object"!==F(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==F(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===F(o)?o:String(o)),n)}var r,o}function W(e,t){return W=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},W(e,t)}function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=$(e);if(t){var r=$(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return function(e,t){if(t&&("object"===F(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return z(e)}(this,i)}}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $(e){return $=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$(e)}var G=i(1999),q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&W(e,t)}(s,e);var t,i,n,o=H(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=o.call(this,e)).log=new r.Z({unitType:t.model.get("unitType"),className:"distancePercentPredict",version:t.model.get("version"),isDebug:t.model.get("isDebug")}),t.predictPath="predictors.distancePercent",t.maxPPS=t.model.get("predictors.distancePercent.maxPPS"),t.utils=E(z(t),t.model),t._initPredict(e),t}return t=s,(i=[{key:"_calcPredict",value:function(){if(!this.isPredicted){var e=(0,S.default)(this.model.get("scrollSelector"))[0],t=void 0!==e,i=t?e.clientHeight:window.innerHeight,n=t?i+e.scrollTop:i+window.pageYOffset,r=100/(this.predictPoint||1),o=G.getTopOfEl(this.parentSelector),s=o+this.model.get("height")/(100/this.model.get("viewPercent")||1),a=i+(s-i)/r;this.model.get("logViewabilityCalc")&&this.log.info("\ntopParentSelector: "+o+",\neligibilityPoint: "+s+",\nstartPoint: "+i+",\nbottomViewPort: "+n+",\npredictionPoint: "+a+",\ncalc: predictionPoint <= bottomViewPort: "+(a<=n)),a<=n?(this.model.set("distancePercentPredictData",{topParentSelector:o,bottomViewPort:n,eligibilityPoint:s,startPoint:i,predictionPoint:this.predictionPoint,predictKey:this.predictKey}),this.isPredicted=!0,this._onDistancePredicted(this.predictKey)):this._bindEvents()}}}])&&U(t.prototype,i),n&&U(t,n),Object.defineProperty(t,"prototype",{writable:!1}),s}(M),Y=q;function K(e){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K(e)}function Q(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if("object"!==K(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==K(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===K(o)?o:String(o)),n)}var r,o}function Z(e,t){return Z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Z(e,t)}function X(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=J(e);if(t){var r=J(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return function(e,t){if(t&&("object"===K(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,i)}}function J(e){return J=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},J(e)}var ee=function(e){return function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Z(e,t)}(o,e);var t,i,n,r=X(o);function o(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),r.apply(this,arguments)}return t=o,(i=[{key:"onScrollSpeedChangeCallback",value:function(){this.scrollManager.getPps()>this.maxPPS?this.log.predict("onScrollSpeedChangeCallback - Could not predict, scroll speed higher then maxPPS"):this._isAllowedForPredictOnScrollEnd()?(this.log.predict("onScrollSpeedChangeCallback - Predicted!"),this._predictWithPredictKey()):this.log.predict("onScrollSpeedChangeCallback - Could not predict, not eligible to play")}}])&&Q(t.prototype,i),n&&Q(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(e)};function te(e){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},te(e)}function ie(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if("object"!==te(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==te(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===te(o)?o:String(o)),n)}var r,o}function ne(e,t){return ne=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ne(e,t)}function re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=se(e);if(t){var r=se(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return function(e,t){if(t&&("object"===te(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return oe(e)}(this,i)}}function oe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function se(e){return se=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},se(e)}var ae=i(1999),le=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ne(e,t)}(s,e);var t,i,n,o=re(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=o.call(this,e)).log=new r.Z({unitType:t.model.get("unitType"),className:"distancePixelsPredict",version:t.model.get("version"),isDebug:t.model.get("isDebug")}),t.predictPath="predictors.distancePixels",t.maxPPS=t.model.get("predictors.distancePixels.maxPPS"),t.log.predict("predict created with key = ".concat(e.predictKey,", predict point = ").concat(e.predictPoint,", maxPPS = ").concat(t.maxPPS)),t._initPredict(e),t.model.get("".concat(t.predictPath,".isListenToScrollSpeedChange"))&&t.scrollManager.registerForPPSChange(t.onScrollSpeedChangeCallback.bind(oe(t))),t}return t=s,(i=[{key:"_calcPredict",value:function(){this.isPredicted||(this.isPixelsPoint=ae.hasPassedPixelFromSelector(this.parentSelectorStr,this.model.get("scrollSelector"),this.predictPoint,this.model.get("predictors.isNeedValidateParentSelector")),this.isPixelsPoint?(this.model.set("distancePixelPredictData",{predictionPoint:this.predictionPoint,predictKey:this.predictKey}),this.isPredicted=!0,this.log.predict("predict key ".concat(this.predictKey,": distance from selector is lower than ").concat(this.predictPoint,"px, checking max pps")),this._predictWithPredictKey()):this._bindEvents())}},{key:"_isAllowedForPredictOnScrollEnd",value:function(){return this.isPixelsPoint}},{key:"_predictWithPredictKey",value:function(){this._onDistancePredicted(this.predictKey)}}])&&ie(t.prototype,i),n&&ie(t,n),Object.defineProperty(t,"prototype",{writable:!1}),s}(M),ce=ee(le);function ue(e){return ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ue(e)}function de(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if("object"!==ue(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==ue(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===ue(o)?o:String(o)),n)}var r,o}function he(e,t){return he=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},he(e,t)}function fe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=pe(e);if(t){var r=pe(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return function(e,t){if(t&&("object"===ue(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,i)}}function pe(e){return pe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},pe(e)}var me=i(1999),ye=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&he(e,t)}(s,e);var t,i,n,o=fe(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=o.call(this,e)).log=new r.Z({unitType:t.model.get("unitType"),className:"getAdFailPredict",version:t.model.get("version"),isDebug:t.model.get("isDebug")}),t.allowedPredictPoints="predictors.getAdFail.allowedPredictPoints",t.keysToPredict=t.model.get(t.allowedPredictPoints),t.log.predict("predict created with keys to predict ".concat(t.keysToPredict)),t}return t=s,(i=[{key:"_bindEvents",value:function(){this.createStateHandlers([{event:"getAdState:failed",funcName:"_onFailedToGetAd"}])}},{key:"_onFailedToGetAd",value:function(){var e=this.model.get("lastFailedPredict");this._shouldPredict(e)&&(this.adProperties=this.model.get("lastFailedPredictProperties"),setTimeout(this._predicted.bind(this,this.model.get("lastFailedPredict")),200))}},{key:"_shouldPredict",value:function(e){var t=!1;return t=Array.isArray(this.keysToPredict)?me.contains(this.keysToPredict,e):"any"===this.keysToPredict.toString()||this.keysToPredict===e,this.log.predict("can predict key ".concat(e," = ").concat(t)),t}}])&&de(t.prototype,i),n&&de(t,n),Object.defineProperty(t,"prototype",{writable:!1}),s}(p),ve=ye;function ge(e){return ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ge(e)}function be(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if("object"!==ge(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==ge(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===ge(o)?o:String(o)),n)}var r,o}function _e(e,t){return _e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_e(e,t)}function we(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=Se(e);if(t){var r=Se(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return function(e,t){if(t&&("object"===ge(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,i)}}function Se(e){return Se=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Se(e)}var Pe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_e(e,t)}(s,e);var t,i,n,o=we(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=o.call(this,e)).log=new r.Z({unitType:t.model.get("unitType"),className:"multiAdPredict",version:t.model.get("version"),isDebug:t.model.get("isDebug")}),t.predictPath="predictors.multiAd",t.predictPoints="".concat(t.predictPath,".predictPoints"),t.predictKey=e.predictKey,t.predictOptions=t.model.get("".concat(t.predictPoints,".").concat(t.predictKey)),t.log.predict("predict created with key = ".concat(t.predictKey)),t.predictOptions.hasOwnProperty("secondsUntilComplete")?(t.secondsUntilAdComplete=t.predictOptions.secondsUntilComplete,t.log.predict("predict created with key = ".concat(t.predictKey,", seconds to ad complete = ").concat(t.secondsUntilAdComplete)),t._bindPredictSecondsUntilAdEnd()):t.predictOptions.hasOwnProperty("qState")&&(t.adQState=t.predictOptions.qState,t.log.predict("predict created with key = ".concat(t.predictKey,", ad quartile = ").concat(t.adQState)),t._bindPredictAdQState()),t}return t=s,(i=[{key:"_bindPredictSecondsUntilAdEnd",value:function(){this.createStateHandlers([{event:"activeAdCurrentTime",funcName:"_checkAdTimeLeft"}])}},{key:"_bindPredictAdQState",value:function(){var e=this.adQState;this.createStateHandlers([{event:"adQState:".concat(e),funcName:"_onPredictPoint"}])}},{key:"_checkAdTimeLeft",value:function(){var e=this.model.get("adDuration");if(e){var t=e<this.secondsUntilAdComplete?e:this.secondsUntilAdComplete,i=this.model.get("activeAdCurrentTime");e-i<=t&&!this.timePredicted&&(this.timePredicted=!0,this.log.predict("ad duration = ".concat(e,", ad current time = ").concat(i)),this._onPredictPoint())}}},{key:"_allowPredict",value:function(){var e=this.model.get("activeAdData");return!(!(this.model.get("isEligibleToPlay")&&this.model.get("isMultiAd")&&e)||e.singleAd)}},{key:"_onPredictPoint",value:function(){if(this._allowPredict())return this.log.predict("allowing predict - in multi ad mode"),void this._predicted(this.predictKey);this.log.predict("disallowing predict - in single ad mode")}}])&&be(t.prototype,i),n&&be(t,n),Object.defineProperty(t,"prototype",{writable:!1}),s}(p),Te=Pe;function Ae(e){return Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ae(e)}function Ee(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if("object"!==Ae(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==Ae(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===Ae(o)?o:String(o)),n)}var r,o}function Ce(e,t){return Ce=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ce(e,t)}function Oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=ke(e);if(t){var r=ke(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return function(e,t){if(t&&("object"===Ae(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,i)}}function ke(e){return ke=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ke(e)}i(1999);var De=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ce(e,t)}(s,e);var t,i,n,o=Oe(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=o.call(this,e)).startWf=e.startWfFunc,t._init(),t}return t=s,(i=[{key:"_init",value:function(){this.initialized||(this.log=new r.Z({unitType:this.model.get("unitType"),className:"playerReadyPredict",version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.predictPath="predictors.playerReady",this.predictKey=this.model.get(this.predictPath+".predictPoint"),this.predictPoint=this.predictPath+".predictPoint",this.initialized=!0,this.log.predict("predict created with key = ".concat(this.predictKey)))}},{key:"_bindEvents",value:function(){!this.initialized&&this._init(),"ready"===this.model.get("playerState")?(this.log.predict("player is ready"),this._onPlayerReady()):(this.log.predict("waiting for player ready event"),this.createStateHandlers([{event:"playerState:ready",funcName:"_onPlayerReady",isListenOnce:!0}]))}},{key:"_onPlayerReady",value:function(){this._predicted(this.predictKey)}}])&&Ee(t.prototype,i),n&&Ee(t,n),Object.defineProperty(t,"prototype",{writable:!1}),s}(p),Re=De;function Ie(e){return Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ie(e)}function xe(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if("object"!==Ie(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==Ie(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===Ie(o)?o:String(o)),n)}var r,o}function Ne(e,t){return Ne=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ne(e,t)}function Ve(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=Le(e);if(t){var r=Le(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return function(e,t){if(t&&("object"===Ie(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,i)}}function Le(e){return Le=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Le(e)}var je=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ne(e,t)}(s,e);var t,i,n,o=Ve(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=o.call(this,e)).log=new r.Z({unitType:t.model.get("unitType"),className:"firstScrollPredict",version:t.model.get("version"),isDebug:t.model.get("isDebug")}),t.predictPath="predictors.firstScroll",t.predictPoints=t.predictPath+".predictPoints",t.predictKey=t.model.get(t.predictPath+".predictPoints"),t.startWf=e.startWfFunc,t.isPredicted=!1,t.log.predict("predict created with predict key = ".concat(t.predictKey)),t.model.get("isEligibleToPlay")?(t.log.predict("eligible to play on creation, calling predict"),t._callPredict()):t._onFirstScroll(),t}return t=s,(i=[{key:"_bindEvents",value:function(){T().once("window:scroll:change",this._onFirstScroll.bind(this)),this.createStateHandlers([{event:"isEligibleToPlay:true",funcName:"_callPredict"}])}},{key:"_onFirstScroll",value:function(){if(!this.isPredicted){var e=window.pageYOffset,t=5,i=(0,S.default)(this.model.get("scrollSelector"))[0];if(void 0!==i){var n=i.clientHeight;e=n+i.scrollTop,t=n+5}t<=e?(this.log.predict("scrolled more than 5px, calling predict"),this._callPredict()):this._bindEvents()}}},{key:"_callPredict",value:function(){this.isPredicted||(this.isPredicted=!0,this._predicted(this.predictKey))}}])&&xe(t.prototype,i),n&&xe(t,n),Object.defineProperty(t,"prototype",{writable:!1}),s}(p),Be=je;function Me(e){return Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Me(e)}function Fe(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if("object"!==Me(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==Me(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===Me(o)?o:String(o)),n)}var r,o}function Ue(e,t){return Ue=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ue(e,t)}function We(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=He(e);if(t){var r=He(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return function(e,t){if(t&&("object"===Me(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,i)}}function He(e){return He=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},He(e)}var ze=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ue(e,t)}(a,e);var t,i,n,s=We(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=s.call(this,e)).log=new r.Z({unitType:t.model.get("unitType"),className:"emptyQueuePredict",version:t.model.get("version"),isDebug:t.model.get("isDebug")}),t.log.predict("predict created"),t.predictKey=t.model.get("predictors.emptyQueue.predictPoints"),t._bindEmptyQueuePredict(),t}return t=a,(i=[{key:"_bindEvents",value:function(){}},{key:"_bindEmptyQueuePredict",value:function(){this.createStateHandlers([{event:"adManagerState:".concat(o.adManagerState.empty),funcName:"_onQEmpty"}])}},{key:"_allowPredict",value:function(){return this.model.get("isMultiAd")}},{key:"_onQEmpty",value:function(){if(this.model.get("getAdState")!==o.getAdState.gettingAd)return this.log.predict("queue is empty, no get ad is process"),void this._onPredictPoint();this.log.predict("queue is empty, waiting for get ad reply")}},{key:"_onPredictPoint",value:function(){if(this._allowPredict())return this.log.predict("predict allowed - in multi ad mode"),void this._predicted(this.predictKey);this.log.predict("predict disallowed - in single ad mode")}}])&&Fe(t.prototype,i),n&&Fe(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(p),$e=ze;function Ge(e){return Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ge(e)}function qe(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if("object"!==Ge(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==Ge(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===Ge(o)?o:String(o)),n)}var r,o}function Ye(e,t){return Ye=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ye(e,t)}function Ke(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=Ze(e);if(t){var r=Ze(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return function(e,t){if(t&&("object"===Ge(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Qe(e)}(this,i)}}function Qe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ze(e){return Ze=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ze(e)}i(1999);var Xe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ye(e,t)}(l,e);var i,n,s,a=Ke(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=a.call(this,e)).log=new r.Z({unitType:t.model.get("unitType"),className:"fullEligibilityPredict",version:t.model.get("version"),isDebug:t.model.get("isDebug")}),t.predictPoint=e.predictPoint,t.predictKey=t.model.get("predictors.fullEligibility.predictPoints"),t.predictPath="predictors.fullEligibility",t.startWf=e.startWfFunc,t.hadGetAdRv=!1,t.maxPPS=t.model.get("predictors.fullEligibility.maxPPS"),t.log.predict("predict created with key = ".concat(t.predictKey,", maxPPS = ").concat(t.maxPPS)),t.scrollManager=new I,t.model.get("".concat(t.predictPath,".isListenToScrollSpeedChange"))&&t.scrollManager.registerForPPSChange(t.onScrollSpeedChangeCallback.bind(Qe(t))),t._bindEvents(),t}return i=l,(n=[{key:"_bindEvents",value:function(){if(this.scrollManager)if(this.createStateHandlers([{event:"getAdState:".concat(o.getAdState.gettingAd),funcName:"_onGettingAd",isListenOnce:!0}]),this.model.get("frameType")===t().FRAME_TYPE.plainPage)this.log.predict("listening to window scroll"),T().once("window:scroll:change",this._calcPredict.bind(this)),this.scrollManager.registerForScrollEnd(this._calcPredict.bind(this));else{var e=this.model.get("predictors.fullEligibility.checkPredictsSeconds");this.log.predict("checking eligibility every ".concat(e)),this.calcPredictInterval=setInterval(this._calcPredict.bind(this),1e3*e)}else this.log.predict("predict aborted, scroll manager not created")}},{key:"_onGettingAd",value:function(){if(1===this.model.get("lastGetAdKey"))return this.hadGetAdRv=!0,void this.log.predict("stop predict because get ad 1 in process");this.createStateHandlers([{event:"getAdState:".concat(o.getAdState.gettingAd),funcName:"_onGettingAd",isListenOnce:!0}])}},{key:"_calcPredict",value:function(){this.hadGetAdRv||this.isPredicted||(this._canPredict()&&this.maxPPS&&Math.abs(this.scrollManager.pps)<this.maxPPS?(this.isPredicted=!0,this.calcPredictInterval&&(clearInterval(this.calcPredictInterval),this.calcPredictInterval=void 0),this.model.set("fullEligibilityPredicted",!0),this.log.predict("allowed due to max pps - current pps = ".concat(this.scrollManager.pps," is lower than max pps ").concat(this.maxPPS)),this._predicted(this.predictKey)):(this.log.predict("disallowed due to max pps - current pps = ".concat(this.scrollManager.pps," is higher than or equal to max pps ").concat(this.maxPPS)),T().once("window:scroll:change",this._calcPredict.bind(this))))}},{key:"_canPredict",value:function(){var e=this.model.get("adState")===o.adState.playing,t=this.model.get("isEligibleToPlay"),i=this.model.get("isSkippedDistancePredict"),n=t&&i&&!e;if(this.log.predict("can predict = is eligible (".concat(t,") && skipped distance predict (").concat(i,") && no other ad playing (").concat(!e,") = ").concat(n)),n&&this._checkIsGet1OnlyOnAdLoaded()){var r=this.model.get("playerHasRvInQ");n=n&&r,this.log.predict("can predict = is player having RV1 in queue = ".concat(this.model.get("playerHasRvInQ")))}return n}},{key:"_isAllowedForPredictOnScrollEnd",value:function(){return this._canPredict()}},{key:"_predictWithPredictKey",value:function(){this._predicted(this.predictKey)}}])&&qe(i.prototype,n),s&&qe(i,s),Object.defineProperty(i,"prototype",{writable:!1}),l}(p),Je=ee(Xe);function et(e){return et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},et(e)}function tt(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if("object"!==et(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==et(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===et(o)?o:String(o)),n)}var r,o}var it=i(1999),nt=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.model=t,this.log=new r.Z({unitType:"Util",className:"DeatchUtil",version:this.model.get("version"),isDebug:this.model.get("isDebug")})}var t,i,n;return t=e,(i=[{key:"setSliderSize",value:function(){if(this.detachToSlider=this.model.get("detachToSlider"),this.model.get("stickyCard.isActive")){var e=this.model.get("width"),t=this.model.get("height"),i=this.getStickyPosition();return this.detachToSlider.position.horizontalOffset=i.left,this.detachToSlider.position.verticalOffset=i.top,this.detachToSlider.position.horizontal="left",this.detachToSlider.position.vertical="top",this.model.set("detachToSlider.width",e),void this.model.set("detachToSlider.height",t)}this.originalSliderWidth&&(this.detachToSlider.width=this.originalSliderWidth,this.originalSliderWidth=void 0),this.originalSliderHeight&&(this.detachToSlider.height=this.originalSliderHeight,this.originalSliderHeight=void 0),this.originalSliderHeight=this.detachToSlider.height;var n=this.model.get("width"),r=this.detachToSlider.liquidSize.isActive?this.calcLiquidWidth():this.detachToSlider.width;(n>r||this.detachToSlider.liquidSize.isDisableWidthLimit)&&(n=r);var o=it.getVideoHeightByRatio(n,this.model.get("aspectRatioNum")<=1?1.77:this.model.get("aspectRatioNum"));this.model.set("detachToSlider.width",n),this.model.set("detachToSlider.height",o)}},{key:"getStickyPosition",value:function(){var e=(0,S.default)(this.model.get("containerViewPlaceHolder")),t=e.length?e.offset().left:0,i=this.model.get("stickyCard.offset.top")||0,n=t+(this.model.get("stickyCard.offset.left")||0);return{top:"".concat(i),left:"".concat(n)}}},{key:"setSliderSizeVertical",value:function(){this.detachToSlider=this.model.get("detachToSlider");var e=it.getVideoHeight(this.model.get("width")),t=this.detachToSlider.liquidSize.isActive?this.calcLiquidHeight():this.detachToSlider.height;e>t&&(e=t);var i=it.getVideoWidthByRatio(e,this.model.get("aspectRatioNum"));this.model.set("detachToSlider.width",i),this.model.set("detachToSlider.height",e)}},{key:"calcLiquidWidth",value:function(){this.detachToSlider=this.model.get("detachToSlider");var e=this.detachToSlider.liquidSize.minWidth,t=this.detachToSlider.liquidSize.maxWidth,i=window.innerWidth*(this.detachToSlider.liquidSize.widthPercent/100);return t&&i>t&&(i=t),i<e&&(i=e),i}},{key:"calcLiquidHeight",value:function(){this.detachToSlider=this.model.get("detachToSlider");var e=this.detachToSlider.liquidSize.maxHeight,t=window.innerHeight*(this.detachToSlider.liquidSize.heightPercent/100);return e&&t>e&&(t=e),t}},{key:"setStickParams",value:function(){var e=this.model.get("stickyCard.navBarSelector"),t=document.querySelector(e),i=this.model.get("stickyCard.offset.top");if(t){var n=t.offsetHeight||0;this.model.set("stickyCard.offset.top",i+n)}}}])&&tt(t.prototype,i),n&&tt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),rt=function(){var e;return function(t){return e||(e=new nt(t)),e}}(),ot=rt;function st(e){return st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},st(e)}function at(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if("object"!==st(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==st(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===st(o)?o:String(o)),n)}var r,o}function lt(e,t){return lt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},lt(e,t)}function ct(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=dt(e);if(t){var r=dt(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return function(e,t){if(t&&("object"===st(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ut(e)}(this,i)}}function ut(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dt(e){return dt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},dt(e)}var ht=i(1999),ft=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lt(e,t)}(a,t);var i,n,o,s=ct(a);function a(t){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(i=s.call(this,t)).log=new r.Z({unitType:i.model.get("unitType"),className:"intersectionPredict",version:i.model.get("version"),isDebug:i.model.get("isDebug")}),i.predictPoint=t.predictPoint,i.predictKey=t.predictKey,i.isSliderOn=i.model.get("detachToSlider")&&(i.model.get("detachToSlider").isStartFromSlider||i.model.get("detachToSlider").isDetachToSlider),i.isSuperSlider=!!i.isSliderOn&&(i.model.get("detachToSlider.isStartFromSlider")&&i.model.get("detachToSlider.isDetachToSlider")),i.isAMP=i.model.get("frameType")===e.FRAME_TYPE.amp,i.predictPath="predictors.intersection",i.startWf=t.startWfFunc,i.utils=E(ut(i),i.model),i.predictDelayTime=i.model.get("".concat(i.predictPath,".predictDelayTime")),i.scrollManager=new I,i.maxPPS=i.model.get("".concat(i.predictPath,".maxPPS")),i.log.predict("predict created with key = ".concat(i.predictKey,", predict point = ").concat(i.predictPoint,"% view, predictDelayTime = ").concat(i.predictDelayTime)),i._setSelector(),i}return i=a,(n=[{key:"_initObserver",value:function(){var e=[0,this.predictPoint/100];this.isAMP&&this.isSliderOn&&(this.detachUtil=ot(this.model),this.detachUtil.setSliderSize(),e=ht.buildObserverThresholdList());var t={rootMargin:"0px",threshold:e};this.observer=new IntersectionObserver(this._observerCallback.bind(this),t),this.observer.observe(this.parentSelector)}},{key:"_setSelector",value:function(){if(!this.isSelectorFound){var e=this.utils.getParentSelector();e?(this.isSelectorFound=!0,this.selectorTimeOut&&(clearTimeout(this.selectorTimeOut),this.selectorTimeOut=void 0),this.parentSelector=e,this.log.predict("parent selector found, starting observer"),this.log.info("parentSelector found staring to predict viewability"),this._bindEvents(),this._initObserver()):(this.log.predict("parent selector couldn't be found, trying again in 1s"),this.log.info("no parentSelector can't predict distance waiting for parentSelector"),this.model.listenToOnce(this.model,"change:parentSelector",this._setSelector.bind(this)),this.selectorTimeOut=setTimeout(this._setSelector.bind(this),1e3))}}},{key:"_isIntersectingTest",value:function(e){return this.isAMP&&this.isSliderOn?e[0].intersectionRect.height>this.model.get("detachToSlider.height"):100*e[0].intersectionRatio>=this.predictPoint}},{key:"_observerCallback",value:function(e,t){var i=this.scrollManager.getPps();if(!this.isPredicted){var n=this._isIntersectingTest(e);this.isSuperSlider&&this.isAMP&&n&&this.model.set("isSliderEligibleToPlay",!0),n?this._isLowerThenMaxPPS()?(this._onPrediction(),this.log.predict("intersected and predicted")):this.log.predict("intersected but can't predict - current pps (".concat(i,") is higher then maxPps (").concat(this.maxPPS,")")):this.log.predict("lost intersection")}}},{key:"_isLowerThenMaxPPS",value:function(){return!this.maxPPS||Math.abs(this.scrollManager.getPps())<this.maxPPS}},{key:"_onPrediction",value:function(){this.isPredicted=!0,this.log.predict("predicted"),this._predicted(this.predictKey),this.observer.disconnect()}}])&&at(i.prototype,n),o&&at(i,o),Object.defineProperty(i,"prototype",{writable:!1}),a}(p),pt=ft;function mt(e){return mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mt(e)}function yt(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if("object"!==mt(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==mt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===mt(o)?o:String(o)),n)}var r,o}function vt(e,t){return vt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},vt(e,t)}function gt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=_t(e);if(t){var r=_t(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return bt(this,i)}}function bt(e,t){if(t&&("object"===mt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _t(e){return _t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_t(e)}var wt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vt(e,t)}(s,e);var t,i,n,o=gt(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=o.call(this,e)).log=new r.Z({unitType:t.model.get("unitType"),className:"timePredict",version:t.model.get("version"),isDebug:t.model.get("isDebug")}),t.predictPath="predictors.time",t.modelKey=e.modelKey?e.modelKey:e.predictKey?"".concat(t.predictPath,".predictPoints.").concat(e.predictKey):t.predictPath,t.predictKey=e.predictKey||t.model.get("".concat(t.modelKey,".predictPoints")),t.isActive=t.model.get("".concat(t.modelKey,".isActive")),t.isActive?(t.length=1e3*t.model.get("".concat(t.modelKey,".lengthInSeconds")),t.length?(t.repeat=t.model.get("".concat(t.modelKey,".repeat"))||1,t.log.predict("predict created with key = ".concat(t.predictKey,", length = ").concat(t.length,"ms, repeat = ").concat(t.repeat)),t._bindTimePredict(),t._startPredictTimer(),t):bt(t)):bt(t)}return t=s,(i=[{key:"_bindEvents",value:function(){}},{key:"_bindTimePredict",value:function(){this.createStateHandlers([{event:"time:".concat(this.predictPath),funcName:"_startPredictTimer"}])}},{key:"_canRepeatPredict",value:function(){return this.repeat>0}},{key:"_canStartTimer",value:function(){return!this.stopped&&this._canRepeatPredict()}},{key:"_startPredictTimer",value:function(){var e=this;if(this._canStartTimer())return this.timer&&(this.timer=clearTimeout(this.timer)),this.log.info("Starting timer",this.predictKey),this.log.predict("repeating ".concat(this.repeat," more times")),void(this.timer=setTimeout((function(){--e.repeat,e._predicted(e.predictKey),e._startPredictTimer()}),this.length));this.log.predict("no more repeats")}},{key:"stop",value:function(){this.log.info("Timer predict stopped"),this.log.predict("stopping timer"),this.timer=clearTimeout(this.timer),this.stopped=!0}}])&&yt(t.prototype,i),n&&yt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),s}(p),St=wt;function Pt(e){return Pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pt(e)}function Tt(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if("object"!==Pt(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==Pt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===Pt(o)?o:String(o)),n)}var r,o}function At(e,t){return At=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},At(e,t)}function Et(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=Ct(e);if(t){var r=Ct(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return function(e,t){if(t&&("object"===Pt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,i)}}function Ct(e){return Ct=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ct(e)}i(1999);var Ot=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&At(e,t)}(s,e);var t,i,n,o=Et(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=o.call(this,e)).log=new r.Z({unitType:t.model.get("unitType"),className:"mp4Predict",version:t.model.get("version"),isDebug:t.model.get("isDebug")}),t.predictPath="predictors.mp4",t.predictKey=t.model.get(t.predictPath+".predictPoint"),t.predictPoint=t.predictPath+".predictPoint",t.log.predict("predict created with key = ".concat(t.predictKey)),t}return t=s,(i=[{key:"_bindEvents",value:function(){this.createStateHandlers([{event:"playerQueue",funcName:"_onPlayerQueueStatusChange"}])}},{key:"_onPlayerQueueStatusChange",value:function(){this.adsListFromPlayer=this.model.get("playerQueue"),this._allowPredict()?(this.log.predict("found rv1 video ad in player queue, predicting"),this._predicted(this.predictKey),this.model.stopListening(this.model,"change:playerQueue")):this.log.predict("didn't find rv1 video ad in player queue, waiting for next queue change")}},{key:"_allowPredict",value:function(){return this.adsListFromPlayer.filter((function(e){return"video"===e.mt&&!0===e.rv})).length>0}}])&&Tt(t.prototype,i),n&&Tt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),s}(p),kt=Ot;function Dt(e){return Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dt(e)}function Rt(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if("object"!==Dt(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==Dt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===Dt(o)?o:String(o)),n)}var r,o}function It(e,t){return It=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},It(e,t)}function xt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=Nt(e);if(t){var r=Nt(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return function(e,t){if(t&&("object"===Dt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,i)}}function Nt(e){return Nt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Nt(e)}i(1999);var Vt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&It(e,t)}(s,e);var t,i,n,o=xt(s);function s(e,t){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(i=o.call(this,e)).model=e,i.log=new r.Z({unitType:i.model.get("unitType"),className:i.constructor.name,version:i.model.get("version"),isDebug:i.model.get("isDebug")}),i.cardsSelector=t,i.usedCards=[],i}return t=s,(i=[{key:"_setMinDistance",value:function(){this.minCardDistance=this.model.get("cardsMinDistance")||0;var e=(0,S.default)(window).height();this.minCardDistance<e&&(this.minCardDistance=e,this.model.set("cardsMinDistance",e))}},{key:"getCard",value:function(e){}},{key:"cancelGetCard",value:function(){}},{key:"setCardAsUsed",value:function(e){this.usedCards.push(e)}},{key:"_getPlaceHolders",value:function(){}},{key:"_isElementBelowView",value:function(e){}}])&&Rt(t.prototype,i),n&&Rt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),s}(n.O),Lt=Vt,jt={EVENTS:{RESPONSE_READY:"vbf-response-ready",IMAGE_LOADED:"image_loaded"},PLACEMENT_NAME:"Below-Article-Back-Fill-Video",REQUEST_PREFIX:"https://api.taboola.com/1.2/json",DEFAULT_REQUEST_PARAMS:{"app.s2s":!1,"app.apikey":"69629143827c91b118c7e0dc9f2a4eb0059feae9","app.type":"bidder"}};function Bt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,r,o,s,a=[],l=!0,c=!1;try{if(o=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;l=!1}else for(;!(l=(n=o.call(i)).done)&&(a.push(n.value),a.length!==t);l=!0);}catch(e){c=!0,r=e}finally{try{if(!l&&null!=i.return&&(s=i.return(),Object(s)!==s))return}finally{if(c)throw r}}return a}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Mt(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Mt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mt(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var Ft=function(e,t){e instanceof HTMLElement&&t&&t.forEach((function(t){return e.appendChild(t)}))},Ut=function(e,t){e&&e.classList.toggle(t)},Wt=function(e,t){var i=document.createElement(e);if(!t)return i;for(var n=0,r=Object.entries(t);n<r.length;n++){var o=Bt(r[n],2),s=o[0],a=o[1];if("dataset"!==s)i[s]=a;else for(var l=0,c=Object.entries(a);l<c.length;l++){var u=Bt(c[l],2),d=u[0],h=u[1];i[s][d]=h}}return i},Ht={"int.msn.com/ar-ae":"msn-uae-ar","msn.com/fr-ch/":"msn-ch-fr","msn.com/es-cl/":"msn-chile","msn.com/es-mx/":"msn-mexico","msn.com/cs-cz":"msn-czechrepublic","adexp-uscentral-int-web.cloudapp.net/fr-ca":"msn-can-fr","msn.com/zh-hk/":"msn-hongkong","adexp-uscentral-int-web.cloudapp.net/en-au":"msn-australia","msn.com/es-pe/":"msn-peru","msn.com/he-il/":"msn-il","int.msn.com":"msn-msn","msn.com/es-xl/":"msn-latam","msn.com/tr-tr/":"msn-turkey","msn.com/hi-in":"msn-india-hi","adexp-uscentral-int-web.cloudapp.net/en-ca":"msn-can","msn.com/en-my/":"msn-malaysia","msn.com/es-ar/":"msn-argentina","msn.com/nb-no/":"msn-norway","adexp-uscentral-int-web.cloudapp.net/es-es":"msn-spain","msn.com/pt-pt/":"msn-portugal","msn.com/en-za/":"msn-southafrica","adexp-uscentral-int-web.cloudapp.net/pt-br":"msn-brazil","msn.com/ru-xl/":"msn-ru-xl","msn.com/en-nz/":"msn-newzealand","adexp-uscentral-int-web.cloudapp.net/es-us":"msn-msn-es","msn.com/fr-be/":"msn-be-fr","msn.com/en-xl/":"msn-en-ww","msn.com/th-th/":"msn-thailand","msn.com/en-gb/":"msn-uk","msn.com/en-us":"msn-msn","msn.com/ar-eg/":"msn-egypt","adexp-uscentral-int-web.cloudapp.net/it-it":"msn-italy","msndev2.amp-test.com/en-in":"msn-india","adexp-uscentral-int-web.cloudapp.net/de-de":"msn-germany","www.msn.com/en-ae":"msn-uae","adexp-uscentral-int-web.cloudapp.net/en-us":"msn-msn","msn.com/en-xl":"msn-en-ww","msn.com/es-ve/":"msn-venezuela","msn.com/id-id/":"msn-indonesia","msn.com/hu-hu":"msn-hungary","msn.com/ko-kr/":"msn-korea","msn.com/fr-fr/":"msn-france","msn.com/en-ca/":"msn-can","msn.com/pt-br/":"msn-brazil","msn.com/en-ie/":"msn-ie","msn.com/zh-tw/":"msn-taiwan","adexp-uscentral-int-web.cloudapp.net/en-nz":"msn-newzealand","msnsectionnetwork.com":"msn-section-network","msn.com/es-us/":"msn-msn-es","msn.com/fr-xl":"msn-xl-fr","msn.com/nl-be/":"msn-belgium-nl","msn.com/el-gr/":"msn-greece","msn.com/it-it/":"msn-italy","www.msn.cn/zh-cn":"msn-china","msn.com/es-es/":"msn-spain","cloudapp.net":"msn-msn","msn.com/en-au/":"msn-australia","msn.com/bn-in":"msn-india-bn","msn.com/de-ch/":"msn-ch-de","msn.com/ar-sa/":"msn-saudiarabia","msn.com/es-co/":"msn-colombia","msn.com/da-dk/":"msn-denmark","msn.com/ar-ae/":"msn-uae-ar","adexp-uscentral-int-web.cloudapp.net/fr-fr":"msn-france","msn.com/ja-jp/":"msn-jp","msn.com/nl-nl/":"msn-netherlands","msn.com/de-at/":"msn-austria","msndemo.com":"msn-us-rest-demo","adexp-uscentral-int-web.cloudapp.net/en-gb":"msn-uk","msn.com/pl-pl/":"msn-poland","msn.com/en-sg/":"msn-singapore","msn.com/ru-ru/":"msn-russia","https://www.msn.com/en-us":"msn-msn","adexp-uscentral-int-web.cloudapp.net/nl-nl":"msn-netherlands","msn.com/mr-in":"msn-india-mr","msn.com/de-de/":"msn-germany","msn.com/fr-ca/":"msn-can-fr","adexp-uscentral-int-web.cloudapp.net/en-in":"msn-india","msn.com/sv-se/":"msn-sweden","msn.com/en-ph/":"msn-phillipines","msn.com/fi-fi/":"msn-finland","msn.com/en-in":"msn-india","msn.com/vi-vn/":"msn-vietnam","int.msn.com/es-co/":"msn-colombia","msn.com/te-in":"msn-india-te","msn.com/#winweb-pt":"msn-windows-portugal","msn.com/#winweb-hk":"msn-windows-hongkong","msn.com/#winweb-tw":"msn-windows-taiwan","msn.com/#winweb-dk":"msn-windows-denmark","msn.com/#winweb-in-te":"msn-windows-india-te","msn.com/#winweb-pl":"msn-windows-poland","msn.com/#winweb-de":"msn-windows-germany","msn.com/#winweb-tr":"msn-windows-turkey","msn.com/#winweb-uk":"msn-windows-unitedkingdom","msn.com/#winweb-hu":"msn-windows-hungary","msn.com/#winweb-cl":"msn-windows-chile","msn.com/#winweb-kr":"msn-windows-korea","msn.com/#winweb-ch-fr":"msn-windows-switzerland-fr","msn.com/#winweb-la":"msn-windows-latinamerica","msn.com/#winweb-pe":"msn-windows-peru","msn.com/#winweb-th":"msn-windows-thailand","msn.com/#winweb-ph":"msn-windows-philippines","msn.com/#winweb-cz":"msn-windows-czechrepublic","msn.com/#winweb-co":"msn-windows-colombia","msn.com/#winweb-gr":"msn-windows-greece","msn.com/#winweb-vz":"msn-windows-venezuela","msn.com/#winweb-fi":"msn-windows-finland","msn.com/#winweb-ru":"msn-windows-russia","msn.com/#winweb-jp":"msn-windows-japan","msn.com/#winweb-no":"msn-windows-norway","msn.com/#winweb-nl":"msn-windows-netherlands","msn.com/#winweb-sg":"msn-windows-singapore","msn.com/#winweb-se":"msn-windows-sweden","msn.com/#winweb-ca-fr":"msn-windows-canada-fr","msn.com/#winweb-ww-en":"msn-windows-worldwideenglish","msn.com/#winweb-uae-en":"msn-windows-unitedarabemirates-en","msn.com/#winweb-fr":"msn-windows-france","msn.com/#winweb-nz":"msn-windows-newzealand","msn.com/#winweb-in-mr":"msn-windows-india-mr","msn.com/#winweb-br":"msn-windows-brazil","msn.com/#winweb-sa":"msn-windows-saudiarabia","msn.com/#winweb-in":"msn-windows-india","msn.com/#winweb-usl":"msn-windows-uslatino","msn.com/#winweb-il":"msn-windows-israel","msn.com/#winweb-be-fr":"msn-windows-belgium-fr","msn.com/#winweb-za":"msn-windows-southafrica","msn.com/#winweb-ch-de":"msn-windows-switzerland-de","msn.com/#winweb-ie":"msn-windows-ireland","msn.com/#winweb-id":"msn-windows-indonesia","msn.com/#winweb-us":"msn-windows-unitedstates","msn.com/#winweb-au":"msn-windows-australia","msn.com/#winweb-at":"msn-windows-austria","msn.com/#winweb-ca-en":"msn-windows-canada-en","msn.com/#winweb-vn":"msn-windows-vietnam","msn.com/#winweb-ww-fr":"msn-windows-worldwidefrench","msn.com/#winweb-be-nl":"msn-windows-belgium-nl","msn.com/#winweb-in-hi":"msn-windows-india-hi","msn.com/#winweb-my":"msn-windows-malaysia","msn.com/#winweb-it":"msn-windows-italy","msn.com/#winweb-mx":"msn-windows-mexico","msn.com/#winweb-ar":"msn-windows-argentina","msn.com/#winweb-es":"msn-windows-spain"};function zt(e){return zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zt(e)}function $t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,r,o,s,a=[],l=!0,c=!1;try{if(o=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;l=!1}else for(;!(l=(n=o.call(i)).done)&&(a.push(n.value),a.length!==t);l=!0);}catch(e){c=!0,r=e}finally{try{if(!l&&null!=i.return&&(s=i.return(),Object(s)!==s))return}finally{if(c)throw r}}return a}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Gt(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Gt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gt(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function qt(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if("object"!==zt(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==zt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===zt(o)?o:String(o)),n)}var r,o}var Yt=function(){function e(t,i,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.model=t,this.videoContainer=i,this.animatedElements=n,this.config=this._getConfig(),this.isPlaying=!1,this.interval=null,this.leftPlayingTime=this.config.playingTime,this._init()}var t,i,n;return t=e,i=[{key:"_getConfig",value:function(){var e=yi.getFeatureFlags(this.model),t=e.playingTime,i=void 0===t?10:t,n=e.playerProgressSpeed,r=void 0===n?1e3:n,o=e.timeOutOfControlsInMS,s=void 0===o?400:o,a=e.titleDurationTime,l=void 0===a?800:a,c=e.ctaDurationTime,u=void 0===c?500:c,d=e.ctaDelayAnimationTime,h=void 0===d?1700:d,f=e.sponsorDurationTime,p=void 0===f?800:f,m=e.sponsorDelayAnimationTime;return{keyFrameEffect:{img:{keyFrames:[{transform:"scale(1.2)"},{transform:"scale(1)"}],options:{duration:1e3*i}},title:{keyFrames:[{transform:"translateY(-60px)",opacity:"0"},{transform:"translateY(0px)",opacity:"1"}],options:{duration:l,fill:"forwards"}},cta:{keyFrames:[{transform:"translateY(-60px)",opacity:"0"},{transform:"translateY(0px)",opacity:"1"}],options:{duration:u,delay:h,fill:"forwards"}},sponsor:{keyFrames:[{transform:"translateY(-60px)",opacity:"0"},{transform:"translateY(0px)",opacity:"1"}],options:{duration:p,delay:void 0===m?700:m,fill:"forwards"}}},playingTime:i,playerProgressSpeed:r,timeOutOfControlsInMS:s}}},{key:"_init",value:function(){this.animations=this._createAnimation(),this.controlsWrapper=Wt("div",{className:"tbl-video-controls-container"}),this.closeButton=this._createCloseButton(),this.playPause=this._createPlayPause(),this.playerBar=this._createPlayerBar(),this.timeBox=this._createTimeBox(),this.volume=this._createVolume(),this.fullScreen=this._createFullScreen(),Ft(this.controlsWrapper,[this.playPause.wrapper,this.playerBar,this.timeBox.wrapper,this.volume,this.fullScreen]),this.videoContainer.appendChild(this.controlsWrapper),this._toggleControls(),Ft(this.videoContainer,[this.closeButton,this.controlsWrapper])}},{key:"_createAnimation",value:function(){for(var e=this.config.keyFrameEffect,t=[],i=0,n=Object.entries(this.animatedElements);i<n.length;i++){var r=$t(n[i],2),o=r[0],s=r[1],a=e[o],l=a.keyFrames,c=a.options;t.push(new Animation(new KeyframeEffect(s,l,c),document.timeline))}return t}},{key:"_createCloseButton",value:function(){var e=this,t=Wt("div",{className:"tbl-close",innerHTML:'<svg version="1.1" id="_x2014_ÎÓÈ_x5F_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 99 99" xml:space="preserve"> <style>.st0{fill:#fff}</style> <g> <g stroke="null" id="svg_1"> <g stroke="null" id="svg_2"> <path stroke="null" id="svg_3" d="m82.77256,91.4817c-1.64243,0 -3.25444,-0.644 -4.50148,-1.9964l-65.57555,-69.42328c-2.49406,-2.6404 -2.49406,-6.92301 0,-9.56341c2.49406,-2.6404 6.53931,-2.6404 9.03337,0l65.57555,69.45548c2.49406,2.6404 2.49406,6.92301 0,9.56341c-1.24703,1.3202 -2.88946,1.9642 -4.53189,1.9642z" class="st0"></path> </g> <g stroke="null" id="svg_4"> <path stroke="null" id="svg_5" d="m17.19702,91.4817c-1.64243,0 -3.25444,-0.644 -4.50148,-1.9964c-2.49406,-2.6404 -2.49406,-6.92301 0,-9.56341l65.57555,-69.42328c2.49406,-2.6404 6.53931,-2.6404 9.03337,0c2.49406,2.6404 2.49406,6.92301 0,9.56341l-65.57555,69.45548c-1.24703,1.3202 -2.88946,1.9642 -4.53189,1.9642z" class="st0"></path> </g> </g> </g> </svg> '});return t.addEventListener("click",(function(){e._closeVideo()}),!0),t}},{key:"_toggleControls",value:function(){var e=this,t=this.config.timeOutOfControlsInMS;this.videoContainer.addEventListener("mouseenter",(function(){Ut(e.closeButton,"active"),Ut(e.controlsWrapper,"active")})),this.videoContainer.addEventListener("mouseleave",(function(){setTimeout((function(){Ut(e.closeButton,"active"),Ut(e.controlsWrapper,"active")}),t)}))}},{key:"startVideo",value:function(){Ut(this.videoContainer,"active"),this._playVideo()}},{key:"_updateProgress",value:function(){var e=this.config.playingTime,t=(e-this.leftPlayingTime)*(100/e);this.progressBar.style.width="".concat(t,"%"),this.timeBox.timeBoxText.innerText="00:".concat(("0"+this.leftPlayingTime).slice(-2))}},{key:"_runAnimationsWithMethod",value:function(e){this.animations.forEach((function(t){"finished"!==t.playState&&t[e]()}))}},{key:"_playVideo",value:function(){var e=this,t=this.config,i=t.playingTime,n=t.playerProgressSpeed;this.isPlaying=!0,this.leftPlayingTime=this.leftPlayingTime||i,this._updateProgress(),this._runAnimationsWithMethod("play"),this.interval=setInterval((function(){e.leftPlayingTime--,e._updateProgress(),0===e.leftPlayingTime&&e._closeVideo()}),n)}},{key:"_pauseVideo",value:function(){this.isPlaying=!1,this._runAnimationsWithMethod("pause"),clearInterval(this.interval)}},{key:"_closeVideo",value:function(){clearInterval(this.interval),function(e,t){e&&e.classList.remove(t)}(this.videoContainer,"active"),this.isPlaying=!1,this.isFullScreen&&this._exitFullscreen()}},{key:"_createPlayPause",value:function(){var e=this,t=Wt("div",{className:"tbl-video-play-pause-wrapper"}),i=Wt("div",{className:"tbl-video-play",innerHTML:'<svg fill="#ffffff" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="-62.26 -62.26 249.03 249.03" xml:space="preserve" stroke="#fffafa"> <g id="SVGRepo_bgCarrier" stroke-width="0"></g> <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g> <g id="SVGRepo_iconCarrier"> <g> <path d="M113.956,57.006l-97.4-56.2c-4-2.3-9,0.6-9,5.2v112.5c0,4.6,5,7.5,9,5.2l97.4-56.2 C117.956,65.105,117.956,59.306,113.956,57.006z"></path> </g> </g> </svg> '}),n=Wt("div",{className:"tbl-video-pause active",innerHTML:'<svg width="24px" height="24px" viewBox="-2.4 -2.4 28.80 28.80" fill="none" xmlns="http://www.w3.org/2000/svg"> <g id="SVGRepo_bgCarrier" stroke-width="0"></g> <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g> <g id="SVGRepo_iconCarrier"> <path d="M8.5 7V18" stroke="#ffffff" stroke-width="3" stroke-linecap="round"></path> <path d="M15.5 7V12.5V18" stroke="#ffffff" stroke-width="3" stroke-linecap="round"></path> </g> </svg> '});return Ft(t,[i,n]),t.addEventListener("click",(function(){Ut(n,"active"),Ut(i,"active"),e.isPlaying?e._pauseVideo():e._playVideo()}),!0),{wrapper:t,play:i,pause:n}}},{key:"_createPlayerBar",value:function(){var e=Wt("div",{className:"tbl-video-player-bar-wrapper"}),t=Wt("div",{className:"tbl-video-player-bar"});this.progressBar=Wt("div",{className:"tbl-video-progress-bar"});var i=Wt("div",{className:"tbl-video-track-bar"});return Ft(t,[i,this.progressBar]),e.appendChild(t),e}},{key:"_createTimeBox",value:function(){var e=Wt("div",{className:"tbl-video-time-box-wrapper"}),t=Wt("div",{className:"tbl-video-time-box"});return e.appendChild(t),{wrapper:e,timeBoxText:t}}},{key:"_createVolume",value:function(){var e=Wt("div",{className:"tbl-video-volume-wrapper"}),t=function(){Ut(i,"active"),Ut(n,"active")},i=Wt("div",{className:"tbl-video-volume-on active",innerHTML:'<svg width="24px" height="24px" viewBox="-2.4 -2.4 28.80 28.80" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000"> <g id="SVGRepo_bgCarrier" stroke-width="0"></g> <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g> <g id="SVGRepo_iconCarrier"> <title>volume_fill</title> <g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g id="Media" transform="translate(-1344.000000, -48.000000)" fill-rule="nonzero"> <g id="volume_fill" transform="translate(1344.000000, 48.000000)"> <path d="M24,0 L24,24 L0,24 L0,0 L24,0 Z M12.5934901,23.257841 L12.5819402,23.2595131 L12.5108777,23.2950439 L12.4918791,23.2987469 L12.4918791,23.2987469 L12.4767152,23.2950439 L12.4056548,23.2595131 C12.3958229,23.2563662 12.3870493,23.2590235 12.3821421,23.2649074 L12.3780323,23.275831 L12.360941,23.7031097 L12.3658947,23.7234994 L12.3769048,23.7357139 L12.4804777,23.8096931 L12.4953491,23.8136134 L12.4953491,23.8136134 L12.5071152,23.8096931 L12.6106902,23.7357139 L12.6232938,23.7196733 L12.6232938,23.7196733 L12.6266527,23.7031097 L12.609561,23.275831 C12.6075724,23.2657013 12.6010112,23.2592993 12.5934901,23.257841 L12.5934901,23.257841 Z M12.8583906,23.1452862 L12.8445485,23.1473072 L12.6598443,23.2396597 L12.6498822,23.2499052 L12.6498822,23.2499052 L12.6471943,23.2611114 L12.6650943,23.6906389 L12.6699349,23.7034178 L12.6699349,23.7034178 L12.678386,23.7104931 L12.8793402,23.8032389 C12.8914285,23.8068999 12.9022333,23.8029875 12.9078286,23.7952264 L12.9118235,23.7811639 L12.8776777,23.1665331 C12.8752882,23.1545897 12.8674102,23.1470016 12.8583906,23.1452862 L12.8583906,23.1452862 Z M12.1430473,23.1473072 C12.1332178,23.1423925 12.1221763,23.1452606 12.1156365,23.1525954 L12.1099173,23.1665331 L12.0757714,23.7811639 C12.0751323,23.7926639 12.0828099,23.8018602 12.0926481,23.8045676 L12.108256,23.8032389 L12.3092106,23.7104931 L12.3186497,23.7024347 L12.3186497,23.7024347 L12.3225043,23.6906389 L12.340401,23.2611114 L12.337245,23.2485176 L12.337245,23.2485176 L12.3277531,23.2396597 L12.1430473,23.1473072 Z" id="MingCute" fill-rule="nonzero"></path> <path d="M13.2606,3.29912 C13.9570435,2.80169043 14.9125962,3.25623123 14.9943712,4.07969721 L15,4.19422 L15,19.8056 C15,20.6614 14.0747274,21.1747403 13.3570692,20.7626806 L13.2606,20.7007 L6.67953,15.9999 L4,15.9999 C2.94563773,15.9999 2.08183483,15.18405 2.00548573,14.1491661 L2,13.9999 L2,9.99991 C2,8.94554773 2.81587733,8.08174483 3.85073759,8.00539573 L4,7.99991 L6.67953,7.99991 L13.2606,3.29912 Z M19.6669,6.78255 C21.0974,8.06287 21.9999957,9.92664 21.9999957,11.9999 C21.9999957,14.0732 21.0974,15.9369 19.6669,17.2172 C19.2554,17.5856 18.6232,17.5506 18.2549,17.139 C17.8865,16.7275 17.9216,16.0953 18.3331,15.727 C19.3576,14.81 19.9999957,13.4806 19.9999957,11.9999 C19.9999957,10.5192 19.3576,9.18979 18.3331,8.27282 C17.9216,7.9045 17.8865,7.2723 18.2549,6.86078 C18.6232,6.44925 19.2554,6.41423 19.6669,6.78255 Z M17.6669,9.01867 C18.4837,9.74967 18.9999957,10.8151 18.9999957,11.9999 C18.9999957,13.1847 18.4837,14.2502 17.6669,14.9812 C17.2554,15.3495 16.6232,15.3145 16.2549,14.9029 C15.9148385,14.5230538 15.9185876,13.9551556 16.2448325,13.5803563 L16.3331,13.4909 C16.7439,13.1232 16.9999957,12.5921 16.9999957,11.9999 C16.9999957,11.46692 16.7925582,10.983431 16.4515975,10.6240097 L16.3331,10.5089 C15.9216,10.1406 15.8865,9.50842 16.2549,9.09689 C16.6232,8.68536 17.2554,8.65034 17.6669,9.01867 Z" id="形状" fill="#ffffff"></path> </g> </g> </g> </g> </svg> '});i.addEventListener("click",t,!0);var n=Wt("div",{className:"tbl-video-volume-off",innerHTML:'<svg width="24px" height="24px" viewBox="-2.4 -2.4 28.80 28.80" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000"> <g id="SVGRepo_bgCarrier" stroke-width="0"></g> <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g> <g id="SVGRepo_iconCarrier"> <title>volume_off_fill</title> <g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g id="Media" transform="translate(-672.000000, -144.000000)" fill-rule="nonzero"> <g id="volume_off_fill" transform="translate(672.000000, 144.000000)"> <path d="M24,0 L24,24 L0,24 L0,0 L24,0 Z M12.5934901,23.257841 L12.5819402,23.2595131 L12.5108777,23.2950439 L12.4918791,23.2987469 L12.4918791,23.2987469 L12.4767152,23.2950439 L12.4056548,23.2595131 C12.3958229,23.2563662 12.3870493,23.2590235 12.3821421,23.2649074 L12.3780323,23.275831 L12.360941,23.7031097 L12.3658947,23.7234994 L12.3769048,23.7357139 L12.4804777,23.8096931 L12.4953491,23.8136134 L12.4953491,23.8136134 L12.5071152,23.8096931 L12.6106902,23.7357139 L12.6232938,23.7196733 L12.6232938,23.7196733 L12.6266527,23.7031097 L12.609561,23.275831 C12.6075724,23.2657013 12.6010112,23.2592993 12.5934901,23.257841 L12.5934901,23.257841 Z M12.8583906,23.1452862 L12.8445485,23.1473072 L12.6598443,23.2396597 L12.6498822,23.2499052 L12.6498822,23.2499052 L12.6471943,23.2611114 L12.6650943,23.6906389 L12.6699349,23.7034178 L12.6699349,23.7034178 L12.678386,23.7104931 L12.8793402,23.8032389 C12.8914285,23.8068999 12.9022333,23.8029875 12.9078286,23.7952264 L12.9118235,23.7811639 L12.8776777,23.1665331 C12.8752882,23.1545897 12.8674102,23.1470016 12.8583906,23.1452862 L12.8583906,23.1452862 Z M12.1430473,23.1473072 C12.1332178,23.1423925 12.1221763,23.1452606 12.1156365,23.1525954 L12.1099173,23.1665331 L12.0757714,23.7811639 C12.0751323,23.7926639 12.0828099,23.8018602 12.0926481,23.8045676 L12.108256,23.8032389 L12.3092106,23.7104931 L12.3186497,23.7024347 L12.3186497,23.7024347 L12.3225043,23.6906389 L12.340401,23.2611114 L12.337245,23.2485176 L12.337245,23.2485176 L12.3277531,23.2396597 L12.1430473,23.1473072 Z" id="MingCute" fill-rule="nonzero"></path> <path d="M4.59599,8.00003 L15,18.404 L15,19.8057 C15,20.7004 13.9887,21.2209 13.2606,20.7008 L6.67953,16 L4,16 C2.89543,16 2,15.1046 2,14 L2,10 C2,8.89546 2.89543,8.00003 4,8.00003 L4.59599,8.00003 Z M15,4.19435 L15,13.5857 L16.1133,14.6989 C15.9251182,14.3389909 15.9730521,13.8927182 16.2448552,13.5804424 L16.3331,13.491 C16.7438,13.1234 17,12.5923 17,12 C17,11.46702 16.792478,10.983531 16.4515733,10.6241826 L16.3331,10.5091 C15.9216,10.1407 15.8865,9.50853 16.2549,9.097 C16.6232,8.68548 17.2554,8.65045 17.6669,9.01878 C18.4836,9.74978 19,10.8153 19,12 C19,13.1848 18.4836,14.2503 17.6669,14.9813 C17.3478,15.2669 16.8959,15.31 16.5373,15.1229 L18.0072,16.5929 C17.9694,16.2796 18.0801,15.9535 18.3331,15.7271 C19.3576,14.8102 20,13.4808 20,12 C20,10.5193 19.3576,9.18993 18.3331,8.27297 C17.9216,7.90464 17.8865,7.27244 18.2549,6.86092 C18.6232,6.44939 19.2554,6.41437 19.6669,6.7827 C21.0974,8.06302 22,9.92678 22,12 C22,14.0733 21.0974,15.9371 19.6669,17.2174 C19.4436,17.4173 19.1552,17.4984 18.8793,17.465 L20.4854,19.071 C20.8759,19.4616 20.8759,20.0947 20.4854,20.4853 C20.0949,20.8758 19.4617,20.8758 19.0712,20.4853 L3.51482,4.92891 C3.12429,4.53838 3.12429,3.90522 3.51482,3.51469 C3.90534,3.12417 4.53851,3.12417 4.92903,3.51469 L8.27485,6.86052 L13.2606,3.29924 C13.9887,2.7792 15,3.29964 15,4.19435 Z" id="形状" fill="#ffffff"></path> </g> </g> </g> </g> </svg> '});n.addEventListener("click",t,!0);var r=Wt("div",{className:"tbl-video-volume-bar-wrapper"}),o=Wt("input",{type:"range",min:"1",max:"100",value:"100"});o.addEventListener("input",(function(e){if("range"===e.target.type){var t=o.min,i=o.max,n=o.value;o.style.backgroundSize=100*(n-t)/(i-t)+"% 100%"}}),!0),r.appendChild(o),Ft(e,[i,n,r]),e.addEventListener("mouseenter",(function(){Ut(r,"active")}));var s=this.config.timeOutOfControlsInMS;return e.addEventListener("mouseleave",(function(){setTimeout((function(){return Ut(r,"active")}),s)})),e}},{key:"_createFullScreen",value:function(){var e=this,t=Wt("div",{className:"tbl-video-full-screen-wrapper"}),i=Wt("div",{className:"tbl-video-full-screen active",innerHTML:'<svg width="24px" height="24px" viewBox="-102.4 -102.4 1228.80 1228.80" xmlns="http://www.w3.org/2000/svg" fill="#c0c0c0" stroke="#c0c0c0" stroke-width="0.01024"> <g id="SVGRepo_bgCarrier" stroke-width="0"></g> <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g> <g id="SVGRepo_iconCarrier"> <path fill="#c0c0c0" d="m160 96.064 192 .192a32 32 0 0 1 0 64l-192-.192V352a32 32 0 0 1-64 0V96h64v.064zm0 831.872V928H96V672a32 32 0 1 1 64 0v191.936l192-.192a32 32 0 1 1 0 64l-192 .192zM864 96.064V96h64v256a32 32 0 1 1-64 0V160.064l-192 .192a32 32 0 1 1 0-64l192-.192zm0 831.872-192-.192a32 32 0 0 1 0-64l192 .192V672a32 32 0 1 1 64 0v256h-64v-.064z"></path> </g> </svg> '}),n=Wt("div",{className:"tbl-video-exit-full-screen",innerHTML:'<svg width="24px" height="24px" viewBox="-2.4 -2.4 28.80 28.80" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000"> <g id="SVGRepo_bgCarrier" stroke-width="0"></g> <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g> <g id="SVGRepo_iconCarrier"> <title>ic_fluent_full_screen_zoom_24_regular</title> <desc>Created with Sketch.</desc> <g id="🔍-Product-Icons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g id="ic_fluent_full_screen_zoom_24_regular" fill="#ffffff" fill-rule="nonzero"> <path d="M16.25,15.5 L20.25,15.5 C20.6642136,15.5 21,15.8357864 21,16.25 C21,16.6296958 20.7178461,16.943491 20.3517706,16.9931534 L20.25,17 L17,17 L17,20.25 C17,20.6642136 16.6642136,21 16.25,21 C15.8703042,21 15.556509,20.7178461 15.5068466,20.3517706 L15.5,20.25 L15.5,16.25 C15.5,15.8703042 15.7821539,15.556509 16.1482294,15.5068466 L16.25,15.5 L20.25,15.5 L16.25,15.5 Z M3.75,15.5 L7.75,15.5 C8.12969577,15.5 8.44349096,15.7821539 8.49315338,16.1482294 L8.5,16.25 L8.5,20.25 C8.5,20.6642136 8.16421356,21 7.75,21 C7.37030423,21 7.05650904,20.7178461 7.00684662,20.3517706 L7,20.25 L7,17 L3.75,17 C3.33578644,17 3,16.6642136 3,16.25 C3,15.8703042 3.28215388,15.556509 3.64822944,15.5068466 L3.75,15.5 L7.75,15.5 L3.75,15.5 Z M7.75,3 C8.12969577,3 8.44349096,3.28215388 8.49315338,3.64822944 L8.5,3.75 L8.5,7.75 C8.5,8.12969577 8.21784612,8.44349096 7.85177056,8.49315338 L7.75,8.5 L3.75,8.5 C3.33578644,8.5 3,8.16421356 3,7.75 C3,7.37030423 3.28215388,7.05650904 3.64822944,7.00684662 L3.75,7 L7,7 L7,3.75 C7,3.33578644 7.33578644,3 7.75,3 Z M16.25,3 C16.6296958,3 16.943491,3.28215388 16.9931534,3.64822944 L17,3.75 L17,7 L20.25,7 C20.6642136,7 21,7.33578644 21,7.75 C21,8.12969577 20.7178461,8.44349096 20.3517706,8.49315338 L20.25,8.5 L16.25,8.5 C15.8703042,8.5 15.556509,8.21784612 15.5068466,7.85177056 L15.5,7.75 L15.5,3.75 C15.5,3.33578644 15.8357864,3 16.25,3 Z" id="🎨-Color"></path> </g> </g> </g> </svg> '});return Ft(t,[i,n]),document.addEventListener("fullscreenchange",(function(){Ut(i,"active"),Ut(n,"active")})),t.addEventListener("click",(function(){e.isFullScreen?e._exitFullscreen():e._enterFullScreen()}),!0),t}},{key:"_enterFullScreen",value:function(){this.videoContainer.requestFullscreen?this.videoContainer.requestFullscreen():this.videoContainer.mozRequestFullScreen?this.videoContainer.mozRequestFullScreen():this.videoContainer.webkitRequestFullscreen?this.videoContainer.webkitRequestFullscreen():this.videoContainer.msRequestFullscreen&&this.videoContainer.msRequestFullscreen(),this.isFullScreen=!0}},{key:"_exitFullscreen",value:function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen(),this.isFullScreen=!1}}],i&&qt(t.prototype,i),n&&qt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Kt=Yt;function Qt(e){return Qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qt(e)}function Zt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,r,o,s,a=[],l=!0,c=!1;try{if(o=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;l=!1}else for(;!(l=(n=o.call(i)).done)&&(a.push(n.value),a.length!==t);l=!0);}catch(e){c=!0,r=e}finally{try{if(!l&&null!=i.return&&(s=i.return(),Object(s)!==s))return}finally{if(c)throw r}}return a}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Xt(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Xt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xt(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function Jt(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if("object"!==Qt(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==Qt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===Qt(o)?o:String(o)),n)}var r,o}var ei=jt.EVENTS,ti=ei.RESPONSE_READY,ii=ei.IMAGE_LOADED,ni=function(){function e(t,i,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.model=t,this.videoBackFillManager=i,this.placeholderCard=n,this.config=this._getConfig(),this.imageLoaded=!1,this.onResponseHandler=this._init.bind(this),this._init()}var t,i,n;return t=e,i=[{key:"_parseData",value:function(){var e=this.placement,t=e.name,i=e.data;if(!t||!i)return null;var n=i.id,r=i.list,o=Zt(void 0===r?[]:r,1)[0];if(!n||!o)return null;var s=o.url,a=o.thumbnail,l=Zt(void 0===a?[]:a,1)[0];return s&&l?(o.thumbnail=l,o):null}},{key:"_init",value:function(){this.placement=this.videoBackFillManager.getNextPlacement(this.placeholderCard),this.placement?(document.removeEventListener(ti,this.onResponseHandler),this.itemData=this._parseData(),this.itemData?(this.header=e._createHeader(),this.style=this._createStyle(),this.thumbnail=this._createThumbnail(),this.description=this._createDescription(),this.item=this._createItem(),this.widget=this._createWidget(),Ft(this.widget,[this.header,this.item]),this.controls=new Kt(this.model,this.widget,{img:this.thumbnail,title:this.description.title,sponsor:this.description.sponsor,cta:this.description.cta}),Ft(this.placeholderCard,[this.style,this.widget]),this._notifyEvent("available"),this.placeholderObserver=this._createPlaceholderObserver(),this.placeholderObserver.observe(this.placeholderCard)):this._init()):document.addEventListener(ti,this.onResponseHandler)}},{key:"_isItemVisible",value:function(){var e=this.widget.getBoundingClientRect(),t=e.left,i=e.top,n=e.width,r=e.height,o=this.placeholderCard.shadowRoot.elementFromPoint(t+n/2,i+r/2),s=this.placement.name,a='[data-placement-name="'.concat(s,'"]');return o.closest(a)}},{key:"_onPlaceHolderVisible",value:function(){var t=this;this.imageLoaded&&(this.controls.startVideo(),this._isItemVisible()&&this._notifyEvent("visible"),this.placeholderObserver.unobserve(this.placeholderCard)),this.thumbnail.addEventListener(ii,(function(){e._isInViewport(t.placeholderCard)&&t._onPlaceHolderVisible()}))}},{key:"_createPlaceholderObserver",value:function(){var e=this,t=this.config.intersectingOptions;return new IntersectionObserver((function(t){t.forEach((function(t){t.isIntersecting&&e._onPlaceHolderVisible()}))}),t)}},{key:"_createWidget",value:function(){var e=this.placement,t=e.name,i=e.data.id;return Wt("div",{id:"taboola-container",className:"videoBackFill",dataset:{placementName:t,responseId:i}})}},{key:"_getConfig",value:function(){return{intersectingOptions:{threshold:yi.getFeatureFlags(this.model).visibleThreshold||1,rootMargin:"0px"}}}},{key:"_getItemData",value:function(){var e=(this.placement||{}).data,t=(void 0===e?{}:e).list,i=Zt(void 0===t?[]:t,1)[0];return i||{}}},{key:"_createThumbnail",value:function(){var e=this,t=this.itemData.thumbnail.url,i=new Image;return i.onload=function(){e.imageLoaded=!0,i.dispatchEvent(new CustomEvent(ii))},i.src=t,i.className="tbl-thumbnail",i}},{key:"_createDescription",value:function(){var e=this.itemData,t=e.branding,i=void 0===t?"branding":t,n=e.name,r=void 0===n?"itemName":n,o=Wt("div",{className:"tbl-description"}),s=Wt("div",{className:"tbl-sponsor",innerText:i}),a=Wt("div",{className:"tbl-title",innerText:r}),l=Wt("div",{className:"tbl-cta",innerText:"Read More"});return Ft(o,[s,a,l]),{wrapper:o,sponsor:s,title:a,cta:l}}},{key:"_createItem",value:function(){var e=this.itemData,t=e.url,i=void 0===t?"item-url":t,n=e.name,r=void 0===n?"item-name":n,o=e.id,s=Wt("a",{target:"_blank",href:i,dataset:{itemTitle:r,itemId:void 0===o?"item-id":o}}),a=Wt("div",{className:"tbl-item"});return Ft(a,[this.thumbnail,this.description.wrapper]),Ft(s,[a]),s}},{key:"_notifyEvent",value:function(e){var t=this.itemData.url,i=/(https.*notify-)(.*)(\?.*)/gi;if(t.match(i)){var n=t.replace(i,"$1".concat(e,"$3"));fetch(n).then((function(){}))}}},{key:"_createStyle",value:function(){var e=(new DOMParser).parseFromString("<style>.videoBackFill{position:absolute;top:0;left:0;width:100%;height:100%;z-index:2147483647;cursor:pointer;display:none}.videoBackFill.active{display:block}.videoBackFill .tbl-item{position:absolute;width:100%;height:100%;top:0;left:0;z-index:2147483647}.videoBackFill .tbl-thumbnail{width:70%;height:100%;background-position:center;background-repeat:no-repeat;background-size:cover}.videoBackFill .tbl-description{position:absolute;width:30%;height:100%;right:0;top:0;background-color:#ebeae8;color:#000;font-family:Helvetica;display:flex;flex-direction:column;justify-content:center}.videoBackFill .tbl-sponsor{font-weight:400;font-size:75%;margin:3% 10%;opacity:0}.videoBackFill .tbl-title{margin:3% 10%;padding-bottom:10%;opacity:0}.videoBackFill .tbl-cta{font-size:80%;margin:7% 7% 3%;padding:3%;text-align:center;border:solid 1px #000;opacity:0}.videoBackFill .tbl-close{position:absolute;top:0;right:0;background:0 0;border:1px solid #fff;border-radius:7px;margin:10px;display:flex;flex-direction:column;justify-content:center;transition:1s;opacity:0;z-index:2147483647}.videoBackFill .tbl-close.active{opacity:1}.videoBackFill .tbl-close svg{width:16px;height:16px;padding:3px}.videoBackFill .tbl-video-controls-container{position:absolute;width:100%;height:10%;bottom:0;left:0;display:flex;flex-direction:row;justify-content:center;padding-top:1px;padding-bottom:4px;cursor:auto;background:linear-gradient(0deg,rgba(0,0,0,.85),rgba(0,0,0,.1) 70%,transparent);transition:.4s;transform:translate(0,100%);z-index:2147483647}.videoBackFill .tbl-video-controls-container.active{transform:translate(0)}.videoBackFill .tbl-video-play-pause-wrapper{display:flex;flex-direction:column;justify-content:center;flex:0 0 10%}.videoBackFill .tbl-video-play{margin:auto;cursor:pointer;display:none}.videoBackFill .tbl-video-play.active{display:block}.videoBackFill .tbl-video-pause{margin:auto;cursor:pointer;display:none}.videoBackFill .tbl-video-pause.active{display:block}.videoBackFill .tbl-video-pause svg:hover path{stroke:#0099e6!important}.videoBackFill .tbl-video-play svg:hover{fill:#0099e6!important}.videoBackFill .tbl-video-player-bar-wrapper{width:69%;display:flex;flex-direction:column;justify-content:center;flex:1 0 0;height:5px;margin:auto;cursor:pointer}.videoBackFill .tbl-video-player-bar{width:90%;display:flex;flex-direction:column;justify-content:center;flex:1 0 0;position:relative}.videoBackFill .tbl-video-track-bar{background-color:silver;height:100%;width:100%;opacity:.7;position:absolute;top:0;left:0}.videoBackFill .tbl-video-progress-bar{background-color:#0099e6;height:100%;position:absolute;top:0;left:0}.videoBackFill .tbl-video-time-box-wrapper{display:flex;flex-direction:column;justify-content:center;flex:0 0 10%;cursor:pointer}.videoBackFill .tbl-video-time-box{background-color:#2d2d2d;border:1px solid #777;border-radius:4px;color:#fff;font-size:85%;height:auto;padding:1px 4px;text-align:center;margin:auto}.videoBackFill .tbl-video-volume-wrapper{display:flex;flex-direction:column;justify-content:center;flex:0 0 10%;position:relative}.videoBackFill .tbl-video-volume-on{margin:auto;cursor:pointer;display:none}.videoBackFill .tbl-video-volume-on.active{display:block}.videoBackFill .tbl-video-volume-off{margin:auto;cursor:pointer;display:none}.videoBackFill .tbl-video-volume-off.active{display:block}.videoBackFill .tbl-video-volume-on svg:hover path:nth-child(2){fill:#0099e6!important}.videoBackFill .tbl-video-volume-off svg:hover path:nth-child(2){fill:#0099e6!important}.videoBackFill .tbl-video-volume-bar-wrapper{position:absolute;width:8px;height:60px;top:-60px;left:calc(50% - 3px);opacity:.7;cursor:pointer;margin:0;display:none}.videoBackFill .tbl-video-volume-bar-wrapper.active{display:block}.videoBackFill .tbl-video-volume-bar-wrapper input[type=range]{-webkit-appearance:none;width:60px;height:8px;border-radius:0;background-size:100% 100%;background:rgba(192,192,192,.7) linear-gradient(#0099e6,#0099e6) no-repeat;position:absolute;left:0;bottom:0;transform:translate(-26px,-26px) rotate(270deg);margin:0;cursor:pointer}.videoBackFill .tbl-video-volume-bar-wrapper input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;height:8px;width:3px;background:#fff;cursor:pointer;box-shadow:0 0 2px 0 #555;transition:background .3s ease-in-out}.videoBackFill .tbl-video-volume-bar-wrapper input[type=range]::-webkit-slider-runnable-track{-webkit-appearance:none;width:10px;box-shadow:none;border:none;background:0 0}.videoBackFill .tbl-video-full-screen-wrapper{display:flex;flex-direction:column;justify-content:center;flex:0 0 10%}.videoBackFill .tbl-video-full-screen{margin:auto;cursor:pointer;display:none}.videoBackFill .tbl-video-full-screen.active{display:block}.videoBackFill .tbl-video-exit-full-screen{margin:auto;cursor:pointer;display:none}.videoBackFill .tbl-video-exit-full-screen.active{display:block}.videoBackFill .tbl-video-full-screen svg:hover path{fill:#0099e6!important}.videoBackFill .tbl-video-exit-full-screen svg:hover path{fill:#0099e6!important}</style> ","text/xml").firstChild.innerHTML;return Wt("style",{innerHTML:e})}}],n=[{key:"_isInViewport",value:function(e){var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}},{key:"_createHeader",value:function(){return Wt("div",{className:"tbl-header",innerHTML:"<span class='tbl-header-text'>You May Like</span><span class='tbl-header-attribution'>Sponsored by Taboola</span>"})}}],i&&Jt(t.prototype,i),n&&Jt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),ri=ni;function oi(e){return oi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oi(e)}function si(e){return function(e){if(Array.isArray(e))return ci(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||li(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ai(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,r,o,s,a=[],l=!0,c=!1;try{if(o=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;l=!1}else for(;!(l=(n=o.call(i)).done)&&(a.push(n.value),a.length!==t);l=!0);}catch(e){c=!0,r=e}finally{try{if(!l&&null!=i.return&&(s=i.return(),Object(s)!==s))return}finally{if(c)throw r}}return a}}(e,t)||li(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function li(e,t){if(e){if("string"==typeof e)return ci(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?ci(e,t):void 0}}function ci(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function ui(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function di(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ui(Object(i),!0).forEach((function(t){hi(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ui(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function hi(e,t,i){return(t=pi(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function fi(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,pi(n.key),n)}}function pi(e){var t=function(e,t){if("object"!==oi(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==oi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===oi(t)?t:String(t)}var mi=function(){function e(t,i,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.model=t,this.publisherName=r,this.config=this._getConfig(),this.numberRequests=0,this.placeHolderCardsUsed=[],this.recommendationsPool=[],this.lastResponse=null,this.isWaitingForResponse=!1,this._listenToScrollChange(i,n)}var t,i,n;return t=e,i=[{key:"createNewBackFillVideo",value:function(e){this._isNotCardUsed(e)&&(this.placeHolderCardsUsed.push(e),new ri(this.model,this,e))}},{key:"_listenToScrollChange",value:function(e,t){window.addEventListener("scroll",function(e,t,i,n){var r;return function(){var o=n||window,s=arguments,a=i&&!r;clearTimeout(r),r=setTimeout((function(){r=null,i||e.apply(o,s)}),t),a&&e.apply(o,s)}}(e,500,!1,t))}},{key:"_isNotCardUsed",value:function(e){return!this.placeHolderCardsUsed.some((function(t){return e===t}))}},{key:"getNextPlacement",value:function(e){var t=this.recommendationsPool.pop();if(t)return 0===this.recommendationsPool.length&&this._getRecommendations(e),t;this._getRecommendations(e)}},{key:"_getConfig",value:function(){var t=e.getFeatureFlags(this.model),i=t.numberRecommendationsInBatch,n=void 0===i?5:i,r=t.numberItemsInPlc,o=void 0===r?1:r,s=t.cardDimension;return{numberRecommendationsInBatch:n,numberItemsInPlc:o,cardDimension:void 0===s?{width:600,height:300}:s}}},{key:"_setCardDimension",value:function(e){this.config.cardDimension={width:e.offsetWidth,height:e.offsetHeight}}},{key:"_getNextPlacementStartIndexArray",value:function(){for(var e=this.config.numberRecommendationsInBatch,t=[],i=this.numberRequests*e,n=0;n<e;n++)t.push(i);return t}},{key:"_getNextPlacementNames",value:function(){var e=jt.PLACEMENT_NAME;return this._getNextPlacementStartIndexArray().map((function(t,i){var n=t+i+1;return"".concat(e,"-").concat(n)}))}},{key:"_getNextBatchPlacementsParams",value:function(){var e=this.config,t=e.cardDimension,i=t.width,n=t.height,r=e.numberItemsInPlc,o={};return this._getNextPlacementNames().forEach((function(e,t){var s=t+1;o["placement".concat(s,".name")]=e,o["placement".concat(s,".rec-count")]=r,o["placement".concat(s,".thumbnail.width")]=i,o["placement".concat(s,".thumbnail.height")]=n,o["placement".concat(s,".visible")]=!1,o["placement".concat(s,".available")]=!1})),o}},{key:"_createRecommendationRequestURL",value:function(){var e=jt.DEFAULT_REQUEST_PARAMS,t="".concat(jt.REQUEST_PREFIX,"/").concat(this.publisherName,"/recommendations.multiple-get?"),i=(this.lastResponse||{}).session,n=void 0===i?"init":i;return t+function(e){var t=[];for(var i in e)t.push(encodeURIComponent(i)+"="+encodeURIComponent(e[i]));return t}(di(di({},e),{},{"source.type":"text","source.id":location.pathname,"source.url":location.origin+location.pathname,"user.session":n,"user.referrer":document.referrer},this._getNextBatchPlacementsParams())).join("&")}},{key:"_fillRecommendationsPool",value:function(){for(var e,t=jt.PLACEMENT_NAME,i=[],n=0,r=Object.entries(this.lastResponse);n<r.length;n++){var o=ai(r[n],2),s=o[0],a=o[1],l=a.list;if(ai(void 0===l?[]:l,1)[0]&&s.indexOf(t)>-1){var c={name:s,data:a,responseSession:this.lastResponse.session};i.push(c)}}(e=this.recommendationsPool).push.apply(e,si(i.reverse()))}},{key:"_fetchRequest",value:function(e){var t=this;fetch(e).then((function(e){return e.json()})).then((function(e){t._handleResponse(e)})).catch((function(){}))}},{key:"_handleResponse",value:function(e){var t=jt.EVENTS.RESPONSE_READY;this.lastResponse=e,this._fillRecommendationsPool(),this.isWaitingForResponse=!1,this.numberRequests++,document.dispatchEvent(new CustomEvent(t))}},{key:"_getRecommendations",value:function(e){if(!this.isWaitingForResponse){this._setCardDimension(e);var t=this._createRecommendationRequestURL();this.isWaitingForResponse=!0;try{this._fetchRequest(t)}catch(e){}}}}],n=[{key:"_getMappedPublisherName",value:function(){for(var e=0,t=Object.entries(Ht);e<t.length;e++){var i=ai(t[e],2),n=i[0],r=i[1];if(location.href.match(n))return r}return null}},{key:"isActive",value:function(t){var i=e.getFeatureFlags(t).isActive;return!!i}},{key:"getFeatureFlags",value:function(e){return e.get("videoBackFill")||{}}},{key:"getInstance",value:function(t,i,n){if(e.isActive(t)){var r=e._getMappedPublisherName();if(r)return this.instance||(this.instance=new e(t,i,n,r)),this.instance}}}],i&&fi(t.prototype,i),n&&fi(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),yi=mi;function vi(e){return vi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vi(e)}function gi(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if("object"!==vi(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==vi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===vi(o)?o:String(o)),n)}var r,o}function bi(e,t){return bi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},bi(e,t)}function _i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=Si(e);if(t){var r=Si(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return function(e,t){if(t&&("object"===vi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return wi(e)}(this,i)}}function wi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Si(e){return Si=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Si(e)}var Pi=i(1999),Ti=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bi(e,t)}(o,e);var t,i,n,r=_i(o);function o(e,t){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(i=r.call(this,e)).model=e,i.cardsSelector=t,i.usedCards=[],i.shouldSearchForNewCard=!0,i._setMinDistance(),i._createDecisionFuncs(),i.videoBackFillManager=yi.getInstance(i.model,i._onScrollAddBackFillVideo,wi(i)),i._handleVideoBackFill(),i}return t=o,(i=[{key:"_createDecisionFuncs",value:function(){this.decisionsFuncs=[this._isNotUsedCard,this._isBelowUsedCard,this._viewPortFunc,this._isMinDistanceOk]}},{key:"_handleVideoBackFill",value:function(){if(this.videoBackFillManager)for(var e=this._getPlaceHolders(),t=e.length-1;t>=0;t--)this._isCardSuitable(e[t])&&this.videoBackFillManager.createNewBackFillVideo(e[t])}},{key:"_onScrollAddBackFillVideo",value:function(){this._handleVideoBackFill()}},{key:"getCard",value:function(e,t){if(this.shouldSearchForNewCard||t){t||this.log.info("searching for card");var i=void 0;this.cb=e;for(var n=this._getPlaceHolders(),r=n.length-1;r>=0;r--)this._isCardSuitable(n[r])&&(i=n[r]);i?(this.log.info("found card: ",i),this.model.set("eligiblePlaceholder",i),this._callCardCB(e,i)):(this.shouldSearchForNewCard=!1,this._registerListeners())}}},{key:"_getPlaceHolders",value:function(){var e=this.getElementsForMsnPlaceHolders();return this.model.get("msnWebComponentsEnabled")?this._getShadowDOMPlaceholders(e):this._getNonShadowDOMPlaceholders(e)}},{key:"_newShadowDomDrilldown",value:function(e,t){for(var i=0;i<t.length;i++)e&&e.shadowRoot&&(e=e.shadowRoot.querySelector(t[i]));return e}},{key:"_extractDrilldownArray",value:function(){return this.model.get("msnNewDomDrillDown")?this.model.get("msnNewDomDrillDown").split(","):[]}},{key:"_returnArrayOfShadowRootNodes",value:function(e){return e&&e.shadowRoot&&e.shadowRoot.querySelectorAll(this.cardsSelector)?Array.prototype.slice.call(e.shadowRoot.querySelectorAll(this.cardsSelector)):(0,S.default)(this.cardsSelector)}},{key:"getElementsForMsnPlaceHolders",value:function(){var e=this,t=document.querySelectorAll(this.model.get("msnFeedRootSelector")),i=this._extractDrilldownArray()||[],n=[];return Pi.forEach(t,(function(t){var r=e._newShadowDomDrilldown(t,i);r&&r.shadowRoot?n.push(e._returnArrayOfShadowRootNodes(r)):n.push(e._returnArrayOfShadowRootNodes(t))}),this),Pi.flattenArray(n)}},{key:"_getNonShadowDOMPlaceholders",value:function(e){var t=[];this.model.get("msnCanOpenFirstRow")?t=this._getRowPlaceHolder(1,this.model.get("msnMinimumCardInFirstRow")):this.model.get("msnCanOpenSecondRow")&&(t=this._getRowPlaceHolder(2,this.model.get("msnMinimumCardInSecondRow")));for(var i=0;i<e.length;i++)t.push(e[i]);return t}},{key:"_getNewShadowDomPlaceholder",value:function(e,t){if(t||t.shadowRoot){var i=t.shadowRoot.querySelector(this.model.get("msnNewDomSecondSizeSelector"));e.push(i.parentElement)}}},{key:"_getOriginalShadowDomPlaceholder",value:function(e,t){t&&t.parentElement&&e.push(t.parentElement)}},{key:"_getShadowDOMPlaceholders",value:function(e){var t=this,i=[],n=this.model.get("msnSizeSelector"),r=this.model.get("msnNewDomSizeSelector");return e&&e.length&&n&&e.forEach((function(e){if(e&&e.shadowRoot){var o=e.shadowRoot.querySelector(n),s=e.shadowRoot.querySelector(r);s?t._getNewShadowDomPlaceholder(i,s):t._getOriginalShadowDomPlaceholder(i,o)}})),i}},{key:"_getRowPlaceHolder",value:function(e,t){for(var i=[],n=[],r=document.querySelectorAll(this.model.get("msnUpperRowsSelector")),o=1,s=0,a=0;a<r.length&&o<=e;a++){var l=r[a],c=l.style.top&&Pi.convertRem(parseFloat(l.style.top));s!==c&&o++,o===e&&(!this.model.get("msnIsOpenOnSponsoredCards")&&l.querySelector(this.model.get("msnSponsoredSelector"))||n.push(l)),s=c}return n.length>=t&&("rtl"===document.querySelector("html").getAttribute("dir").toLowerCase()?i.push([n[1],n[0]]):i.push([n[0],n[1]])),i}},{key:"getEligiblePlaceHolders",value:function(){var e=this._getPlaceHolders()||[];return Pi.flattenArray(e)}},{key:"_isCardSuitable",value:function(e){for(var t=0;t<this.decisionsFuncs.length;t++){var i=this.decisionsFuncs[t].bind(this),n=e;if(Pi.isArray(e)&&(n=e[0]),!i(n))return!1}return!0}},{key:"_registerListeners",value:function(){T().once("window:scroll:change",this._onScroll.bind(this),this)}},{key:"_unRegisterListeners",value:function(){T().off("window:scroll:change",this._onScroll.bind(this),this)}},{key:"_callCardCB",value:function(e,t){this.shouldSearchForNewCard=!0,this.cb({cardToHide:Pi.isArray(t)?t[0]:t,additionalCard:Pi.isArray(t)?t[1]:void 0}),this.cb=void 0}},{key:"_onScroll",value:function(){this.getCard(this.cb,!0)}},{key:"setCardAsUsed",value:function(e){var t={cardEl:e,offsetTop:Pi.getTopOfEl(e)};Pi.extend(t,e.getBoundingClientRect()),t.offsetBottom=t.offsetTop+t.height,this.usedCards.push(t)}},{key:"_isNotUsedCard",value:function(e){return!this.usedCards.some((function(t){return t.cardEl===e}))}},{key:"_isBelowUsedCard",value:function(e){var t=Pi.getTopOfEl(e);return Pi.every(this.usedCards,(function(e){var i=e.offsetBottom;return t>i}))}},{key:"_viewPortFunc",value:function(e){return this.model.get("isOpenInViewPort")&&this._isCardInViewPort(e)||this._isElementBelowView(e)}},{key:"_isCardInViewPort",value:function(e){return Pi.getViewPercent(e,e.offsetWidth,e.offsetHeight)>=this.model.get("cardViewPercent")}},{key:"_isElementBelowView",value:function(e){return e.getBoundingClientRect().top>(window.innerHeight||document.documentElement.clientHeight)}},{key:"_isMinDistanceOk",value:function(e){var t=Pi.getTopOfEl(e),i=this.minCardDistance;return Pi.every(this.usedCards,(function(e){return t-e.offsetBottom>=i}))}}])&&gi(t.prototype,i),n&&gi(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(Lt),Ai=Ti;function Ei(e){return Ei="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ei(e)}function Ci(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if("object"!==Ei(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==Ei(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===Ei(o)?o:String(o)),n)}var r,o}function Oi(e,t){return Oi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Oi(e,t)}function ki(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=Ii(e);if(t){var r=Ii(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Di(this,i)}}function Di(e,t){if(t&&("object"===Ei(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ri(e)}function Ri(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ii(e){return Ii=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ii(e)}var xi=i(1999),Ni=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Oi(e,t)}(a,e);var t,i,n,s=ki(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=s.call(this,e)).log=new r.Z({unitType:t.model.get("unitType"),className:"msnFullEligibilityPredict",version:t.model.get("version"),isDebug:t.model.get("isDebug")}),t.predictPath="predictors.msnFullEligibility",t.maxPPS=t.model.get("".concat(t.predictPath,".maxPPS")),t.predictKey=t.model.get("".concat(t.predictPath,".predictPoints")),t.msnWebComponentsEnabled=t.model.get("msnWebComponentsEnabled"),t.cardLocator=new Ai(t.model,t.model.get("msnSelector")),t.scrollManager=new I,t.availableCardsElements=t.cardLocator.getEligiblePlaceHolders(),t.model.get("".concat(t.predictPath,".isListenToScrollSpeedChange"))&&t.scrollManager.registerForPPSChange(t.onScrollSpeedChangeCallback.bind(Ri(t))),Array.isArray(t.availableCardsElements)&&t.availableCardsElements.length?(t.msnWebComponentsEnabled?t._observeByScroll():t._observeByObserver(),t):Di(t)}return t=a,(i=[{key:"_observeByScroll",value:function(){this.onScroll=this._onScroll.bind(this),T().on("window:scroll:change",this.onScroll)}},{key:"_onScroll",value:function(){var e=this;this.availableCardsElements.forEach((function(t){e.isPixelsPoint=xi.hasPassedPixelFromSelector(t,void 0,e.predictPoint,!1),e.isPixelsPoint&&e._canPredict()&&e.isPixelsPoint&&e._predictWithPredictKey()}))}},{key:"_observeByObserver",value:function(){this.intersectionObserver=new IntersectionObserver(this.intersectionCallback.bind(this),{root:null,threshold:1,rootMargin:"0px"}),this._observePossibleCards()}},{key:"_observePossibleCards",value:function(){var e=this;this.availableCardsElements.forEach((function(t){e.intersectionObserver.observe(t)}))}},{key:"intersectionCallback",value:function(e,t){this.isSelectorsInViewPort=e.some((function(e){return e.isIntersecting})),this.isSelectorsInViewPort&&this._canPredict()&&this.isSelectorsInViewPort&&this._predictWithPredictKey()}},{key:"_canPredict",value:function(){var e=this.scrollManager.getPps();if(e>this.maxPPS)return this.log.predict("Can't predict, current pps (".concat(e,") is higher then maxPps (").concat(this.maxPPS,")")),!1;var t=this.model.get("adState")===o.adState.playing,i=this.model.get("isEligibleToPlay"),n=i&&!t;if(this.log.predict("can predict = is eligible (".concat(i,") && no other ad playing (").concat(!t,") = ").concat(n)),n&&this._checkIsGet1OnlyOnAdLoaded()){var r=this.model.get("playerHasRvInQ");n=n&&r,this.log.predict("can predict = is player having RV1 in queue = ".concat(this.model.get("playerHasRvInQ")))}return n}},{key:"_predictWithPredictKey",value:function(){T().off("window:scroll:change",this.onScroll),this._predicted(this.predictKey)}},{key:"_isAllowedForPredictOnScrollEnd",value:function(){return this._canPredict()}}])&&Ci(t.prototype,i),n&&Ci(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(p),Vi=ee(Ni),Li=i(6609),ji=i(1999),Bi=i.n(ji);function Mi(e){return Mi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mi(e)}function Fi(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if("object"!==Mi(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==Mi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===Mi(o)?o:String(o)),n)}var r,o}function Ui(e,t){return Ui=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ui(e,t)}function Wi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=zi(e);if(t){var r=zi(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return function(e,t){if(t&&("object"===Mi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Hi(e)}(this,i)}}function Hi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zi(e){return zi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},zi(e)}function $i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,r,o,s,a=[],l=!0,c=!1;try{if(o=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;l=!1}else for(;!(l=(n=o.call(i)).done)&&(a.push(n.value),a.length!==t);l=!0);}catch(e){c=!0,r=e}finally{try{if(!l&&null!=i.return&&(s=i.return(),Object(s)!==s))return}finally{if(c)throw r}}return a}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Gi(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Gi(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gi(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var qi=function(e,t){var i;return[0,0,-1*(Bi().getRequiredHeight("data-card-index",e)*+(null!==(i=e.get("predictors.feedInViewPredict.firstCardHeightRatio"))&&void 0!==i?i:1)+Bi().getFeedTitleHeight()+Bi().getMarginToStartCard(e,'[data-card-index="'.concat(3,'"]'),t)),0].map((function(e){return"".concat(e,"px")})).join(" ")},Yi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ui(e,t)}(a,e);var t,i,n,s=Wi(a);function a(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var i=(t=s.call(this,e)).model;t.predicted=!1,t.predictPath="predictors.feedInViewPredict";var n=i.get("".concat(t.predictPath,".predictPoints")),l=E(Hi(t),t.model).getParentSelector();t.log=new r.Z({className:"feedInViewPredict",unitType:"".concat(i.get("unitType")," (").concat(i.get("subUnitType"),")"),version:i.get("version"),isDebug:i.get("isDebug")});var c,u,d,h=function(e){return function(i){return i.map((function(i){return t.log.debug(e(i),i),i}))}},f=(c=i,u="adState",d=function(){return c.get(u)},Li.ZP.fromEvents(c,["change",u].join(":")).map(d).skipDuplicates().toProperty(d)).map((function(e){return e!==o.adState.playing})).thru(h((function(e){return"Ad is ".concat(e?"NOT PLAYING":"PLAYING")}))),p=i.get("permanentCard"),m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.root,n=void 0===i?null:i,r=t.threshold,o=void 0===r?0:r,s=t.rootMargin,a=void 0===s?"0px 0px 0px 0px":s;return Li.ZP.stream((function(t){var i=t.emit,r=new IntersectionObserver((function(e){var t=$i(e,1)[0].isIntersecting;i(t)}),{root:n,threshold:o,rootMargin:a});return r.observe(e),function(){return r.disconnect()}}))}(l,p?{threshold:.5}:{threshold:0,rootMargin:qi(i,l)}).toProperty((function(){return!1})).thru(h((function(e){return"".concat(p?"Permanent card "+p:"Feed"," ").concat(e?"IN":"OUTSIDE"," view")}))),y=Li.ZP.fromEvents(window,"scroll"),v=Li.ZP.merge([y.map((function(){return!1})),y.debounce(1e3*(i.get("predictors.feedInViewPredict.scrollDebounceSeconds")||1)).map((function(){return!0}))]).toProperty((function(){return!0})).thru(h((function(e){return"User is ".concat(e?"NOT SCROLLING":"SCROLLING")})));return Li.ZP.combine([m,v,f],(function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.every(Boolean)})).filter(Boolean).take(1).onValue((function(){t.log.predict("Positive prediction made"),t._predicted(n),t.isPredicted=!0})),t}return t=a,i&&Fi(t.prototype,i),n&&Fi(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(p),Ki=Yi;function Qi(e){return Qi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qi(e)}function Zi(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if("object"!==Qi(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==Qi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===Qi(o)?o:String(o)),n)}var r,o}function Xi(e,t){return Xi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Xi(e,t)}function Ji(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=tn(e);if(t){var r=tn(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return en(this,i)}}function en(e,t){if(t&&("object"===Qi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function tn(e){return tn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},tn(e)}var nn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xi(e,t)}(s,e);var t,i,n,o=Ji(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=o.call(this,e)).log=new r.Z({unitType:t.model.get("unitType"),className:"recoReelPredict",version:t.model.get("version"),isDebug:t.model.get("isDebug")}),t.predictPoint=e.predictPoint,t.predictKey=e.predictKey,t.predictPath="predictors.recoReel",t.scrollManager=new I,t.maxPPS=t.model.get("".concat(t.predictPath,".maxPPS")),t._setElement(),t.recoReelContainer?(t._initObserver(),t.log.predict("predict created with key = ".concat(t.predictKey,", predict point = ").concat(t.predictPoint,"% view")),t):en(t)}return t=s,(i=[{key:"_setElement",value:function(){var e=this.model.get("recoReelContainer");e&&(this.recoReelContainer=e.parentElement)}},{key:"_initObserver",value:function(){var e={rootMargin:"0px",threshold:[0,this.predictPoint/100]};this.observer=new IntersectionObserver(this._observerCallback.bind(this),e),this.observer.observe(this.recoReelContainer)}},{key:"_isIntersectingTest",value:function(e){return 100*e[0].intersectionRatio>=this.predictPoint}},{key:"_observerCallback",value:function(e,t){var i=this.scrollManager.getPps();this.isPredicted||(this._isIntersectingTest(e)?this._isLowerThenMaxPPS()?(this._onPrediction(),this.log.predict("intersected and predicted")):this.log.predict("intersected but can't predict - current pps (".concat(i,") is higher then maxPps (").concat(this.maxPPS,")")):this.log.predict("lost intersection"))}},{key:"_isLowerThenMaxPPS",value:function(){return!this.maxPPS||Math.abs(this.scrollManager.getPps())<this.maxPPS}},{key:"_onPrediction",value:function(){this.isPredicted=!0,this.log.predict("predicted"),this._predicted(this.predictKey),this.observer.disconnect()}}])&&Zi(t.prototype,i),n&&Zi(t,n),Object.defineProperty(t,"prototype",{writable:!1}),s}(p),rn=nn;function on(e){return on="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},on(e)}function sn(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if("object"!==on(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==on(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===on(o)?o:String(o)),n)}var r,o}function an(){return an="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=un(e)););return e}(e,t);if(n){var r=Object.getOwnPropertyDescriptor(n,t);return r.get?r.get.call(arguments.length<3?e:i):r.value}},an.apply(this,arguments)}function ln(e,t){return ln=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ln(e,t)}function cn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=un(e);if(t){var r=un(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return function(e,t){if(t&&("object"===on(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,i)}}function un(e){return un=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},un(e)}var dn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ln(e,t)}(a,e);var t,i,n,s=cn(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=s.call(this,e)).log=new r.Z({unitType:t.model.get("unitType"),className:"postRepeatPredictor",version:t.model.get("version"),isDebug:t.model.get("isDebug")}),t.predictPath="predictors.postRepeat",t.predictPoints=t.model.get("".concat(t.predictPath,".predictPoints")),t.waitBeforePredictMs=t.model.get("".concat(t.predictPath,".waitBeforePredictMs")),t}return t=a,(i=[{key:"_bindEvents",value:function(){an(un(a.prototype),"_bindEvents",this).call(this),this.createStateHandlers([{event:"repeatShown",funcName:"_onRepeatShown"},{event:"repeatState:showing",funcName:"_onRepeatShown"},{event:"repeatState:clicked",funcName:"_onRepeatClicked"}])}},{key:"_onRepeatShown",value:function(){this._waitBeforePredicting()}},{key:"_isAllowedToPredict",value:function(){return this.model.get("isEligibleToPlay")?this.model.get("closeState")?(this.log.predict("unit is closed, ignoring"),!1):this.model.get("adState")!==o.adState.playing||(this.log.predict("ad is playing"),!1):(this.log.predict("unit is not eligible to play, ignoring"),!1)}},{key:"_onRepeatClicked",value:function(){this.log.predict("clear post repeat predict timeout"),this.predictTimeout&&(clearTimeout(this.predictTimeout),this.predictTimeout=null),this.log.predict("post repeat predict timeout cleared")}},{key:"_waitBeforePredicting",value:function(){var e=this;this.log.predict("waiting for 2 seconds before predicting"),this.predictTimeout=setTimeout((function(){e._isAllowedToPredict()?(e.log.predict("predicting"),e._predicted(e.predictPoints),e.log.predict("predicted"),e.model.increaseCounter("postRepeatMode")):e.log.predict("Can't predict, ignoring")}),this.waitBeforePredictMs)}}])&&sn(t.prototype,i),n&&sn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(p);function hn(e){return hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hn(e)}function fn(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if("object"!==hn(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==hn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===hn(o)?o:String(o)),n)}var r,o}var pn=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.syncUrl=t.get("sync"),this.syncUrl&&(this.log=new r.Z({unitType:t.get("unitType"),className:this.constructor.name,version:t.get("version"),isDebug:t.get("isDebug")}),this.timePredict=new St({model:t,onPredict:this._syncCookies.bind(this),predictKey:"cookieSync",modelKey:"predictors.time.cookieSync"}),this._syncCookies())}var t,i,n;return t=e,(i=[{key:"_syncCookies",value:function(){var e=this;this.log.info("Cookie sync request",this.syncUrl);var t=document.createElement("iframe");t.style.display="none",t.src=this.syncUrl,t.onerror=function(){e._stopSync()},document.body.appendChild(t)}},{key:"_stopSync",value:function(){this.log.info("Stopping cookie sync"),this.timePredict.stop()}}])&&fn(t.prototype,i),n&&fn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),mn=pn;function yn(e){return yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yn(e)}function vn(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if("object"!==yn(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==yn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===yn(o)?o:String(o)),n)}var r,o}function gn(e,t){return gn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},gn(e,t)}function bn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=_n(e);if(t){var r=_n(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return function(e,t){if(t&&("object"===yn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,i)}}function _n(e){return _n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_n(e)}var wn=i(1999),Sn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gn(e,t)}(l,e);var i,n,s,a=bn(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=a.call(this,e.model)).model=e.model,t.subModel=e.subModel,t.adData=e.adData||{},t.scrollManager=new I,t.onDebugDataChange=e.onDebugDataChange,t.predictName=e.predictName,t.log=new r.Z({unitType:t.model.get("unitType"),className:"DebugData",version:t.model.get("version"),isDebug:t.model.get("isDebug")}),t.isViewed=e.isViewed,e.onDebugDataChange&&(t._onDebugChange(),t._bindEvents()),t}return i=l,(n=[{key:"_bindEvents",value:function(){this.createStateHandlers([{event:"sqv",funcName:"_onDebugChange"},{event:"conversionCount",funcName:"_onDebugChange"},{event:"rvvs1",funcName:"_onDebugChange"},{event:"rvvs0",funcName:"_onDebugChange"},{event:"rvps1",funcName:"_onDebugChange"},{event:"rvps0",funcName:"_onDebugChange"}])}},{key:"_onDebugChange",value:function(){this.onDebugDataChange(this.getDebugData())}},{key:"getDebugData",value:function(){if(this.model.get("isSendDebugDataReporting")){var e="";for(var i in t().DEBUG_DATA){var n=this[i]();e+=void 0!==n?"".concat(t().DEBUG_DATA[i],":").concat(n,"!"):"".concat(t().DEBUG_DATA[i],":!")}return e}}},{key:"pn",value:function(){return t().PREDICT_NAMES[this.predictName]}},{key:"sqg",value:function(){return this.adData.adId}},{key:"sqv",value:function(){return this.model.get("sqv")}},{key:"sqp",value:function(){if(this.model.get("conversionCount"))return parseInt(this.model.get("conversionCount"))}},{key:"rv",value:function(){return this.isRv()?1:0}},{key:"rvvs",value:function(){return this.isRv()?this.model.get("rvvs1"):this.model.get("rvvs0")}},{key:"rvps",value:function(){return this.isRv()?this.model.get("rvps1"):this.model.get("rvps0")}},{key:"ppsc",value:function(){return parseInt(this.scrollManager.ppsChange)}},{key:"vms",value:function(){var e=this.scrollManager.vms;return e=e!==1/0?parseInt(e):"inf"}},{key:"pps",value:function(){return parseInt(this.scrollManager.pps)}},{key:"gpps",value:function(){return parseInt(this.adData.getAdPPS)}},{key:"gppsc",value:function(){return parseInt(this.adData.getAdPPSChange)}},{key:"isRv",value:function(){return wn.parseBool(this.adData.requiredViewability)}},{key:"ft",value:function(){return this.model.get("frameType")}},{key:"fsc",value:function(){var e=this.model.get("startCard");if(void 0!==e&&""!==e)return parseInt(e)}},{key:"fpc",value:function(){var e=this.model.get("permanentCard");if(void 0!==e&&""!==e)return parseInt(e)}},{key:"sa",value:function(){var e=this.subModel||this.model;return e&&e.get("isPlacementSingleAd")?1:0}},{key:"pi",value:function(){return this.model.get("MSNCard.placementIndex")}},{key:"dt",value:function(){var e=this.subModel||this.model;return e.get("videoViewState")&&e.get("videoViewState")===o.videoViewState.detached?1:0}},{key:"vb",value:function(){return this.isViewed?1:0}},{key:"dur",value:function(){var e=this.subModel||this.model,t=parseInt(e.get("activeAdMaxTime"));return t||(t=void 0),t}},{key:"ttv",value:function(){return this.adData.timeToVimp?parseInt(this.adData.timeToVimp):0}},{key:"bovpg",value:function(){return this.adData.bovpg?parseInt(this.adData.bovpg):""}},{key:"bovpv",value:function(){return this.adData.bovpv?parseInt(this.adData.bovpv):""}},{key:"be",value:function(){return this.model.get("playerHasRvInQ")?1:0}},{key:"pap",value:function(){return void 0!==this.adData.pap?parseInt(this.adData.pap):""}},{key:"mty",value:function(){return void 0!==this.adData.mty?parseInt(this.adData.mty):""}},{key:"esv",value:function(){return this.adData.esv?1:0}},{key:"rot",value:function(){return this.adData.rot}},{key:"roid",value:function(){return this.adData.roid}},{key:"rom",value:function(){return this.adData.rom}},{key:"tti",value:function(){return this.adData.timeToImpression}}])&&vn(i.prototype,n),s&&vn(i,s),Object.defineProperty(i,"prototype",{writable:!1}),l}(n.O),Pn=Sn,Tn=i(5264),An=i.n(Tn);function En(e){return En="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},En(e)}function Cn(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if("object"!==En(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==En(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===En(o)?o:String(o)),n)}var r,o}var On=i(1999),kn=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.oppsOptions=i,this.options={"auc-dast":void 0,dast:void 0,d:void 0,dp:void 0,os:void 0,pv:void 0,pt:void 0,rs:void 0,rst:void 0,st:void 0,sts:void 0,tms:void 0,vmt:void 0,vpd:void 0,vptd:void 0},this.options=On.extend(this.options,t),this.log=new r.Z({className:"Opportunity Manager"}),this.pixelType={tagStarted:0,tagImpression:1,tagTimeout:2,tagError:4,playerClosed:7,AdVideoFirstQuartile:21,AdVideoMidpoint:22,AdVideoThirdQuartile:23,AdVideoComplete:24,viewability:30,firstImpression:99}}var t,i,n;return t=e,(i=[{key:"send",value:function(e,t){var i=this.isBillableEvent(e.rst)?this.oppsOptions.oppUrl:this.oppsOptions.nonBllbOppUrl;i+="?rst="+e.rst,e=On.extend({},this.options,{tms:Math.floor((new Date).getTime()/1e3)},e),t&&On.isSendBeaconSupported()?navigator.sendBeacon(i,JSON.stringify([e])):S.default.ajax({type:"POST",url:i,data:JSON.stringify([e]),contentType:"text/plain"})}},{key:"isBillableEvent",value:function(e){return this.oppsOptions.billableEvents.indexOf(e)>-1}}])&&Cn(t.prototype,i),n&&Cn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Dn=kn;function Rn(e){return Rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rn(e)}function In(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if("object"!==Rn(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==Rn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===Rn(o)?o:String(o)),n)}var r,o}function xn(e,t){return xn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},xn(e,t)}function Nn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=Vn(e);if(t){var r=Vn(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return function(e,t){if(t&&("object"===Rn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,i)}}function Vn(e){return Vn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Vn(e)}var Ln=i(1999),jn={viewability:{id:30,name:"viewability"},pauseAfterPlay:{id:31,name:"pauseAfterPlay"},conversion:{id:32,name:"adPlay"},clickThru:{id:33,name:"clickThru"},skipVimp1EligibilityLost:{id:43,name:"skipVimp1EligibilityLost"},skipVimp1Vimp0Playing:{id:44,name:"skipVimp1Vimp0Playing"},unitImpression:{id:45,name:"unitImpression"},continueAd:{id:46,name:"continueAd"},viewabilityOneS:{id:54,name:"viewabilityOneS"},lostCardEligibility:{id:57,name:"lostCardEligibil*ity"},adUnmuted:{id:58,name:"adUnmuted"},viewability100:{id:63,name:"viewability100"},userAdUnmuted:{id:64,name:"userAdUnmuted"},learnMoreClick:{id:71,name:"learnMoreClick"},adTitleClick:{id:74,name:"adTitleClick"},adCtaButtonClick:{id:75,name:"adCtaButtonClick"},adDescriptionClick:{id:76,name:"adDescriptionClick"},adBrandingClick:{id:77,name:"adBrandingClick"},adIconClick:{id:78,name:"adIconClick"},detach:{id:79,name:"detach"},attach:{id:80,name:"attach"},sliderClosed:{id:81,name:"sliderClosed"},twoSecAfterPlay:{id:82,name:"twoSecAfterPlay"},adSwappedOut:{id:104,name:"adSwappedOut"},adSwappedIn:{id:105,name:"adSwappedIn"},compView100:{id:107,name:"compView100"},pauseAfterPlayScrolledUp:{id:108,name:"pauseAfterPlayScrolledUp"},pauseAfterPlayScrolledDown:{id:109,name:"pauseAfterPlayScrolledDown"},pauseAfterPlaySwitchedTab:{id:110,name:"pauseAfterPlaySwitchedTab"},eligibilityLostScrolledUp:{id:111,name:"eligibilityLostScrolledUp"},eligibilityLostScrolledDown:{id:112,name:"eligibilityLostScrolledDown"},eligibilitySwitchedTab:{id:113,name:"eligibilitySwitchedTab"},oneSecondNoPlaySamePlace:{id:114,name:"oneSecondNoPlaySamePlace"},oneSecondNoPlayScrolledUp:{id:115,name:"oneSecondNoPlayScrolledUp"},oneSecondNoPlayScrolledDown:{id:116,name:"oneSecondNoPlayScrolledDown"},displayingFullNAS:{id:125,name:"displayingFullNAS"},displayingNASTitleOnly:{id:126,name:"displayingNASTitleOnly"},adPausedOtherUnitIsPlaying:{id:127,name:"adPausedOtherUnitIsPlaying"},rvBlockedInQ:{id:128,name:"rvBlockedInQ"},reportingObserver:{id:129,name:"reportingObserver"},viewabilityAMP:{id:131,name:"viewabilityAMP"},noViewabilityAMP:{id:132,name:"noViewabilityAMP"},noReplayForHipAdjacAd:{id:140,name:"noReplayForHipAdjacAd"},adPlayingNextAdReadyRV1:{id:142,name:"adPlayingNextAdReadyRV1"},adResumeAfterSwapOut:{id:145,name:"adResumeAfterSwapOut"},adPlayingRV1insteadRV0:{id:158,name:"adPlayingRV1insteadRV0"},skipVimp1Vimp1Playing:{id:160,name:"skipVimp1Vimp1Playing"},scrollSpeedTooHigh:{id:164,name:"scrollSpeedTooHigh"},outOfTab:{id:171,name:"outOfTab"},backToTab:{id:172,name:"backToTab"},stickyDisabled:{id:174,name:"stickyDisabled"},adWaitForPubVideoToStop:{id:175,name:"adWaitForPubVideoToStop"},sliderCutOff:{id:177,name:"sliderCutOff"},onImpressionError:{id:178,name:"onImpressionError"},nativeAdCallToActionButtonClick:{id:182,name:"nativeAdCallToActionButtonClick"},repeatViewViewedForXSeconds:{id:185,name:"repeatViewViewedForXSeconds"},repeatViewViewedForXSecondsAndEligible:{id:186,name:"repeatViewViewedForXSecondsAndEligible"}},Bn=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xn(e,t)}(l,t);var i,n,s,a=Nn(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=a.call(this,e.model)).model=e.model,t.adData=e.adData,t.reportFunc=e.reportFunc,t.getAdData=e.getAdDataFunc,t.setDebugData=e.setDebugData,t.unitVersion=t.model.get("unitVersion"),t.vpaidData=e.vpaidData,t.log=new r.Z({unitType:t.model.get("unitType"),className:"oppsService",version:t.model.get("version"),isDebug:t.model.get("isDebug")}),t.predictId=e.predictId,t.oppManager=new Dn({"auc-dast":t.model.get("cmDast"),pt:Ln.crc32(t.model.get("abTest")||999)},{billableEvents:t.model.get("billableEvents"),oppUrl:t.model.get("player.urls.oppsRequest"),nonBllbOppUrl:t.model.get("player.urls.nonBllboppsRequest")}),t.isViewed=!1,t.hadConversion=!1,t.hadImpression=!1,t.isFirstPlayForAd=!0,t.pageEventHistory=window.cmTag.PEH,t.unifiedPlacementEH=window.cmTag.UPEH,t._bindEvents(),t._fireUnitImpression(),t}return i=l,(n=[{key:"_bindEvents",value:function(){this.createStateHandlers([{event:"postRepeatMode",funcName:"_onRepeatViewViewedForXSeconds"}])}},{key:"_fireUnitImpression",value:function(){this._fireOpp(jn.unitImpression.id,jn.unitImpression.name),this.reportFunc(jn.unitImpression.name,{tab:this.model.get("isInTab"),eligibility:this.model.get("isEligibleToPlay"),gotVimpCountQ:this.model.get("impressionCount"),hadEligibility:this.model.get("hadEligibility"),hadLostEligibility:!!this.model.get("lostEligibilityTime")},!0),this.model.get("hadEligibility")||this.reportFunc("waitingForEligibilty",{tab:this.model.get("isInTab")},!1)}},{key:"fireSkipVimp1EligibilityLost",value:function(e){if(e){this._fireOpp(jn.skipVimp1EligibilityLost.id,jn.skipVimp1EligibilityLost.name);var t=this.subModel?this.subModel.get("videoViewContainer"):this.model.get("videoViewContainer");if(!t){var i=(0,S.default)(this.subModel?this.subModel.get("parentSelector"):this.model.get("parentSelector"));t=Ln.isArray(i)?i[0]:i}this.adData.pap=Ln.offsetFromBottomOfViewPort(t)+(0,S.default)(t).height()>0?1:0,this.model.get("isInTab")?this.adData.pap?(this._fireOpp(jn.eligibilityLostScrolledUp.id,jn.eligibilityLostScrolledUp.name),this.reportFunc(jn.eligibilityLostScrolledUp.name,{},!0)):(this._fireOpp(jn.eligibilityLostScrolledDown.id,jn.eligibilityLostScrolledDown.name),this.reportFunc(jn.eligibilityLostScrolledDown.name,{},!0)):(this._fireOpp(jn.eligibilitySwitchedTab.id,jn.eligibilitySwitchedTab.name),this.reportFunc(jn.eligibilitySwitchedTab.name,{},!0))}this.reportFunc(jn.skipVimp1EligibilityLost.name,{},!1)}},{key:"fireSkipVimp1AdIsPlaying",value:function(t){var i=t===e.RV_TYPES.NON_RV?jn.skipVimp1Vimp0Playing:jn.skipVimp1Vimp1Playing;this._fireOpp(i.id,i.name),this.reportFunc(i.name,{otherAdRequiredViewbility:this.model.get("activeAdData.requiredViewability"),otherAdPlayerSequenceId:this.model.get("activeAdData.tagData.sequenceId"),otherAdDp:this.model.get("activeAdData.dp")},!1)}},{key:"fireLostCardEligibility",value:function(){this._fireOpp(jn.lostCardEligibility.id,jn.lostCardEligibility.name)}},{key:"onConversion",value:function(){this.hadConversion||(this.shouldFirePauseAfterPlay=!0,this.hadConversion=!0,this._fireOpp(jn.conversion.id,jn.conversion.name),this.reportFunc(jn.conversion.name,{},!0))}},{key:"fireAdUnmuted",value:function(){this.adUnmutedOppFired||(this._fireOpp(jn.adUnmuted.id,jn.adUnmuted.name),this.adUnmutedOppFired=!0)}},{key:"fireUserAdUnmuted",value:function(){this.model.get("opps.userAdUnmuted.isFire")&&!this.userAdUnmutedOppFired&&(this._fireOpp(jn.userAdUnmuted.id,jn.userAdUnmuted.name),this.userAdUnmutedOppFired=!0)}},{key:"onFirstPauseAfterPlay",value:function(){if(this.shouldFirePauseAfterPlay&&!this.isViewed){this.shouldFirePauseAfterPlay=!1;var e=this.subModel?this.subModel.get("videoViewContainer"):this.model.get("videoViewContainer");e=Ln.isArray(e)?e[0]:e,this.adData.pap=Ln.offsetFromBottomOfViewPort(e)+(0,S.default)(e).height()>0?1:0,this._fireOpp(jn.pauseAfterPlay.id,jn.pauseAfterPlay.name),this.reportFunc(jn.pauseAfterPlay.name,{tab:this.model.get("isInTab")},!0),this.model.get("isInTab")?this.adData.pap?(this._fireOpp(jn.pauseAfterPlayScrolledUp.id,jn.pauseAfterPlayScrolledUp.name),this.reportFunc(jn.pauseAfterPlayScrolledUp.name,{},!0)):(this._fireOpp(jn.pauseAfterPlayScrolledDown.id,jn.pauseAfterPlayScrolledDown.name),this.reportFunc(jn.pauseAfterPlayScrolledDown.name,{},!0)):(this._fireOpp(jn.pauseAfterPlaySwitchedTab.id,jn.pauseAfterPlaySwitchedTab.name),this.reportFunc(jn.pauseAfterPlayScrolledUp.name,{},!0))}}},{key:"onViewabilityOneS",value:function(){this._fireOpp(jn.viewabilityOneS.id,jn.viewabilityOneS.name)}},{key:"onViewability",value:function(){this.isViewed=!0,this._fireOpp(jn.viewability.id,jn.viewability.name),this.reportFunc(jn.viewability.name,{},!0)}},{key:"onTwoSecAfterPlay",value:function(){this.model.get("opps.twoSecAfterPlay.isFire")&&this._fireOpp(jn.twoSecAfterPlay.id,jn.twoSecAfterPlay.name)}},{key:"onViewability100",value:function(){this._fireOpp(jn.viewability100.id,jn.viewability100.name)}},{key:"onViewabilityAMP",value:function(){this._fireOpp(jn.viewabilityAMP.id,jn.viewabilityAMP.name)}},{key:"onNoViewabilityAMP",value:function(){this._fireOpp(jn.noViewabilityAMP.id,jn.noViewabilityAMP.name)}},{key:"onCompView100",value:function(){this._fireOpp(jn.compView100.id,jn.compView100.name)}},{key:"fireContinueAd",value:function(){this.isContinueAdFired||(this.isContinueAdFired=!0,this._fireOpp(jn.continueAd.id,jn.continueAd.name),this.reportFunc(jn.continueAd.name,{tab:this.model.get("isInTab")},!0))}},{key:"onAdClicked",value:function(){this._fireOpp(jn.clickThru.id),this.reportFunc(jn.clickThru.name,{},!0),this.model.set("clickThruState",o.clickThruState.waiting)}},{key:"onAdDetached",value:function(){this.model.get("opps.detach.isFire")&&(this._fireOpp(jn.detach.id),this.reportFunc(jn.detach.name,{},!0))}},{key:"onAdAttached",value:function(){this.model.get("opps.attach.isFire")&&(this._fireOpp(jn.attach.id),this.reportFunc(jn.attach.name,{},!0))}},{key:"onAdSliderClosed",value:function(){this.model.get("opps.sliderClosed.isFire")&&(this._fireOpp(jn.sliderClosed.id),this.reportFunc(jn.sliderClosed.name,{},!0))}},{key:"fireLearnMoreClick",value:function(){this._fireOpp(jn.learnMoreClick.id)}},{key:"fireTitleContaineClick",value:function(e){var t=jn[e];t&&this._fireOpp(t.id,t.name)}},{key:"_fireOpp",value:function(t,i,n){if(this.adData&&t&&!this.model.get("isFireOppBlocked"))if(i&&this.log.info("Fire ".concat(i," opps")),!0===this.model.get("isOppsulaEnabled")&&An().oppsula){var r={uv:this.unitVersion},o=this.getAdData();this._setExtraData(r,o);var s={tagItem:this.adData,playerDAST:this.adData.pdast,debugData:this._isSendDebugData()?this._getDebugData():void 0,activeData:o,predictorId:this.predictId,extraData:r};An().oppsula.send(s,t)}else{var a={rs:this.adData.sequenceId,st:e.ROLL_TYPE[this.adData.rollType],sts:this.model.get("playerRepeatCount"),os:Number(this.adData.waterfallTagId)+1,rst:t,d:Date.now()-this.adData.created,dast:this.adData.dast,vpd:this.adData.pubId,vptd:this.adData.tagId,pv:this.model.get("playerVersion"),dp:Ln.crc32(this.adData.dp),vmt:Number(this.adData.isRon)||0,abt:this._getAbTest(),vstt:this.model.get("isInTab")?1:0,agl:this.model.get("preset.level")?this.model.get("preset.level"):1,pdast:this.adData.pdast,ft:this.model.get("frameType"),ttv:this.adData.timeToVimp,bovpv:this.adData.bovpv,bovpg:this.adData.bovpg,be:this.model.get("playerHasRvInQ")?1:0,pap:void 0!==this.adData.pap?this.adData.pap:"",mty:this.adData.mty,extpvid:window.TRCImpl&&window.TRCImpl.external_page_view,rv:this.adData.requiredViewability,prdid:this.predictId,su:this.adData.su,uv:this.unitVersion};this._setSubUnitData(t,a),this._setCmTagParams(a),this._setModifiedPlacement(a),this._sendDebugDataReporting(a,t),this.oppManager.send(a,n)}}},{key:"_setExtraData",value:function(e,t){e.pv=this.model.get("playerVersion"),t&&(e.su=t.su)}},{key:"_getAbTest",value:function(){return"".concat(this.model.get("abTest")).concat(this.adData.requiredViewabilityDrawn?"!ronrv":"").concat(this.adData.moatSampling?"!mtsmp":"").concat(Ln.isMidArticleOnReadMorePage(this.model.get("isHip"))?"!rdmr":"")}},{key:"isBillableEvent",value:function(e){return this.model.get("billableEvents").indexOf(e)>-1}},{key:"setSubModel",value:function(e){this.subModel=e}},{key:"_onSecondsToCloseGlobal",value:function(){this.reportFunc("secondsToCloseGlobal",{},!0)}},{key:"_onCloseButtonClick",value:function(){this.reportFunc("closeButtonClick",{},!0)}},{key:"_setSubUnitData",value:function(e,t){var i=this.model.get("isFireSP");for(var n in i){if(e!==parseInt(n)||!i[n])break;var r=this.getAdData();void 0!==r.sp&&(t.sp=r.sp)}var o=this.model.get("subUnitType");t.su||0===t.su||(t.su=o)}},{key:"_setModifiedPlacement",value:function(e){var t=this.model.get("modifiedPlacement");t&&(e.mp=t)}},{key:"_setCmTagParams",value:function(e){var t=this.model.get("oppsQS")||{};Ln.assignWithoutUndefinedValues(e,t)}},{key:"fireSkippedForScrollSpeedTooHigh",value:function(){this._fireOpp(jn.scrollSpeedTooHigh.id,jn.scrollSpeedTooHigh.name),this.reportFunc(jn.scrollSpeedTooHigh.name,{},!0)}},{key:"_sendDebugDataReporting",value:function(e,t){this._isSendDebugData()&&(e.dbg=this._getDebugData(),this.model.get("isSendDebugDataReportingLog")&&this.log.info("DBG-Opp ".concat(t," - ").concat(e.dbg)))}},{key:"_getDebugData",value:function(){return new Pn({model:this.model,subModel:this.subModel,adData:this.adData,onDebugDataChange:this.setDebugData,isViewed:this.isViewed,predictName:this.adData.pn}).getDebugData()}},{key:"_isSendDebugData",value:function(){if(this.model.get("isSendDebugDataReporting"))return!0;var e=this.model.get("debugData.advertisersToReport")||"",t=this.vpaidData.advId;return e.toString().indexOf(t)>-1}},{key:"adSwappedOut",value:function(){this._fireOpp(jn.adSwappedOut.id,jn.adSwappedOut.name),this.reportFunc(jn.adSwappedOut.name,{},!0)}},{key:"adSwappedIn",value:function(){this._fireOpp(jn.adSwappedIn.id,jn.adSwappedIn.name),this.reportFunc(jn.adSwappedIn.name,{},!0)}},{key:"adResumeAfterSwapOut",value:function(){this._fireOpp(jn.adResumeAfterSwapOut.id,jn.adResumeAfterSwapOut.name),this.reportFunc(jn.adResumeAfterSwapOut.name,{},!1)}},{key:"onOneSecondNoPlaySamePlace",value:function(){this._fireOpp(jn.oneSecondNoPlaySamePlace.id,jn.oneSecondNoPlaySamePlace.name),this.reportFunc(jn.oneSecondNoPlaySamePlace.name,{},!0)}},{key:"onOneSecondNoPlayScrolledUp",value:function(){this._fireOpp(jn.oneSecondNoPlayScrolledUp.id,jn.oneSecondNoPlayScrolledUp.name),this.reportFunc(jn.oneSecondNoPlayScrolledUp.name,{},!0)}},{key:"onOneSecondNoPlayScrolledDown",value:function(){this._fireOpp(jn.oneSecondNoPlayScrolledDown.id,jn.oneSecondNoPlayScrolledDown.name),this.reportFunc(jn.oneSecondNoPlayScrolledDown.name,{},!0)}},{key:"onDisplayingFullNAS",value:function(){this.model.get("opps.displayingFullNAS.isFire")&&(this._fireOpp(jn.displayingFullNAS.id,jn.displayingFullNAS.name),this.reportFunc(jn.displayingFullNAS.name,{},!0))}},{key:"onDisplayingNASTitleOnly",value:function(){this.model.get("opps.displayingNASTitleOnly.isFire")&&(this._fireOpp(jn.displayingNASTitleOnly.id,jn.displayingNASTitleOnly.name),this.reportFunc(jn.displayingNASTitleOnly.name,{},!0))}},{key:"fireGenericOpp",value:function(e){var t=jn[e];t&&(this._fireOpp(t.id,t.name),this.reportFunc(t.name,{},!0))}},{key:"fireBeaconOpp",value:function(e){var t=jn[e];t&&(this._fireOpp(t.id,t.name,!0),this.reportFunc(t.name,{},!0))}},{key:"onHipAdjacAdWithoutReplay",value:function(){this._fireOpp(jn.noReplayForHipAdjacAd.id,jn.noReplayForHipAdjacAd.name),this.reportFunc(jn.noReplayForHipAdjacAd.name,{},!0)}},{key:"onAdPlayingNextAdReadyRV1",value:function(){this._fireOpp(jn.adPlayingNextAdReadyRV1.id,jn.adPlayingNextAdReadyRV1.name),this.reportFunc(jn.adPlayingNextAdReadyRV1.name,{},!0)}},{key:"onAdPlayingRV1StackWithRV0",value:function(){this._fireOpp(jn.adPlayingRV1insteadRV0.id,jn.adPlayingRV1insteadRV0.name),this.reportFunc(jn.adPlayingRV1insteadRV0.name,{},!0)}},{key:"hadViewabilityAfterConversion",value:function(){return this.hadConversion&&this.isViewed}},{key:"outOfTab",value:function(){this._fireOpp(jn.outOfTab.id,jn.outOfTab.name)}},{key:"backToTab",value:function(){this._fireOpp(jn.backToTab.id,jn.backToTab.name)}},{key:"stickyDisabled",value:function(){this._fireOpp(jn.stickyDisabled.id,jn.stickyDisabled.name)}},{key:"adWaitForPubVideoToStop",value:function(){this._fireOpp(jn.adWaitForPubVideoToStop.id,jn.adWaitForPubVideoToStop.name)}},{key:"sliderCutOff",value:function(){this.model.get("opps.sliderCutOff.isFire")&&this._fireOpp(jn.sliderCutOff.id,jn.sliderCutOff.name)}},{key:"onImpressionError",value:function(){this._fireOpp(jn.onImpressionError.id,jn.onImpressionError.name)}},{key:"onNativeAdCallToActionButtonClick",value:function(){this._fireOpp(jn.nativeAdCallToActionButtonClick.id,jn.nativeAdCallToActionButtonClick.name)}},{key:"_onRepeatViewViewedForXSeconds",value:function(){this.isFiredRepeatViewOpps||(this.model.get("opps.repeatViewViewedForXSeconds.isFire")&&this._fireOpp(jn.repeatViewViewedForXSeconds.id,jn.repeatViewViewedForXSeconds.name),this.model.get("opps.repeatViewViewedForXSecondsAndEligible.isFire")&&this.model.get("isEligibleToPlay")&&this._fireOpp(jn.repeatViewViewedForXSecondsAndEligible.id,jn.repeatViewViewedForXSecondsAndEligible.name),this.isFiredRepeatViewOpps=!0)}}])&&In(i.prototype,n),s&&In(i,s),Object.defineProperty(i,"prototype",{writable:!1}),l}(n.O),Mn=Bn,Fn=i(914),Un=i(2167),Wn=i.n(Un);i(5666);function Hn(e){return Hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hn(e)}function zn(){zn=function(){return e};var e={},t=Object.prototype,i=t.hasOwnProperty,n=Object.defineProperty||function(e,t,i){e[t]=i.value},r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",s=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function l(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,i){return e[t]=i}}function c(e,t,i,r){var o=t&&t.prototype instanceof h?t:h,s=Object.create(o.prototype),a=new A(r||[]);return n(s,"_invoke",{value:w(e,i,a)}),s}function u(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var d={};function h(){}function f(){}function p(){}var m={};l(m,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(E([])));v&&v!==t&&i.call(v,o)&&(m=v);var g=p.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function r(n,o,s,a){var l=u(e[n],e,o);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"==Hn(d)&&i.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,a)}),(function(e){r("throw",e,s,a)})):t.resolve(d).then((function(e){c.value=e,s(c)}),(function(e){return r("throw",e,s,a)}))}a(l.arg)}var o;n(this,"_invoke",{value:function(e,i){function n(){return new t((function(t,n){r(e,i,t,n)}))}return o=o?o.then(n,n):n()}})}function w(e,t,i){var n="suspendedStart";return function(r,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw o;return C()}for(i.method=r,i.arg=o;;){var s=i.delegate;if(s){var a=S(s,i);if(a){if(a===d)continue;return a}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===n)throw n="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n="executing";var l=u(e,t,i);if("normal"===l.type){if(n=i.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:i.done}}"throw"===l.type&&(n="completed",i.method="throw",i.arg=l.arg)}}}function S(e,t){var i=t.method,n=e.iterator[i];if(void 0===n)return t.delegate=null,"throw"===i&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==i&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+i+"' method")),d;var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function E(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(i.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:C}}function C(){return{value:void 0,done:!0}}return f.prototype=p,n(g,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:f,configurable:!0}),f.displayName=l(p,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,l(e,a,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(_.prototype),l(_.prototype,s,(function(){return this})),e.AsyncIterator=_,e.async=function(t,i,n,r,o){void 0===o&&(o=Promise);var s=new _(c(t,i,n,r),o);return e.isGeneratorFunction(i)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},b(g),l(g,a,"Generator"),l(g,o,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),i=[];for(var n in t)i.push(n);return i.reverse(),function e(){for(;i.length;){var n=i.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=E,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(i,n){return s.type="throw",s.arg=e,t.next=i,n&&(t.method="next",t.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],s=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var a=i.call(o,"catchLoc"),l=i.call(o,"finallyLoc");if(a&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),T(i),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var n=i.completion;if("throw"===n.type){var r=n.arg;T(i)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,i){return this.delegate={iterator:E(e),resultName:t,nextLoc:i},"next"===this.method&&(this.arg=void 0),d}},e}function $n(e,t,i,n,r,o,s){try{var a=e[o](s),l=a.value}catch(e){return void i(e)}a.done?t(l):Promise.resolve(l).then(n,r)}function Gn(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function qn(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Gn(Object(i),!0).forEach((function(t){Yn(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Gn(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function Yn(e,t,i){return(t=Qn(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Kn(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Qn(n.key),n)}}function Qn(e){var t=function(e,t){if("object"!==Hn(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==Hn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Hn(t)?t:String(t)}var Zn=i(1999),Xn=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sessionId=this._setSessionId(t.model),this._setData(t.model);var i=this._decideSendingDataToElastic(t.model);this.kbnul=t.model.get("kbnul"),this.apiUrl="".concat(this.kbnul,"/putes/unitsanalytics"),this.events=[],this.timeFromSessionStart=this._getCurrentTime(),this.maxEventsToLog=t.model.get("elasticLogger.maxEventsToLog"),i&&(this.sendInterval=setInterval(this.sendDataToElastic.bind(this),1e3*t.model.get("elasticLogger.secondsBetweenEvents")))}var t,i,n,r,o;return t=e,i=[{key:"_setData",value:function(e){var t={unitType:e.get("unitType"),subUnit:e.get("subUnitType"),wurflData:{os:{name:e.get("wurfl.os.name"),version:e.get("wurfl.os.version")},browser:{name:e.get("wurfl.browser.name"),version:e.get("wurfl.browser.version")}},frameType:e.get("frameType"),country:e.get("country"),abTest:e.get("abTest"),unitVersion:e.get("unitVersion"),playerVersion:this._cleanPlayerVersion(e.get("player.urls.playerLocation")),liteUnitVersion:e.get("liteUnitVersion"),dast:e.get("dast"),redId:e.get("redId"),isApp:e.get("isApp")};this.data={_id:this.sessionId,session_data:qn(qn({},t),e.get("isApp")?{appName:e.get("appName"),appId:e.get("appId")}:{})}}},{key:"_cleanPlayerVersion",value:function(e){return e.substring(e.lastIndexOf("/")+1)}},{key:"_decideSendingDataToElastic",value:function(e){return e.get("elasticLogger.isActive")&&Zn.isFactor(e.get("gaFactor"))&&e.get("isReportToKibana")?(e.set("gaFactor",1),e.set("shouldSendDataToElastic",!0),!0):(e.set("shouldSendDataToElastic",!1),!1)}},{key:"_setSessionId",value:function(e){var t=Zn.generateGuid(10);return e.set("elasticSessionId",t),t}},{key:"log",value:function(e){var t=e.message,i=e.severity,n=e.extraData;this.events.length>=this.maxEventsToLog||this.events.push({eventData:{message:t,severity:i,extraData:n},timeFromSessionStart:this._getCurrentTime()-this.timeFromSessionStart})}},{key:"sendDataToElastic",value:(r=zn().mark((function e(){var t;return zn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.data.timeline=this._buildTimeline(),e.prev=1,e.next=4,fetch(this.apiUrl,{method:"POST",headers:{"Content-Type":"text/plain"},body:JSON.stringify(this.data)});case 4:return t=e.sent,e.next=7,t.json();case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),this.error=e.t0.message;case 12:this.events=[];case 13:case"end":return e.stop()}}),e,this,[[1,9]])})),o=function(){var e=this,t=arguments;return new Promise((function(i,n){var o=r.apply(e,t);function s(e){$n(o,i,n,s,a,"next",e)}function a(e){$n(o,i,n,s,a,"throw",e)}s(void 0)}))},function(){return o.apply(this,arguments)})},{key:"_getCurrentTime",value:function(){return(new Date).getTime()}},{key:"_buildTimeline",value:function(){var e={};return this.events=this.events.sort((function(e,t){return e.timeFromSessionStart-t.timeFromSessionStart})),this.events.forEach((function(t,i){e["ev".concat(i)]=t})),e}}],i&&Kn(t.prototype,i),n&&Kn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Jn="info",er="warning",tr="error";function ir(e){return ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ir(e)}function nr(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if("object"!==ir(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==ir(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===ir(o)?o:String(o)),n)}var r,o}var rr=i(1999),or=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.model=t,this.elasticLogger=this.model.get("elasticLogger"),this.videoElRegexIdentifier=new RegExp(/^_cm/),this.log=new r.Z({unitType:this.model.get("unitType"),className:this.constructor.name,version:this.model.get("version"),isDebug:this.model.get("isDebug")})}var t,i,n;return t=e,(i=[{key:"detect",value:function(){!this.stopped&&this.model.get("clsDetector.isActive")&&window.TRC&&window.TRC.listen&&(this.clsEventListener=window.TRC.listen("onCls",this._onClsEvent.bind(this)))}},{key:"_onClsEvent",value:function(e){var t=this;e&&e.sources&&rr.forEach(e.sources,(function(e){e.node&&(t._isElementRelatedToVideo(e.node.id)||t._isElementRelatedToVideo(e.node.className))&&t._logSourceToElastic(e)}))}},{key:"_isElementRelatedToVideo",value:function(e){try{return e&&e.match(this.videoElRegexIdentifier)}catch(e){return!1}}},{key:"_logSourceToElastic",value:function(e){this.log.info("cls event - video element",e),this.elasticLogger&&this.elasticLogger.log({message:"CLS detected",severity:tr,extraData:{el:"".concat(this._joinValues(e.node.id,"#")," ").concat(this._joinValues(e.node.className,".")),delta:rr.getDeltaBetweenRects(e.currentRect,e.previousRect)}})}},{key:"_joinValues",value:function(e,t){return"".concat(t).concat((e||"").split(" ").join(t))}},{key:"stop",value:function(){this.stopped||(this.stopped=!0,this.clsEventListener&&this.clsEventListener.remove&&this.clsEventListener.remove(),this.clsEventListener=void 0)}}])&&nr(t.prototype,i),n&&nr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),sr=or;function ar(e){return ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ar(e)}function lr(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if("object"!==ar(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==ar(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===ar(o)?o:String(o)),n)}var r,o}function cr(e,t){return cr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},cr(e,t)}function ur(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=dr(e);if(t){var r=dr(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return function(e,t){if(t&&("object"===ar(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,i)}}function dr(e){return dr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},dr(e)}var hr=i(1999),fr=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cr(e,t)}(l,t);var i,n,s,a=ur(l);function l(e){var t,i=e.model,n=e.ppKey,s=e.adId,c=e.impressionCb,u=e.completeCb,d=e.predictName,h=e.getAdProperties,f=e.predictId;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=a.call(this,i)).model=i,t.elasticLogger=t.model.get("elasticLogger"),t.getAdKey=isNaN(parseInt(n))?n:parseInt(n),t.adId=s,t.impressionCb=c,t.completeCb=u,t.predictName=d,t.predictId=f,t.scrollManager=new I,t.getAdProperties=h||{},t.handleAdjacencyAd(),t.log=new r.Z({unitType:t.model.get("unitType"),className:"adService",version:t.model.get("version"),isDebug:t.model.get("isDebug")}),t.adState=o.readyState,t.getAdState=o.getAdState.notCalled,t.adQState=o.adQState.readyState,t.hadPlay=!1,t.isActive=!1,t.hadImpression=!1,t.sizeObj={},t.adClickCounter=0,t.onAdImpressionTimer=null,t.onAdImpressionTimerMp4=null,t._bindEvents(),t._onPlayerStateReady(),t._getAd(),t.isLostView100=!1,t}return i=l,n=[{key:"_bindEvents",value:function(){this.createStateHandlers([{event:"adManagerState:paused",funcName:"_pauseGetAd",isListenOnce:!0},{event:"adManagerState:stopped",funcName:"_stopGetAd",isListenOnce:!0},{event:"playerState:ready",funcName:"_onPlayerStateReady",isListenOnce:!0},{event:"adViewabilityFired:true",funcName:"adViewabilityFired",isListenOnce:!0},{event:"adConversionFired:true",funcName:"adConversionFired",isListenOnce:!0},{event:"cardLocatorHighPps",funcName:"_onCardLocatorHighPps",isListenOnce:!0},{event:"adWaitForPubVideoToStop",funcName:"_onAdWaitForPubVideoToStop",isListenOnce:!0}])}},{key:"_bindOnTabEvent",value:function(){this.createStateHandlers([{event:"isInTab:false",funcName:"_outOfTabEvent",isListenOnce:!0},{event:"isInTab:true",funcName:"_backToTabEvent",isListenOnce:!0}])}},{key:"_onPlayerStateReady",value:function(){!this.player&&An().player&&(this.player=An().player)}},{key:"_pauseGetAd",value:function(){this.cancelGetAd(),this.getAdState=o.getAdState.stopped,this.setToModel("getAdState",o.getAdState.stopped),this.model.get("isReplayAd")||(this.player=void 0)}},{key:"_stopGetAd",value:function(){this.cancelGetAd(),this.getAdState=o.getAdState.finished,this.player=void 0}},{key:"adViewabilityFired",value:function(){if(this._hasVpaidWrapper()&&this.vpaidWrapper.emit){this.vpaidWrapper.emit("unit::viewability");var e=this.vpaidWrapper.getVpaidData(),t=e&&e.eventTrackers&&e.eventTrackers.viewability;hr.each(t,this._sendPixel,this)}this.isViewabilityFired=!0}},{key:"adConversionFired",value:function(){this._hasVpaidWrapper()&&this.vpaidWrapper.emit&&(this._setBottomOfVViewPort(),this.vpaidWrapper.emit("unit::conversion"))}},{key:"_getAd",value:function(){var t=this;if(!this._hasPlayer()||!this.player.getAd)return this.setToModel("getAdCurrId",this.adId),void setTimeout(this.setToModel.bind(this,"getAdState",o.getAdState.failed),0);if(this.getAdState!==o.getAdState.gettingAd){if(this.adRequestTime=Date.now(),this.model.get("bottomOfViewPortDebugSelector")){var i=(0,S.default)(this.model.get("bottomOfViewPortDebugSelector"));this.bottomOfViewPortOnGetAd=i.length>0&&hr.offsetFromBottomOfViewPort(i[0])}this.log.info("GetAd was called, requiredViewability: ".concat(this.getAdKey,", time =").concat(this.adRequestTime," ")),this.getAdPPS=this.scrollManager.pps,this.getAdPPSChange=this.scrollManager.ppsChange,this.setToModel("lastGetAdKey",this.getAdKey),this.model.get("getAdState")===o.getAdState.gettingAd?this.model.trigger("change:getAdState",this.model,this.model.get("getAdState")):this.setToModel("getAdState",o.getAdState.gettingAd),this.getAdState=o.getAdState.gettingAd;var n=this.model.get("exploreMore")>0,r=new Pn({model:this.model,predictName:this.predictName}),s={getAdTimeout:this._getTimeOut(),adProperties:this.getAdProperties.adProperties,excAdProperties:this.getAdProperties.excAdProperties,forceWf:n,getDebugData:r.getDebugData.bind(r),predictId:this.predictId,preferPPD:this.model.get("PPD.preferPPD"),ppdAdImpressionTimeout:this.model.get("PPD.ppdTimeout")};"any"!==this.getAdKey&&(s.requiredViewability=this.getAdKey),this.getAdResult=this.player.getAd(s),this._logEventUsingElasticLogger("getAd was called",Jn,{predictPointKey:this.getAdKey,predictName:this.predictName}),this.getAdKey===e.RV_TYPES.RV&&this.model.set("isGettingRv1Ad",!0),this.getAdResult?this.getAdResult.then(this._getAdResult.bind(this),this._getAdRejection.bind(this)).catch(this._getAdCatch.bind(this)).finally((function(){t.getAdKey===e.RV_TYPES.RV&&t.model.set("isGettingRv1Ad",!1)})):this.log.error("getAd Failed in auction  manager")}else this.log.info("[adID=${trimmedBranch}]getAd was called while trying to get an ad from player",this.adId)}},{key:"_getAdRejection",value:function(e){this.log.error("getAdResult promise rejected: ".concat(e.message," ")),this.model.set("getAdSuccess",!1)}},{key:"_getAdResult",value:function(t){try{var i;if(hr.trcPerformanceMeasurement(this.model.get("trcPerformanceMeasurementEnabled"),"videoGotAd",e.TRC_PERFORMANCE_ACTIONS.START),this.vpaidWrapper=t,this._setAdTypeConfig(),this._setCLSDetector(),this.rpox=t.tag.rpox,this.vpaidData=this.vpaidWrapper.getVpaidData(),this.adData=hr.filterObject(this.vpaidWrapper.tag,["sequenceId","rollType","waterfallTagId","created","dast","cpmFloor","pubId","tagId","dp","isRon","requiredViewability","rpox","hip","alwsldr"]),this.adData.cpm=this.vpaidWrapper.tag.vpaidWrapperData&&this.vpaidWrapper.tag.vpaidWrapperData.vastPrice?this.vpaidWrapper.tag.vpaidWrapperData.vastPrice:this.vpaidWrapper.tag.price,this.adData.requiredViewability=hr.parseBool(this.adData.requiredViewability),this.adData.getAdPPS=this.getAdPPS,this.adData.advType=null!==(i=this.vpaidWrapper.tag.advType)&&void 0!==i?i:"-1",this.adData.getAdPPSChange=this.getAdPPSChange,this.adData.timeToVimp=Date.now()-this.adRequestTime,this.model.get("bottomOfViewPortDebugSelector")&&this.bottomOfViewPortOnGetAd){var n=(0,S.default)(this.model.get("bottomOfViewPortDebugSelector"));this.adData.bovpg=!!this.bottomOfViewPortOnGetAd&&parseInt(this.bottomOfViewPortOnGetAd),this.adData.bovpv=n.length>0&&parseInt(hr.offsetFromBottomOfViewPort(n[0]))}this.adData.dast=this.vpaidWrapper.tag.vidDast||this.vpaidWrapper.tag.dast,this.adData.mty=this.vpaidWrapper.tag.vpaidWrapperData&&this.vpaidWrapper.tag.vpaidWrapperData.mediatype?this.vpaidWrapper.tag.vpaidWrapperData.mediatype:void 0,this.setToModel("currentMediatype",this.adData.mty),this.adData.moatSampling=this.vpaidWrapper.tag.moatSampling||!1,this.adData.requiredViewabilityDrawn=this.vpaidWrapper.tag.requiredViewabilityDrawn||!1,this.vpaidWrapper.playerDAST&&this.vpaidWrapper.playerDAST.get&&(this.adData.pdast=this.vpaidWrapper.playerDAST.get()),this.adData.hip=!!this.vpaidWrapper.tag.hip,this._setDebugReportDataOnGotAd(),this.vpaidWrapper.vpaidLog.data.unit_history=[],this.reportToVpaid("gotAd",{tab:this.model.get("isInTab"),eligibility:this.model.get("isEligibleToPlay"),gotVimpCountQ:this.model.get("impressionCount"),hadEligibility:this.model.get("hadEligibility"),hadLostEligibility:!!this.model.get("lostEligibilityTime"),predictName:this.predictName,getAdKey:"any"===this.getAdKey?10:this.getAdKey,allowSlider:!!this.adData.alwsldr},!1),this._logEventUsingElasticLogger("getAd resolve"),this.setToModel("lastGotAdData",this.adData),this.model.get("lastImpressionData.sequenceId")?this.sequenceId=this.model.get("lastImpressionData.sequenceId")+1:this.sequenceId=1;var r=void 0;return this.vpaidWrapper.vpaidLog&&this.vpaidWrapper.vpaidLog.data&&(r=this.vpaidWrapper.vpaidLog.data._id),this.lastImpressionData={predictPoint:this.predictPoint,requiredViewability:this.vpaidWrapper.tag.requiredViewability,getAdKey:"any"===this.getAdKey?10:this.getAdKey,sequenceId:this.sequenceId,dp:this.vpaidWrapper.tag.dp,tagData:hr.filterObject(this.vpaidWrapper.tag,["sequenceId","rollType","waterfallTagId","created","dast","cpmFloor","pubId","tagId","dp","isRon"]),vpaidId:r,lineItemId:this.vpaidWrapper.tag.lineItemId,predictName:this.predictName},this.setToModel("lastImpressionData",this.lastImpressionData),this.setToModel("impressionCount",this.model.get("impressionCount")+1),this.oppsService=new Mn({model:this.model,adData:this.adData,vpaidData:this.vpaidData,reportFunc:this.reportToVpaid.bind(this),getAdDataFunc:this.getAdData.bind(this),setDebugData:this.vpaidWrapper.setDebugData.bind(this.vpaidWrapper),predictId:this.predictId}),this.vpaidWrapper.setDebugDataFunc&&this.vpaidWrapper.setDebugDataFunc(this.oppsService._getDebugData.bind(this.oppsService)),this.log.info("GotAd requiredViewability: ".concat(t.tag.requiredViewability?1:0)),this.getAdState=o.getAdState.gotAd,this.setToModel("getAdState",o.getAdState.gotAd),this.getAdResult=void 0,this._registerListeners(),this._onAdImpression(t),this.model.set("getAdSuccess",!0),this._bindOnTabEvent(),this._onSliderNotAllowAndCutOff(),this._setAdRV(),null}catch(e){this._clearOnAdImpressionTimer(),this.oppsService&&this.oppsService.onImpressionError(),this.log.error(e)}finally{hr.trcPerformanceMeasurement(this.model.get("trcPerformanceMeasurementEnabled"),"videoGotAd",e.TRC_PERFORMANCE_ACTIONS.STOP)}}},{key:"_getAdCatch",value:function(e){this.hadImpression||(this.getAdResult=void 0,this.log.info("GetAd failed requiredViewability: ".concat(this.getAdKey),this.adId),this.getAdState=o.getAdState.failed,this.setToModel("getAdCurrId",this.adId),this.setToModel("getAdState",o.getAdState.failed))}},{key:"_registerListeners",value:function(){this.vpaidWrapper.on&&(this.vpaidWrapper.on("AdError",this._onAdError.bind(this)),this.vpaidWrapper.on("AdVideoFirstQuartile",this._onAdVideoFirstQuartile.bind(this)),this.vpaidWrapper.on("AdVideoMidpoint",this._onAdVideoMidpoint.bind(this)),this.vpaidWrapper.on("AdVideoThirdQuartile",this._onAdVideoThirdQuartile.bind(this)),this.vpaidWrapper.on("end",this._adVideoEnd.bind(this)),this.vpaidWrapper.on("AdClickThru",this._onAdClickThru.bind(this)),this.vpaidWrapper.on("activeAdCurrentTime",this._onActiveAdCurrentTime.bind(this)),this.vpaidWrapper.on("NewCompletion",this._onNewCompletion.bind(this)))}},{key:"_setCLSDetector",value:function(){this.clsDetector=new sr(this.model),this.clsDetector.detect()}},{key:"_onActiveAdCurrentTime",value:function(e){this.isCompleted||(this.setToModel("activeAdCurrentTime",e.currentTime),this.setToModel("activeAdMaxTime",e.duration))}},{key:"_onAdImpression",value:function(e){this.vpaidWrapper.pauseAd(),this.reportToVpaid("pauseAdCalled",{reason:"pauseOnAdImpression",tab:this.model.get("isInTab")},!1),this._bringToBack(),this.log.info("onAdImpression (got ad - pausing ad)",this.adId),this.hadImpression=!0,this.rpox=e.tag.rpox,this.adQState=o.adQState.impression;var t={lineItemId:this.model.get("lineItemId"),placement:this.model.get("placement"),redId:this.model.get("redId")};this.model.get("isSendCPM")&&(t.cpm=this.adData.cpm),T().trigger("onImpression",t);var i=e.getVpaidData();this.adData.timeToImpression=i.startTimestamp?Date.now()-i.startTimestamp:void 0,this.model.get("adQState")===o.adQState.impression?setTimeout(this.model.trigger.bind(this.model,"change:adQState",this.adQState),0):setTimeout(this.setToModel.bind(this,"adQState",this.adQState),0),this.impressionCb(this),hr.sendingEventToTaboolaBridge("impression",this.adId),this.adData.requiredViewability&&(this.setToModel("player.settings.startDelay",0),this._startOneSecondNoPlayTimer()),this._logEventUsingElasticLogger("ad impression")}},{key:"_onAdError",value:function(e){this._clearOnAdImpressionTimer(),this.log.error("Vpaid Wrapper Error, key: "+this.getAdKey,this.adId),hr.sendingEventToTaboolaBridge("adError",this.adId)}},{key:"_onAdVideoFirstQuartile",value:function(){this.hadPlay&&(this.adQState=o.adQState.q1,this.setToModel("adQState",o.adQState.q1,this.adId),this.log.info("AdVideoFirstQuartile"),hr.sendingEventToTaboolaBridge("firstQuartile",this.adId))}},{key:"_onAdVideoMidpoint",value:function(){this.hadPlay&&(this.adQState=o.adQState.q2,this.setToModel("adQState",o.adQState.q2,this.adId),this.log.info("AdVideoMidpoint"),hr.sendingEventToTaboolaBridge("midpoint",this.adId))}},{key:"_onAdVideoThirdQuartile",value:function(){this.hadPlay&&(this.adQState=o.adQState.q3,this.setToModel("adQState",o.adQState.q3,this.adId),this.log.info("AdVideoThirdQuartile"),hr.sendingEventToTaboolaBridge("thirdQuartile",this.adId))}},{key:"_adVideoEnd",value:function(){if(this.player){var e=this.subModel||this.model;if(this.model.get("isReplayAd")||e.stopListening(e,"change:nativeAdClick"),this._setAdPlayingWithAdChoice(!1),this.log.info("on ad video end",this.adId),this.reportToVpaid("vpaidDone",{tab:this.model.get("isInTab")},!0),this.isCompleted=!0,!this.hadPlay)return this.adState=o.adState.autoKill,void this.completeCb(this,!0);this.setToModel("activeTag",void 0),this.adQState=o.adQState.completed,this.adState=o.adState.completed,this.completeCb(this,!1),this.model.get("isReplayAd")||(this.vpaidWrapper=void 0,this.setToModel("activeAdData",void 0)),this.setOrTrigger("adQState",this.adQState),this.setOrTrigger("adState",this.adQState),this.getAdState=o.getAdState.stopped,hr.sendingEventToTaboolaBridge("complete",this.adId),this.onCompView100(),this._stopRV1Observer(),this.clsDetector&&this.clsDetector.stop()}}},{key:"_onAdClickThru",value:function(){this._clearOnAdImpressionTimer(),this.setToModel("clickThruState",o.clickThruState.clicked),this.oppsService.onAdClicked(),1==++this.adClickCounter&&hr.sendingEventToTaboolaBridge("adClick",this.adId),this.reportToVpaid("adClickCounter",{number:this.adClickCounter},!1)}},{key:"_onTitleContainerClick",value:function(){if(this._hasVpaidWrapper()){this.oppsService&&!this.nativeAdCTAButtonClicked&&(this.nativeAdCTAButtonClicked=!0,this.oppsService.onNativeAdCallToActionButtonClick());var e=this.vpaidWrapper.getVpaidData(),t=this.getFromModel("adNativeSettings").link||e.vastClickThruLink;t&&this._clickThru(t);var i=this.getFromModel("nativeAdClick");this.oppsService.fireTitleContaineClick(i),this._onAdClickThru()}}},{key:"_onLearnMoreClick",value:function(){this._hasVpaidWrapper()&&this._onAdClickThru()}},{key:"_clickThru",value:function(e){hr.clickThru.call(this,e)}},{key:"_bringToFront",value:function(){if(this.vpaidWrapper.localTarget){var e=this.model.get("style.videoBackgroundColor");(0,S.default)(this.vpaidWrapper.localTarget).css({zIndex:1e3,display:"block",backgroundColor:e})}}},{key:"_bringToBack",value:function(){this.vpaidWrapper.localTarget&&(0,S.default)(this.vpaidWrapper.localTarget).css({zIndex:0})}},{key:"_hasVpaidWrapper",value:function(){return this._hasPlayer()&&this.vpaidWrapper}},{key:"_hasPlayer",value:function(){return this.player&&!this.player.playerIsClosed}},{key:"setActiveTag",value:function(){this.log.info("setActiveTag",this.adId);var e=hr.filterObject(this.vpaidWrapper.tag,["sequenceId","rollType","waterfallTagId","created","dast","cpmFloor","pubId","tagId","dp","isRon"]);this.model.get("activeTag")!==e&&this.setToModel("activeTag",e)}},{key:"getAdData",value:function(){if(this.vpaidWrapper){var e=void 0;this.vpaidWrapper.vpaidLog&&this.vpaidWrapper.vpaidLog.data&&(e=this.vpaidWrapper.vpaidLog.data._id);var t={adId:this.adId,predictPoint:this.predictPoint,requiredViewability:this.vpaidWrapper.tag?hr.parseBool(this.vpaidWrapper.tag.requiredViewability):void 0,getAdKey:"any"===this.getAdKey?10:this.getAdKey,sequenceId:this.sequenceId,dp:this.vpaidWrapper.tag?this.vpaidWrapper.tag.dp:void 0,rpox:this.rpox,hip:this.vpaidWrapper.tag?this.vpaidWrapper.tag.hip:void 0,allowSlider:this.vpaidWrapper.tag?this.vpaidWrapper.tag.alwsldr:void 0,isCompleted:this.isCompleted,tagData:hr.filterObject(this.vpaidWrapper.tag,["sequenceId","rollType","waterfallTagId","created","dast","cpmFloor","pubId","tagId","dp","isRon"]),vpaidId:e,singleAd:this.vpaidWrapper.tag?this.vpaidWrapper.tag.singleAd:void 0,adjacencyAd:this.vpaidWrapper.tag?this.vpaidWrapper.tag.adjacencyAd:void 0,mediatype:this.vpaidWrapper.tag&&this.vpaidWrapper.tag.vpaidWrapperData?this.vpaidWrapper.tag.vpaidWrapperData.mediatype:void 0};return this._setSubUnitData(t),t}}},{key:"isPWOV",value:function(){return!(!this.vpaidWrapper||!this.vpaidWrapper.pwov)&&this.model.get("isPWOV")&&hr.isFactor(100/this.vpaidWrapper.pwov)}},{key:"pause",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.PAUSE_REASONS.UNKNOWN;if((this.model.get("isInTab")&&"continueAd"===this.model.get("onOutOfView")||this.isPWOV())&&this.isViewabilityFired&&!this.model.get("blockedByExternalUnit"))return this.log.info("onOutOfView continueAd",this.adId),this.setToModel("adState",o.adState.continueAd),this.adState=o.adState.continueAd,this.oppsService.fireContinueAd(),void(this.isLostView100=!0);this._hasVpaidWrapper()&&(this.log.info("Pause ad",this.adId),this.vpaidWrapper.pauseAd(),this._setBottomOfVViewPort(),this.oppsService.onFirstPauseAfterPlay(),this._logEventUsingElasticLogger("ad pause",er,{pauseReason:t}),this.reportToVpaid("pauseAdCalled",{reason:"outOfView",tab:this.model.get("isInTab")},!1)),this.setToModel("adState",o.adState.paused),this.adState=o.adState.paused}},{key:"skipAd",value:function(){this.log.info("Skip ad",this.adId),this.setToModel("isReplayAd",!1),this._hasVpaidWrapper()&&this.vpaidWrapper.skipAd(),this.setToModel("adState",o.adState.skipped),this._clearOnAdImpressionTimer()}},{key:"play",value:function(){this._clearOnAdImpressionTimer(),this.model.set("lastActiveAd",this.adId),this.log.info("playing ad",this.adId);var e=this.getAdData();this._overridePreviousSingleAdConfiguration(e),this.setToModel("activeAdData",e),this._hasVpaidWrapper()&&(this._updateAdChoiceVisibility(),this._keepReplayableAdAlive(),this.model.get("isToggleIframeContent")&&this.vpaidWrapper.toggleIframeContentDisplay&&this.vpaidWrapper.toggleIframeContentDisplay("show")),this.hadPlay||(this.hadPlay=!0,this.log.info("Winning ad: "+this.getAdKey,this.adId),this.model.get("isMultiActiveAds")||(this._bringToFront(this.vpaidWrapper),(0,S.default)(this.vpaidWrapper.adTarget).removeClass("_cm-ad")),this.setActiveTag(),this._checkIfStartRV1Observer(),this.adQState=o.adQState.q0,this.setToModel("adQState",o.adQState.q0),this.setToModel("adDuration",this.vpaidData.duration),this._setDebugReportDataOnConversion(e),this.oppsService.onConversion(),this.adConversionFired(),this.setAdParametersToModel(),setTimeout(this._fireTwoSecAfterPlay.bind(this),2e3)),this._hasVpaidWrapper()?(this.log.info("resumeAd VpaidWrapper is alive ",this.adId),this._bringToFront(this.vpaidWrapper),this.vpaidWrapper.resumeAd(),this.model.set("hadPlayedAd",!0),this.reportToVpaid("resumeAdCalled",{tab:this.model.get("isInTab")},!1),this._logEventUsingElasticLogger("ad play")):this.log.warning("resumeAd failed VpaidWrapper is NOT alive ",this.adId),setTimeout(this._firePlayEvents.bind(this),0),this.start||(this.start=!0,hr.sendingEventToTaboolaBridge("start",this.adId));var t=this.getCurrModel();this.isLostView100||(this.isLostView100=!t.get("isViewable100"),this.isViewabilityListenerSet||this.isLostView100||(t.on("change:isViewable100",this.onViewabile100Change.bind(this)),this.isViewabilityListenerSet=!0))}},{key:"_overridePreviousSingleAdConfiguration",value:function(e){e&&!e.singleAd&&(this.model.set("isReplayAd",!1),this.model.set("isKeepViewOnMidroll",!1))}},{key:"_firePlayEvents",value:function(){this.adState=o.adState.playing,this.setToModel("adState",o.adState.playing),T().trigger("global:adState:playing")}},{key:"_fireTwoSecAfterPlay",value:function(){this.oppsService.onTwoSecAfterPlay()}},{key:"cancelGetAd",value:function(e){this.getAdResult&&(this.log.info("GetAd was cancelled",this.adId),this.getAdResult.cancel(e),this.getAdResult=void 0)}},{key:"setToModel",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.model.set(e,t,i),this.subModel&&this.subModel.set(e,t,i)}},{key:"getFromModel",value:function(e){return this.subModel?this.subModel.get(e):this.model.get(e)}},{key:"setSubModel",value:function(e){this.subModel=e,this.oppsService&&this.oppsService.setSubModel(this.subModel)}},{key:"getCurrModel",value:function(){return this.subModel?this.subModel:this.model}},{key:"forceTrigger",value:function(e){this.model.trigger("change:"+e,this.model,this.model.get(e)),this.subModel&&this.subModel.trigger("change:"+e,this.subModel,this.subModel.get(e))}},{key:"setOrTrigger",value:function(e,t){this.model.get(e)===t?this.forceTrigger(e):this.setToModel(e,t)}},{key:"resize",value:function(e){e&&e.width&&e.height?this.sizeObj.width===e.width&&this.sizeObj.height===e.height||(this.sizeObj.width=e.width,this.sizeObj.height=e.height,this.log.info("resizing ad",S.default.extend({},e,{adId:this.adId,aspectRatio:this.aspectRatioString})),this.vpaidWrapper&&this.vpaidWrapper.resizeAd(e.width,e.height,this.aspectRatioString)):this.log.warning("resize was called with empty sizeObj!",e)}},{key:"recheckSize",value:function(){var e=this.sizeObj;this.sizeObj={},this.resize(e)}},{key:"mute",value:function(){this.vpaidWrapper&&(this.log.info("Mute Player"),this.vpaidWrapper.mute(),hr.sendingEventToTaboolaBridge("volumeChange",0))}},{key:"unmute",value:function(){this.vpaidWrapper&&(this.log.info("UnMute Player"),this.vpaidWrapper.unmute(),this.oppsService.fireAdUnmuted(),hr.sendingEventToTaboolaBridge("volumeChange",100))}},{key:"fireSkipVimp1EligibilityLost",value:function(e){this._clearOnAdImpressionTimer(),this.oppsService.fireSkipVimp1EligibilityLost(e)}},{key:"fireSkipVimp1AdIsPlaying",value:function(e){this._clearOnAdImpressionTimer(),this.oppsService.fireSkipVimp1AdIsPlaying(e)}},{key:"onAdPlayingRV1StackWithRV0",value:function(){this._clearOnAdImpressionTimer(),this.oppsService.onAdPlayingRV1StackWithRV0()}},{key:"onViewability",value:function(){this.isViewed||(this.isViewed=!0,this.adViewabilityFired(),this.oppsService.onViewability(),this._logEventUsingElasticLogger("ad viewability"))}},{key:"onViewabilityOneS",value:function(){this.isViewedOneS||(this.isViewedOneS=!0,this.oppsService.onViewabilityOneS())}},{key:"onViewability100",value:function(){this.isViewed100||(this.setToModel("viewability100",!0),this.isViewed100=!0,this.oppsService.onViewability100())}},{key:"onViewabilityAMP",value:function(){this.isViewedAMP||(this.isViewedAMP=!0,this.isNoViewedAMP=!0,this.oppsService.onViewabilityAMP())}},{key:"onNoViewabilityAMP",value:function(){this.isNoViewedAMP||(this.isNoViewedAMP=!0,this.oppsService.onNoViewabilityAMP())}},{key:"onCompView100",value:function(){this.isLostView100||this.isCompViewed100||(this.isCompViewed100=!0,this.oppsService.onCompView100())}},{key:"onDetached",value:function(){this.isDetached||(this.isDetached=!0,this.oppsService.onAdDetached())}},{key:"onAttached",value:function(){this.isDetached&&(this.isDetached=!1,this.oppsService.onAdAttached())}},{key:"onSliderClose",value:function(){this.isSliderClosed||(this.isSliderClosed=!0,this.oppsService.onAdSliderClosed(),this._clearOnAdImpressionTimer())}},{key:"reportToVpaid",value:function(e,t,i){this._setSubUnitData(t),this._hasVpaidWrapper()&&this.vpaidWrapper.vpaidLog&&this.vpaidWrapper.vpaidLog.push&&(this.vpaidWrapper.vpaidLog.push("unit_".concat(e),t,!1),this.vpaidWrapper.vpaidLog.data&&this.vpaidWrapper.vpaidLog.data.unit_history&&this.vpaidWrapper.vpaidLog.data.unit_history.push&&this.vpaidWrapper.vpaidLog.data.unit_history.push(e),this.vpaidWrapper.vpaidLog.data&&this.vpaidWrapper.vpaidLog.data.statuses&&this.vpaidWrapper.vpaidLog.data.statuses.push&&this.vpaidWrapper.vpaidLog.data.statuses.push(e),i&&this.vpaidWrapper.vpaidLog.push("unit_state",{status:e},i))}},{key:"reportRpoxSkip",value:function(e){this.reportToVpaid("skipRpox",{otherRpox:e.rpox,otherRequiredViewability:e.requiredViewability,otherAdDp:e.dp,otherSequenceId:e.sequenceId},!1)}},{key:"reportPpKeySkip",value:function(e){this.reportToVpaid("skipPpKey",{otherRpox:e.rpox,otherRequiredViewability:e.requiredViewability,otherAdDp:e.dp,otherSequenceId:e.sequenceId},!1)}},{key:"_setAdPlayingWithAdChoice",value:function(e){this.setToModel("adPlayingWithAdChoice",e)}},{key:"_updateAdChoiceVisibility",value:function(){this.vpaidWrapper.hasAdChoices?this._setAdPlayingWithAdChoice(!0):this._setAdPlayingWithAdChoice(!1)}},{key:"_setSubUnitData",value:function(t){var i=this.model.get("subUnitType");if(this.model&&(i||0===i)&&(this._checkIfPlainSubUnit(i,t)?t.su=e.SUB_UNIT_TYPE.PLAIN:t.su=i),this.subModel){var n=this.model.get("detachToSlider"),r=this.subModel.get("gotFirstEligibility");n&&n.isStartFromSlider&&n.isDetachToSlider?t.sp=r?this.subModel.get("cardNumber"):0:n&&n.isStartFromSlider&&!this.subModel.get("isEligibleToPlay")?t.sp=0:this.model.get("cardNumber")&&(t.sp=this.model.get("cardNumber"))}else this.model.get("MSNCard.row")&&(t.sp=this.model.get("MSNCard.row"))}},{key:"_isStickyDisabled",value:function(t){return t!==e.SUB_UNIT_TYPE.STICKY_BELOW||!this.model.get("enableStickyOnNonAllowSlider")}},{key:"_checkIfPlainSubUnit",value:function(t,i){return i.adjacencyAd&&t===e.SUB_UNIT_TYPE.STICKY_BELOW||!i.allowSlider&&this.model.get("isSliderCutOff")&&this._isStickyDisabled(t)}},{key:"_logEventUsingElasticLogger",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Jn,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.elasticLogger&&t){var r=n;if(r.isEligible=this.model.get("isEligibleToPlay")||!1,r.adId=this.adId,this.vpaidWrapper){var o=this.getAdData(),s=this.vpaidWrapper.getVpaidData();r.requiredViewability=o.requiredViewability,r.predictPoint=o.getAdKey,r.isHipAd=o.hip||!1,r.isAdjacencyAd=o.adjacencyAd,r.isSingleAd=o.singleAd,r.allowSlider=1===o.allowSlider,r.lineItemId=s.lineItem||-1,r.campaignId=s.campaignId||-1,r.advertiserId=parseInt(s.advId)||-1,r.mediatype=e.MEDIA_TYPE_ID_TO_NAME[o.mediatype]}this.elasticLogger.log({message:t,severity:i,extraData:r})}}},{key:"onLearnMoreClick",value:function(){this.oppsService.fireLearnMoreClick()}},{key:"_setDebugReportDataOnGotAd",value:function(){this.model.increaseCounter("sqv"),this.adData.requiredViewability?this.model.increaseCounter("rvvs1"):this.model.increaseCounter("rvvs0"),this.adData.pn=this.predictName,this.adData.adId=this.adId,this.adData.esv=this.vpaidData.earlySrcVPAID}},{key:"_setDebugReportDataOnConversion",value:function(){this.model.increaseCounter("conversionCount"),this.adData.requiredViewability?this.model.increaseCounter("rvps1"):this.model.increaseCounter("rvps0")}},{key:"_setAdRV",value:function(){this.adData.requiredViewability?this.setToModel("gotRvAd",!0):this.setToModel("gotNonRvAd",!0)}},{key:"_getTimeOut",value:function(){return this.model.get("vForce.secondsToGetAdFail.".concat(this.getAdKey))}},{key:"_setAdTypeConfig",value:function(){if(this.vpaidWrapper&&this.vpaidWrapper.getVpaidData){var e=this.vpaidWrapper.getVpaidData();for(var t in this.adTypeTranslator=new Fn.default({model:this.subModel||this.model}),this.adTypeConfig={},e)if(e[t]){var i=this.adTypeTranslator.getConfigForKey(t);if(hr.isEmpty(i))continue;if(this.log.info("got adTypeConfig for key "+t,i),i.revertAfter){var n=this._createRevertAdType(i,t);this._setAdTypeConfigAfter(i.revertAfter,n)}i.setAdConfigAfter?this._setAdTypeConfigAfter(i.setAdConfigAfter,i):this.setToModel(i),this.adTypeConfig[t]=i}else"singleAd"===t&&this._revertSingleAdConfig();this.aspectRatioNum=this.getAspectRatioNum(e),this.log.info("Ad size received is - width: "+e.adWidth+"; height: "+e.adHeight),this._setAdTypeConfigAfter("setSubModel",{aspectRatioNum:this.aspectRatioNum}),this.supportVideoCurrentTimeEvents=e.supportVideoCurrentTimeEvents}}},{key:"_revertSingleAdConfig",value:function(){var e={setAdConfigAfter:"setSubModel",isPlacementSingleAd:!1,"continueToPlayInNexCard.isActive":!0};this._setAdTypeConfigAfter(e.setAdConfigAfter,e)}},{key:"_setAdTypeConfigAfter",value:function(e,t){var i=this[e];hr.isFunction(i)&&(this[e]=function(){i.apply(this,arguments),this.setToModel(t),this.log.info("setting ad type config after ".concat(i.name," function"),t)})}},{key:"_createRevertAdType",value:function(e,t){var i={};for(var n in e)"setAdConfigAfter"!==n&&"revertAfter"!==n&&(i[n]=this.model.get(n));return i}},{key:"onAdSetToUnits",value:function(){}},{key:"_keepReplayableAdAlive",value:function(){var e=this.vpaidWrapper;e.dontDie&&this.model.get("isReplayAd")&&(e.isReplayable||this.model.get("isForceDontDie"))&&(e.dontDie(),this.model.set("dontRenderRepeatButton",!e.isReplayable))}},{key:"setAdParametersToModel",value:function(){if(this.model.get("components.nativeAd.isActive")){var e=this.vpaidWrapper.getVpaidData(),t=e.adNativeSettings||{},i=this.subModel||this.model;e.adNativeSettings&&this.model.set("continueToPlayInNexCard.isActive",!1),this.setNativeAdClickListener(),this.setToModel("adNativeSettings",void 0,{silent:!0}),this.setToModel("adNativeSettings",t,{silent:!0}),i.trigger("change:adNativeSettings",i,i.get("adNativeSettings"))}this.vpaidWrapper.clickThruUrl?(this.log.info("updated click through URL",this.vpaidWrapper.clickThruUrl),this.setToModel("adClickThroughUrl",this.vpaidWrapper.clickThruUrl),this._setLearnMoreClickListener()):this.setToModel("adClickThroughUrl",""),this.setToModel("activeAdRV",this.adData.requiredViewability)}},{key:"_setTagDataToStorage",value:function(){try{this.model.setStorage("activeAdData",this.vpaidWrapper.tag)}catch(e){this.log.error("error setting activeAdData",{error:e,tag:this.vpaidWrapper.tag})}}},{key:"setNativeAdClickListener",value:function(){var e=this.subModel||this.model;e.listenTo(e,"change:nativeAdClick",this._onTitleContainerClick.bind(this))}},{key:"_setLearnMoreClickListener",value:function(){var e=this.subModel||this.model;e.listenTo(e,"change:learnMoreClick",this._onLearnMoreClick.bind(this))}},{key:"_sendPixel",value:function(e){"img"===e.method?(new Image).src=e.pixel:"js"===e.method&&this._sendJSPixel(e.pixel)}},{key:"_sendJSPixel",value:function(e){var t=document.createElement("script");t.src=e,t.type="text/javascript",t.async=!0,document.body.appendChild(t)}},{key:"getAspectRatioNum",value:function(e){return e&&e.supportVerticalVideo?(this.aspectRatioString=e.adWidth.toString()+":"+e.adHeight.toString(),e.adWidth/e.adHeight):this.aspectRatioNum?this.aspectRatioNum:(this.aspectRatioString="16:9",this.model.get("defaultAspectRatioNum"))}},{key:"onAdSwappedOut",value:function(){this.oppsService.adSwappedOut()}},{key:"onAdSwappedIn",value:function(){this.oppsService.adSwappedIn()}},{key:"onResumeAfterSwapOut",value:function(){this.oppsService.adResumeAfterSwapOut()}},{key:"_getMesureElement",value:function(){var e=(0,S.default)(this.subModel?this.subModel.get("parentSelector"):this.model.get("parentSelector"));return this.mesureElement=hr.isArray(e)?e[0]:e,this.mesureElement}},{key:"_startOneSecondNoPlayTimer",value:function(){this.mesureElement=this._getMesureElement(),this.mesureElement&&(this.onImpressionPosition=hr.offsetFromBottomOfViewPort(this.mesureElement),this.onAdImpressionTimer=setTimeout(this._reportOneSecondNoPlay.bind(this),1e3))}},{key:"_reportOneSecondNoPlay",value:function(){null!==this.onAdImpressionTimer&&(this.hadPlay?this._clearOnAdImpressionTimer():(this.onOneSecondPosition=hr.offsetFromBottomOfViewPort(this.mesureElement),this.onImpressionPosition!==this.onOneSecondPosition?this.onImpressionPosition>this.onOneSecondPosition?this.oppsService.onOneSecondNoPlayScrolledDown():this.onImpressionPosition<this.onOneSecondPosition&&this.oppsService.onOneSecondNoPlayScrolledUp():this.oppsService.onOneSecondNoPlaySamePlace()))}},{key:"_clearOnAdImpressionTimer",value:function(){this.onAdImpressionTimer&&(clearTimeout(this.onAdImpressionTimer),this.onAdImpressionTimer=null)}},{key:"onViewabile100Change",value:function(){var e=this.getCurrModel();this.model.get("adState")===o.adState.paused||e.get("isViewable100")||(this.isLostView100=!0)}},{key:"_onNewCompletion",value:function(){this.onCompView100()}},{key:"handleAdjacencyAd",value:function(){this.model.get("hasScAdjacency")&&(this.getAdProperties=hr.extend(this.getAdProperties,{excAdProperties:{adjacencyAd:[!0]}}))}},{key:"_onSliderNotAllowAndCutOff",value:function(){hr.isSliderCutOffEnabled(this.model,this.adData)&&this.oppsService.sliderCutOff()}},{key:"onDisplayingFullNAS",value:function(){this.firedDisplayingFullNAS||(this.firedDisplayingFullNAS=!0,this.oppsService.onDisplayingFullNAS())}},{key:"onDisplayingNASTitleOnly",value:function(){this.firedDisplayingNASTitleOnly||(this.firedDisplayingNASTitleOnly=!0,this.oppsService.onDisplayingNASTitleOnly())}},{key:"fireAdOppOnce",value:function(e){this["".concat(e,"Fired")]||(this["".concat(e,"Fired")]=!0,this.oppsService.fireGenericOpp(e))}},{key:"_stopRV1Observer",value:function(){this.AmpViewabilityHelper&&(this.AmpViewabilityHelper.stopObserver(this.targetElement),this.AmpViewabilityHelper=null)}},{key:"_checkIfStartRV1Observer",value:function(){this.model.get("frameType")===e.FRAME_TYPE.amp&&this.model.get("isUseAmpObserver")&&(this.AmpViewabilityHelper=new(Wn())({model:this.model,subModel:this.subModel}),this.targetElement=this.vpaidWrapper.adTarget?this.vpaidWrapper.adTarget:this.vpaidWrapper.localTarget,this.targetElement&&(this.log.info("Winning ad vpaidWrapper: ",this.targetElement),this.AmpViewabilityHelper.startObserver(this.targetElement),this.createStateHandlers([{event:"isViewableAMP:false",funcName:"pause"},{event:"isViewableAMP:true",funcName:"play"}])))}},{key:"onHipAdjacAdWithoutReplay",value:function(){this.oppsService.onHipAdjacAdWithoutReplay()}},{key:"_setBottomOfVViewPort",value:function(){if(this.model.get("isReportBottomOfVViewPort")){var e=this.vpaidWrapper.adTarget;this.adData.bovpv=!!e&&parseInt(hr.offsetFromBottomOfViewPort(e))}}},{key:"_onCardLocatorHighPps",value:function(){this.oppsService?this.oppsService.fireSkippedForScrollSpeedTooHigh():this.createStateHandlers([{event:"cardLocatorHighPps",funcName:"_onCardLocatorHighPps",isListenOnce:!0}])}},{key:"_onAdWaitForPubVideoToStop",value:function(){this._clearOnAdImpressionTimer(),this.oppsService?this.oppsService.adWaitForPubVideoToStop():this.createStateHandlers([{event:"adWaitForPubVideoToStop",funcName:" _onAdWaitForPubVideoToStop",isListenOnce:!0}])}},{key:"_outOfTabEvent",value:function(){this._clearOnAdImpressionTimer(),this.oppsService.outOfTab()}},{key:"_backToTabEvent",value:function(){this._clearOnAdImpressionTimer(),this.oppsService.backToTab()}}],n&&lr(i.prototype,n),s&&lr(i,s),Object.defineProperty(i,"prototype",{writable:!1}),l}(n.O),pr=fr;function mr(e){return mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mr(e)}function yr(e){return function(e){if(Array.isArray(e))return vr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return vr(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return vr(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vr(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function gr(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if("object"!==mr(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==mr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===mr(o)?o:String(o)),n)}var r,o}function br(e,t){return br=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},br(e,t)}function _r(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=wr(e);if(t){var r=wr(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return function(e,t){if(t&&("object"===mr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,i)}}function wr(e){return wr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},wr(e)}var Sr=i(1999),Pr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&br(e,t)}(l,e);var i,n,s,a=_r(l);function l(e){var t,i=e.model,n=e.onPredictCallback;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=a.call(this,{model:i,onPredictCallback:n})).model=i,t.onPredictCallback=n,t.log=new r.Z({unitType:t.model.get("unitType"),className:"seerService",version:t.model.get("version"),isDebug:t.model.get("isDebug")}),t.activePredict={},t._handleForcePredict(),t._createPlayerReadyPredict(),t._createRequestedPredictors(),t}return i=l,n=[{key:"_handleForcePredict",value:function(){var e=this.model.get("seer.force");Array.isArray(e)?(this._activatePredictors(e),this._disableAllPredictsExpectGiven.apply(this,yr(e))):"string"==typeof e&&(this._activatePredictor(e),this._disableAllPredictsExpectGiven(e))}},{key:"_disableAllPredictsExpectGiven",value:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=this.model.get("predictors");Object.keys(n).filter((function(e){return"isGet1OnlyAfterAdLoaded"!==e&&!t.includes(e)})).forEach(this._disablePredict.bind(this))}},{key:"_disablePredict",value:function(e){this.model.set("predictors.".concat(e,".isActive"),!1),this.model.set("predictors.".concat(e,".isStartWF"),!1)}},{key:"multiAd",value:function(){this.activePredict.multiAd||(this.activePredict.multiAd=[]);var e=this.model.get("predictors.multiAd.predictPoints");this._createMultiPointPredict({predictPoints:e,pointKey:"qState",predictArr:this.activePredict.multiAd,predict:Te})}},{key:"emptyQueue",value:function(){this.activePredict.emptyQueue=this._createPredict($e,this.getAdProperties("emptyQueue"))}},{key:"getAdFail",value:function(){this.activePredict.getAdFailPredict=this._createPredict(ve,this.getAdProperties("getAdFail"))}},{key:"autoKill",value:function(){this.activePredict.autoKillPredict=this._createPredict(w,this.getAdProperties("autoKill"))}},{key:"fullEligibility",value:function(){this.activePredict.fullEligibilityPredict=this._createPredict(Je,this.getAdProperties("fullEligibility"))}},{key:"distancePercent",value:function(){this.activePredict.distancePercent||(this.activePredict.distancePercent=[]);var e=this.model.get("predictors.distancePercent.predictPoints");this._createMultiPointPredict({predictPoints:e,pointKey:"requirePercentageToSelector",predictArr:this.activePredict.distancePercent,predict:Y})}},{key:"distancePixels",value:function(){this.activePredict.distancePixels||(this.activePredict.distancePixels=[]);var e=this.model.get("predictors.distancePixels.predictPoints");this._createMultiPointPredict({predictPoints:e,pointKey:"pixelsFromSelectors",predictArr:this.activePredict.distancePixels,predict:ce})}},{key:"firstScroll",value:function(){this.activePredict.firstScrollPredict=this._createPredict(Be,this.getAdProperties("firstScroll"))}},{key:"time",value:function(){this.activePredict.time||(this.activePredict.time=[]);var e=this.model.get("predictors.time.predictPoints");"number"==typeof e||Array.isArray(e)?this._createPredict(St,{}):this._createMultiPointPredict({predictPoints:e,predictArr:this.activePredict.time,predict:St})}},{key:"intersection",value:function(){this.activePredict.intersectionPredict||(this.activePredict.intersectionPredict=[]);var e=this.model.get("predictors.intersection.predictPoints");this._createMultiPointPredict({predictPoints:e,pointKey:"intersectionPercent",predictArr:this.activePredict.intersectionPredict,predict:pt})}},{key:"mp4",value:function(){this.activePredict.mp4Predict=this._createPredict(kt,this.getAdProperties("mp4"))}},{key:"msnFullEligibility",value:function(){this.activePredict.msnFullEligibilityPredict=this._createPredict(Vi,{})}},{key:"feedInViewPredict",value:function(){this.activePredict.feedInViewPredict=this._createPredict(Ki,this.getAdProperties("feedInViewPredict"))}},{key:"recoReel",value:function(){this.activePredict.recoReelPredict||(this.activePredict.recoReelPredict=[]);var e=this.model.get("predictors.recoReel.predictPoints");this._createMultiPointPredict({predictPoints:e,pointKey:"percentage",predictArr:this.activePredict.recoReelPredict,predict:rn})}},{key:"postRepeat",value:function(){this.activePredict.postRepeat=this._createPredict(dn,{})}},{key:"_createPlayerReadyPredict",value:function(){this.log.debug("Creating player ready predict"),this.model.get("predictors.playerReady")&&this.model.get("predictors.playerReady.isActive")&&(this.activePredict.playerPredict=this._createPredict(Re,this.getAdProperties("playerReady"))),this.log.debug("playerReadyPredict created")}},{key:"onPredict",value:function(e,i,n){this.model.get("stopPredicts")&&t().PREDICT_NAMES[i]!==t().PREDICT_NAMES.postRepeatPredictor||(this.model.set("nextPredictName",i),this.model.set("nextPredict",e),this.model.set("nextAdProperties",n),this.onPredictCallback(i?t().PREDICT_NAMES[i]:-1))}},{key:"startWF",value:function(){this.model.set("startWF",!0)}},{key:"_createRequestedPredictors",value:function(){var e=this;if(this.model.get("playerState")===o.readyState){var t=this.model.get("predictors");Object.keys(t).forEach((function(i){var n=t[i];n&&e[i]&&(n.isActive||n.isStartWF)&&!e.activePredict[i]&&(e.log.info("Predict activePredict",i),e[i]())}))}else this.model.listenToOnce(this.model,"change:playerState",this._createRequestedPredictors.bind(this))}},{key:"_activatePredictors",value:function(e){var t=this;e.forEach((function(e){t._activatePredictor(e)}))}},{key:"_activatePredictor",value:function(e){this.model.set("predictors.".concat(e,".isActive"),!0)}},{key:"_createMultiPointPredict",value:function(e){var t=this,i=e.predictPoints,n=e.pointKey,r=e.predictArr,o=e.predict;Sr.each(i,(function(e,i){r.push(t._createPredict(o,{predictPoint:e[n],predictKey:void 0!==e.key?e.key:i,adProperties:{adProperties:e.adProperties,excAdProperties:e.excAdProperties}}))}))}},{key:"_createPredict",value:function(e,t){return Sr.extend(t,{model:this.model,onPredict:this.onPredict,startWfFunc:this.startWF,onPredictCallback:this.onPredictCallback}),new e(t)}},{key:"getAdProperties",value:function(e){return{adProperties:{adProperties:this.model.get("predictors.".concat(e,".adProperties")),excAdProperties:this.model.get("predictors.".concat(e,".excAdProperties"))}}}}],n&&gr(i.prototype,n),s&&gr(i,s),Object.defineProperty(i,"prototype",{writable:!1}),l}(n.O),Tr=Pr;function Ar(e){return Ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ar(e)}function Er(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if("object"!==Ar(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==Ar(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===Ar(o)?o:String(o)),n)}var r,o}var Cr=function(){function e(t,i,n,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.model=t,this.log=new r.Z({unitType:this.model.get("unitType"),className:"timerService",version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.doneFunction=n||function(){},this.time=s||0,this.conditions=i||{startCondition:{stateToListen:"",state:""},pauseCondition:{stateToListen:"",state:""},continueCondition:{stateToListen:"",state:""},stopCondition:{stateToListen:"",state:""},isStartOnce:!1},this._startListeningToConditions(),this.timerState=o.readyState}var t,i,n;return t=e,(i=[{key:"_startListeningToConditions",value:function(){this.conditions.startCondition&&(this.conditions.isStartOnce?this.model.listenToOnce(this.model,"change:"+this.conditions.startCondition.state,this.start.bind(this)):this.model.listenTo(this.model,"change:"+this.conditions.startCondition.state,this.start.bind(this))),this.conditions.pauseCondition&&this.model.listenTo(this.model,"change:"+this.conditions.pauseCondition.state,this.pause.bind(this)),this.conditions.continueCondition&&this.model.listenTo(this.model,"change:"+this.conditions.continueCondition.state,this.continue.bind(this)),this.conditions.stopCondition&&this.model.listenTo(this.model,"change:"+this.conditions.stopCondition.state,this.stop.bind(this))}},{key:"start",value:function(e,t){this.conditions.startCondition.stateToListen!==t&&"any"!==this.conditions.startCondition.stateToListen||(this.timerState=o.timerState.working,this.stTime=(new Date).valueOf(),this.timeout=setTimeout(this.done.bind(this),this.time),this.timeLeft=this.time)}},{key:"pause",value:function(e,t){if(this.timerState===o.timerState.working&&(!t||this.conditions.pauseCondition.stateToListen===t)){this.timerState=o.timerState.paused,this._clearTimer();var i=(new Date).valueOf()-this.stTime;this.timeLeft-=i}}},{key:"continue",value:function(e,t){this.timerState===o.timerState.paused&&(!t||t&&this.conditions.continueCondition.stateToListen===t)&&(this.timerState=o.timerState.working,this.timeout=setTimeout(this.done.bind(this),this.timeLeft),this.stTime=(new Date).valueOf())}},{key:"stop",value:function(e,t,i,n){this.timeout&&(n||this.conditions.stopCondition.stateToListen===t)&&(this.timerState=o.timerState.stopped,this._clearTimer())}},{key:"done",value:function(){this.timerState=o.timerState.done,this.doneFunction(),this.timeout=void 0}},{key:"getTimerState",value:function(){return this.timerState}},{key:"_clearTimer",value:function(){clearTimeout(this.timeout),this.timeout=void 0}},{key:"isTimerActive",value:function(){return this.timerState===o.timerState.working||this.timerState===o.timerState.paused}}])&&Er(t.prototype,i),n&&Er(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Or=Cr;function kr(e){return kr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kr(e)}function Dr(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if("object"!==kr(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==kr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===kr(o)?o:String(o)),n)}var r,o}function Rr(e,t){return Rr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Rr(e,t)}function Ir(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=Nr(e);if(t){var r=Nr(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return function(e,t){if(t&&("object"===kr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return xr(e)}(this,i)}}function xr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Nr(e){return Nr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Nr(e)}var Vr=i(1999),Lr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Rr(e,t)}(l,e);var i,n,s,a=Ir(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=a.call(this,e)).model=e,t.log=new r.Z({unitType:t.model.get("unitType"),className:"pixelsService",version:t.model.get("version"),isDebug:t.model.get("isDebug")}),t.hadEligibility=!1,t.hadImpression=!1,t.playerHadRvInQ=!1,t.shouldFirePauseAfterPlay=!1,t.adsList={},t._bindEvents(),t.model.set("hadEligibility",!1),t.model.get("detachToSlider.isStartFromSlider")&&t._firePixel(t.model.getPixel("pixels.sliderFeedStartWithABT"),"slider to feed start with abTest"),t._fireCMPpixel(),T().once("window:resize:change",t._onWindowResize.bind(xr(t))),T().once("window:orientation:change",t._onDeviceOrientationChange.bind(xr(t))),t}return i=l,n=[{key:"_bindEvents",value:function(){this.createStateHandlers([{event:"adQState:impression",funcName:"_onAdImpression"},{event:"adState:playing",funcName:"_onAdPlaying"},{event:"adState:completed",funcName:"_onAdCompleted"},{event:"loadingViewState:clicked",funcName:"_onRepeatClicked"},{event:"isEligibleToPlay",funcName:"_onEligibilityChange"},{event:"videoViewState:attached",funcName:"_fireAttachPixel",isListenOnce:!0},{event:"videoViewState:detached",funcName:"_fireDetachPixel",isListenOnce:!0},{event:"closeTimer",funcName:"_fireTimerPixel"},{event:"getAdState:gettingAd",funcName:"_fireGetAdPixel"},{event:"TRCResetCloseUnit:true",funcName:"_onTRCResetCloseUnit"},{event:"topParentSelectorLost:true",funcName:"_onParentSelectorLost"},{event:"isSkippedDistancePredict:true",funcName:"_onSkipDistancePredict"},{event:"publisherVideoDetected:true",funcName:"_onPublisherVideoDetected"},{event:"rvHandlerTimerExpired:true",funcName:"_onRvHandlerTimerExpired"},{event:"playerHasRvInQ:true",funcName:"_onPlayerHasRvInQ"},{event:"fullEligibilityPredicted:true",funcName:"_onFullEligibilityPredicted"},{event:"publisherIframeVideoDetected:true",funcName:"_onPublisherIframeVideoDetected",isListenOnce:!0},{event:"compDetected",funcName:"_onCompetitionDetected"},{event:"progressLoaderInit:true",funcName:"_onProgressLoaderInit"},{event:"progressLoaderTimerReached:true",funcName:"_onProgressLoaderMove"},{event:"progressLoaderViewClosed:true",funcName:"_onProgressLoaderClose"},{event:"feedxToggle",funcName:"_onFeedxToggle"},{event:"isOrganicCardInjected:true",funcName:"_onOrganicCardInjected"},{event:"organicInjectorFail:true",funcName:"_onOrganicCardInjectionFail"},{event:"isTerminateOnResize:true",funcName:"_onTerminateOnResize"},{event:"generalError",funcName:"_onGeneralError"},{event:"exploreMore",funcName:"_onExploreMore"},{event:"foundUnitDimensions:true",funcName:"_onUnitDimensionsFound"},{event:"videoResetCloseUnit:true",funcName:"_onVideoResetCloseUnit"},{event:"hadForcedDetach:true",funcName:"_onForcedDetach"},{event:"misplacedVideoDetected:true",funcName:"_onMisplacedVideoDetected"},{event:"overlayDetected",funcName:"_onOverlayDetected"},{event:"noAdjacInFirstWFs:true",funcName:"_onNonAdjacInFirstWFs"},{event:"hasImpBeforeReadMoreViewable:true",funcName:"_onHasImpBeforeReadMoreViewable",isListenOnce:!0},{event:"readMoreIsInitiallyInViewport:true",funcName:"_onReadMoreIsInitiallyInViewport",isListenOnce:!0},{event:"readMoreClicked:true",funcName:"_onReadMoreClick",isListenOnce:!0},{event:"delayRvPredict",funcName:"_onDelayRvPredict"},{event:"executeDelayedRvPredict",funcName:"_onExecuteDelayedRvPredict"},{event:"readMoreClicked:true",funcName:"_onReadMoreClick",isListenOnce:!0},{event:"minutelyStartedPlaying:true",funcName:"_onMinutelyStartedPlaying",isListenOnce:!0},{event:"minutelyPauseForAdPlay",funcName:"_onMinutelyPauseForAdPlay"},{event:"minutelyResumeOnAdClose",funcName:"_onMinutelyResumeOnAdClose"},{event:"recoReelTextTermination",funcName:"_onRecoReelTextTermination",isListenOnce:!0},{event:"TRCDispatchFailed:true",funcName:"_onTRCDispatchFailed",isListenOnce:!0},{event:"tblRecoReelSliderToSlider:true",funcName:"_onTblRecoReelSliderOpen"},{event:"tblRecoReelSliderToSlider:false",funcName:"_onTblRecoReelSliderClose"},{event:"organicVideoPlaying",funcName:"_reportOrganicVideoId"},{event:"onMaxNonRvVimpsInQueue",funcName:"_reportOnMaxNonRvVimpsInQueue",isListenOnce:!0}]),T().once("global:passback",this._onPassbackFunctionCalled.bind(this)),this.model.get("autoplaySoundOn")?this._onAutoplayVolumeStatus():this.createStateHandlers([{event:"autoplaySoundOn:true",funcName:"_onAutoplayVolumeStatus",isListenOnce:!0}])}},{key:"_onWindowResize",value:function(){this._firePixel(this.model.getPixel("pixels.windowResize"),"window.resize event triggered")}},{key:"_onDeviceOrientationChange",value:function(){this._firePixel(this.model.getPixel("pixels.deviceOrientationChange"),"Device orientation changed")}},{key:"_onAdImpression",value:function(){this._firePixel(this.model.getPixel("pixels.addImpresion"),"addImpresion (the player got an ad)")}},{key:"_onAdPlaying",value:function(){var e=this.model.get("activeAdData");!e||!e.adId||this.adsList[e.adId]&&this.adsList[e.adId].hadPlay||(this.adsList[e.adId]=e,this.adsList[e.adId].hadPlay=!0,this._firePixel(this.model.getPixel("pixels.conversion"),"conversion (the ad is playing)"))}},{key:"_onAdCompleted",value:function(){this.isViewed=!1,this.activeTag=void 0}},{key:"_onOverlayDetected",value:function(e){e.get("adState")===o.adState.playing?this._onOverlayAfterImpression(e):this._onOverlayBeforeImpression(e)}},{key:"_onOverlayBeforeImpression",value:function(e){if(!this.firedOverlayBeforeImpressionPixel){this.firedOverlayBeforeImpressionPixel=!0;var t=this.model.get("overlay")||{};this._firePixel(this.model.getPixel("pixels.overlayDetected"),"Overlay detected",{debug:"".concat(t.overlayData,";ap:").concat(t.actualEligiblePercent)})}}},{key:"_onOverlayAfterImpression",value:function(e){if(!this.firedOverlayAfterImpressionPixel){var t=this.model.get("pixels.overlayDetectedAfterImpression");if(t.isFire&&Vr.rollNumbers(t.factor||0)){this.firedOverlayAfterImpressionPixel=!0;var i=this.model.get("overlay")||{};this._firePixel(this.model.getPixel("pixels.overlayDetectedAfterImpression"),"Overlay detected after impression",{debug:"".concat(i.overlayData,";ap:").concat(i.actualEligiblePercent)})}}}},{key:"_onEligibilityChange",value:function(e,t,i){this.stopSendingEligibility||(t&&!this.hadEligibility?this._onEligibility():!t&&this.hadEligibility&&i&&!i.isValidation&&(this._firePixel(this.model.getPixel("pixels.lostEligibility"),"Lost first eligible"),this.model.set("lostEligibilityTime",(new Date).getTime()),this.stopSendingEligibility=!0))}},{key:"_onEligibility",value:function(){this.model.set("hadEligibility",!0),this.hadEligibility=!0,this._firePixel(this.model.getPixel("pixels.eligible"),"First eligible")}},{key:"_onRepeatClicked",value:function(){this._firePixel(this.model.getPixel("pixels.repeatClick"),"repeat click Pixel")}},{key:"_onRenderWasCalled",value:function(){this._firePixel(this.model.getPixel("pixels.renderOnDemand"),"Render Was Called")}},{key:"_onPublisherVideoDetected",value:function(){this._firePixel(this.model.getPixel("pixels.publisherVideoDetected"),"Publisher Video Tag was Detected")}},{key:"_onPublisherIframeVideoDetected",value:function(){this._firePixel(this.model.getPixel("pixels.publisherIframeVideoDetected"),"Publisher Video Tag was Detected in iframe")}},{key:"_fireCMPpixel",value:function(){this.model.get("hasCMPonPage")?this._firePixel(this.model.getPixel("pixels.hasCMPonPage"),"GDPR - Has CMP on page"):this._firePixel(this.model.getPixel("pixels.noCMPonPage"),"GDPR - No CMP on page")}},{key:"_onForcedDetach",value:function(){this._firePixel(this.model.getPixel("pixels.forcedDetach"),"forced detach to slider")}},{key:"_onRecoReelNotFound",value:function(){this.recoReelNotFoundFired||(this.recoReelNotFoundFired=!0,this._firePixel(this.model.getPixel("pixels.recoReelNotFound"),"RecoReel Not Found Pixel"))}},{key:"_firePixel",value:function(e,t,i){if(e){e=this._setAdditionalData(e,i),this.log.pixel("firing pixel: "+t+" url: "+e);var n=document.createElement("IMG");return n.src=e,n}}},{key:"_setAdditionalData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.model.get("modifiedPlacement")&&(t.mp=this.model.get("modifiedPlacement")),this.model.get("subUnitType")&&(t.su=this.model.get("subUnitType")),this._addParametersToUrl(e,t,-1===e.indexOf("?"))}},{key:"_addParametersToUrl",value:function(e,t,i){var n=e;return n+=i?"?":"&",S.default.each(t,(function(e,t){void 0!==t&&""!==t&&(n+=e+"="+t+"&")})),n}},{key:"_fireAttachPixel",value:function(){this._firePixel(this.model.getPixel("pixels.attach"),"first attach")}},{key:"_fireDetachPixel",value:function(){this._firePixel(this.model.getPixel("pixels.detach"),"first detach")}},{key:"_fireTimerPixel",value:function(e,t){this.model.get("pixels.".concat(t,"Timer.isFire"))&&this._firePixel(this.model.getPixel("pixels.".concat(t,"Timer")),"".concat(t," timer"))}},{key:"_fireGetAdPixel",value:function(){var e={};this._setDebugReportData(e),"any"===this.model.get("lastGetAdKey")&&this.model.get("pixels.getAdAny.isFire")?this._firePixel(this.model.getPixel("pixels.getAdAny"),"getAd",e):0===this.model.get("lastGetAdKey")&&this.model.get("pixels.getAdNoRV.isFire")?this._firePixel(this.model.getPixel("pixels.getAdNoRV"),"getAd",e):1===this.model.get("lastGetAdKey")&&this.model.get("pixels.getAd.isFire")&&this._firePixel(this.model.getPixel("pixels.getAd"),"getAd",e)}},{key:"_onTRCResetCloseUnit",value:function(){this._firePixel(this.model.getPixel("pixels.TRCResetCloseUnit"),"TRCResetCloseUnit")}},{key:"_onVideoResetCloseUnit",value:function(){this._firePixel(this.model.getPixel("pixels.onVideoResetCloseUnit"),"VideoResetCloseUnit")}},{key:"_onParentSelectorLost",value:function(){this._firePixel(this.model.getPixel("pixels.onParentSelectorLost"),"onParentSelectorLost")}},{key:"_onRvHandlerTimerExpired",value:function(){this._firePixel(this.model.getPixel("pixels.rvHandlerTimerExpired"),"rvHandlerTimerExpired")}},{key:"_onPlayerHasRvInQ",value:function(){this.playerHadRvInQ||(this._firePixel(this.model.getPixel("pixels.onPlayerHasRVinQ"),"onPlayerHasRVinQ"),this.playerHadRvInQ=!0)}},{key:"_setDebugReportData",value:function(e){if(this.model.get("isSendDebugDataReporting")){var i=t().PREDICT_NAMES[this.model.get("nextPredictName")],n="pn:".concat(i,"!sqg:").concat(this.model.get("adId"),"!");for(var r in t().DEBUG_DATA_PIXELS){var o=this[r]();n+=void 0===o?"".concat(t().DEBUG_DATA[r],":!"):"".concat(t().DEBUG_DATA[r],":").concat(o,"!")}e.debug=n,this.model.get("isSendDebugDataReportingLog")&&this.log.info("DBG-Pixel getAd-".concat(this.model.get("lastGetAdKey")," - ").concat(n))}}},{key:"_onSkipDistancePredict",value:function(){this._firePixel(this.model.getPixel("pixels.skippedDistancePredict"),"onSkipDistancePredict")}},{key:"_onFullEligibilityPredicted",value:function(){this.model.get("pixels.fullEligibilityPredict.isFire")&&this._firePixel(this.model.getPixel("pixels.fullEligibilityPredict"),"fullEligibilityPredict")}},{key:"_onCompetitionDetected",value:function(){this._firePixel(this.model.getPixel("pixels.compDetectedOnPage"),"compDetectedOnPage")}},{key:"_onMisplacedVideoDetected",value:function(){var e={debug:"!url:"+(window&&window.location&&window.location.href?window.location.href:"")};this._firePixel(this.model.getPixel("pixels.misplacedVideoDetected"),"misplacedVideoDetected",e)}},{key:"ft",value:function(){return this.model.get("frameType")}},{key:"fsc",value:function(){var e=this.model.get("startCard");if(void 0!==e&&""!==e)return parseInt(e)}},{key:"fpc",value:function(){var e=this.model.get("permanentCard");if(void 0!==e&&""!==e)return parseInt(e)}},{key:"_onFeedxToggle",value:function(){this._firePixel(this.model.getPixel("pixels.feedxToggle"),"feedxToggled")}},{key:"_onExploreMore",value:function(){this._firePixel(this.model.getPixel("pixels.exploreMore"),"exploreMore")}},{key:"_onProgressLoaderInit",value:function(){this._firePixel(this.model.getPixel("pixels.progressLoaderInit"),"progressLoaderInit")}},{key:"_onProgressLoaderClose",value:function(){this._firePixel(this.model.getPixel("pixels.progressLoaderClose"),"progressLoaderClose")}},{key:"_onProgressLoaderMove",value:function(){this._firePixel(this.model.getPixel("pixels.progressLoaderMove"),"progressLoaderMove")}},{key:"_onOrganicCardInjected",value:function(){this._firePixel(this.model.getPixel("pixels.organicCardInjected"),"organicCardInjected")}},{key:"_onOrganicCardInjectionFail",value:function(){this._firePixel(this.model.getPixel("pixels.organicCardInjectionFail"),"organicCardInjectionFail")}},{key:"_onTerminateOnResize",value:function(){this._firePixel(this.model.getPixel("pixels.terminateOnResize"),"closeDueResize")}},{key:"_onUnitDimensionsFound",value:function(){this._firePixel(this.model.getPixel("pixels.onUnitDimensionsFound"),"UnitDimensionsFound")}},{key:"_onAutoplayVolumeStatus",value:function(){this.isSentAutoplayVolume||(this._firePixel(this.model.getPixel("pixels.autoplaySoundOn"),"autoplaySoundOn"),this.isSentAutoplayVolume=!0)}},{key:"_onGeneralError",value:function(){var e={debug:"ge:"+this.model.get("generalErrorData")};this._firePixel(this.model.getPixel("pixels.generalError"),"generalErrorData",e)}},{key:"_onPassbackFunctionCalled",value:function(){(Vr.isFunction(this.model.get("onPassback"))||this.model.get("isApiPassbackExist"))&&this._firePixel(this.model.getPixel("pixels.passbackFunctionCalled"),"passback function called")}},{key:"_onNonAdjacInFirstWFs",value:function(){this._firePixel(this.model.getPixel("pixels.noAdjacInFirstWFs"),"noAdjacInFirstWFs")}},{key:"_onHasImpBeforeReadMoreViewable",value:function(){this._firePixel(this.model.getPixel("pixels.hasImpBeforeReadMoreViewable"),"hasImpBeforeReadMoreViewable")}},{key:"_onReadMoreClick",value:function(){this._firePixel(this.model.getPixel("pixels.readMoreClick"),"readMoreClick")}},{key:"_onReadMoreIsInitiallyInViewport",value:function(){var e={debug:"!url:"+(window&&window.location&&window.location.href?window.location.href:"")};this._firePixel(this.model.getPixel("pixels.readMoreIsInitiallyInViewport"),"readMoreIsInitiallyInViewport",e)}},{key:"_onDelayRvPredict",value:function(){var e={debug:"!dlpn:".concat(this.model.get("delayRvPredict"))};this._firePixel(this.model.getPixel("pixels.delayRvPredict"),"delayRvPredict",e)}},{key:"_onExecuteDelayedRvPredict",value:function(){var e={debug:"!dlpn:".concat(this.model.get("executeDelayedRvPredict.name"),"!dlpt:").concat(this.model.get("executeDelayedRvPredict.time"))};this._firePixel(this.model.getPixel("pixels.executeDelayedRvPredict"),"executeDelayedRvPredict",e)}},{key:"_onMinutelyStartedPlaying",value:function(){this._firePixel(this.model.getPixel("pixels.minutelyStartedPlaying"),"minutely player started playing content")}},{key:"_onMinutelyPauseForAdPlay",value:function(){this._firePixel(this.model.getPixel("pixels.minutelyPauseForAdPlay"),"minutely player paused for ad to play")}},{key:"_onMinutelyResumeOnAdClose",value:function(){this._firePixel(this.model.getPixel("pixels.minutelyResumeOnAdClose"),"minutely player resumed when ad paused / completed")}},{key:"_onRecoReelTextTermination",value:function(){this._firePixel(this.model.getPixel("pixels.recoReelTextTermination"),"recoReelTextTermination")}},{key:"_onTRCDispatchFailed",value:function(){this._firePixel(this.model.getPixel("pixels.TRCDispatchFailed"),"TRCDispatchFailed")}},{key:"_onTblRecoReelSliderOpen",value:function(){this._firePixel(this.model.getPixel("pixels.tblRecoReelSliderOpen"),"Taboola Reco Reel to Slider is now Open")}},{key:"_onTblRecoReelSliderClose",value:function(){this._firePixel(this.model.getPixel("pixels.tblRecoReelSliderClose"),"Taboola Reco Reel to Slider is now Closed")}},{key:"_reportOrganicVideoId",value:function(){var e={debug:"!ovid:".concat(this.model.get("organicVideoPlaying"))};this._firePixel(this.model.getPixel("pixels.organicVideoPlaying"),"Playing Organic video",e)}},{key:"_reportOnMaxNonRvVimpsInQueue",value:function(){this._firePixel(this.model.getPixel("pixels.onMaxNonRvVimpsInQueue"),"onMaxNonRvVimpsInQueue")}}],n&&Dr(i.prototype,n),s&&Dr(i,s),Object.defineProperty(i,"prototype",{writable:!1}),l}(n.O),jr=Lr,Br=i(701),Mr=i.n(Br);function Fr(e){return Fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fr(e)}function Ur(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if("object"!==Fr(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==Fr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===Fr(o)?o:String(o)),n)}var r,o}var Wr=i(1999),Hr=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.adsList=[],this.listeners=[],this.registerIndex=0,this.model=t}var i,n,r;return i=e,(n=[{key:"updateAdsList",value:function(e){e&&!Wr.isEmpty(e)?(this.adsList=e.items,this._notifyListeners(e)):(this.model.set("generalErrorData",1),this.model.increaseCounter("generalError"))}},{key:"_notifyListeners",value:function(e){var t=this;this.isPlayerHasRvInQ(e);var i=[];this.listeners.forEach((function(e){var n=t._findAdsByStatusAndType(e.type,e.typeValue,e.status,e.cb);e.isListenOnce&&n&&i.push(e.index)})),i.forEach((function(e){return t.unregisterToPlayerQueueStatusChange(e)}))}},{key:"_findAdsByStatusAndType",value:function(e,i,n,r){var o=this,s=!1,a=[];return this.adsList.forEach((function(r){(!e||o[e]&&o[e](r,i))&&(!n||t().AD_STATUS[n]&&r.vw&&r.vw.st===t().AD_STATUS[n])&&(a.push(r),s=!0)})),s&&Wr.isFunction(r)&&r(a),s}},{key:"singleAd",value:function(e,t){return!!(t&&e.sa||!t&&!e.sa)}},{key:"adjacency",value:function(e,t){return!!(t&&e.adjc||!t&&!e.adjc)}},{key:"hip",value:function(e,t){return!!(t&&e.hip||!t&&!e.hip)}},{key:"registerIsPlayerHasRvInQ",value:function(e){this.isPlayerHasRvInQCb=e}},{key:"isPlayerHasRvInQ",value:function(e){this.isPlayerHasRvInQCb&&e.requiredViewabilityCount&&this.isPlayerHasRvInQCb()}},{key:"registerToPlayerQueueStatusChange",value:function(e){var i=e.type,n=e.typeValue,r=e.status,o=void 0===r?t().AD_STATUS.new:r,s=e.cb,a=e.isListenOnce,l={type:i,typeValue:n,status:o,cb:s,isListenOnce:void 0!==a&&a,index:this.registerIndex};return this.registerIndex=this.registerIndex+1,this.listeners.push(l),l.index}},{key:"unregisterToPlayerQueueStatusChange",value:function(e){this.listeners=this.listeners.filter((function(t){return t.index!==e}))}}])&&Ur(i.prototype,n),r&&Ur(i,r),Object.defineProperty(i,"prototype",{writable:!1}),e}(),zr=function(){var e;return function(t){return e||(e=new Hr(t)),e}}(),$r=zr;function Gr(e){return Gr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gr(e)}function qr(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if("object"!==Gr(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==Gr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===Gr(o)?o:String(o)),n)}var r,o}function Yr(e,t){return Yr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Yr(e,t)}function Kr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=Qr(e);if(t){var r=Qr(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return function(e,t){if(t&&("object"===Gr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,i)}}function Qr(e){return Qr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Qr(e)}var Zr=i(1999),Xr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yr(e,t)}(l,e);var i,n,s,a=Kr(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=a.call(this,e)).model=e,t.log=new r.Z({unitType:t.model.get("unitType"),className:"playerService",version:t.model.get("version"),isDebug:t.model.get("isDebug")}),t.isRestarted=!1,t}return i=l,n=[{key:"_init",value:function(){this._bindEvents(),this.model.get("isPlayerLoaded")&&this._onPlayerLoaded()}},{key:"_bindEvents",value:function(){this.createStateHandlers([{event:"isPlayerLoaded",funcName:"_onPlayerLoaded"},{event:"getAdState:stopped",funcName:"_pausePlayer"},{event:"isInTab",funcName:"_onTabEvent"},{event:"startWF",funcName:"startWf"},{event:"canStartPlayer:true",funcName:"_onPlayerLoaded"},{event:"isReadMoreInViewport",funcName:"_onReadMoreInViewport"}])}},{key:"_onPlayerLoaded",value:function(){if(this.model.get("isPlayerLoaded")&&this.model.get("canStartPlayer")&&!this.player&&this._validatePlayerSize()){if(this.isMuted="on"!==this.model.get("volume"),this.volume="off"!==this.model.get("volume")?40:0,this.contentIndex=0,this.playlist=this.model.get("player.playlist"),this.playlist&&Zr.isEmpty(this.playlist))return void this.model.listenToOnce(this.model,"change:player.playlist",this._onPlayerLoaded.bind(this));Zr.trcPerformanceMeasurement(this.model.get("trcPerformanceMeasurementEnabled"),"videoPlayerInit",t().TRC_PERFORMANCE_ACTIONS.START);var e=this.playlist[this.contentIndex];this.model.set("isInIdleMode",!this.model.get("isInTab")&&this.model.get("isCallIDLE"));var i=this._getAdTypesToDrop();this.data={abTest:this.model.get("abTest"),ad_controls:this.model.get("player.hasAdControls"),aspect_ratio:this.model.get("aspectRatio"),auc_dast:this.model.get("cmDast"),autostart:this.model.get("autoPlay"),base_url:this.model.get("urls.base"),bf_factor:this.model.get("player.bfFactor"),bug_feature:this.model.get("player.hasBFeature"),cfr:this.model.get("cfr"),cipid:this.model.get("cipid"),cirf:decodeURIComponent(this.model.get("referrer")),creativeId:this.model.get("creativeId"),controls:this.model.get("player.hasControls"),country:this.model.get("country"),debug:this.model.get("isDebug")?["*"]:[],default_ad_parameters:this.model.get("defaultAdParameters"),default_ad_timeout:this.model.get("adMaxPlaySeconds"),default_b2b:this.model.get("player.b2b"),fire99:this.model.get("player.isFire99"),ga_factor:this.model.get("gaFactor"),ga_frame_src:this.model.get("gaFrameSrc"),image:this.model.get("loaderImage"),interrupt_loading:this.model.get("interruptLoading"),ip:this.model.get("ip"),isViewable:this.model.get("isPlayerViewable"),keywords:this.model.get("adTitle"),min_vpaid_run_time:this.model.get("player.minVpaidRunTime"),no_debug_report:this.model.get("noDebugReport"),oid:this.model.get("originId"),opps_base_path:this.model.get("player.urls.oppsBasePath"),non_bllb_opps_base_path:this.model.get("player.urls.nonBllbOppsBasePath"),page_url:decodeURIComponent(this.model.get("referrer")),referrer:decodeURIComponent(this.model.get("referrer")),repeat:this.model.get("repeat"),ron_percent:this.model.get("ronPercent"),schedule_auto:this.model.get("timeBetweenAds"),tags:this.model.get("tags"),time_between_waterfall:this.model.get("secondsBW"),use_flash_bypass:this.model.get("player.isBypassFlash"),use_flash_player:this.model.get("player.isFlashPlayer"),version:this.model.get("adTitle"),vertical:this.model.get("vertical"),wf_base_path:this.model.get("player.urls.wfBasePath"),domain_wf_base_path:this.model.get("player.urls.domainWfBasePath"),wf_url:this.model.get("player.urls.wfRequest"),opps_url:this.model.get("player.urls.oppsRequest"),height:""+parseInt(this.model.get("height")),width:""+parseInt(this.model.get("width")),dplayerSettings:this.model.get("player.settings"),loadrsrc:!0,preset:this.model.get("preset"),isDFP:this.model.get("iframeData.inDFP"),can_opt_out:!1,description:e.title,domain:window.location.hostname,mute:this.isMuted,title:e.title,volume:this.volume,isIdleMode:this.model.get("isInIdleMode"),dlywf:this.model.get("dlywf"),target_id:this.getTarget(),schedule:this.model.getScheduleArr(),dtagid:this.model.get("dtagid"),dpubid:this.model.get("dpubid"),isMobile:this.model.get("isMobile"),queue_size:this.model.get("player.settings.queueSize"),max_ready_vpaid:this.model.get("player.settings.maxReadyVpaid"),adto:this.model.get("player.settings.adto"),vakll:this.model.get("player.settings.vakll"),mintimwf:this.model.get("player.settings.mintimwf"),agressiveLevel:this.model.get("preset.level"),suppressContentZindex:this._getSuppressContentZindex(),vimpFireEvent:this.model.get("vimpFireEvent"),subUnitType:this.model.get("subUnitType"),vForce:this.model.get("vForce.isActive"),get_ad_timeout_seconds:this.model.get("vForce.getAdTimeoutSeconds"),wf_manual:this.model.get("wfManual"),wf_dynmc_ps:this.model.get("wfDynamicPause"),run_wf_when_empty:this.model.get("runWfWhenEmpty"),rndmt:this.model.get("rndmt"),unit_name:this.model.get("unitName"),unit_loader_version:this.model.get("version"),unit_main_version:this.model.get("unitVersion"),mprdct:this.model.get("player.settings.mprdct"),gdprApplies:this.model.get("gdprApplies"),cdb:this.model.get("consentDaisyBit"),oppsQS:this.model.get("oppsQS"),adTypesToDrop:i,red_id:this.model.get("redId"),files:[e],pixelsUrl:this.model.get("pixels.url"),numOfWfUntilDcSwitch:this.model.get("numOfWfUntilDcSwitch"),isReadMoreOnPage:Zr.isMidArticleOnReadMorePage(this.model.get("isHip")),isSliderCutOff:this.model.get("isSliderCutOff"),enableStickyOnNonAllowSlider:this.model.get("enableStickyOnNonAllowSlider"),onPlayerClose:this._onPlayerClose.bind(this),onPlayerError:this._onPlayerError.bind(this),onPlayerReady:this._onPlayerReady.bind(this),onPlayerStop:this._onPlayerStop.bind(this),wurfl:{os:{name:this.model.get("wurfl.os.name"),version:this.model.get("wurfl.os.version")},browser:{name:this.model.get("wurfl.browser.name"),version:this.model.get("wurfl.browser.version")}},shouldSendDataToElastic:this.model.get("shouldSendDataToElastic"),elasticSessionId:this.model.get("elasticSessionId")},Zr.extend(this.data,this.extraData||{}),Zr.trcPerformanceMeasurement(this.model.get("trcPerformanceMeasurementEnabled"),"videoOvaMediaPlayerInit",t().TRC_PERFORMANCE_ACTIONS.START),this.player=new OvaMediaPlayer(this.data),Zr.trcPerformanceMeasurement(this.model.get("trcPerformanceMeasurementEnabled"),"videoOvaMediaPlayerInit",t().TRC_PERFORMANCE_ACTIONS.STOP),An().player=this.player,this.player.on("AdClickThru",this._onAdClickThru.bind(this)),this.player.on("emptyFirstWaterfall",this._triggerPassback.bind(this)),Zr.trcPerformanceMeasurement(this.model.get("trcPerformanceMeasurementEnabled"),"videoPlayerInit",t().TRC_PERFORMANCE_ACTIONS.STOP),this._registerListeners()}}},{key:"_registerListeners",value:function(){this.player.on&&this.player.on("AdImpression",this._onAdImpression.bind(this))}},{key:"_onAdImpression",value:function(){this.hadImpression||(T().trigger("filledImpression"),this.hadImpression=!0)}},{key:"_validatePlayerSize",value:function(){var e=this.model.get("width"),t=this.model.get("height"),i=!0;return Zr.isWidthValid(e)?Zr.isHeightValid(t)||(this.model.set("height",Zr.getVideoHeight(e)),this.model.set("playerHeightLost",!0)):(i=!1,this.model.set("playerWidthLost",!0)),i}},{key:"_getSuppressContentZindex",value:function(){return this.model.get("suppressContentZindex")&&this.model.get("vForce.isActiv")||!1}},{key:"_onAdClickThru",value:function(){this.model.set("clickThruState",o.clickThruState.clicked)}},{key:"_onPlayerReady",value:function(){this.playerQueueSeeker=new $r(this.model),this.playerQueueSeeker.registerIsPlayerHasRvInQ(this.isPlayerHasRvInQ.bind(this)),this.playerQueueSeeker.registerToPlayerQueueStatusChange({instance:this,type:void 0,typeValue:void 0,status:"adLoaded",cb:this.isFirstAdLoaded.bind(this),isListenOnce:!0}),this._onTabEvent(this.model,this.model.get("isInTab")),this.model.set("playerVersion",this.player.get("player_version")),this.model.set("playerRepeatCount",this.player.repeatCount),this.model.set("playerState",o.readyState),this.player.on("AdVolumeChange",this._onVolumeChange.bind(this)),this.player.on("AdPaused",this._onAdPaused.bind(this)),this.player.on("AdPlaying",this._onAdPlaying.bind(this)),this.player.on("UserInteractionPauseState",this._onPausedChanged.bind(this)),this.player.on("queueStatus",this.playerQueueSeeker.updateAdsList.bind(this.playerQueueSeeker)),this.player.on("queueStatus",this._onQueueStatusChange.bind(this)),this.player.setDebugData&&(this.debugData=new Pn({model:this.model,onDebugDataChange:this.player.setDebugData.bind(this.player)}),this.player.setDebugDataFunc&&this.player.setDebugDataFunc(this.debugData.getDebugData.bind(this.debugData))),this.isRestarted?(this.model.set("playerState",o.playerState.restarted),this.model.get("player.settings.dlywf")&&this.startWf()):this.model.set("playerState",o.readyState),this.model.get("isContainerRatioNotValidForTakeOver")&&this.dropAds(Mr().adjacency.name)}},{key:"_onQueueStatusChange",value:function(e){this.model.set("playerQueue",e.items)}},{key:"_onPausedChanged",value:function(e){this.model.set("generalPlayingUnitState",!e)}},{key:"_onAdPaused",value:function(){this.model.set("generalPlayingUnitState",!1)}},{key:"_onAdPlaying",value:function(){this.model.set("generalPlayingUnitState",!0)}},{key:"_onPlayerClose",value:function(){this._setGeneralPlayingUnitState(!1),this.model.set("playerState",o.playerState.closed)}},{key:"_setGeneralPlayingUnitState",value:function(e){this.model.set("generalPlayingUnitState",null),this.model.set("generalPlayingUnitState",e)}},{key:"_onPlayerStop",value:function(){this.model.set("playerState",o.playerState.stopped)}},{key:"_onPlayerError",value:function(){this.model.set("playerState",o.playerState.error)}},{key:"isPlayerHasRvInQ",value:function(){this.model.set("playerHasRvInQ",!0)}},{key:"isFirstAdLoaded",value:function(){this.model.set("isFirstAdLoaded",!0)}},{key:"close",value:function(){setTimeout(function(){this.player&&(this.player.closeCleanPlayer(),this.player=null,this.model.set("closeState",o.closeState.playerClosed),this.model.set("playerState",o.playerState.closed),this.log.info("player was closed"))}.bind(this),0)}},{key:"_pausePlayer",value:function(){this.close()}},{key:"_onLoadingClick",value:function(){this.isRestarted=!0,setTimeout(this._onPlayerLoaded.bind(this),0)}},{key:"_hasPlayer",value:function(){return this.player&&!this.player.playerIsClosed}},{key:"_onVolumeChange",value:function(e){this.isMuted=0===e.adVolume}},{key:"getTarget",value:function(){if(this.model.get("targetId"))return this.model.get("targetId").toString();var e=Zr.now().toString(),t=(0,S.default)("<div>");return t.attr("id",e),t.css({width:this.model.get("width")+"px",height:0,position:"absolute",top:0,left:0,display:"none"}),"FEED_MANAGER"!==this.model.get("unitType")&&t.css({}),t.appendTo("body"),this.playerDiv=t,e}},{key:"_onTabEvent",value:function(e,t){this.model.get("isCallIDLE")&&this.player&&this.player.startIdleMode&&this.player.stopIdleMode&&(t?(this.player.stopIdleMode(),this.model.set("isInIdleMode",!1),this.log.info("Stop idle mode")):(this.player.startIdleMode(),this.model.set("isInIdleMode",!0),this.log.info("Start idle mode")))}},{key:"startWf",value:function(){this._hasPlayer()&&this.player.startWf&&!this.model.get("isInIdleMode")?(this.log.info("Starting Waterfall"),this.player.startWf()):this.model.get("isInIdleMode")&&this.createStateHandlers([{event:"isInIdleMode:false",funcName:"startWf",isListenOnce:!0}])}},{key:"_getAdTypesToDrop",value:function(){var e=this.model.get("adsToDrop")||[];Array.isArray(e)||(e=[e]);var t=Mr().adjacency.name+"Ad";return this._canGetAdjacCard()||e.push(t),Zr.isPlacementWithScAdjacency(this.model)&&(e.includes(t)||e.push(t),e.push(Mr().hip.name+"Ad")),e}},{key:"_triggerPassback",value:function(){var e=this.model.get("isApiPassbackExist");!this.model.get("isFirstAdLoaded")&&e&&(this.log.info("Waterfall returned Empty"),T().trigger("global:passback",{isApiPassbackExist:e}),this.model.set("closeState",o.closeState.terminate))}}],n&&qr(i.prototype,n),s&&qr(i,s),Object.defineProperty(i,"prototype",{writable:!1}),l}(n.O),Jr=Xr;function eo(e){return eo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eo(e)}function to(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if("object"!==eo(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==eo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===eo(o)?o:String(o)),n)}var r,o}function io(){return io="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=oo(e)););return e}(e,t);if(n){var r=Object.getOwnPropertyDescriptor(n,t);return r.get?r.get.call(arguments.length<3?e:i):r.value}},io.apply(this,arguments)}function no(e,t){return no=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},no(e,t)}function ro(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=oo(e);if(t){var r=oo(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return function(e,t){if(t&&("object"===eo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,i)}}function oo(e){return oo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},oo(e)}var so=i(1999),ao=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&no(e,t)}(s,e);var t,i,n,r=ro(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=r.call(this,e)).targetElem=(0,S.default)("#"+t.model.get("targetId").toString()),t._waterfallRetries=Number(t.model.get("waterfallRetries")),isNaN(t._waterfallRetries)&&(t._waterfallRetries=0),t._init(),t}return t=s,(i=[{key:"_bindEvents",value:function(){io(oo(s.prototype),"_bindEvents",this).call(this),this.createStateHandlers([{event:"videoPlaceholderSize",funcName:"resize"},{event:"videoViewSize",funcName:"resizeDetach"},{event:"videoViewState:detached",funcName:"_onDetach"},{event:"loadingViewState:clicked",funcName:"_onLoadingClick"},{event:"adState:playing",funcName:"_dropSingleAds",isListenOnce:!0},{event:["dropAds:adjacency","playerState:ready"],funcName:"_dropAdjcAds",isListenOnce:!0},{event:"dropAdjacDueHIP",funcName:"_dropAdjcAds",isListenOnce:!0}])}},{key:"resize",value:function(e,t,i){if(this.model.get("videoViewState")!==o.videoViewState.detached||i){var n=t||e;if(this.lastSize=this.lastSize||{},this.lastSize.width===n.width&&this.lastSize.height===n.height)return;this.player&&this.player.resize&&n&&n.width&&n.height&&(this.lastSize=so.extend({},n),this.player.resize(n.width,n.height),this.log.info("player was resize",n))}}},{key:"_onDetach",value:function(){var e={width:this.model.get("width"),height:this.model.get("height")};this.resize(e,null,!0)}},{key:"resizeDetach",value:function(e,t){this.resize(e,t,!0)}},{key:"_dropAdjcAds",value:function(){this.dropAds(Mr().adjacency.name)}},{key:"_dropSingleAds",value:function(){this.model.get("predictors.postRepeat.isActive")||this.dropAds(Mr().singleAd.name)}},{key:"dropAds",value:function(e){this.player&&this.player.dropAds&&(this.player.dropAds(Mr()[e].playerType),this.log.info("dropping ".concat(e," ads from player Q")),this.model.appendArray("droppedAdTypes",e))}},{key:"_canGetAdjacCard",value:function(){return!this.model.get("isContainerRatioNotValidForTakeOver")}},{key:"_onAdError",value:function(){this.log.error("onAdError"),this._errorCount++,this._waterfallRetries&&!this._hasImpression&&this._errorCount>=this._waterfallRetries&&(this.log.info("number of errors reached the allowed waterfall retries - stopping the unit",this._waterfallRetries),this.model.set("closeState",o.closeState.terminate))}}])&&to(t.prototype,i),n&&to(t,n),Object.defineProperty(t,"prototype",{writable:!1}),s}(Jr),lo=ao;i(1999);i(1999);i(1999);function co(e){return co="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},co(e)}function uo(e){return function(e){if(Array.isArray(e))return ho(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ho(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ho(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ho(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function fo(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if("object"!==co(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==co(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===co(o)?o:String(o)),n)}var r,o}function po(e,t){return po=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},po(e,t)}function mo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=vo(e);if(t){var r=vo(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return function(e,t){if(t&&("object"===co(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return yo(e)}(this,i)}}function yo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vo(e){return vo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},vo(e)}var go=i(1999),bo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&po(e,t)}(o,e);var t,i,n,r=mo(o);function o(e,t){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(i=r.call(this,e)).model=e,i.globalModel=t,i.model.set("isEligibleToPlay",!1),i.model.get("isTestParentSelector")&&i._bindScroll(),i.model.get("isInAppBridgeOn")&&window.taboolaBridge&&i._observeInAppIntersectionChange(),i.oldRect={},i.viewabilityPercent=i.model.get("viewabilityPercent"),i.printCurrentViewPercent=i.model.get("printCurrentViewPercent"),i.isListenToScrollSpeedChange=i.model.get("eligibility.isListenToScrollSpeedChange"),i.isListenToScrollSpeedChange&&(i.scrollManager=new I,i.maxPPS=i.model.get("eligibility.maxPPS"),i.scrollManager.registerForPPSChange(i._testEligibility.bind(yo(i)))),i}return t=o,(i=[{key:"_bindScroll",value:function(){this._testTopParentSelector(),T().on("window:scroll:change",this._testTopParentSelector.bind(this))}},{key:"_isLowerThenMaxPPS",value:function(){return!this.maxPPS||Math.abs(this.scrollManager.getPps())<this.maxPPS}},{key:"_initObserver",value:function(){var e={rootMargin:"0px",threshold:[0,this.model.get("viewPercent")/100,this.model.get("viewabilityPercent")/100,this.model.get("100viewPercent")/100]};if(this.model.get("stickyCard.isActive")){var t,i=this.model.get("stickyCard.observerThreshold");i&&(t=e.threshold).push.apply(t,uo(i))}this.observer=new IntersectionObserver(this._observerCallback.bind(this),e),this.log.info("IntersectionObserver was created")}},{key:"bindEvent",value:function(){}},{key:"_getDimensions",value:function(e){var t=(0,S.default)(e);return{width:t.width()||this.model.get("width"),height:t.height()||this.model.get("height")}}},{key:"_calculateEligibility",value:function(){this.model.get("isUseObserver")||(this.inViewDiv=this._getInViewDiv()),this._testEligibility()}},{key:"_onTabEvent",value:function(e){}},{key:"_printCurrentViewPercent",value:function(e,t){this.printCurrentViewPercent&&this.log.info("".concat(e,": "),t||0)}},{key:"_getInViewDiv",value:function(){for(var e=0;e<this.placeHolders.length;e++){var t=this.placeHolders[e],i=this._getDimensions(t),n=go.getViewPercent(t,i.width,go.getVideoHeight(i.width),this.model.get("scrollSelector"));this._printCurrentViewPercent("currViewPercent",n);var r=this.model.get("viewPercent")||100;if(this.model.set("isViewable",this.viewabilityPercent<=n),this.model.set("isViewable100",n>=this.model.get("100viewPercent")),this.model.get("stickyCard.isActive")){var o=n<this.model.get("stickyCard.attachPercent")&&this._canStickToTop(t);this.model.set("isEligibleToStick",o)}if(r<=n)return this.placeHolders[e]}}},{key:"_observerCallback",value:function(e,t){this.inViewDiv=void 0;for(var i=0;i<e.length;i++){var n=100*e[i].intersectionRatio;if(this.model.set("isViewable100",n>=this.model.get("100viewPercent")),this.model.set("isViewable",this.viewabilityPercent<=n),this.model.get("stickyCard.isActive")){var r=n<this.model.get("stickyCard.attachPercent")&&e[i].boundingClientRect.top<=0;this.model.set("isEligibleToStick",r)}if(n>=this.model.get("viewPercent")){this.inViewDiv=e[i];break}}this._testEligibility()}},{key:"_testEligibility",value:function(){}},{key:"_testTopParentSelector",value:function(){var e=this._getTopParentSelector();this.topParentSelector||(this.topParentSelector=e),this.topParentSelector&&!e&&this.model.get("isCheckTopParentSelectorLost")&&(this.model.set("topParentSelectorLost",!0),this._stopObserver())}},{key:"_getTopParentSelector",value:function(){var e=this.model.get("parentSelector");return e=go.isArray(e)?e[0]:e,e=(0,S.default)(e)[0],go.getTopOfEl(e)}},{key:"_observeInAppIntersectionChange",value:function(){window.taboolaBridge.on("intersectionChanged",this._onIntersectionChanged.bind(this)),window.taboolaBridge.active=!0}},{key:"_onIntersectionChanged",value:function(e){var t=e.rects.boundingClientRect,i={width:function(){return t.width},height:function(){return Math.abs(t.top-window.taboolaBridge.data.rootBounds.height)},top:function(){var e=0;return t.top<0&&(e-=t.top),e}};this.model.set("scrollSelector",i),this._calculateEligibility()}},{key:"_canStickToTop",value:function(e){return!!e&&e.getBoundingClientRect().top<=0}},{key:"_getFromModel",value:function(e){return(this.globalModel||this.model).get(e)}},{key:"_stopObserver",value:function(){this.observer&&this.observer.disconnect&&this.observer.disconnect()}},{key:"_setToModel",value:function(e,t){this.model.set(e,t),this.globalModel&&this.globalModel.set(e,t)}}])&&fo(t.prototype,i),n&&fo(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(n.O),_o=bo;function wo(e){return e.get("isUseHasFocus")?document.hasFocus():!document.hidden}i(1999);function So(e){return So="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},So(e)}function Po(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if("object"!==So(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==So(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===So(o)?o:String(o)),n)}var r,o}function To(e,t){return To=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},To(e,t)}function Ao(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=Eo(e);if(t){var r=Eo(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return function(e,t){if(t&&("object"===So(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,i)}}function Eo(e){return Eo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Eo(e)}i(1999);var Co=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&To(e,t)}(l,e);var i,n,s,a=Ao(l);function l(e){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(i=a.call(this,e.model)).containerView=e.container,i.log=new r.Z({unitType:"Service",className:i.constructor.name,version:i.model.get("version"),isDebug:i.model.get("isDebug")}),i.model.set("isInTab",wo(i.model)),i.placeHolders=[],i.isPlainPage=i.model.get("frameType")===t().FRAME_TYPE.plainPage,i._init(),i}return i=l,(n=[{key:"_init",value:function(){this.model.set("isEligibleToPlay",!0)}},{key:"bindEvent",value:function(){this.model.listenTo(T(),"window:tab:change",this._onTabEvent.bind(this)),this.createStateHandlers([{event:"getAdState:gotAd",funcName:"_calculateEligibility"},{event:"overlayMutation",funcName:"_calculateEligibility"},{event:"videoPlaceholderSize",funcName:"_onSliderResize"}]),this.model.listenTo(this.model,"change:aspectRatioNum",this._calculateEligibility.bind(this)),T().on("window:scroll:change",this._calculateEligibility.bind(this))}},{key:"_getZIndex",value:function(){var e=this.model.get("videoViewContainer").querySelectorAll('[class*="VpaidWrapper"]')[0];if(!e)return 99;var t=e.className.match(/VpaidWrapper\d+/)[0];return 99+(t?parseInt(t.replace("VpaidWrapper","")):0)}},{key:"_onSliderResize",value:function(){this.placeHolders=[],this._createPlaceHolders()}},{key:"_onTabEvent",value:function(e){e===t().TAB_STATE.tabOut?(this.model.set("isViewable",!1),this.model.set("isInTab",!1),this.model.get("isIgnoreTabInIframe")&&!this.isPlainPage||this.model.set("isEligibleToPlay",!1)):(this._calculateEligibility(),this.model.set("isInTab",!0))}},{key:"_calculateEligibility",value:function(){this.inViewDiv=this._getInViewDiv(),this._testEligibility()}},{key:"_testEligibility",value:function(){if(this.inViewDiv){this.model.set("isEligibleToPlay",!0),this.model.set("isViewable",!(this.model.get("isIgnoreTabInIframe")&&!this.isPlainPage)||this.model.get("isInTab"));var e=this.model.get("getAdState");this.model.get("eligiblePlaceholder")||e!==o.getAdState.gotAd||this.model.set("eligiblePlaceholder",this.inViewDiv),this.model.get("hadEligibility")||this.model.set("hadEligibility",!0)}else this.model.set("isEligibleToPlay",!1)}},{key:"_getInViewDiv",value:function(){for(var e=0;e<this.placeHolders.length;e++){this.placeHolders[e].style.zIndex=this._getZIndex();var t=this.model.get("viewPercent")||100;if(this.model.set("isViewable",this.model.get("viewabilityPercent")<=100),this.model.set("isViewable100",100>=this.model.get("100viewPercent")),t<=100)return this.placeHolders[e]}}}])&&Po(i.prototype,n),s&&Po(i,s),Object.defineProperty(i,"prototype",{writable:!1}),l}(_o),Oo=Co;i(1999);function ko(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ko(e)}function Do(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(n.key,void 0,function(e,t){if("object"!==ko(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==ko(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===ko(o)?o:String(o)),n)}var r,o}function Ro(e,t){return Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ro(e,t)}function Io(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=xo(e);if(t){var r=xo(this).constructor;Reflect.construct(n,arguments,r)}else n.apply(this,arguments);return function(e,t){if(t&&("object"===ko(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,i)}}function xo(e){return Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},xo(e)}i(1999),n.O;i(1999);function No(e){return No="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},No(e)}function Vo(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if("object"!==No(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==No(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===No(o)?o:String(o)),n)}var r,o}var Lo=i(1999),jo=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.model=t,this._loadOvaMediaPlayer()}var t,i,n;return t=e,(i=[{key:"_loadOvaMediaPlayer",value:function(){this.dependencies=["".concat(this.model.get("player.urls.playerLocation"),"/OvaMediaPlayer.js")],window.OvaMediaPlayer?this._onOvaMediaPlayerLoaded():Lo.loadJsArr(this.dependencies,this._onOvaMediaPlayerLoaded.bind(this))}},{key:"_onOvaMediaPlayerLoaded",value:function(){this.model.set("isPlayerLoaded",!0)}}])&&Vo(t.prototype,i),n&&Vo(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Bo=jo;function Mo(e){return Mo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mo(e)}function Fo(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if("object"!==Mo(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==Mo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===Mo(o)?o:String(o)),n)}var r,o}function Uo(e,t){return Uo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Uo(e,t)}function Wo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=Ho(e);if(t){var r=Ho(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return function(e,t){if(t&&("object"===Mo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,i)}}function Ho(e){return Ho=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ho(e)}var zo=i(1999),$o=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Uo(e,t)}(a,t);var i,n,o,s=Wo(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=s.call(this,e.model)).model=e.model,t.log=new r.Z({unitType:t.model.get("unitType"),className:"PlayPriorityHandler",version:t.model.get("version"),isDebug:t.model.get("isDebug")}),t.isRvPriority=t.model.get("isRvPriority")&&t._isAllowedInFT(),t.isHadFirstSetAd=!1,t.detachToSlider=t.model.get("detachToSlider"),t.isStickyCardActive=t.model.get("stickyCard.isActive"),t.isDetachActive=t.detachToSlider&&(t.detachToSlider.isStartFromSlider||t.detachToSlider.isDetachToSlider),t.isForceDetachOnGotAd=(t.isDetachActive||t.isStickyCardActive)&&t.model.get("detachToSlider.forceDetach.isActive"),t._bindEvents(),t}return i=a,(n=[{key:"_isAllowedInFT",value:function(){return!!this.model.get("playPriority.isAllowInIframes")||this.model.get("frameType")===e.FRAME_TYPE.plainPage}},{key:"_bindEvents",value:function(){}},{key:"setNextAd",value:function(e){this.lastAd=e,this._isForceAdToDetach(e)?this._setReadyAd(e):this.isRvPriority&&!this.isHadFirstSetAd?this._handleRvPriority(e):this._setReadyAd(e)}},{key:"_isForceAdToDetach",value:function(e){if(!this.isForceDetachOnGotAd||this.model.get("hadStickyDetach"))return!1;var t=this.model.get("detachToSlider.forceDetach.restrictions.rv"),i="any"===t||t===e.adData.requiredViewability;return this.log.info("force ad detach:",{isForced:i,activeAdRV:e.adData.requiredViewability}),i}},{key:"_setReadyAd",value:function(e){e.onAdSetToUnits(),this.lastSetAdId=e.adId;var t=e.adData.requiredViewability,i=!e.adData.alwsldr;this.model.setNextAd(e),setTimeout(function(){this.model.set("isNextAdRV",t),this.model.set("isNextAdNotAllowSlider",i),this.model.set("hasReadyAd",!0)}.bind(this),0)}},{key:"_handleRvPriority",value:function(e){var t=!1;if(e.adData.requiredViewability)t=!0;else{var i=this._isAtDecisionPoint();t=this._shouldSetReadyAd(i)}t&&(this._setReadyAd(e),e._bringToFront(),this.isHadFirstSetAd=!0)}},{key:"_shouldSetReadyAd",value:function(e){return!!e&&(this.model.get("playPriority.isAlwaysWaitForRv")?!this.model.get("playerHasRvInQ"):!this.model.get("playerHasRvInQ")||this.model.get("isSkippedDistancePredict")||this._isLoaderInRequiredPercentage())}},{key:"_isAtDecisionPoint",value:function(){if(!this.model.get("playPriority.checkForRvPriority"))return!1;var t=this.model.get("playPriority.checkForRvPriority");return this[e.CHECK_FOR_RV_PRIORITY[t]].bind(this)()}},{key:"_reCheckAd",value:function(e){this.isHadFirstSetAd||(this.hasListener=!1,this.setNextAd(this.lastAd))}},{key:"hasReachedEligibility",value:function(){return!(!this.model.get("isEligibleToPlay")&&!this.model.get("hadEligibility"))||(this.hasListener?void 0:(this._waitForEligibility(),this.hasListener=!0,!1))}},{key:"_waitForEligibility",value:function(){this.createStateHandlers([{event:"isEligibleToPlay:true",funcName:"_reCheckAd",isListenOnce:!0}])}},{key:"hasReachedPixelsFromSelector",value:function(){if(void 0===this.model.get("playPriority.pixelsFromSelector"))return!1;var e=zo.hasPassedPixelFromSelector(this.model.get("parentSelector"),this.model.get("scrollSelector"),this.model.get("playPriority.pixelsFromSelector"),this.model.get("isNeedValidateParentSelector"));return e||this.hasListener||(this.hasListener=!0,T().once("window:scroll:change",this._reCheckAd.bind(this))),e}},{key:"intersectionPercent",value:function(){if(void 0===this.model.get("playPriority.intersectionPercent"))return!1}},{key:"_activeSecondsToGetRVTime",value:function(){}},{key:"_secondsAfterGetAdRv",value:function(){}},{key:"beforeLoaderEnd",value:function(){return!!this._isLoaderInRequiredPercentage()||(this.createStateHandlers([{event:"loaderCurrCount",funcName:"_reCheckAd",isListenOnce:!0}]),!1)}},{key:"_isLoaderInRequiredPercentage",value:function(){return this.model.get("loaderCurrCount")>=this.model.get("playPriority.loaderPercent")}}])&&Fo(i.prototype,n),o&&Fo(i,o),Object.defineProperty(i,"prototype",{writable:!1}),a}(n.O),Go=$o;function qo(e){return qo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qo(e)}function Yo(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if("object"!==qo(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==qo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===qo(o)?o:String(o)),n)}var r,o}function Ko(e,t){return Ko=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ko(e,t)}function Qo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=Zo(e);if(t){var r=Zo(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return function(e,t){if(t&&("object"===qo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,i)}}function Zo(e){return Zo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Zo(e)}var Xo=i(1999),Jo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ko(e,t)}(l,e);var i,n,o,a=Qo(l);function l(e,t){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(i=a.call(this,e)).model=e,i.eligibilityService=t,i.log=new r.Z({unitType:i.model.get("unitType"),className:"adsManager",version:i.model.get("version"),isDebug:i.model.get("isDebug")}),i.model.set("adState",s().readyState),i.model.set("getAdState",s().getAdState.notCalled),i.model.set("adManagerState",s().adManagerState.empty,{silent:!0}),i._createAdsList(),i.model.set("nextPredict",NaN),i.adId=0,i.currentAdIndex=-1,i.model.set("activeTag",!1),i.model.set("activeAd",!1),i.model.set("impressionCount",0),i.playPriorityHandler=new Go({model:i.model}),i._bindEvents(),Xo.sendingEventToTaboolaBridge("sessionStart",i.model.get("unitName")),i.model.get("isCancelGetAdOnEligibilityLost.isActive")&&(i.cancelGetAdOnEligibilityLostForRVAny=i.model.get("isCancelGetAdOnEligibilityLost.includeRVAny"),i._trackEligibilityLost()),i}return i=l,(n=[{key:"_createAdsList",value:function(){for(var e in this.adsList={},t().RV_TYPES)this.adsList[t().RV_TYPES[e]]=[]}},{key:"_bindEvents",value:function(){this.createStateHandlers([{event:"getAdState:failed",funcName:"_onFailedToGetAd"},{event:"hasReadyAd:false",funcName:"_updateNextAd"},{event:"cancelRV:true",funcName:"_cancelAllRVCalls"},{event:"adState:playing",funcName:"_onFirstAdPlay",isListenOnce:!0},{event:"exploreMore",funcName:"_onExploreMore"}])}},{key:"adPredict",value:function(e){var i=this;if(this._countReadyAdsByRV(!1,t().RV_TYPES.NON_RV)==this.model.get("maxNonRvVimpsInQueue")&&this.model.set("onMaxNonRvVimpsInQueue",!0),!(this._countReadyAdsByRV(!1,t().RV_TYPES.RV)>=this.model.get("maxVimpsInQueue")&&this._countReadyAdsByRV(!1,t().RV_TYPES.NON_RV)>=this.model.get("maxNonRvVimpsInQueue"))){var n=this.model.get("nextPredict");n===t().RV_TYPES.RV&&this.model.get("isGettingRv1Ad")?this.log.warning("Already getting rv1 ad, ignoring"):(this.firstGetAdFired||(this.log.info("First Get Ad Fired"),this.model.set("firstGetAdFired",!0),this.firstGetAdFired=!0),this._checkIfAlreadyHas1InList(),Xo.isArray(n)?Xo.forEach(n,(function(t){(!i.alreadyHas1InList||i.alreadyHas1InList&&0===t)&&(i.createNewAd(t,e),i._checkIfAlreadyHas1InList())}),this):(!this.alreadyHas1InList||this.alreadyHas1InList&&0===n)&&this.createNewAd(n,e),"mp4Predict"===this.model.get("nextPredictName")?this.model.set("mp4Predict",!0):this.model.set("mp4Predict",!1))}}},{key:"createNewAd",value:function(e,t){var i=this.model.get("nextPredictName"),n=this.model.get("nextAdProperties");if(!this.model.get("isAllowDuplicateKey")){var r=this.adsList[e].some((function(t,i,n){return(t.adQState===s().adQState.readyState||t.adQState===s().adQState.impression)&&t.getAdKey===e}));if(r)return}this.model.set("adId",this.adId);var o=new pr({model:this.model,ppKey:e,adId:this.adId,impressionCb:this.onAdImpression.bind(this),completeCb:this.onAdComplete.bind(this),predictName:i,getAdProperties:n,predictId:t});this.adsList[e].push(o),this.adId++}},{key:"_checkIfAlreadyHas1InList",value:function(){var e=this;this.alreadyHas1InList=!1,Xo.forEach(this.adsList[t().RV_TYPES.RV],(function(t){if("multiAdPredict"!==e.model.get("nextPredictName"))return e.alreadyHas1InList=!0,!1}),this)}},{key:"onAdImpression",value:function(e){e.setActiveTag(),this._updateNextAd(),this.model.set("adManagerState",s().adManagerState.hasAds),this.model.get("hadReady")||this.model.get("isEligibilityNomination")||this.model.get("isRvPriority")||(this.eligibilityService?(this.eligibilityService._calculateEligibility(),this.model.get("isEligibleToPlay")?this._triggerReady():this.createStateHandlers([{event:"isEligibleToPlay:true",funcName:"_triggerReady",isListenOnce:!0}])):this._triggerReady(),this.model.set("hadReady",!0));var i=e.getAdData();if(this._isRV1withRV0InStack=function(){return i.requiredViewability&&this.adsList[t().RV_TYPES.NON_RV].length>0},"any"===e.getAdKey&&this._moveAdFromAnyQueue(e,i.requiredViewability),e.rv=i.requiredViewability,this.model.increaseCounter(i.requiredViewability?"adsList.rvAds":"adsList.nonRvAds"),!this.model.get("isEligibleToPlay")&&this.model.get("lostEligibilityTime")&&e.fireSkipVimp1EligibilityLost(i.requiredViewability),i.requiredViewability&&!this._isSwapEnabled()){var n=this.getPlayingAdRVType();void 0!==n&&e.fireSkipVimp1AdIsPlaying(n)}this._isRV1withRV0InStack()&&e.onAdPlayingRV1StackWithRV0()}},{key:"_isSwapEnabled",value:function(){return this.model.get("isForceSwapToRV")}},{key:"_triggerReady",value:function(){T().trigger("ready")}},{key:"_moveAdFromAnyQueue",value:function(e,i){var n=this;Xo.each(this.adsList[t().RV_TYPES.ANY],(function(i,r){i.adId===e.adId&&n.adsList[t().RV_TYPES.ANY].splice(r,1)})),this.adsList[i?t().RV_TYPES.RV:t().RV_TYPES.NON_RV].push(e)}},{key:"getPlayingAdRVType",value:function(){return this.adsList[t().RV_TYPES.NON_RV].some((function(e){return e.adState===s().adState.playing}))?t().RV_TYPES.NON_RV:this.adsList[t().RV_TYPES.RV].some((function(e){return e.adState===s().adState.playing}))?t().RV_TYPES.RV:void 0}},{key:"onAdComplete",value:function(e,t){this._removeAd(e.adId,e.adData&&void 0!==e.adData.requiredViewability?e.adData.requiredViewability:e.getAdKey,!1),this.model.get("hasReadyAd")&&this.model.getStorage("nextAd").adId===e.adId&&this.model.set("hasReadyAd",!1),t&&!this.model.get("hasReadyAd")&&(this.model.set("lastAutoKilledPredict",e.getAdKey),this.model.set("adState",e.adState))}},{key:"close",value:function(){this.model.set("adManagerState",s().adManagerState.stopped),this.model.set("closeState",s().closeState.adManagerStop)}},{key:"pauseGetAds",value:function(){for(var e in this.model.set("adManagerState",s().adManagerState.paused),this.adsList)this.adsList[e]=[];this.model.set("hasReadyAd",!1)}},{key:"_cancelAllRVCalls",value:function(){Xo.forEach(this.adsList[t().RV_TYPES.RV],function(e){e.cancelGetAd(),this._removeAd(e.adId,t().RV_TYPES.RV,!0)}.bind(this)),this.model.set("cancelRV",!1)}},{key:"_removeAdsByKeyAndStatus",value:function(e,t){Xo.forEach(this.adsList[e],function(i){t.indexOf(i.getAdState)>-1&&(i.cancelGetAd(),this._removeAd(i.adId,e,!0))}.bind(this))}},{key:"_onFailedToGetAd",value:function(){var e,t=this.model.get("getAdCurrId");for(var i in this.adsList)e||(e=Xo.find(this.adsList[i],(function(e){return e.adId===t}),this));this.model.set("lastFailedPredictProperties",e.getAdProperties),this.model.set("lastFailedPredict",e.getAdKey),this._removeAd(t,e.adData&&void 0!==e.adData.requiredViewability?e.adData.requiredViewability:e.getAdKey,!0)}},{key:"_removeAd",value:function(e,i,n){var r=this,o=i?t().RV_TYPES.RV:t().RV_TYPES.NON_RV;Xo.size(this.adsList[o])>0&&(this.adsList[o]=this.adsList[o].filter((function(t){return t.adId===e&&r.model.decreaseCounter(t.rv?"adsList.rvAds":"adsList.nonRvAds"),t.adId!==e}))),0===this.countReadyAds(n)&&this.model.set("adManagerState",s().adManagerState.empty)}},{key:"_filterAds",value:function(){var e=this,i=[];for(var n in this.adsList)i=i.concat(this.adsList[n].filter((function(i){return i.adQState===s().adQState.impression&&!i.isUsed&&(e.getPlayingAdRVType()===t().RV_TYPES.NON_RV||e._isAllowAd(i))})));return i}},{key:"_updateNextAd",value:function(){var e=this,i=this._filterAds(),n=this._chooseBestAd(i),r=i[n];r&&(this.playPriorityHandler.setNextAd(r),r.getAdKey&&r.getAdKey===t().RV_TYPES.RV&&this._countReadyAdsByRV(!0,t().RV_TYPES.RV)>1&&r.oppsService.onAdPlayingNextAdReadyRV1());var o=r;if(this.model.get("hasReadyAd")){var a=this.model.get("playPriority.type"),l=function(t){Xo.each(e.adsList[t],function(e,i){n===i&&t==o.getAdKey||e.adQState===s().adQState.impression&&o&&o.getAdData&&("rpox"===a?e.reportRpoxSkip(o.getAdData()):"ppKey"===a&&e.reportPpKeySkip(o.getAdData()))}.bind(e))};for(var c in this.adsList)l(c)}}},{key:"_chooseBestAd",value:function(e){var t=this,i=0;if(1===Xo.size(e))return i;var n=this.model.get("playPriority.type")||"rpox";if("ppKey"===n)Xo.find(e,(function(e,n){e.getAdKey===t.model.get("playPriority.key")&&(i=n)}));else if("function"===n){var r=this.model.get("playPriority.func");i=r(e)}else"rpox"===n&&(i=this.priorityByRpox(e));return i}},{key:"priorityByRpox",value:function(e){var t=0,i=(this.model,0);return Xo.each(e,(function(e,n){e.rpox>=i&&(i=e.rpox,t=n)})),t}},{key:"_hasPlayingAd",value:function(){return!!this.model.get("activeTag")}},{key:"countReadyAds",value:function(e){var t=0;for(var i in this.adsList)t+=this._countReadyAdsByRV(e,i);return t}},{key:"_countReadyAdsByRV",value:function(e,t){var i=0;return Xo.forEach(this.adsList[t],(function(t){(e&&t.adQState!==s().adQState.readyState||t.adQState===s().adQState.impression)&&i++}),this),i}},{key:"_onFirstAdPlay",value:function(){this.model.set("hadPlayedAd",!0)}},{key:"_isAllowAd",value:function(e){return this._isAllowSingleAd(e)}},{key:"_isAllowSingleAd",value:function(e){if(this.model.get("postRepeatMode"))return!0;var t=e.adTypeConfig&&e.adTypeConfig.singleAd&&e.adTypeConfig.singleAd.isPlacementSingleAd;return!(t&&this.model.get("hadPlayedAd")||this.model.get("isPreventNextAd")||t&&this._isAdTypeDropped(Mr().singleAd.name))}},{key:"_isAdTypeDropped",value:function(e){var t=this.model.get("droppedAdTypes");return!!Xo.isArray(t)&&0!==(t=t.filter((function(t){return e===t}))).length}},{key:"_getLastActiveAd",value:function(){var e=this;for(var t in this.adsList){var i=this.adsList[t].filter((function(t){return t.adId===e.model.get("lastActiveAd")}));if(i&&i[0])return i}return[]}},{key:"_onExploreMore",value:function(){this.model.get("exploreMoreConfig.clearAdsQ")&&this._removeAdsByKeyAndStatus(t().RV_TYPES.NON_RV,["gotAd","waiting","failed","stopped","finished"]);var e=this.model.get("exploreMoreConfig.maxNonRvVimpsInQueue");e&&this.model.set("maxNonRvVimpsInQueue",e)}},{key:"_trackEligibilityLost",value:function(){this.createStateHandlers([{event:"isEligibleToPlay:false",funcName:"_cancelGetAdOnLostEligibility"}])}},{key:"_cancelGetAdOnLostEligibility",value:function(){this._cancelGetAdOnLostEligibilityByRVType(t().RV_TYPES.RV),this.cancelGetAdOnEligibilityLostForRVAny&&this._cancelGetAdOnLostEligibilityByRVType(t().RV_TYPES.ANY)}},{key:"_cancelGetAdOnLostEligibilityByRVType",value:function(e){var i=this;this.adsList[e].map((function(e){e.getAdState===s().getAdState.gettingAd&&(e.cancelGetAd(t().CANCEL_GET_AD_REASONS.LOST_ELIGIBILITY),i.model.fireCancelGetAdOnEligibilityLost())}))}}])&&Yo(i.prototype,n),o&&Yo(i,o),Object.defineProperty(i,"prototype",{writable:!1}),l}(n.O),es=Jo;function ts(e){return ts="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ts(e)}function is(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if("object"!==ts(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==ts(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===ts(o)?o:String(o)),n)}var r,o}var ns=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.model=t,this.log=new r.Z({unitType:this.model.get("unitType"),className:"ObserverService",version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.options=i,this.setObserver()}var t,i,n;return t=e,(i=[{key:"observe",value:function(e){e=Array.isArray(e)?e:[e];for(var t=0;t<e.length;t++)e[t].dataset.elViewPercent||this.observer.observe(e[t])}},{key:"unobserve",value:function(e){e=Array.isArray(e)?e:[e];for(var t=0;t<e.length;t++)this.observer.unobserve(e[t])}},{key:"setObserver",value:function(){this.setDefaults(),this.observer=new IntersectionObserver(this.observerCallback.bind(this),this.options);var e=this.options.targetEl;this.observe(e)}},{key:"setDefaults",value:function(){var e=this.options;e.threshold=e.threshold||[0,this.model.get("viewPercent")/100,this.model.get("viewabilityPercent")/100],e.rootMargin=e.rootMargin||"0px",e.targetEl=Array.isArray(e.targetEl)?e.targetEl:[e.targetEl]}},{key:"observerCallback",value:function(e,t){this.options.callback&&this.options.callback(e,t),e.forEach((function(e){e.target.dataset.elViewPercent=e.intersectionRatio.toString()}))}},{key:"getViewPercent",value:function(e){return 100*parseFloat(e.dataset.elViewPercent)}},{key:"isElIntersectingViewport",value:function(e){return this.getViewPercent(e)>0}},{key:"isElViewPercentReached",value:function(e){return this.getViewPercent(e)>this.model.get("viewPercent")}},{key:"isElViewabilityPercentReached",value:function(e){return this.getViewPercent(e)>this.model.get("viewabilityPercent")}}])&&is(t.prototype,i),n&&is(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),rs=ns;function os(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},os(e)}function ss(e){return function(e){if(Array.isArray(e))return as(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return as(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&e.constructor.name;if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return as(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function as(e,t){(null==t||t>e.length)&&e.length;for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function ls(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(n.key,void 0,function(e,t){if("object"!==os(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==os(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===os(o)?o:String(o)),n)}var r,o}function cs(e,t){return Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},cs(e,t)}function us(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=hs(e);if(t){var r=hs(this).constructor;Reflect.construct(n,arguments,r)}else n.apply(this,arguments);return function(e,t){if(t&&("object"===os(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ds(e)}(this,i)}}function ds(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hs(e){return Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},hs(e)}var fs=i(1999);n.O;function ps(e){return ps="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ps(e)}function ms(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if("object"!==ps(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==ps(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===ps(o)?o:String(o)),n)}var r,o}function ys(e,t){return ys=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ys(e,t)}function vs(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=gs(e);if(t){var r=gs(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return function(e,t){if(t&&("object"===ps(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,i)}}function gs(e){return gs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},gs(e)}var bs=i(1999),_s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ys(e,t)}(a,e);var i,n,o,s=vs(a);function a(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=s.call(this,e)).model=e,t.shouldConsiderBlurAsTabOut=t.model.get("usePageEventsForTabStatus")&&!0===t.model.get("isMobile");var i=wo(t.model);return t.model.set("isInTab",i),t.log=new r.Z({unitType:t.model.get("unitType"),className:"tabStatusService",version:t.model.get("version"),isDebug:t.model.get("isDebug")}),t.bindEvent(),t}return i=a,(n=[{key:"bindEvent",value:function(){this.model.listenTo(T(),"window:tab:change",this._onTabEvent.bind(this))}},{key:"_onTabEvent",value:function(e){this.model.set("tabState",bs.find(Object.keys(t().TAB_STATE),(function(i){return t().TAB_STATE[i]===e}))),this._isTabOut(e)?this.model.set("isInTab",!1):this.model.set("isInTab",!0)}},{key:"_isTabOut",value:function(e){return e===t().TAB_STATE.tabOut||!!this.shouldConsiderBlurAsTabOut&&e===t().TAB_STATE.blur}}])&&ms(i.prototype,n),o&&ms(i,o),Object.defineProperty(i,"prototype",{writable:!1}),a}(n.O),ws=_s;function Ss(e){return Ss="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ss(e)}function Ps(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if("object"!==Ss(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==Ss(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===Ss(o)?o:String(o)),n)}var r,o}function Ts(e,t){return Ts=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ts(e,t)}function As(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=Es(e);if(t){var r=Es(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return function(e,t){if(t&&("object"===Ss(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,i)}}function Es(e){return Es=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Es(e)}var Cs=i(1999),Os=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ts(e,t)}(a,e);var i,n,o,s=As(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=s.call(this,e)).model=e,t.log=new r.Z({unitType:t.model.get("unitType"),className:"GDPRManager",version:t.model.get("version"),isDebug:t.model.get("isDebug")}),t._init(),t}return i=a,(n=[{key:"_init",value:function(){var e=window.__cmp,i=t().UNIT_TYPES[this.model.get("unitType")],n=i===t().UNIT_TYPES.EXPANDABLE||i===t().UNIT_TYPES.EXPANDABLE_MOBILE,r=i===t().UNIT_TYPES["300X600"]||i===t().UNIT_TYPES["300X600_MOBILE"];(n||r)&&!this.model.get("isStayInIframe")&&this._isInFriendlyIframe()&&(e=Cs.getTopWindow().__cmp),void 0!==e?(this.model.set("hasCMPonPage",!0),e("getConsentData",null,this._getConsentDataCB.bind(this))):(this.model.set("hasCMPonPage",!1),this.model.set("canStartPlayer",!0))}},{key:"_getConsentDataCB",value:function(e){var t=e.gdprApplies,i=e.consentData||"";this._setPlayerParams(t,i)}},{key:"_setPlayerParams",value:function(e,t){An().player?(An().player.set("gdprApplies",e),An().player.set("cdb",t)):(this.model.set("gdprApplies",e),this.model.set("consentDaisyBit",t),this.model.set("canStartPlayer",!0))}},{key:"_isInFriendlyIframe",value:function(){return this._isInIframe()&&cmTag.config.iframeData.isFriendlyIframe}},{key:"_isInIframe",value:function(){return cmTag.config.iframeData.inIframe||cmTag.config.iframeData.inDFP}}])&&Ps(i.prototype,n),o&&Ps(i,o),Object.defineProperty(i,"prototype",{writable:!1}),a}(n.O),ks=Os;function Ds(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ds(e)}function Rs(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(n.key,void 0,function(e,t){if("object"!==Ds(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==Ds(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===Ds(o)?o:String(o)),n)}var r,o}function Is(e,t){return Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Is(e,t)}function xs(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=Ns(e);if(t){var r=Ns(this).constructor;Reflect.construct(n,arguments,r)}else n.apply(this,arguments);return function(e,t){if(t&&("object"===Ds(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,i)}}function Ns(e){return Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ns(e)}i(1999),n.O;function Vs(e){return Vs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vs(e)}function Ls(e){return function(e){if(Array.isArray(e))return js(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return js(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return js(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function js(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function Bs(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if("object"!==Vs(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==Vs(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===Vs(o)?o:String(o)),n)}var r,o}function Ms(e,t){return Ms=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ms(e,t)}function Fs(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=Us(e);if(t){var r=Us(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return function(e,t){if(t&&("object"===Vs(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,i)}}function Us(e){return Us=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Us(e)}var Ws=i(1999),Hs=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ms(e,t)}(s,e);var t,i,n,o=Fs(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=o.call(this,e.model)).version=e.version,t.model=e.model,t.oppsulaLoaded=!1,t.log=new r.Z({unitType:t.model.get("unitType"),className:"OppsulaManager",version:t.model.get("version"),isDebug:t.model.get("isDebug")}),t.oppsArr=[],t._bindEvents(),t._loadService(),t}return t=s,(i=[{key:"_bindEvents",value:function(){this.createStateHandlers([{event:"isOppsulaLoaded:true",funcName:"_sendOppsFromArr"}])}},{key:"_loadService",value:function(){Ws.loadFromTRC("oppsula",this.version,this._onOppsulaLoaded.bind(this),this._onLoadOppsulaError.bind(this))}},{key:"_onOppsulaLoaded",value:function(e){this.oppsula=new e(this.model,"unit"),this.oppsulaLoaded=!0,this.log.info("Oppsula Loaded",this.oppsula),this._sendOppsFromArr()}},{key:"_onLoadOppsulaError",value:function(){this.log.error("Error while loading Oppsula from service loader")}},{key:"send",value:function(e,t){!0===this.oppsulaLoaded?this.oppsula.send("unit",t,e):this.oppsArr.push([e,t])}},{key:"_sendOppsFromArr",value:function(){var e=this;this.oppsArr.splice(0).forEach((function(t){return e.send.apply(e,Ls(t))}))}}])&&Bs(t.prototype,i),n&&Bs(t,n),Object.defineProperty(t,"prototype",{writable:!1}),s}(n.O),zs=function(){var e;return function(t){return e||(e=new Hs(t)),e}}(),$s=zs;function Gs(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gs(e)}function qs(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(n.key,void 0,function(e,t){if("object"!==Gs(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==Gs(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===Gs(o)?o:String(o)),n)}var r,o}function Ys(e,t){return Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ys(e,t)}function Ks(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=Qs(e);if(t){var r=Qs(this).constructor;Reflect.construct(n,arguments,r)}else n.apply(this,arguments);return function(e,t){if(t&&("object"===Gs(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,i)}}function Qs(e){return Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Qs(e)}var Zs=i(1999);n.O;function Xs(e){return Xs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xs(e)}function Js(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if("object"!==Xs(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==Xs(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===Xs(o)?o:String(o)),n)}var r,o}function ea(e,t){return ea=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ea(e,t)}function ta(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=ia(e);if(t){var r=ia(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return function(e,t){if(t&&("object"===Xs(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,i)}}function ia(e){return ia=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ia(e)}var na=i(1999),ra=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ea(e,t)}(s,e);var t,i,n,o=ta(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=o.call(this,e)).model=e,t.adjacCardPlacement=t.model.get("adjacCardPlacement"),t.log=new r.Z({unitType:t.model.get("unitType"),className:"organicCardInjector",version:t.model.get("version"),isDebug:t.model.get("isDebug")}),t._bindEvents(),t}return t=s,(i=[{key:"_bindEvents",value:function(){}},{key:"injectOrganicCard",value:function(e){if(this.adjacCardPlacement=this.model.get("adjacCardPlacement")||this.adjacCardPlacement,!this._isCardOrganic(this.adjacCardPlacement)&&!this.isOrganicCardInjected){this.organicContainer=(0,S.default)(e)[0];var t=na.getOrganicCard();if(!t)return this.log.error("missing mode can't inject organic"),!1;if(!this.organicContainer)return this.log.error("missing container to inject an organic card"),!1;var i=document.createElement("div");i.id="taboola-adjacent-organic-card",i.classList.add("tbl-feed-card"),i.dataset.cardIndex=this.adjacCardPlacement-.25,this.organicContainer.insertAdjacentElement("afterend",i),window._taboola=window._taboola||[];var n=this._getPlacementName();return this.isOrganicCardInjected=!0,this.model.set("isOrganicCardInjected",!0),_taboola.push({mode:t,container:"taboola-adjacent-organic-card",placement:n,target_type:"mix"}),!0}}},{key:"_getPlacementName",value:function(){var e=(0,S.default)(this.model.get("parentSelector"))[0];if(e&&e.dataset&&e.dataset.parentPlacementName)return e.dataset.parentPlacementName+" | Card 0"}},{key:"_isCardOrganic",value:function(e){var t=(0,S.default)('[data-card-index="'.concat(e,'"]'))[0];return!(!t||!t.querySelector(".trc-content-organic"))}}])&&Js(t.prototype,i),n&&Js(t,n),Object.defineProperty(t,"prototype",{writable:!1}),s}(n.O);!function(){var e}();function oa(e){return oa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oa(e)}function sa(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if("object"!==oa(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==oa(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===oa(o)?o:String(o)),n)}var r,o}var aa="data-cm-v-ad-id",la=function(){function e(t,i){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.instance)return e.instance;this.viewabilityPercent=t/100,this.viewPercent100=i/100,this.threshold=[0,this.viewabilityPercent,this.viewPercent100,1],e.instance=this,this.elementsToObserve={},this.observerOptions={root:null,rootMargin:"0px",threshold:this.threshold},this.intersectionObserver=this._createObserver(this._observerCallback.bind(this),this.observerOptions)}var t,i,n;return t=e,i=[{key:"_observerCallback",value:function(e){var t=this;e.map((function(e){var i=e.intersectionRatio,n=e.target.getAttribute(aa),r=t.viewabilityPercent<=i,o=t.viewPercent100<=i;t.elementsToObserve[n].model.set("isViewableByOb",r),t.elementsToObserve[n].model.set("isViewableByOb100",o)}))}},{key:"_createObserver",value:function(e,t){return new IntersectionObserver(e,t)}},{key:"startObserverElement",value:function(e,t,i){e.setAttribute(aa,t),this.elementsToObserve[t]={element:e,model:i},this.elementsToObserve[t].model.set("isViewableByOb100",i.get("isViewable100")),this.intersectionObserver.observe(e)}},{key:"stopObserveElement",value:function(e){this.intersectionObserver.unobserve(this.elementsToObserve[e].element),delete this.elementsToObserve[e]}},{key:"stopObserver",value:function(){this.intersectionObserver.disconnect()}}],i&&sa(t.prototype,i),n&&sa(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ca(e){return ca="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ca(e)}function ua(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if("object"!==ca(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==ca(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===ca(o)?o:String(o)),n)}var r,o}function da(e,t){return da=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},da(e,t)}function ha(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=fa(e);if(t){var r=fa(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return function(e,t){if(t&&("object"===ca(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,i)}}function fa(e){return fa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},fa(e)}var pa=i(1999),ma=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&da(e,t)}(l,t);var i,n,s,a=ha(l);function l(t){var i;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(i=a.call(this)).constructor===l)throw new Error("Can't instantiate abstract class!");return i.model=t.model,i.log=new r.Z({unitType:i.model.get("unitType"),className:i.constructor.name,version:i.model.get("version"),isDebug:i.model.get("isDebug")}),i.timers={},i.isAmp=i.model.get("frameType")===e.FRAME_TYPE.amp&&i.model.get("isUseAmpObserver"),i.onViewability=t.onViewability||function(){},i.isFirstUpdate=!0,i.traceViewabilitySeconds=i.model.get("traceViewabilitySeconds"),i.traceViewability100Seconds=i.model.get("traceViewability100Seconds"),i._startAdViewabilityObserver(),i}return i=l,(n=[{key:"_startAdViewabilityObserver",value:function(){this.viewabilityObserverHelper=new la(this.model.get("viewabilityPercent")||50,this.model.get("100viewPercent")||100)}},{key:"updateActiveAd",value:function(e){this.activeAdId!==e.adId&&(this.isFirstUpdate&&(this._bindEvents(),this.isFirstUpdate=!1),this.activeAd=e,(this.activeAdId||0===this.activeAdId)&&this.viewabilityObserverHelper.stopObserveElement(this.activeAdId),this.activeAdId=e.adId,this._startViewabilityObserverOfElement(e),this._initViewabilityHandler())}},{key:"_startViewabilityObserverOfElement",value:function(e){var t=this._getElementForObserver(e),i=this.activeAdId,n=this.model;this.viewabilityObserverHelper.startObserverElement(t,i,n)}},{key:"_getElementForObserver",value:function(e){var t=this._getWrapperElement(e);return this.model.get("isUseVideoElementForViewabilityObserver")?this._getAdVideoElementFromWrapper(t):t}},{key:"_getWrapperElement",value:function(e){return e.vpaidWrapper.localTarget||e.vpaidWrapper.adTarget}},{key:"_getAdVideoElementFromWrapper",value:function(e){return e.querySelector("video")}},{key:"_initViewabilityHandler",value:function(){throw new Error("Abstract method!")}},{key:"_bindEvents",value:function(){this.createStateHandlers([{event:"activeAdCurrentTime",funcName:"_checkViewability"},{event:"isViewableByOb:true",funcName:"_updateViewabilityTimes"},{event:"isViewableByOb100:true",funcName:"_update100ViewabilityTime"}])}},{key:"_updateViewabilityTimes",value:function(){this._updateViewabilityTime(),this._updateOneSecViewabilityTime(),this._update100ViewabilityTime()}},{key:"_updateViewabilityTime",value:function(){if(this.model.get("isViewableByOb")&&this.model.get("isInTab")){var e=this.model.get("activeAdCurrentTime");this.activeAdViewabilityTime=e+this.traceViewabilitySeconds}else this.activeAdViewabilityTime=void 0}},{key:"_updateOneSecViewabilityTime",value:function(){if(this.model.get("isViewableByOb")&&this.model.get("isInTab")){var e=this.model.get("activeAdCurrentTime");this.activeAdOneSecViewabilityTime=e+1}else this.activeAdOneSecViewabilityTime=void 0}},{key:"_update100ViewabilityTime",value:function(){if(this.model.get("isViewableByOb100")&&this.model.get("isInTab")){var e=this.model.get("activeAdCurrentTime");this.activeAd100ViewabilityTime=e+this.traceViewability100Seconds}else this.activeAd100ViewabilityTime=void 0}},{key:"_checkViewability",value:function(){if(this.activeAd){var e=this.model.get("activeAdCurrentTime");this._checkNormalViewability(e),this._checkOneSecViewability(e),this._check100Viewability(e)}}},{key:"_checkNormalViewability",value:function(e){var t=this.model.get("activeAdData")?this.model.get("activeAdData").mediatype:void 0,i=this.model.get("mediatypesArraySkippingViewableCheckAtSendOppMoment"),n=this.model.get("isViewableByOb");i&&t&&i.includes(t)&&(n=!0),this._testViewability(n,e,this.activeAdViewabilityTime,this.activeAd.isViewed)&&this._onViewability()}},{key:"_checkOneSecViewability",value:function(e){this._testViewability(this.model.get("isViewableByOb"),e,this.activeAdOneSecViewabilityTime,this.activeAd.isViewedOneS)&&this._onViewabilityOneS()}},{key:"_check100Viewability",value:function(e){this._testViewability(this.model.get("isViewableByOb100"),e,this.activeAd100ViewabilityTime,this.activeAd.isViewed100)&&this._onViewability100()}},{key:"_testViewability",value:function(e,t,i,n){return e&&t>=i&&!n}},{key:"_onViewability",value:function(){this.activeAd&&(this.activeAd.onViewability(),pa.dispatchTRC(o.storiesUnitState.videoViewable,this.model),this.onViewability())}},{key:"_onViewabilityOneS",value:function(){this.activeAd&&this.activeAd.onViewabilityOneS()}},{key:"_onViewability100",value:function(){this.activeAd&&this.activeAd.onViewability100()}}])&&ua(i.prototype,n),s&&ua(i,s),Object.defineProperty(i,"prototype",{writable:!1}),l}(n.O),ya=ma;i(1999);function va(e){return va="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},va(e)}function ga(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if("object"!==va(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==va(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===va(o)?o:String(o)),n)}var r,o}function ba(e,t){return ba=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ba(e,t)}function _a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=wa(e);if(t){var r=wa(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return function(e,t){if(t&&("object"===va(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,i)}}function wa(e){return wa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},wa(e)}var Sa=".tbl-read-more-box",Pa=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ba(e,t)}(s,e);var t,i,n,o=_a(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=o.call(this)).model=e.model,t.log=new r.Z({unitType:t.model.get("unitType"),className:t.constructor.name,version:t.model.get("version"),isDebug:t.model.get("isDebug")}),t.model.set("readMoreIsVisible",!1),t._initObserver(),t}return t=s,(i=[{key:"_bindEvents",value:function(){TRC.listen("readMoreClicked",this._clearObservers.bind(this)),this.createStateHandlers([{event:"impressionCount:1",funcName:"_observerCallback",isListenOnce:!0}])}},{key:"_initObserver",value:function(){var e=(0,S.default)(".tbl-read-more-btn")[0]||(0,S.default)(Sa)[0],t={rootMargin:(this.model.get("readMoreObserver.observerMargin")||"10")+"px",threshold:0},i=(0,S.default)(Sa)[0].getBoundingClientRect();this._isReadMoreInitiallyInViewport(i)?this.model.set("readMoreIsInitiallyInViewport",!0):this._unitIsAboveReadMore(i)||(this._bindEvents(),this.readMoreObserver=e&&new IntersectionObserver(this._observerCallback.bind(this),t),this.readMoreObserver&&this.readMoreObserver.observe(e))}},{key:"_observerCallback",value:function(e){var t=this;e[0]&&e[0].isIntersecting?(this.model.set("hasImpBeforeReadMoreViewable",!1),this.model.set("isReadMoreInViewport",!0),window.TRC.listen("readMoreClicked",(function(){return t._onReadMoreClick()}))):this.model.get("impressionCount")>0&&void 0===this.model.get("hasImpBeforeReadMoreViewable")&&this.model.set("hasImpBeforeReadMoreViewable",!0)}},{key:"_onReadMoreClick",value:function(){this.model.set("readMoreClicked",!0),this.model.set("isReadMoreInViewport",!1),this._clearObservers()}},{key:"_clearObservers",value:function(){this.readMoreObserver&&this.readMoreObserver.disconnect()}},{key:"_isReadMoreInitiallyInViewport",value:function(e){return!!e&&e.top>=0&&e.left>=0&&e.bottom<=window.innerHeight&&e.right<=window.innerWidth}},{key:"_unitIsAboveReadMore",value:function(e){var t=this.model.get("parentSelector"),i=t&&(0,S.default)(t)[0],n=i&&i.getBoundingClientRect();return!n||!e||n.bottom<=e.top}}])&&ga(t.prototype,i),n&&ga(t,n),Object.defineProperty(t,"prototype",{writable:!1}),s}(n.O),Ta=Pa,Aa=i(4187);function Ea(e){return Ea="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ea(e)}function Ca(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if("object"!==Ea(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==Ea(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===Ea(o)?o:String(o)),n)}var r,o}var Oa=i(1999),ka=function(){function e(t,i,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.window=t||window,this.conf=i,this.$window=(0,S.default)(window),this.windowHeight=this.$window.height(),this.windowWidth=this.$window.width(),this.setScrollableSelector(n),this._timeBetweenEvents=100,this.keyPressMap={17:!1,18:!1,84:!1,86:!1},this._setScrollListener(),this._setMouseMoveListener(),this._setTabViewListener(),this._setOrientationChangeListener(),this._setResizeListener(),this._setTaboolaReadMoreListener()}var i,n,r;return i=e,(n=[{key:"_setScrollListener",value:function(){var e=Oa.throttle(this._trigger.bind(this,"window:scroll:change"),this._timeBetweenEvents);this.scrollSelector.addEventListener("scroll",e)}},{key:"_setMouseMoveListener",value:function(){var e=Oa.throttle(this._trigger.bind(this,"window:mouse:move"),this._timeBetweenEvents);this.window.addEventListener("mousemove",e)}},{key:"_setOrientationChangeListener",value:function(){var e=Oa.throttle(this._trigger.bind(this,"window:orientation:change"),this._timeBetweenEvents);window.addEventListener("orientationchange",e)}},{key:"_setResizeListener",value:function(){var e=Oa.throttle(this._handleResizeEvent.bind(this),this._timeBetweenEvents);window.addEventListener("resize",e)}},{key:"_setTabViewListener",value:function(){this.isTabOut="hidden"===document.visibilityState,this.window.document.addEventListener("visibilitychange",this._handleVisibilityChange.bind(this)),this.window.addEventListener("focus",this._handleTabEvents.bind(this),!0),this.window.addEventListener("blur",this._handleTabEvents.bind(this),!0),this._shouldUsePageEventsForTabStatus()&&(this.window.addEventListener("pageshow",this._handleTabEvents.bind(this),!0),this.window.addEventListener("pagehide",this._handleTabEvents.bind(this),!0))}},{key:"_shouldUsePageEventsForTabStatus",value:function(){return this.conf.usePageEventsForTabStatus&&!0===this.conf.isMobile}},{key:"_handleResizeEvent",value:function(e){var t=this.$window.height(),i=t-this.windowHeight;this.windowHeight=t;var n=this.$window.width(),r=n-this.windowWidth;this.windowWidth=n,this._trigger("window:resize:change",{heightChange:i,widthChange:r})}},{key:"_handleVisibilityChange",value:function(e){this.isTabOut="hidden"===document.visibilityState,this._handleTabEvents(e)}},{key:"_handleTabEvents",value:function(e){this._trigger("window:tab:change",this._getTabState(e.type))}},{key:"_getTabState",value:function(e){return this.isTabOut?t().TAB_STATE.tabOut:"focus"===e||"pageshow"===e?t().TAB_STATE.focus:t().TAB_STATE.blur}},{key:"_trigger",value:function(e,t){T().trigger(e,t)}},{key:"_setTaboolaReadMoreListener",value:function(){window._taboola=window._taboola||[],_taboola.push({listenTo:"readmore.click",handler:function(){T()&&T().trigger("taboola:readmore:click")}})}},{key:"setScrollableSelector",value:function(e){this.scrollSelector="document"===e?document:Oa.isEmpty(e)?this.window:(0,S.default)(e)[0]}}])&&Ca(i.prototype,n),r&&Ca(i,r),Object.defineProperty(i,"prototype",{writable:!1}),e}(),Da=function(){var e;return function(t,i,n){return e||(e=new ka(t,i,n)),e}}(),Ra=Da,Ia=i(2707),xa=i.n(Ia);function Na(e){return Na="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Na(e)}function Va(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if("object"!==Na(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==Na(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===Na(o)?o:String(o)),n)}var r,o}var La=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),window.cmTag.autoPlayDetectorInstance?(window.cmTag.autoPlayDetectorInstance.callbacks.push(t),window.cmTag.autoPlayDetectorInstance.safelyRunCallbacks()):(this.isMobile=i.isMobile,this.src=i.src,this.timeout=i.timeout||250,this.autoPlaySupport={unmuted:!1},this.unmutedVideo=this.creatVideo(),this.callbacks=[t],this.testVideo(this.unmutedVideo),window.cmTag.autoPlayDetectorInstance=this),window.cmTag.autoPlayDetectorInstance}var t,i,n;return t=e,(i=[{key:"creatVideo",value:function(){var e=document.createElement("video");return e.tbData={isMuted:!1},this.setVideoAttributes(e),this.setVideoStyle(e),this.isMobile&&document.body.appendChild(e),e}},{key:"setVideoAttributes",value:function(e){e.src=this.src,e.type="video/mp4",e.setAttribute("playsinline",!0)}},{key:"setVideoStyle",value:function(e){e.style.left="0",e.style.top="0",e.style.height="0px",e.style.width="0px",e.style.position="absolute",e.style.display="none"}},{key:"testVideo",value:function(e){var t=this;e.tbData.timeupdateHandler=this.handleSupported.bind(this,e),e.addEventListener("timeupdate",e.tbData.timeupdateHandler),e.tbData.timeout=setTimeout(this.handleNotSupported.bind(this,e,"no promise - timeout"),this.timeout);var i=e.tbData.promise=e.play();void 0===i||e.tbData.isResolved||i.then((function(){t.handleSupported(e)})).catch((function(i){t.handleNotSupported(e,i.message)}))}},{key:"handleSupported",value:function(e){e.tbData.isResolved||(e.tbData.isMuted===e.muted?(this.handleResolved(e),this.autoPlaySupport.unmuted={supported:!0},this.safelyRunCallbacks()):this.handleNotSupported(e,"Muted by browser"))}},{key:"handleNotSupported",value:function(e,t){e.tbData.isResolved||(this.handleResolved(e),this.autoPlaySupport.unmuted={supported:!1,error:t},this.safelyRunCallbacks())}},{key:"handleResolved",value:function(e){e.tbData.isResolved=!0,this.removeTimeupdateEventListener(e),clearTimeout(e.tbData.timeout)}},{key:"removeTimeupdateEventListener",value:function(e){e.removeEventListener("timeupdate",e.tbData.timeupdateHandler),e.tbData.timeupdateHandler=void 0,delete e.tbData.timeupdateHandler}},{key:"safelyRunCallbacks",value:function(){var e=this;this.supportIsKnown()&&(this.callbacks.map((function(t){t(e.autoPlaySupport)})),this.callbacks=[])}},{key:"supportIsKnown",value:function(){return this.autoPlaySupport.unmuted}}])&&Va(t.prototype,i),n&&Va(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),ja=(i(2782),i(9644),i(7904)),Ba=(i(9861),i(1999)),Ma=i(9288),Fa=i(9245),Ua=i(9791);function Wa(e,i,n){var r,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=!1;ja.beforeCMTag(e);var a={unit:void 0,model:void 0,placement:void 0,isUnitPlay:!1};function l(){r=function(n,r){Ba.trcPerformanceMeasurement(r.trcPerformanceMeasurementEnabled,"videoCreateUnitModel".concat(r.perfUnitType),t().TRC_PERFORMANCE_ACTIONS.START);var o=new Ma.DeepModel;o.set(r),i&&i._settings&&(cmTag&&cmTag.logger&&cmTag.logger.info("settings by FPP",i._settings),o.set(i._settings));!function(e){if(e.onPassback)return void(e.isApiPassbackExist=!0);if(TRC&&TRC._taboolaClone)for(var t=0;t<TRC._taboolaClone.length;t++)if("video.passback"==TRC._taboolaClone[t].listenTo)return void(e.isApiPassbackExist=!0);e.isApiPassbackExist=!1}(o.attributes);var s=new n(o.attributes);new Fa(s);if(Ba.parseBool(e.isUseCMP))new ks(s);else s.set("canStartPlayer",!0);return function(e){if(!0!==e.get("isOppsulaEnabled"))return;var t={version:e.get("microServices.oppsula.version"),model:e};e.set("player.settings.opslavrsn",t.version),An().oppsula=new $s(t)}(s),function(e){if(!e.get("isVideoAutoplayDetectorEnabled"))return;An().autoPlayDetector=new La(e.handleAutoPlayData.bind(e),{isMobile:e.get("isMobile"),timeout:1e3*e.get("autoplayDetectorTimeoutSec"),src:e.get("player.urls.blankLocation").replace(/{{(.+?)}}/g,(function(t,i){return e.get(i)}))})}(s),function(e){var t=new Xn({model:e});e.set("elasticLogger",t,{},!1)}(s),Ba.trcPerformanceMeasurement(r.trcPerformanceMeasurementEnabled,"videoCreateUnitModel".concat(r.perfUnitType),t().TRC_PERFORMANCE_ACTIONS.STOP),s}(n.model,e),function(t,i,n,r){Ba.parseBool(e.isWaitForStartEvent)?(a.unit=t,a.model=i,a.placement=n,a.isUnitPlay=r,i.fireUnitDelayedPixel(),window.TRC=window.TRC||{},window.TRCImpl=window.TRCImpl||{},window.TRC.videoFunctions={},window.TRC.videoFunctions.startEvent=function(){s||(a.model.fireUnitLoadAfterDelayPixel(),c(a.unit,a.model,a.placement,a.isUnitPlay),s=!0)}):c(t,i,n,r)}(n.unitController,r,void 0,o)}function c(e,t,n,r){var o=new e({model:t,placementElement:n});r&&(i.play=o.play.bind(o))}function u(){window.TRC=window.TRC||{},Ma.$=S.default,Ba.templateSettings={interpolate:/\{\{(.+?)\}\}/g},cmTag.logger||(cmTag.logger=new Aa.Z(e)),e.documentReadyState=document.readyState,cmTag&&cmTag.logger&&cmTag.logger.info("init",e),cmTag.utils=Ba,cmTag.$=S.default,i&&(i._events&&(i._events.forEach((function(e){Ma.on(e.name,e.cb)})),i.on=function(e,t){Ma.on(e,t)}),i.trigger=function(e,t){Ma.trigger(e,t)}),cmTag.config||(cmTag.config=e);var n=window;Ba.isInFriendlyIframe(cmTag.config.iframeData)&&(n=Ba.getTopWindow()),e.isHideIframe&&Ba.hideDFPIframe(e.iframeData),cmTag.config.scrollSelector?(new Ra(n,e,cmTag.config.scrollSelector),new I(e,n,cmTag.config.scrollSelector)):(new Ra(n,e),new I(e,n)),function(){var i=new Ma.DeepModel;i.set({microServices:An().microServices}),i.set(cmTag.config);i.get("microServices");!function(){cmTag&&cmTag.logger&&cmTag.logger.info("PMS Loaded");An().pms=new(xa()),function(){var i,n;if(e.perfUnitType=(i=e.unitType,n=i.replace(/_/g,"").toLowerCase(),"".concat(n.charAt(0).toUpperCase()).concat(n.substring(1))),Ba.trcPerformanceMeasurement(e.trcPerformanceMeasurementEnabled,"videoInitToRender".concat(e.perfUnitType),t().TRC_PERFORMANCE_ACTIONS.START),e.unitName=e.cm_unitName?e.cm_unitName:e.unitType,e.urlPrefix){var o=e.urlPrefix.split("/");e.unitVersion=o[o.length-2],e.unitVersion=e.unitVersion.replace(/_/g,"")}else e.unitVersion=e.version.replace(/_/g,"");l(),r.get("multiUnitManager.isActive")&&Ua.addUnit(r.get("redId"),r),r.get("cookieMatchActive")&&new mn(r)}(),cmTag.units=cmTag.units||{},cmTag.units[Ba.now()]=e}()}()}Ba.parseBool(e.isStartUnitOnWindowLoaded)?("complete"===document.readyState&&u(),document.onreadystatechange=function(){"complete"===document.readyState&&setTimeout(u,0)}):(0,S.default)("document").ready(u)}function Ha(e){return Ha="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ha(e)}function za(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if("object"!==Ha(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==Ha(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===Ha(o)?o:String(o)),n)}var r,o}function $a(e,t){return $a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},$a(e,t)}function Ga(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=Ya(e);if(t){var r=Ya(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return function(e,t){if(t&&("object"===Ha(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return qa(e)}(this,i)}}function qa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ya(e){return Ya=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ya(e)}var Ka=i(1999),Qa=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$a(e,t)}(a,e);var t,i,n,o=Ga(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,e)).model=e.model,t.model.get("msnWebComponentsEnabled")||t.model.set("height",Ka.getVideoHeight(t.model.get("width"))),t.log=new r.Z({unitType:t.model.get("unitType"),className:t.constructor.name||"UnitController",version:t.model.get("version"),isDebug:t.model.get("isDebug")}),t.containerView=void 0,t.videoView=void 0,t.adService=void 0,t.playerService=void 0,t.isClosedByUser=!1,t.createStateHandlers([{event:"closeState",funcName:"handleCloseState"},{event:"topParentSelectorLost:true",funcName:"_onParentSelectorLost"}]),t.model.listenTo(t.model,"ad:stoppedByUser",t.terminate.bind(qa(t),!0)),t.model.get("placementOffsetValidation.isActive")&&t.createStateHandlers([{event:"isEligibleToPlay:false",funcName:"_checkPlacementPositionChange"}]),t._createTimers(),t._handleMidArticleReadMore(),t}return t=a,(i=[{key:"_createTimers",value:function(){if(this.model.get("isMultiAd")&&this.model.get("midrollTimeout")>0){var e={startCondition:{stateToListen:s().adManagerState.empty,state:"adManagerState"},stopCondition:{stateToListen:s().adManagerState.hasAds,state:"adManagerState"}};this.getAdTimer=new Or(this.model,e,this.terminate.bind(this,!1,"midrollCollapse"),1e3*this.model.get("midrollTimeout"))}else if(this.model.get("isMultiAd")&&this.model.get("secondsToCloseFeed")>0){var t={startCondition:{stateToListen:s().adManagerState.empty,state:"adManagerState"},stopCondition:{stateToListen:s().adManagerState.hasAds,state:"adManagerState"}};this.getAdTimer=new Or(this.model,t,this.pause.bind(this,"midrollCollapse"),1e3*this.model.get("secondsToCloseFeed"))}var i=this.model.get("secondsToClose");if(i>0){var n={startCondition:{stateToListen:!0,state:"firstGetAdFired"},stopCondition:{stateToListen:s().adQState.impression,state:"adQState"},isStartOnce:!0};this.secondsToCloseTimer=new Or(this.model,n,this.terminate.bind(this,!1,"secondsToClose"),1e3*i)}var r=this.model.get("secondsToCloseGlobal");if(r>0){var o={startCondition:{stateToListen:"",state:""}};"showReplay"===this.model.get("onTimerClose")?this.secondsToCloseGlobalTimer=new Or(this.model,o,this.pause.bind(this,"secondsToCloseGlobal"),1e3*this.model.get("secondsToCloseGlobal")):this.secondsToCloseGlobalTimer=new Or(this.model,o,this.terminate.bind(this,!1,"secondsToCloseGlobal"),1e3*r),this.secondsToCloseGlobalTimer.start(this.model,"")}this._createSecondsToPassbackTimer()}},{key:"terminate",value:function(e,t){this.log.info("Terminate reason: "+t),this.isClosedByUser=e,this._setTimerReason(t),this.model.set("closeState",s().closeState.terminate)}},{key:"_setTimerReason",value:function(e){this.model.set("closeTimer",e)}},{key:"handleCloseState",value:function(e,t){switch(this.log.info("handleCloseState",t),T().trigger("global:closeState:changed"),t){case s().closeState.terminate:this.containerView?this.containerView.close(this.isClosedByUser):this.model.set("closeState",s().closeState.containerViewClosed);break;case s().closeState.containerViewClosed:this.nativeAdView&&this.nativeAdView.hide(),this.videoView?this.videoView.close(this.isClosedByUser):this.model.set("closeState",s().closeState.videoViewClosed);break;case s().closeState.videoViewClosed:this.adService?this.adService.close():this.model.set("closeState",s().closeState.adManagerStop);break;case s().closeState.adManagerStop:this.playerService&&(this.playerService.close(),this._stopListening())}}},{key:"_stopListening",value:function(){this.model.off(),T().off()}},{key:"pause",value:function(e){this._setTimerReason(e),this.adService&&this.adService.pauseGetAds()}},{key:"_onParentSelectorLost",value:function(){this.overKill("parentSelectorLost")}},{key:"overKill",value:function(e){this.log.info("overKill reason: "+e),this.adService&&this.adService.pauseGetAds(),this.adsManager&&this.adsManager.pauseGetAds(),this.model.set("closeState",s().closeState.terminate),this._setTimerReason(e)}},{key:"_createSecondsToPassbackTimer",value:function(){this.model.get("secondsToPassback")&&(this.passBackTimer=new Or(this.model,{startCondition:{stateToListen:"",state:""},stopCondition:{stateToListen:!0,state:"isFirstAdLoaded"}},this._triggerPassback.bind(this,"Passback"),1e3*this.model.get("secondsToPassback")),this.passBackTimer.start(this.model,""))}},{key:"_triggerPassback",value:function(){this.model.get("isFirstAdLoaded")||(this.log.info("Passback timer done"),T().trigger("global:passback",{isApiPassbackExist:this.model.get("isApiPassbackExist")}),this.model.set("closeState",s().closeState.terminate))}},{key:"_handleMidArticleReadMore",value:function(){Ka.isReadMoreObserverNeededOnPage(this.model.get("readMoreObserver.isActive"),this.model.get("isHip"))&&(this.readMoreObserver=new Ta({model:this.model}))}},{key:"_checkPlacementPositionChange",value:function(){if(!this.model.get("isEligibleToPlay")&&!this.placementOffsetValidationChecked&&this.model.get("placementOffsetValidation.isActive")&&this.model.get("eligibleContainerOffset")){this.placementOffsetValidationChecked=!0;var e=this.model.get("eligibleContainerOffset"),t=e.left,i=e.top,n=e.el,r=Ka.getOffsetWithContainer(n,this.model.get("offsetGetterType"),this.model.get("videoContainerSelector"));if(r&&(r.top!==i||r.left!==t)){var o={debug:"!url:"+(window&&window.location&&window.location.href?window.location.href:""),yOffset:r.top-i,xOffset:r.left-t};Ka.firePixel(this.model.getPixel("pixels.placementPushedOutOfViewport"),"placement position changed to Out Of Viewport",o)}}}}])&&za(t.prototype,i),n&&za(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(n.O),Za=Qa,Xa=(T().View.extend({className:"_cm-poster",id:"_cm-css-reset",initialize:function(e){this.log=new r.Z({unitType:"Component",className:"PosterView",version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.container=e.container,this.render()},render:function(){this.staticBanner=document.createElement("img"),this.staticBanner.addEventListener("error",this._onError.bind(this));var e=this.model.get("components.PosterView.imageLocation");this.staticBanner.src=e,this.staticBanner.height=this.model.get("height"),this.staticBanner.width=this.model.get("width"),this.staticBanner.onclick=this._onClick.bind(this),this.$el.hide(),this.$el.append(this.staticBanner),this.container.prepend(this.$el)},_onError:function(){T().trigger("error",this.staticBanner,"imageLoadError"),this.$el.hide()},hide:function(){this.$el.hide()},show:function(){this.$el.show()},_onClick:function(e){this.trigger("cm:banner:click")}}),i(9288)),Ja=i(1999),el=i(9652),tl=(Xa.View.extend({className:"_cm-brand-logo",events:{"click ":"_onClick"},initialize:function(e){this.log=new el({unitType:e.unitType,className:"branLogoView"}),this.model=e.model,this.container=e.container,this.options=this.model.get("components.BrandLogo")||{},this.options.imageSrc=this.model.get("components.BrandLogo.imageSrc"),this.openUrl=this._getOpenUrl(),this.render(),this.componentsVisibilityListener=e.componentsVisibilityListener,this.componentsVisibilityListener&&this._setComponentsVisibilityListener()},render:function(){this.template=Ja.template('<a href="javascript:void(0);"> <img src="{{imageSrc}}"/> </a> '),this.$el.append(this.template(this.options)),this.options.style&&this.$el.css(this.options.style),this.options.imageStyle&&this.$el.find("a>img").css(this.options.imageStyle),this.container.appendChild(this.el)},_onClick:function(){window.open(this.openUrl,"_blank")},_getOpenUrl:function(){var e=this.model.get("clickUrl"),t=this.options.logoLander,i=this.options.fallBackClickUrl,n=this._getClickUrlQueryStrings(t);return e&&e.length>0&&-1===e.indexOf("_#")?decodeURIComponent(e)+encodeURIComponent(i)+n:i+n},_getClickUrlQueryStrings:function(e){return"?ttype=1&cipid="+this.model.get("cipid")+"&ttype=1&crid="+this.model.get("creativeId")+"&dast="+this.model.get("dast")+"&tgtf="+encodeURIComponent(e)},_setComponentsVisibilityListener:function(){this.listenTo(this.model,"change:".concat(this.componentsVisibilityListener),this._onComponentsVisibilityChange.bind(this)),this.model.get(this.componentsVisibilityListener)||this.hide()},_onComponentsVisibilityChange:function(){this.model.get(this.componentsVisibilityListener)?this.show():this.hide()},hide:function(){this.$el.hide()},show:function(){this.$el.show()}}),T().View.extend({className:"_cm-click-through",initialize:function(e){this.log=new r.Z({unitType:"Component",className:"ClickThrough",version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.container=e.container,this.link=e.link,this.render()},render:function(){this.$el.click(this.onClick.bind(this)),this.container.appendChild(this.el)},onClick:function(){this.link&&window.open(this.link,"_blank")},hide:function(){this.$el.hide()},show:function(){this.$el.show()},updateLink:function(e){this.link=e}}),i(1231)),il='<?xml version="1.0" encoding="utf-8"?> <svg version="1.1" id="_x2014_ÎÓÈ_x5F_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 99 99" xml:space="preserve"> <style>.st0{fill:#fff}</style> <g> <g stroke="null" id="svg_1"> <g stroke="null" id="svg_2"> <path stroke="null" id="svg_3" d="m82.77256,91.4817c-1.64243,0 -3.25444,-0.644 -4.50148,-1.9964l-65.57555,-69.42328c-2.49406,-2.6404 -2.49406,-6.92301 0,-9.56341c2.49406,-2.6404 6.53931,-2.6404 9.03337,0l65.57555,69.45548c2.49406,2.6404 2.49406,6.92301 0,9.56341c-1.24703,1.3202 -2.88946,1.9642 -4.53189,1.9642z" class="st0"/> </g> <g stroke="null" id="svg_4"> <path stroke="null" id="svg_5" d="m17.19702,91.4817c-1.64243,0 -3.25444,-0.644 -4.50148,-1.9964c-2.49406,-2.6404 -2.49406,-6.92301 0,-9.56341l65.57555,-69.42328c2.49406,-2.6404 6.53931,-2.6404 9.03337,0c2.49406,2.6404 2.49406,6.92301 0,9.56341l-65.57555,69.45548c-1.24703,1.3202 -2.88946,1.9642 -4.53189,1.9642z" class="st0"/> </g> </g> </g> </svg> ',nl=i(9288),rl=i(1999),ol=i(9652),sl=i(9831),al=nl.View.extend({className:"_cm-close-area",id:"_cm-close-area",events:{"click ":"_onClick"},initialize:function(e){this.log=new ol({unitType:e.unitType,className:"closeButtonView"}),this.container=e.container,this._rendered=!1,this._bindEvents(),this.createStateHandlers=tl.L,this.componentsVisibilityListener=e.componentsVisibilityListener,this.componentsVisibilityListener&&this._setComponentsVisibilityListener()},render:function(){if(!this._rendered){this._rendered=!0,this.$el.append(il);var e=this.model.get("wurfl.browser.name").toLowerCase();-1===e.indexOf(t().BROWSER.FIREFOX.toLowerCase())&&-1===e.indexOf(t().BROWSER.IE.toLowerCase())&&-1===e.indexOf(t().BROWSER.EDGE.toLowerCase())||this.$el.addClass("_cm-close-ie-fix"),this.container=rl.isArray(this.container)?this.container[0]:this.container,this.container.appendChild(this.el),(this.model.get("detachToSlider.isStartFromSlider")||this.model.get("detachToSlider.isDetachToSlider"))&&("detached"===this.model.get("videoViewState")?this.show():this.hide())}},_bindEvents:function(){this.model.get("vForce.isActive")?this.listenTo(this.model,"change:adState",this._onStateChange):this.listenTo(this.model,"change:state",this._onStateChange),(this.model.get("detachToSlider.isStartFromSlider")||this.model.get("detachToSlider.isDetachToSlider"))&&this.listenTo(this.model,"change:videoViewState",this._onVideoViewStateChange)},_onPlaying:function(){var e=this.model.get("components.CloseButtonView.delay");this.renderTimeout=setTimeout(this.render.bind(this),e)},_onClick:function(e){e.stopPropagation(),this.model.get("onClose")||"OMNI_TAG"==this.model.get("unitType")||rl.firePixel(this.model.getPixel("pixels.close"),"close (user clicked the close button)"),this.model.set("state",this.model.STATE.STOPPED_BY_USER),nl.trigger("Ad:stoppedByUser"),this.model.trigger("ad:stoppedByUser",sl.closeState.terminate)},_onStateChange:function(e,t){t!==e.STATE.PLAYING&&t!==sl.adState.playing||this._onPlaying()},_onVideoViewStateChange:function(e,t){switch(t){case"detached":this.show();break;case"attached":this.hide()}},_setComponentsVisibilityListener:function(){this.listenTo(this.model,"change:".concat(this.componentsVisibilityListener),this._onComponentsVisibilityChange.bind(this)),this.model.get(this.componentsVisibilityListener)||this.hide()},_onComponentsVisibilityChange:function(){this.model.get(this.componentsVisibilityListener)?this.show():this.hide()},hide:function(){this.$el.hide()},show:function(){this.$el.show()}}),ll=i(9288),cl=i(1999),ul=i(9652),dl=i(9831),hl=(ll.View.extend({className:"_cm-close-area",id:"_cm-close-area",closeButtonRenderd:!1,events:{"click ":"_onClick"},initialize:function(e){this.log=new ul({unitType:e.unitType,className:"closeButtonView"}),this.container=e.container,this._rendered=!1,this._bindEvents(),this.createStateHandlers=tl.L,this.render(),this.hide()},render:function(){this._rendered||(this._rendered=!0,this.isInDelay=!1,this.$el.append(il),this.container.appendChild(this.el))},_bindEvents:function(){this.listenTo(this.model,"change:state",this._onStateChange),this.listenTo(this.model,"change:adState",this._onStateChange),(this.model.get("detachToSlider.isStartFromSlider")||this.model.get("detachToSlider.isDetachToSlider"))&&this.model.get("detachToSlider.hasCloseButton")&&this.listenTo(this.model,"change:videoViewState",this._onVideoViewStateChange)},_onPlaying:function(){this.model.get("videoViewState")!==dl.videoViewState.attached||this.model.get("hasCloseButton")?this._startRender():this.isInDelay&&(this.closeButtonRenderd=!1,clearTimeout(this.delayTimeout))},_startRender:function(){if(this.closeButtonRenderd)this.show();else{this.closeButtonRenderd=!0;var e=this.model.get("components.CloseButtonView.delay");this.isInDelay=!0,this.delayTimeout=setTimeout(this.render.bind(this),e)}},_onClick:function(){this.model.get("onClose")||"OMNI_TAG"==this.model.get("unitType")||cl.firePixel(this.model.getPixel("pixels.close"),"close (user clicked the close button)"),this.model.set("state",this.model.STATE.STOPPED_BY_USER),ll.trigger("Ad:stoppedByUser"),this.model.trigger("ad:stoppedByUser")},_onStateChange:function(e,t){if("playing"===t)this._onPlaying()},_onVideoViewStateChange:function(e,t){"detached"===t&&!this.closeButtonRenderd&&this.model.get("detachToSlider.hasCloseButton")&&this._startRender(),"attached"!==t||this.model.get("hasCloseButton")||this.hide()},hide:function(){this.$el.hide()},show:function(){this.$el.show()}}),i(9288)),fl=i(1999),pl=i(9652),ml=hl.View.extend({className:"_cm-d2d-fallback",initialize:function(e){this.log=new pl({unitType:e.unitType,className:"D2dFallbackView"}),this.model=e.model,this.container=e.container,this.isTrusted=!0,this.pubId=e.pubId?e.pubId:this.model.get("components.D2DFallbackView.pubId"),this.pubTagId=e.pubTagId?e.pubTagId:this.model.get("components.D2DFallbackView.pubTagId"),this.render(),this.componentsVisibilityListener=e.componentsVisibilityListener,this.componentsVisibilityListener&&this._setComponentsVisibilityListener()},render:function(){this.$el.append('<iframe style="width:100%;height:100%" frameborder="0" border="0" padding="0" scrolling="no" marginwidth="0" marginheight="0"></iframe> '),this._customize(),(0,S.default)(this.container).append(this.$el),this.iframe=this.$el.find("iframe")[0],this.iframe.contentWindow?this._writeIframe():this.iframe.onload=this._writeIframe.bind(this),fl.firePixel(this.model.getPixel("pixels.D2DFallback"),"D2DFallback")},_writeIframe:function(){this.iframe.onload=this.iFrameOnLoad.bind(this);var e=this.iframe.contentWindow.document;e.open(),e.write('<script type="text/javascript" src="'.concat(this.buildFallbackURL(),'"><\/script>')),e.close(),e.onclick=this._onClick.bind(this)},iFrameOnLoad:function(){var e=(0,S.default)(this.iframe.contentWindow.document.body);(0,S.default)("div",e).length>0&&this.model.set("d2dLoaded",!0)},buildFallbackURL:function(){return"".concat(this.model.get("components.D2DFallbackView.location"),"?")+"oid=15"+"&width=".concat(this.model.get("components.D2DFallbackView.width"))+"&height=".concat(this.model.get("components.D2DFallbackView.height"))+"&pubid=".concat(this.pubId)+"&tagid=".concat(this.pubTagId)+"&pstn=".concat(this.model.get("components.D2DFallbackView.pstn"))+"&cirf=".concat(this.model.get("referrer"))+"&noaop=1&revmod=INSERT_CONTENT_TYPE&encoded=1&cb=INSERT_CACHEBUSTER&keywords=INSERT_COMMA_SEPARATED_KEYWORDS&urlonly=1&callback=document.write"},hide:function(e){this.log.info("D2D hide:",e),e?this.$el.css({display:"none"}):this.$el.css({display:"block"})},show:function(){this.$el.css({display:"block"})},_onClick:function(e){this.isTrusted=!0,e.isTrusted?window.setTimeout(this._onTimeoutEnd.bind(this),1e3*this.model.get("clickTestSeconds")):fl.firePixel(this.model.getPixel("pixels.D2DClickSuspicious"),"Suspicious D2DClick")},_onTimeoutEnd:function(){wo(this.model)?fl.firePixel(this.model.getPixel("pixels.D2DClickSuspicious"),"Suspicious D2DClick"):fl.firePixel(this.model.getPixel("pixels.D2DClick"),"D2DClick")},_customize:function(){var e=this.model.get("components.D2DFallbackView.additionalCss");this.$el.css(fl.toCssObj(e))},updateD2D:function(e,t){this.iframe&&this.pubId!=e&&this.pubTagId!=t&&(this.pubId=e,this.pubTagId=t,this._writeIframe())},_setComponentsVisibilityListener:function(){this.listenTo(this.model,"change:".concat(this.componentsVisibilityListener),this._onComponentsVisibilityChange.bind(this)),this.model.get(this.componentsVisibilityListener)||this.hide(!0)},_onComponentsVisibilityChange:function(){this.model.get(this.componentsVisibilityListener)?this.show():this.hide(!0)}}),yl=(i(9836),'<div id="_cm-css-reset" class="_cm-repeat-div"> <div class="_cm-repeat-view-wrapper"> <div class="_cm-repeat-buttons-wrapper"> <img class="_cm-repeat-button"/> <img class="_cm-repeat-button-hover"/> </div> <div class="_cm-learn-more-buttons-wrapper"> <img class="_cm-learn-more-button"/> <img class="_cm-learn-more-button-hover"/> </div> </div> </div> '),vl=i(2384),gl=T().View.extend({className:"_cm-loading",id:"_cm-css-reset",initialize:function(e){this.log=new r.Z({unitType:"Component",className:"LoadingView",version:this.model.get("version"),isDebug:this.model.get("isDebug")}),e.globalModel&&(this.globalModel=e.globalModel),this.container=e.container,this.isShowReplayScreen=e.isStartWithReplay,this.isReplayable=e.isReplayable,this._createStatesAction(),this._bindEvents(),this.render()},_bindEvents:function(){this.listenTo(this.model,"change:adQState",this._onAdStateChange.bind(this,this.adStateActions)),this.listenTo(this.model,"change:adManagerState",this._onAdStateChange.bind(this,this.getAdStateActions)),this.model.on("change:viewTopComponent",this._toggleLoadingVisibility,this),this.model.on("change:repeatState",this._onReplayAdShowing,this),this.globalModel&&this.listenTo(this.globalModel,"change:adManagerState",this._onGlobalModelAdStateChange.bind(this,this.getAdStateActions))},_createStatesAction:function(){this.adStateActions={q0:this._onAdPlaying.bind(this),completed:this._onVideoComplete.bind(this),stopped:this._stop.bind(this)},this.getAdStateActions={stopped:this._stop.bind(this)}},_onGlobalModelAdStateChange:function(e,t,i){if(i==o.adManagerState.stopped){var n=e[i];n&&n()}},_onAdStateChange:function(e,t,i){var n=e[i];n&&n()},render:function(){this.$el.append('<div class="_cm-loading-div"></div> '),this.loadingDiv=this.$el.find("._cm-loading-div"),"css"==this.model.get("components.Loading.type")?this.loadCss():"img"==this.model.get("components.Loading.type")&&this.loadImage(),this._applyAdditionalCss(),this.isShowReplayScreen&&this.$el.css("background","transparent"),this.$el.hide(),this.container.appendChild(this.el),this._renderReapet(),this.currentActiveImage=this.innerDisplay},_renderReapet:function(){this.repeatEl=(0,S.default)(yl),this._setBackground(),this._setRepeatIcon(),this.learnMoreWrapper=this.repeatEl.find("._cm-learn-more-buttons-wrapper"),this.learnMoreWrapper.hide(),this.model.get("renderLearnMore")&&this._setLearnMoreIcon(),this.repeatEl.hide(),this.loadingDiv.append(this.repeatEl)},_setRepeatIcon:function(){this.repeatViewWrapper=this.repeatEl.find("._cm-repeat-view-wrapper"),this.repeatButtonsWrapper=this.repeatEl.find("._cm-repeat-buttons-wrapper");var e,t,i=this.repeatEl.find("._cm-repeat-button"),n=this.repeatEl.find("._cm-repeat-button-hover");this._isTranslationExist()?(e=this.model.get("components.Repeat.replayIconByLang"),t=this.model.get("components.Repeat.replayHoverIconByLang")):(e=this.model.get("components.Repeat.replayIcon"),t=this.model.get("components.Repeat.replayHoverIcon")),this._setButtonSrc(i,n,e,t)},_setLearnMoreIcon:function(){var e,t,i=this.repeatEl.find("._cm-learn-more-button"),n=this.repeatEl.find("._cm-learn-more-button-hover");this._isTranslationExist()?(e=this.model.get("components.Repeat.learnMoreIconByLang"),t=this.model.get("components.Repeat.learnMoreHoverIconByLang")):(e=this.model.get("components.Repeat.learnMoreIcon"),t=this.model.get("components.Repeat.learnMoreHoverIcon")),this._setButtonSrc(i,n,e,t),this.model.get("adClickThroughUrl")?this.repeatEl.click(this._onLearnMoreClick.bind(this)):this.listenTo(this.model,"change:adClickThroughUrl",this._updateLearnMoreUrl)},_isTranslationExist:function(){return this.model.get("components.Repeat.isTranslateText")&&this.model.get("language")&&vl[this.model.get("language").toUpperCase()]},_setButtonSrc:function(e,t,i,n){e.attr("src",i),t.attr("src",n)},_setBackground:function(){var e=this.model.get("components.Repeat.backgroundImage");this.repeatEl.css("background-image",'url("'+e+'") !important')},loadCss:function(){var e=document.createElement("div");e.className="_cm-loading-icon",this.loadingDiv.append(e),this.innerDisplay=(0,S.default)(e)},loadImage:function(){var e=document.createElement("img");e.src=this.model.get("components.Loading.imgUrl"),e.className="_cm_loader_img",this.loadingDiv.append(e),this.innerDisplay=(0,S.default)(e)},hide:function(){this.isRepeatShowing=!1,this.$el.hide(),this._setModel("loadingViewState",o.loadingViewState.hiding)},show:function(){this.isShowReplayScreen&&this._showRe(),this.$el.show(),this._setLoadingViewSize(this.currentActiveImage.width(),this.currentActiveImage.height()),this._setModel("loadingViewState",o.loadingViewState.showing)},showRepeat:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._stop(e),this.globalModel.increaseCounter("repeatShown")},_onRepeatClick:function(e){e.stopPropagation(),this.log.info("User click"),this.clickEventRegistered=!1,this._setModel("loadingViewState",o.loadingViewState.clicked),this.repeatEl.hide(),this.innerDisplay.show(),this.currentActiveImage=this.innerDisplay,this._setLoadingViewSize(this.currentActiveImage.width(),this.currentActiveImage.height())},_onLearnMoreClick:function(e){Bi().clickThru.call(this,this.model.get("adClickThroughUrl")),this._triggerModel("change:learnMoreClick",this.learnMoreWrapper),this.model.increaseCounter("learnMoreWasClicked",!0)},_onAdPlaying:function(){this.hide()},_onVideoComplete:function(){var e=this.model.get("activeAdData");this.model.get("displayFiller.betweenAds")!==t().DISPLAY_FILLER.BETWEEN_ADS.CONTENT&&e&&!e.singleAd&&this.show()},_stop:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.model.get("isAdClosedByTimer")||this.model.get("closeState")||(this.clickEventRegistered||(this.repeatButtonsWrapper.one("click",this._onRepeatClick.bind(this)),this.clickEventRegistered=!0),this.show(),this.innerDisplay.hide(),this.currentActiveImage=this.repeatEl,this._setLoadingViewSize("auto","auto"),this.learnMoreWrapper&&this.model.get("adClickThroughUrl")&&this.model.get("renderLearnMore")&&this.learnMoreWrapper.show(),this.isReplayable||this.repeatButtonsWrapper.hide(),e&&this.repeatViewWrapper.addClass("_cm-repeat-view-wrapper-detached"),this.repeatEl.show())},_showRe:function(){this.isRepeatShowing||(this.innerDisplay.hide(),this.clickEventRegistered||(this.repeatButtonsWrapper.one("click",this._onRepeatClick.bind(this)),this.clickEventRegistered=!0),this.currentActiveImage=this.repeatEl,this._setLoadingViewSize("auto","auto"),this.learnMoreWrapper&&this.model.get("adClickThroughUrl")&&this.model.get("renderLearnMore")&&this.learnMoreWrapper.show(),this.isReplayable||this.repeatButtonsWrapper.hide(),this.repeatEl.show(),this.isRepeatShowing=!0)},_setLoadingViewSize:function(e,t){this.loadingDiv.css({width:e,height:t})},_setModel:function(e,t){this.globalModel&&this.globalModel.set(e,t),this.model.set(e,t)},_triggerModel:function(e,t){this.globalModel&&this.globalModel.trigger(e,t),this.model.trigger(e,t)},_applyAdditionalCss:function(){var e=this.model.get("additionalCss");e&&((e["z-index"]||e.zIndex)&&this.$el.css({"z-index":e["z-index"]}))},_updateLearnMoreUrl:function(){this.model.get("adClickThroughUrl")&&(this.repeatEl.click(this._onLearnMoreClick.bind(this)),this.learnMoreWrapper.show())},_toggleLoadingVisibility:function(){var e=this.model.get("viewTopComponent");this.log.info("_onTopComponentChange",e),e===t().FLOATING_VIEW_TOP_COMPONENT.loading?this.show():this.hide()},_onReplayAdShowing:function(){this.model.get("repeatState")===o.repeatState.showing&&this.hide()},resize:function(e){this._isLoadingViewDisplayed()&&this.loadingDiv.css(e)},onAttach:function(){this._isLoadingViewDisplayed()&&this.repeatViewWrapper.removeClass("_cm-repeat-view-wrapper-detached")},_isLoadingViewDisplayed:function(){return this.model.get("loadingViewState")===o.loadingViewState.showing}}),bl=i(9288),_l=i(1999),wl=i(9652),Sl=i(9831),Pl=(bl.View.extend({events:{"click ._cm-opt-button":"toggleDialog","click ._cm-cancel":"hideDialog","click ._cm-submit":"submitDialog"},id:"_cm-opt-out-view",className:"_cm-opt-out-view",initialize:function(e){this.log=new wl({unitType:e.unitType,className:"optOut"}),this.container=e.container,this.render(),this.componentsVisibilityListener=e.componentsVisibilityListener,this.componentsVisibilityListener&&this._setComponentsVisibilityListener()},render:function(){this.$el.append('<div class="_cm-opt-out"> <div class="_cm-opt-button"></div> <div class="_cm-opt-dialog"> <div id="" class="_cm-opt-message">Never show me Video ads</div> <textarea class="_cm-opt-text" placeholder="What was the problem with this ad?"></textarea> <div> <button type="button" class="_cm-cancel">Cancel</button> <button type="button" class="_cm-submit">Send</button> </div> </div> </div> '),(0,S.default)(this.container).prepend(this.$el),this.ui={},this.ui.Dialog=this.$el.find("._cm-opt-dialog"),this.hideDialog()},toggleDialog:function(){"none"===this.ui.Dialog.get(0).style.display?this.showDialog():this.hideDialog()},showDialog:function(){this.$el.trigger("cm:optout:dialog:show"),this.ui.Dialog.show()},hideDialog:function(){this.$el.trigger("cm:optout:dialog:hide"),this.ui.Dialog.hide()},submitDialog:function(){var e=this.el.querySelector("._cm-opt-text").value,t=this.model.getPixel("pixels.optOutNever")+"&userComplaint="+e;_l.firePixel(t,"Never OptOut"),this.hideDialog(),this.model.set("state",this.model.STATE.OPT_OUT),this.model.set("closeState",Sl.closeState.terminate),this.$el.trigger("cm:optout:submit")},hide:function(){this.$el.hide()},show:function(){this.$el.show()},_setComponentsVisibilityListener:function(){this.listenTo(this.model,"change:".concat(this.componentsVisibilityListener),this._onComponentsVisibilityChange.bind(this)),this.model.get(this.componentsVisibilityListener)||this.hide()},_onComponentsVisibilityChange:function(){this.model.get(this.componentsVisibilityListener)?this.show():this.hide()}}),i(9288)),Tl=i(1999),Al=i(9652),El=Pl.View.extend({errorCount:0,events:{"click ._cm-playlist-item":"_onItemClick"},initialize:function(e){this.log=new Al({unitType:"playlist-item",className:"PlayListView"}),this.model=e.model,this.container=e.container,this._bindEvents(),this.render()},_bindEvents:function(){this.listenTo(this.model,"change:active",this.setActive)},render:function(){var e={image:this.model.get("image"),title:this.model.get("title")},t=Tl.template('<li class="_cm-playlist-item"> <img class="_cm-playlist-img" src="{{image}}"/> <span class="_cm-playlist-text">{{title}}</span> </li> ')(e);this.$el.append(t),(0,S.default)(this.container).append(this.$el),this._item=this.$el.find("._cm-playlist-item")},_onItemClick:function(e){this.model.set("clicked",!0)},setActive:function(e,t){t?this._item.addClass("active"):this._item.removeClass("active")}}),Cl=i(6042),Ol=i.n(Cl),kl=(i(9306),i(1999),T().View.extend({errorCount:0,className:"_cm-playlist",initialize:function(e){this.log=new r.Z({unitType:"playlist",className:"PlayListView"}),this.playListCollection=new(Ol()),this.container=e.container,this._playlist=e.playlist,this._height=e.height||350,this._itemCount=parseInt(this._height/74),this._itemCount=Math.min(this._playlist.length,this._itemCount),this._playlist=this._playlist.slice(0,this._itemCount),this._height=Math.min(this._height,74*this._itemCount),this._bindEvents(),this.render()},_bindEvents:function(){this.listenTo(T(),"change:player:content",this._onContentChanged),this.listenTo(this.model,"change:state",this._onStateChange),this.listenToOnce(this.playListCollection,"change:clicked",this._itemSelected)},render:function(){this.$el.append('<ul class="_cm-playlist-list"></ul> '),(0,S.default)(this.container).append(this.$el),this._playlist_list=this.$el.find("._cm-playlist-list"),this.$el.css({height:parseInt(this._height)})},_setPlayList:function(){this.playListCollection.length>0||(this.playListCollection.add(this._playlist),this.playListCollection.forEach((function(e){new El({model:e,container:this._playlist_list})}),this),this.playListCollection.first().set("active",!0))},_onStateChange:function(e,t){if(t===e.STATE.PLAYER_READY)this._setPlayList()},_itemSelected:function(e){e.set("clicked",!1),this._playItem(e),this.listenToOnce(this.playListCollection,"change:clicked",this._itemSelected)},_playItem:function(e){if(!this._playlist_list.hasClass("unclickable")){var t=this.playListCollection.findWhere({active:!0});t&&t.set("active",!1),e.set("active",!0),this.$el.trigger("_cm-unit-play",e.attributes)}},_onContentChanged:function(e){this.log.important("On content changed",e);var t=this.playListCollection.findWhere({active:!0});t&&t.set("active",!1),(t=this.playListCollection.findWhere({id:e.id}))&&t.set("active",!0)},playNext:function(){var e=this.playListCollection.findWhere({active:!0}),t=this.playListCollection.indexOf(e)+1;t>=this._itemCount&&(t=0),this._playItem(this.playListCollection.at(t))},setUnclickable:function(e){e?this._playlist_list.addClass("unclickable"):this._playlist_list.removeClass("unclickable")}}),i(1999)),Dl=i(2384),Rl=T().View.extend({className:"_cm-repeat",id:"_cm-css-reset",initialize:function(e){this.log=new r.Z({unitType:"Component",className:"RepeatView",version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.container=e.container,this.active=!1,this._createStatesAction(),this._bindEvents(),this._render()},_render:function(){this.repeatEl=(0,S.default)(yl),this._setRepeatIcon(),this.learnMoreWrapper=this.repeatEl.find("._cm-learn-more-buttons-wrapper"),this.learnMoreWrapper.hide(),this.model.get("renderLearnMore")&&this._setLearnMoreIcon(),this._setBackground(),this.$el.hide(),this.$el.append(this.repeatEl),this.container.appendChild(this.el)},_setRepeatIcon:function(){this.repeatWrapper=this.repeatEl.find("._cm-repeat-buttons-wrapper");var e,t,i=this.repeatEl.find("._cm-repeat-button"),n=this.repeatEl.find("._cm-repeat-button-hover");this._isTranslationExist()?(e=this.model.get("components.Repeat.replayIconByLang"),t=this.model.get("components.Repeat.replayHoverIconByLang")):(e=this.model.get("components.Repeat.replayIcon"),t=this.model.get("components.Repeat.replayHoverIcon")),this._setButtonSrc(i,n,e,t),this.repeatWrapper.click(this._onClick.bind(this))},_setLearnMoreIcon:function(){var e,t,i=this.repeatEl.find("._cm-learn-more-button"),n=this.repeatEl.find("._cm-learn-more-button-hover");this._isTranslationExist()?(e=this.model.get("components.Repeat.learnMoreIconByLang"),t=this.model.get("components.Repeat.learnMoreHoverIconByLang")):(e=this.model.get("components.Repeat.learnMoreIcon"),t=this.model.get("components.Repeat.learnMoreHoverIcon")),this._setButtonSrc(i,n,e,t),this.model.get("adClickThroughUrl")?this.learnMoreWrapper.click(this._onLearnMoreClick.bind(this)):this.listenTo(this.model,"change:adClickThroughUrl",this._updateLearnMoreUrl)},_isTranslationExist:function(){return this.model.get("components.Repeat.isTranslateText")&&this.model.get("language")&&Dl[this.model.get("language").toUpperCase()]},_setButtonSrc:function(e,t,i,n){e.attr("src",i),t.attr("src",n)},_setBackground:function(){var e=this.model.get("components.Repeat.backgroundImage");this.repeatEl.css("background-image",'url("'+e+'") !important')},hide:function(){this.$el.hide(),this.active=!1,this.isSpinning=!1,this.model.set("repeatState",o.repeatState.hiding)},show:function(){this.learnMoreWrapper&&this.model.get("adClickThroughUrl")&&this.model.get("renderLearnMore")&&this.learnMoreWrapper.show(),this.repeatWrapper&&this.model.get("dontRenderRepeatButton")&&this.repeatWrapper.hide(),this.$el.show(),this.active=!0,this.model.set("repeatState",o.repeatState.showing)},_bindEvents:function(){this.listenTo(this.model,"change:adQState",this._onAdStateChange)},_onClick:function(e){e.stopPropagation(),this.isSpinning||this.model.getPixel&&kl.firePixel(this.model.getPixel("pixels.repeatClick"),"repeat click Pixel"),this.model.set("repeatState",o.repeatState.clicked),this.trigger("cm:repeat:click")},_createStatesAction:function(){this.adStateActions={q0:this._onAdPlaying.bind(this),completed:this._onVideoComplete.bind(this),repeating:this._onAdPlaying.bind(this)}},_onAdStateChange:function(e,t){var i=this.adStateActions[t];i&&i()},_onAdPlaying:function(){var e=this;setTimeout((function(){e.hide()}),100)},_onVideoComplete:function(){this.model.get("isReplayAd")&&this.show()},_onLearnMoreClick:function(e){kl.clickThru.call(this,this.model.get("adClickThroughUrl")),this.model.increaseCounter("learnMoreWasClicked",!0)},_updateLearnMoreUrl:function(){this.model.get("adClickThroughUrl")&&(this.learnMoreWrapper.click(this._onLearnMoreClick.bind(this)),this.learnMoreWrapper.show())},addAdditionalCss:function(e){(0,S.default)(this.repeatEl).addClass(e)}}),Il=i(9288),xl=(i(1999),i(9652)),Nl=i(2023),Vl=(Il.View.extend({className:"_cm-timer",initialize:function(e){this.log=new xl({unitType:e.unitType,className:"timerView"}),this.container=e.container,this._time=Number(e.time)||Number(this.model.get("components.TimerView.time")),this._isHide=e.isHide,this._stepTime=1,this.render()},render:function(){this.$el.append(Nl),this.hide(),this.container.appendChild(this.el),this.$el.find("._cm-timer-circle ._cm-timer-mask, ._cm-timer-circle ._cm-timer-fill").css("transition","transform "+this._stepTime+"s linear"),this._innerText=this.$el.find("._cm-timer-inset>span")},startTimer:function(){this.log.info("Timer start"),0!==this._time?(this._currentTimer=this._stepTime,this._innerText.text(parseInt(this._time)),this._setDegree(180/this._time*this._currentTimer),window.setTimeout(this._timerUpdate.bind(this),1e3*this._stepTime)):this._finish()},_timerUpdate:function(){if(this._innerText.text(parseInt(this._time-this._currentTimer)),this._currentTimer+=this._stepTime,this._currentTimer>this._time)this._finish();else{var e=180/this._time*this._currentTimer;this._setDegree(e),window.setTimeout(this._timerUpdate.bind(this),1e3*this._stepTime)}},_setDegree:function(e){this.$el.find("._cm-timer-circle ._cm-timer-fill, ._cm-timer-circle ._cm-timer-mask._cm-timer-full").css("transform","rotate("+e+"deg)"),this.$el.find("._cm-timer-circle ._cm-timer-fill._cm-timer-fix").css("transform","rotate("+2*e+"deg)")},_finish:function(){this._isHide&&this.hide(),this.$el.trigger("cm:timer:finish")},hide:function(){this.$el.hide()}}),i(1999)),Ll="._cm-branding-view-title-text",jl="._cm-branding-view-branding-text",Bl=(T().View.extend({className:"_cm-branding-title",id:"_cm-css-reset",events:{},initialize:function(e){this.log=new r.Z({unitType:"Component",className:"BrandingTitleView",version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.container=e.container,this.render(),this.bindEvents()},bindEvents:function(){this.model.listenTo(this.model,"change:customization.titleContainer.branding",this._customize.bind(this)),this.model.listenTo(this.model,"change:customization.titleContainer.branding.displayState",this._onDisplayStateChange.bind(this))},render:function(){this.template=Vl.template('<span class="_cm-branding-view-title-text">{{titleContainer.titleText}}</span> <span class="_cm-branding-view-branding-text">{{titleContainer.BrandingText}}</span> '),this.$el.append(this.template(this.model.attributes)),this.ui={title:this.$el.find(Ll),branding:this.$el.find(jl)},this._customize(),this.container.appendChild(this.el),this.model.get("isFitToSize")&&this._fitToSize()},_customize:function(){var e=this.model.get("customization.titleContainer.title"),t=this.model.get("customization.titleContainer.branding");e&&((e=Vl.toCssObj(e)).height="auto",this.ui.title.css(e)),t&&((t=Vl.toCssObj(t)).height="auto",this.ui.branding.css(t))},_fitToSize:function(){var e=(0,S.default)(this.container).height(),t=this.model.get("videoPlaceholderSize");e&&t&&(Number(t.height)+this.$el.height()>=e?Number(t.height)+this.ui.title.height()<e?this._hideDescription():this._hide():this._show())},_hide:function(){this.$el.hide()},_show:function(){this.$el.show()},_onDisplayStateChange:function(e){e===o.brandingDisplayState.show?this._showAndFitToSize():this._hide()},_showAndFitToSize:function(){this._show(),this._fitToSize()},_hideDescription:function(){this.ui.branding.hide()}}),i(9288)),Ml=(i(1999),i(9652)),Fl=Bl.View.extend({className:"_cm-disc-text",id:"_cm-css-reset",initialize:function(e){this.log=new Ml({unitType:e.unitType,className:"disclosureTextView"}),this.disclosureText='<div class="title text opt-out-hidden">{text}</div> ',this.container=e.container,this._rendered=!1,this._bindEvents(),this.createStateHandlers=tl.L},render:function(){this._rendered||(this._rendered=!0,this.container.appendChild(this.el),"detached"===this.model.get("videoViewState")?this.model.get("detachToSlider.components.disclosureText.isActive")?this.show():this.hide():this.model.get("components.disclosureText.isActive")?this.show():this.hide())},_bindEvents:function(){(this.model.get("detachToSlider.isStartFromSlider")||this.model.get("detachToSlider.isDetachToSlider"))&&this.listenTo(this.model,"change:videoViewState",this._onVideoViewStateChange)},_onVideoViewStateChange:function(e,t){switch(t){case"detached":0==this.model.get("detachToSlider.components.disclosureText.isActive")?this.hide():this.show();break;case"attached":this.model.get("components.disclosureText.isActive")?this.show():this.hide()}},hide:function(){this.$el.hide()},show:function(){var e="detached"===this.model.get("videoViewState")?this.model.get("detachToSlider.components.disclosureText.text"):this.model.get("components.disclosureText.text");this.$el[0].innerHTML="",this.$el.append(this.disclosureText.replace("{text}",e)),this.$el.show()}}),Ul=i(9288),Wl=i(1999),Hl=i(3474),zl=Ul.View.extend({events:{click:"_openAdChoice"},className:"_cm-ad-choice",initialize:function(t){this.log=new r.Z({unitType:this.model.get("unitType"),className:"AdChoice",version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.log.info("Ad Choice ".concat(t.type," initialized.")),this.container=t.container,this.parentPlaceholder=t.parent,this.placementType=t.type,this.shouldHandelDetachAttach=e.UNIT_TYPES[this.model.get("unitType")]===e.UNIT_TYPES.FEED_MANAGER&&this.placementType!==e.AD_CHOICE_TYPE.TITLE,this.placementModel=this._getAdChoicePlacementModel(t.type),this.titlePosition=this.model.get("components.adChoice.position"),this.icon=this.model.get("components.adChoice.icon"),this._translateText(),this._bindEvents(),this.render(),this._firstVideoViewStateHandle(),this.componentsVisibilityListener=t.componentsVisibilityListener,this.componentsVisibilityListener&&this._setComponentsVisibilityListener()},forceShowAdChoice:function(){this._show()},render:function(){this.template=Wl.template('<a class="_cm-ad-choice-text" target="_blank">{{text}}</a> <a class="_cm-ad-choice-logo" target="_blank"></a> '),this.$el.append(this.template(this.placementModel)),this.$el.children("._cm-ad-choice-logo").css({background:"url("+this.icon+") no-repeat"}),this.placementModel.isActive&&(this.placementModel.adViewStyle&&this.$el.css(Wl.toCssObj(this.placementModel.adViewStyle)),this.$el.find("._cm-ad-choice-text").css(Wl.toCssObj(this.placementModel.style)),this.$el.find("._cm-ad-choice-logo").css(Wl.toCssObj(this.placementModel.logoStyle))),this._setAdChoiceUrl(),this._alignTitle(),(0,S.default)(this.container).append(this.el)},_bindEvents:function(){this.shouldHandelDetachAttach&&(this.log.info("Ad Choice ".concat(this.placementType," is listening to videoViewState")),this.listenTo(this.model,"change:videoViewState",this._handleVideoViewState.bind(this))),this.listenTo(this.model,"change:adPlayingWithAdChoice",this._onAdPlayingWithAdChoiceChange.bind(this)),this.listenTo(this.model,"change:content.isContentPlay",this._onAdPlayingWithAdChoiceChange.bind(this)),this.listenTo(this.model,"change:adjustWideFeed",this._onAdjustWideFeed.bind(this));var t=this.model.get("wurfl.browser.name");t!==e.BROWSER.IE&&t!==e.BROWSER.EDGE||this.listenTo(this.model,"change:isExpandEnded",this._onExpandEnded.bind(this))},_onExpandEnded:function(){this.log.info("onExpandEnded - IE or Edge detected");var e=this;this.$el.hide(),window.setTimeout((function(){e.$el.show()}),0)},_getAdChoicePlacementModel:function(t){var i;switch(t){case e.AD_CHOICE_TYPE.TITLE:i=this.model.get("components.adChoice.title");break;case e.AD_CHOICE_TYPE.VIDEO_AD:i=this.model.get("components.adChoice.videoAd");break;case e.AD_CHOICE_TYPE.SLIDER:i=this.model.get("components.adChoice.slider");break;default:i={text:"",style:{},logoStyle:{}}}return i},_getSCardSelector:function(){var t;switch(e.UNIT_TYPES[this.model.get("unitType")]){case e.UNIT_TYPES.WIDGET_ITEM:t='*[data-placement-name="'+this.model.get("placement")+'"]';break;case e.UNIT_TYPES.FEED_MANAGER:t=".tbl-feed-container .trc-content-sponsored";break;case e.UNIT_TYPES.INLINE_INSTREAM:case e.UNIT_TYPES.INLINE:case e.UNIT_TYPES.SLIDER_INSTREAM:t=".trc_rbox_container .trc-content-sponsored";break;default:t=""}return t},_setAdChoiceUrl:function(){this._selector=this._getSCardSelector();var e=this._extractUrl(this._selector);(0,S.default)("._cm-ad-choice-text",this.$el).attr("href",e),(0,S.default)("._cm-ad-choice-logo",this.$el).attr("href",e)},_extractUrl:function(e){var t,i,n=(0,S.default)(e)[0];n?((0,S.default)(window).width()<=768||this.model.get("isMobile")?(t=(0,S.default)(n).find("a.trc_mobile_adc_link"),this._isOpenNewTab=!0):t=(0,S.default)(n).find("a.trc_desktop_adc_link"),i=t.length>0?(0,S.default)(t[0]).attr("href").replace(/(Card)(\D*)(\d+)/,"Card "+this.model.get("cardNumber")):this.model.get("components.adChoice.fallbackUrl")):(((0,S.default)(window).width()<=768||this.model.get("isMobile"))&&(this._isOpenNewTab=!0),i=this.model.get("components.adChoice.fallbackUrl"));return i},_alignTitle:function(){if(this.placementType===e.AD_CHOICE_TYPE.TITLE&&this._selector){var t=getComputedStyle((0,S.default)(this._selector)[0]);t&&"rtl"===t.direction&&(0,S.default)(this.container).css("text-align","left !important")}},_firstVideoViewStateHandle:function(){e.UNIT_TYPES[this.model.get("unitType")]===e.UNIT_TYPES.FEED_MANAGER&&this.placementType!==e.AD_CHOICE_TYPE.TITLE&&this._handleVideoViewState()},_handleVideoViewState:function(){switch(this.model.get("videoViewState")){case o.videoViewState.attached:this._onAttach();break;case o.videoViewState.detached:this._onDetach()}},_onAttach:function(){switch(this.placementType){case e.AD_CHOICE_TYPE.VIDEO_AD:this._show();break;case e.AD_CHOICE_TYPE.SLIDER:this._hide()}},_onDetach:function(){switch(this.placementType){case e.AD_CHOICE_TYPE.VIDEO_AD:this._hide();break;case e.AD_CHOICE_TYPE.SLIDER:this._show()}this._updateAdChoicesVisibility()},_openAdChoice:function(e){this._firePixel("pixels.adChoice","adChoice click pixel."),window.TRC&&(this._isOpenNewTab||window.TRC.aboutUs&&window.TRC.aboutUs.open&&window.TRC.aboutUs.open(e))},_firePixel:function(e,t){var i=this.model.getPixel(e);Wl.firePixel(i,t)},_show:function(){this.placementModel.isActive&&!this.model.get("adPlayingWithAdChoice")&&this.$el.show(),this._validateComponentVisibilityStatus(!0)},_hide:function(){this.placementModel.isActive&&this.$el.hide(),this._validateComponentVisibilityStatus(!1)},_validateComponentVisibilityStatus:function(e){var t=this.componentsVisibilityListener&&this.model.get(this.componentsVisibilityListener);void 0!==t&&e!==t&&this.model.set(this.componentsVisibilityListener,e)},_updateAdChoicesVisibility:function(){this.model.get("adPlayingWithAdChoice")&&this.placementType!==e.AD_CHOICE_TYPE.TITLE?this._hide():this._show()},_onAdPlayingWithAdChoiceChange:function(){this.model.get("content.isContentPlay")&&!this.model.get("components.adChoice.isActiveOnContent")?this._hide():this.shouldHandelDetachAttach?this._handleVideoViewState():this._updateAdChoicesVisibility()},_onAdjustWideFeed:function(){var t=this.model.get("adjustWideFeed");this.titlePosition===e.TITLE_POSITION.BELOW&&(t?(0,S.default)(this.parentPlaceholder).addClass("_cm-wide-feed-title-below"):(0,S.default)(this.parentPlaceholder).removeClass("_cm-wide-feed-title-below"))},_translateText:function(){this.model.get("components.adChoice.isTranslateText")&&this.model.get("language")&&this.model.set("components.adChoice.videoAd.text",Hl[this.model.get("language").toUpperCase()])},_setComponentsVisibilityListener:function(){this.listenTo(this.model,"change:".concat(this.componentsVisibilityListener),this._onComponentsVisibilityChange.bind(this)),this.model.get(this.componentsVisibilityListener)||this._hide()},_onComponentsVisibilityChange:function(){this.model.get(this.componentsVisibilityListener)?this._show():this._hide()}});function $l(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$l(e)}function Gl(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(n.key,void 0,function(e,t){if("object"!==$l(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==$l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===$l(o)?o:String(o)),n)}var r,o}function ql(e,t){return Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ql(e,t)}function Yl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=Kl(e);if(t){var r=Kl(this).constructor;Reflect.construct(n,arguments,r)}else n.apply(this,arguments);return function(e,t){if(t&&("object"===$l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,i)}}function Kl(e){return Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Kl(e)}i(9288);var Ql=i(9652),Zl=(n.s,i(9288)),Xl=i(1999),Jl=i(9652),ec={display:"inline !important"},tc={display:"none !important"},ic={transition:"width 2000ms !important",width:"32px !important"},nc={width:"32px !important"},rc=(Zl.View.extend({className:"_cm-volume-area",id:"_cm-css-reset",events:{click:"_toggleVolume"},initialize:function(e){this._setInitialParameters(e),this._isHandleDetach(),this._hasCloseButton(),this._initVolumeState(),this._createStatesAction(),this._setMinimizeOnClickCallback(),this._bindEvents(),this.render(),this.log.info("Volume Button initialized.")},_bindEvents:function(){this.listenTo(this.currModel,"change:volumeMuted",this._onVolumeChange.bind(this)),this.listenTo(this.currModel,"startVolumeAnimation",this._minimizeAfterRender.bind(this)),this._handleDetach&&this.listenTo(this.model,"change:videoViewState",this._handleVideoViewState.bind(this)),this.currModel.on("lastVolumeStateCheck",this._onLastVolumeStateCheck,this),this.model.on("change:viewTopComponent",this.setButtonVisible,this),this.listenTo(this.model,"change:adQState",this._onAdStateChange),this.model.on("showVolumeButtonOnBackFromSwap",this.show,this)},_setComponentsVisibilityListener:function(){this.model.on("change:".concat(this.componentsVisibilityListener),this._onComponentsVisibilityChange,this),this.model.get(this.componentsVisibilityListener)||this.hide()},render:function(){this._initTemplate(),this._setPosition(),this._styleCustomization(),this._checkIfMinimized(),this._renderComponent()},_initTemplate:function(){var e=Xl.template('<div class="_cm-volume-border"> <svg class="_cm-volume-mute" data-name="—ÎÓÈ_1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 351.22 266.75"> <defs> <style>.cls-1{fill:#fff}</style> </defs> <g id="_Group_" data-name="&lt;Group&gt;"> <g id="_Group_2" data-name="&lt;Group&gt;"> <path class="cls-1" d="M338,185.84c-.48-3.15-1.39-6.11-5.31-7.4H330c-3.63.93-6.33,3-8.93,5.29L249.59,246H170.26c-7.93,0-14.35,5.59-14.35,12.5V370.1c0,6.9,6.42,12.5,14.35,12.5h85.1l66.91,58.27a19,19,0,0,0,6,3.71c3.92,1.44,7.13.29,8.73-3.12a14.33,14.33,0,0,0,1.22-6.29V189.22A22.39,22.39,0,0,0,338,185.84Z" transform="translate(-155.91 -178.44)"/> </g> </g> <path class="cls-1" d="M486.13,381.62a20.93,20.93,0,0,1-14.85-6.15l-97.62-97.62a21,21,0,1,1,29.69-29.7L501,345.77a21,21,0,0,1-14.85,35.85Z" transform="translate(-155.91 -178.44)"/> <path class="cls-1" d="M388.5,381.62a21,21,0,0,1-14.84-35.85l97.62-97.62a21,21,0,1,1,29.7,29.7l-97.63,97.62A20.93,20.93,0,0,1,388.5,381.62Z" transform="translate(-155.91 -178.44)"/> </svg> <svg class="_cm-volume-unmute" data-name="—ÎÓÈ_1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 311.81 266.75"> <defs> <style>.cls-1{fill:#fff}</style> </defs> <g id="_Group_" data-name="&lt;Group&gt;"> <path id="_Path_" data-name="&lt;Path&gt;" class="cls-1" d="M465.85,290.12A124.1,124.1,0,0,0,453.19,253a127.55,127.55,0,0,0-21.66-29.51c-3.38-3.47-7.4-5.23-12.25-4.6a13.27,13.27,0,0,0-11.5,9.27c-1.87,5.38-.66,10.26,3.23,14.43,1,1.05,2,2,2.95,3.1a96.67,96.67,0,0,1,25.09,55.19,95.28,95.28,0,0,1-1.17,29.52,96.57,96.57,0,0,1-26.52,50.23,13.74,13.74,0,0,0-4.23,12.12,13.25,13.25,0,0,0,9.2,11.27c5.3,1.85,10.15.74,14.31-3.08.82-.74,1.57-1.56,2.33-2.36a125,125,0,0,0,34.74-87.88A131.18,131.18,0,0,0,465.85,290.12Z" transform="translate(-155.91 -178.44)"/> <path id="_Path_2" data-name="&lt;Path&gt;" class="cls-1" d="M420.23,307.35a87,87,0,0,0-6.32-28.82A88,88,0,0,0,395,249.69a14,14,0,0,0-24.29,11.22,16.39,16.39,0,0,0,4.73,8.92c13.86,14.79,19.22,32.3,16.05,52.27a58.5,58.5,0,0,1-16.83,32.54A14,14,0,0,0,388.48,378c3.13-.88,5.44-2.88,7.6-5.18,16.05-17.16,23.94-37.57,24.15-61C420.23,310.31,420.29,308.83,420.23,307.35Z" transform="translate(-155.91 -178.44)"/> <path id="_Path_3" data-name="&lt;Path&gt;" class="cls-1" d="M338,185.84c-.48-3.15-1.39-6.11-5.31-7.4H330c-3.63.93-6.33,3-8.93,5.29L249.59,246H170.26c-7.93,0-14.35,5.59-14.35,12.5V370.1c0,6.9,6.42,12.5,14.35,12.5h85.1l66.91,58.27a19,19,0,0,0,6,3.71c3.92,1.44,7.13.29,8.73-3.12a14.33,14.33,0,0,0,1.22-6.29V189.22A22.39,22.39,0,0,0,338,185.84Z" transform="translate(-155.91 -178.44)"/> </g> </svg> <div class="_cm-volume-text">{{expandedText}}</div> </div> ')(this._settings);this.$el.append(e)},_renderComponent:function(){var t=this,i=this.model.get("wurfl.browser.name");i===e.BROWSER.IE||i===e.BROWSER.EDGE?setTimeout((function(){(0,S.default)(t.container).append(t.el)}),200):(0,S.default)(this.container).append(this.el)},_setInitialParameters:function(t){this.log=new Jl({unitType:this.model.get("unitType"),className:"volumeButtonView"}),this.container=t.container,this.currModel=t.globalModel?t.globalModel:this.model,this._settings=this.model.get("components.volume"),this._isMuted=!0,this._unitType=e.UNIT_TYPES[this.model.get("unitType")],this._isAlwaysBottom=this.model.get("components.volume.isAlwaysBottom"),this.componentsVisibilityListener=t.componentsVisibilityListener,this.componentsVisibilityListener&&this._setComponentsVisibilityListener()},_initVolumeState:function(){void 0===this.currModel.get("volumeMuted")&&this.currModel.set("volumeMuted",!0)},_setMinimizeOnClickCallback:function(){this._minimizeOnClick=Xl.once(this._minimize.bind(this,ic))},_onLastVolumeStateCheck:function(){this._onVolumeChange()},_toggleVolume:function(){this._isMuted?(this._unMute(),this._fireUnmute()):(this._mute(),this._fireMute()),this._minimizeOnClick(),this.currModel.set("volumeUserInteraction",!0)},_mute:function(){this._showMute(),this._hideUnmute(),this._isMuted=!0},_unMute:function(){this._hideMute(),this._showUnmute(),this._isMuted=!1},_fireMute:function(){this.currModel.set("volumeMuted",!0),this.currModel.set("onUnMuteClicked",!1)},_fireUnmute:function(){this.currModel.set("volumeMuted",!1),this.currModel.set("onUnMuteClicked",!0)},_onVolumeChange:function(){this.currModel.get("volumeMuted")?this._mute():this._unMute()},_minimizeAfterRender:function(){this.currModel.get("volumeMustBeMinimized")?this._minimize(nc):setTimeout(function(){this._isMinimized||this._minimize(ic)}.bind(this),this._settings.timeToMinimize)},_minimize:function(e){(0,S.default)("#_cm-css-reset._cm-volume-area > ._cm-volume-border").css(e),this._isMinimized=!0,this.currModel.set("volumeMustBeMinimized",!0)},_hideMute:function(){(0,S.default)("#_cm-css-reset._cm-volume-area > ._cm-volume-border > ._cm-volume-mute").css(tc)},_showMute:function(){(0,S.default)("#_cm-css-reset._cm-volume-area > ._cm-volume-border > ._cm-volume-mute").css(ec)},_hideUnmute:function(){(0,S.default)("#_cm-css-reset._cm-volume-area > ._cm-volume-border > ._cm-volume-unmute").css(tc)},_showUnmute:function(){(0,S.default)("#_cm-css-reset._cm-volume-area > ._cm-volume-border > ._cm-volume-unmute").css(ec)},_setPosition:function(){this.hasCloseButton||this._isAlwaysBottom?this.$el.addClass("_cm-volume-area-bottom"):this.$el.addClass("_cm-volume-area-top"),this._handleDetach&&this._handleVideoViewState()},_isHandleDetach:function(){this._handleDetach=!1,this._unitType===e.UNIT_TYPES.FEED_MANAGER&&!1===this.model.get("hasCloseButton")&&!0===this.model.get("detachToSlider.hasCloseButton")&&(this._handleDetach=!0)},_hasCloseButton:function(){this._unitType!==e.UNIT_TYPES.FEED_MANAGER&&this._unitType!==e.UNIT_TYPES.INLINE_INSTREAM&&this._unitType!==e.UNIT_TYPES.MSN_WIDGET||(this.hasCloseButton=this.model.get("closeButton.hasCloseButton")),this._unitType!==e.UNIT_TYPES.WIDGET_ITEM&&this._unitType!==e.UNIT_TYPES.EXPANDABLE&&this._unitType!==e.UNIT_TYPES.EXPANDABLE_MOBILE||(this.hasCloseButton=this.model.get("components.CloseButtonView.hasCloseButton")),this._unitType,e.UNIT_TYPES.SLIDER_INSTREAM,this._unitType,e.UNIT_TYPES.EXPANDABLE},_handleVideoViewState:function(){if(!this._isAlwaysBottom){var e=this.model.get("videoViewState");e===o.videoViewState.attached&&(this.$el.addClass("_cm-volume-area-top"),this.$el.removeClass("_cm-volume-area-bottom")),e===o.videoViewState.detached&&this.hasCloseButton&&(this.$el.addClass("_cm-volume-area-bottom"),this.$el.removeClass("_cm-volume-area-top"))}},_styleCustomization:function(){this._settings.style&&(Xl.isEmpty(this._settings.style.border)||(0,S.default)("#_cm-css-reset._cm-volume-area > ._cm-volume-border").css(this._settings.style.border),Xl.isEmpty(this._settings.style.mute)||(0,S.default)("#_cm-css-reset._cm-volume-area > ._cm-volume-border > ._cm-volume-mute").css(this._settings.style.mute),Xl.isEmpty(this._settings.style.unmute)||(0,S.default)("#_cm-css-reset._cm-volume-area > ._cm-volume-border > ._cm-volume-unmute").css(this._settings.style.unmute),Xl.isEmpty(this._settings.style.text)||(0,S.default)("#_cm-css-reset._cm-volume-area > ._cm-volume-border > ._cm-volume-text").css(this._settings.style.text))},_checkIfMinimized:function(){this._unitType===e.UNIT_TYPES.FEED_MANAGER&&this.currModel.get("volumeMinimized")&&this._minimize(nc)},setButtonVisible:function(){this.log.info("_onTopComponentChange",this.model.get("viewTopComponent")),this.model.get("viewTopComponent")===e.FLOATING_VIEW_TOP_COMPONENT.video?this.show():this.hide()},hide:function(){this.$el.hide()},show:function(){this.$el.show()},_createStatesAction:function(){this.adStateActions={q0:this.show.bind(this),completed:this.hide.bind(this),repeating:this.show.bind(this)}},_onAdStateChange:function(e,t){var i=this.adStateActions[t];i&&i()},_onComponentsVisibilityChange:function(){this.currModel.get(this.componentsVisibilityListener)?this.show():this.hide()}}),'<div class="_cm-ad-loading-progress-container"> <div class="_cm-ad-loading-progress-bar-container"> <div class="_cm-ad-loading-progress-title"> <span class="_cm-ad-loading-progress_title_span"></span> <span class="_cm-ad-loading-progress_percent_span">0%</span> </div> <div class="_cm-ad-loading-progress-bar"> <div class="_cm-ad-loading-progress-bar-loaded"></div> </div> </div> </div> '),oc=i(9288),sc=i(1999),ac=i(9652);oc.View.extend({className:"_cm-ad-loading-progress",id:"_cm-css-reset",initialize:function(e){this.model.set("progressLoaderInit",!0),this._setInitialParameters(e),this._bindEvents(),this.currModel.get("isFirstAdLoaded")&&(this._startWatchingViewPort(),this._show()),this.render(),this.log.info("ad-loading-progress initialize")},_bindEvents:function(){this.log.info("ad-loading-progress _bindEvents"),this.listenTo(this.currModel,"change:isFirstAdLoaded",this._onFirstAdLoaded.bind(this)),this.listenToOnce(this.currModel,"change:hasReadyAd",this._onAdImpression.bind(this)),this.listenTo(this.currModel,"ProgressLoaderRepositioned",this._restart.bind(this))},_setInitialParameters:function(e){this.log=new ac({unitType:this.model.get("unitType"),className:"adLoadingProgressView",version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.currModel=e.globalModel?e.globalModel:this.model,this.$el=(0,S.default)(this.el),this.viewPercent=this.currModel.get("components.adLoadingProgress.inViewPortEligibility")||100,this.loadingTimerTime=Number(this.currModel.get("components.adLoadingProgress.maxProgressTime"))||5e3,this.count=1,this.currModel.set("loaderCurrCount",this.count),this.progressTik=this.loadingTimerTime/50,this.showProgress=this.currModel.get("components.adLoadingProgress.showProgressBar")},render:function(){this._initTemplate(),this._customize(),this.model.get("eligiblePlaceholder")?this._renderComponent():this.model.once("change:eligiblePlaceholder",this._renderComponent.bind(this))},_renderComponent:function(){this.container=this.model.get("eligiblePlaceholder");var e={width:this.model.get("width")+3+"px",height:this.model.get("height")+2+"px"};this.$el.css(e),this.$el.css(this._getPosition(this.model.get("eligiblePlaceholder"))),(0,S.default)("body").append(this.el),this.$el.css(),(0,S.default)("._cm-ad-loading-progress_title_span").text(this.currModel.get("components.adLoadingProgress.title")),this.showProgress&&(0,S.default)("._cm-ad-loading-progress-container").css({display:"block"})},_initTemplate:function(){var e=sc.template(rc)(this._settings);this.$el.append(e),this.$loadingPercentElement=(0,S.default)("._cm-ad-loading-progress_percent_span")},_onFirstAdLoaded:function(){this.log.info("FirstAd _onFirstAdLoaded loaded"),this.currModel.get("isFirstAdLoaded")&&(this._startWatchingViewPort(),this._show())},_startWatchingViewPort:function(){this.listenTo(oc,"window:scroll:change",this._calculateViewPortIntersection.bind(this,!1));var e=this.$el.parent().height();this.$el.parent().height(e+1)},_calculateViewPortIntersection:function(){if(!this.stopWatchingViewPort){var e=sc.getViewPercent(this.el,this.$el.width(),this.$el.height(),this.currModel.get("scrollSelector"));this.log.info("currViewPercent: ",e||0),this.viewPercent<=e&&(this._startLoadingTimer(),this.stopWatchingViewPort=!0)}},_onAdImpression:function(){this.model.get("progressLoaderTimerReached")&&this.model.set("eligiblePlaceholder",!1),this.close()},_startLoadingTimer:function(){this.loadingTimer=window.setTimeout(function(){this.log.info("Loading timer progress reached"),this.currModel.set("progressLoaderTimerReached",!0),window.clearInterval(this.calculationInterval),this.calculationInterval=null}.bind(this),this.loadingTimerTime),this._startCalculation()},_startCalculation:function(){this.calculationInterval=window.setInterval(function(){this._calculateLoadingProgress(),(0,S.default)("._cm-ad-loading-progress-bar-loaded").css({width:"100%",transition:"width "+this.loadingTimerTime+"ms","transition-timing-function":"linear"})}.bind(this),this.progressTik)},_calculateLoadingProgress:function(){(0,S.default)("._cm-ad-loading-progress_percent_span").text(this.count+"%"),this.count<100&&(this.count+=2,this.currModel.set("loaderCurrCount",this.count))},_restart:function(){this.container=this.model.get("eligiblePlaceholder"),this._renderComponent(),this._hide(),this.currModel.set("progressLoaderTimerReached",!1),(0,S.default)("._cm-ad-loading-progress_percent_span").text("1%"),this.count=1,(0,S.default)("._cm-ad-loading-progress-bar-loaded").css({transition:"none",width:"0%"}),this.stopWatchingViewPort=!1,this._show()},_show:function(){this.$el.css({display:"flex"})},_hide:function(){this.$el.css({display:"none"})},close:function(){this.model.set("progressLoaderViewClosed",!0),this._hide(),window.clearInterval(this.calculationInterval),this.calculationInterval=null,this.loadingTimer&&(window.clearTimeout(this.loadingTimer),this.loadingTimer=null),this.stopListening(oc,"window:scroll:change"),this.model.set("components.adLoadingProgress.isActive".false)},_customize:function(){var e=this.model.get("components.adLoadingProgress.additionalCss");this.$el.css(sc.toCssObj(e))},_getPosition:function(e){var t=e.getBoundingClientRect(),i=document.body.getBoundingClientRect();return{top:t.top-i.top-1+"px",left:t.left+"px"}}});function lc(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lc(e)}function cc(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(n.key,void 0,function(e,t){if("object"!==lc(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==lc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===lc(o)?o:String(o)),n)}var r,o}function uc(e,t){return Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},uc(e,t)}function dc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=hc(e);if(t){var r=hc(this).constructor;Reflect.construct(n,arguments,r)}else n.apply(this,arguments);return function(e,t){if(t&&("object"===lc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,i)}}function hc(e){return Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},hc(e)}i(1999);var fc={id:"_cm-static-banner-view",className:"_cm-static-banner-view"};n.s;function pc(e){return pc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pc(e)}function mc(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if("object"!==pc(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==pc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===pc(o)?o:String(o)),n)}var r,o}function yc(e,t){return yc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},yc(e,t)}function vc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=gc(e);if(t){var r=gc(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return function(e,t){if(t&&("object"===pc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,i)}}function gc(e){return gc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},gc(e)}var bc=i(1999),_c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yc(e,t)}(l,e);var i,n,s,a=vc(l);function l(e){var i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var n=(i=a.call(this,e)).model.get("unitType"),o=i.model.get("version"),s=i.model.get("isDebug");return i.compatibleUnitType=[t().UNIT_TYPES.FEED_MANAGER,t().UNIT_TYPES.FEED_MANAGER_MOBILE,t().UNIT_TYPES.SLIDER_INSTREAM,t().UNIT_TYPES.SLIDER_INSTREAM_MOBILE],i.log=new r.Z({className:"ContentVideoView",unitType:n,version:o,isDebug:s}),i.model=e.model,i.maxVideoToShow=i._getMaxVideoPlayValue(n),i.container=e.container,i.$el.css({display:"none"}),i.isHidden=!0,(0,S.default)(i.container).append(i.$el),i._addContentStyleObserver(),i.contentTimer=null,i.model.get("repeat")&&i.model.set("components.contentVideo.isRepeat",!0),i.handleMouseActivity(),i.bindRenderShowEvents(),i}return i=l,(n=[{key:"bindRenderShowEvents",value:function(){var e=[];this.model.get("displayFiller.beforeAd")===t().DISPLAY_FILLER.BEFORE_AD.CONTENT&&e.push({event:"player.playlist",funcName:"render"}),this.model.get("displayFiller.betweenAds")===t().DISPLAY_FILLER.BETWEEN_ADS.CONTENT&&e.push({event:"adQState:completed",funcName:"render"}),this.model.get("displayFiller.onTimeout")===t().DISPLAY_FILLER.ON_TIMEOUT.CONTENT&&e.push({event:"closeTimer:midrollCollapse",funcName:"render"}),e.length>0&&e.push({event:"closeState",funcName:"onCloseState"}),this.createStateHandlers(e)}},{key:"render",value:function(){this.model.get("hasReadyAd")&&!this.model.get("timeBetweenAds")||(this.log.info("Content is being loaded!"),this.video||(this.$el.append('<div class="cm_video_content_wrapper"> <div class="_cm-background-loading"></div> <video class="cm_video_content_video_element"></video> </div> '),this.el.id="_cm-css-reset",this._customize(),this.playList=this.model.get("player.playlist"),this.currentTrackIndex=0,this.initVideo(),this._addVideoControls(),this.initLoadingBackground(),this.bindEvents()),this.show())}},{key:"_addVideoControls",value:function(){this.videoControls=new Cc({container:this.el,model:this.model,video:this.video})}},{key:"bindEvents",value:function(){this.createStateHandlers([{event:"isEligibleToPlay",funcName:"checkEligible"},{event:"isInTab",funcName:"checkEligible"},{event:"mute:true",funcName:"mute"},{event:"mute:false",funcName:"unMute"},{event:"content.playClicked:true",funcName:"play"},{event:"content.pauseClicked:true",funcName:"pause"},{event:"adQState:q0",funcName:"hide"},{event:"adState:playing",funcName:"hide"},{event:"blockedByExternalUnit:true",funcName:"pause"},{event:"blockedByExternalUnit:false",funcName:"play"},{event:"getAdSuccess",funcName:"setMaxVideoForTermination"}])}},{key:"initVideo",value:function(){this.video=this.$el.find("video")[0],this.model.get("contentClickUrl")&&(this.video.onclick=this.contentClickThru.bind(this),this.video.style.cursor="pointer"),this.video.src=this.playList[this.currentTrackIndex].url,this.video.addEventListener("ended",this.onEnd.bind(this)),this.video.addEventListener("loadeddata",this.onLoaded.bind(this)),this.video.addEventListener("playing",this.onPlaying.bind(this)),this.video.muted=!0,this.video.setAttribute("muted",""),this.video.setAttribute("playsinline","")}},{key:"initLoadingBackground",value:function(){this.$loadingImg=this.$el.find("._cm-background-loading"),-1!==!this.$loadingImg.index()?this.$loadingImg.css({backgroundImage:'url("'.concat(this.model.get("components.contentVideo.X"),'")')}):this.log.warning("No loading background found!")}},{key:"show",value:function(){this.isTerminated||(this.model.set("content.isContentPlay",!0),this.log.info("Content video show"),this.isHidden=!1,this.el.style.display="block",this.play())}},{key:"hide",value:function(){this.isTerminated||(this.model.set("content.isContentPlay",!1),this.log.info("Content video hide"),this.isHidden=!0,this.el.style.display="none",this.pause())}},{key:"play",value:function(){var e=this;if(this.video){if(this.model.get("content.playClicked")||!this.model.get("content.pauseClicked")){this.model.set("content.playClicked",!1),this.model.set("content.startProgressBar",!0);var t=this.video.play();this.model.set("isExternalComponentBlockingAdFromPlay",!0,{silent:!0}),void 0!==t?t.catch((function(t){e.model.set("isExternalComponentBlockingAdFromPlay",!1),e.log.info("Auto-play was prevented",t)})).then((function(){e.log.info("Auto-play content video started"),e.isHidden||e.model.set("content.isContentPlay",!0),e.contentTimer=setTimeout((function(){e.model.set("isExternalComponentBlockingAdFromPlay",!1)}),1e3*e.getTimeoutBeforeOrBetweenAds())})):this.model.set("isExternalComponentBlockingAdFromPlay",!1)}}else this.log.warning("Play was called without video render!")}},{key:"reportVideoContentId",value:function(){var e=this.playList[this.currentTrackIndex],t=e.id;if(t!==this.model.previous("organicVideoPlaying")){var i=e.pixelId;this.model.set("pixels.organicVideoPlaying.id",i),this.model.set("organicVideoPlaying",t)}}},{key:"getTimeoutBeforeOrBetweenAds",value:function(){var e=this.model.get("isFirstAd");return"content"===this.model.get("displayFiller.beforeAd")&&e&&this.model.get("timeBeforeFirstAd")>0?this.model.get("timeBeforeFirstAd"):"content"===this.model.get("displayFiller.betweenAds")&&!e&&this.model.get("timeBetweenAds")>0?this.model.get("timeBetweenAds"):0}},{key:"pause",value:function(){this.video?(this.model.set("content.startProgressBar",!1),this.video.pause()):this.log.warning("Pause was called without video render!")}},{key:"mute",value:function(){this.video.muted=!0,this.video.setAttribute("muted",""),this.model.set("mute",!0)}},{key:"unMute",value:function(){this.video.muted=!1,this.video.removeAttribute("muted"),this.model.set("mute",!1)}},{key:"onLoaded",value:function(){this.$loadingImg&&this.$loadingImg.hide()}},{key:"onPlaying",value:function(){this.model.get("components.contentVideo.isActive")&&this.model.get("displayFiller.beforeAd")===t().DISPLAY_FILLER.BEFORE_AD.CONTENT&&this.model.trigger("contentReadySliderShow"),this.reportVideoContentId()}},{key:"setMaxVideoForTermination",value:function(){this.maxVideoToShow=this.model.get("getAdSuccess")?this._getMaxVideoPlayValue(this.model.get("unitType")):this.currentTrackIndex}},{key:"onEnd",value:function(){if(!this.isTerminated&&(this.$loadingImg&&this.$loadingImg.show(),this.model.get("components.contentVideo.isRepeat"))){if(this.currentTrackIndex++,this.currentTrackIndex>=this.maxVideoToShow)return void this.terminate();var e=this.playList[this.currentTrackIndex];e||(this.currentTrackIndex=0,e=this.playList[this.currentTrackIndex]),this.video.src=e.url,this.model.set("content.isContentPlay",!1),clearTimeout(this.contentTimer),this.model.set("isExternalComponentBlockingAdFromPlay",!1,{silent:!0}),this.play()}}},{key:"handleMouseActivity",value:function(){"onHover"===this.model.get("volume")&&(this.el.onmouseenter=this.onMouseEnter.bind(this),this.el.onmouseleave=this.onMouseLeave.bind(this))}},{key:"onMouseEnter",value:function(){this.unMute()}},{key:"onMouseLeave",value:function(){this.mute()}},{key:"contentClickThru",value:function(){window.open(this.model.get("contentClickUrl"))}},{key:"_customize",value:function(){var e=this.model.get("components.contentVideo.additionalCss");this.$el.css(bc.toCssObj(e))}},{key:"className",get:function(){return"_cm-content-video"}},{key:"checkEligible",value:function(){this.isEligibleToPlay()?this.play():this.pause()}},{key:"isEligibleToPlay",value:function(){return!this.isHidden&&!this.model.get("blockedByExternalUnit")&&(this.model.get("isInTab")?!!this.model.get("isEligibleToPlay")||this.model.get("videoViewState")===o.videoViewState.detached:this.model.get("videoViewState")===o.videoViewState.detached&&"play"===this.model.get("detachToSlider").onOutOfView)}},{key:"onCloseState",value:function(){this.isTerminated||(this.model.get("closeState")!==o.closeState.terminate&&this.model.get("closeState")!==o.closeState.adManagerStop?this.model.isLoadcomponent("content","onTimeout")?this.video?this.show():this.render():this.hide():this.terminate())}},{key:"terminate",value:function(){this.log.info("Terminate"),this.isTerminated||(clearTimeout(this.contentTimer),this.model.set("content.isContentPlay",!1),this.model.set("isExternalComponentBlockingAdFromPlay",!1,{silent:!0}),this.model.set("components.contentVideo.isActive",!1,{silent:!0}),this.isTerminated=!0,this.video&&(this.hide(),this.mute(),this.video.removeAttribute("src"),this.video.load(),this._destroy()),this.log.info("Content is terminated."))}},{key:"_getMaxVideoPlayValue",value:function(e){var i=this.model.get("components.contentVideo.maxAllowed");return this.compatibleUnitType.includes(t().UNIT_TYPES[e])?i||2:Number.POSITIVE_INFINITY}},{key:"_destroy",value:function(){this.video.removeEventListener("ended",this.onEnd),this.video.removeEventListener("loadeddata",this.onLoaded),this.video.removeEventListener("playing",this.onPlaying),this.mo&&this.mo.disconnect(),this.container&&this.container.parentElement&&this.container.parentElement.removeChild(this.container),this.container=this.mo=void 0}},{key:"_addContentStyleObserver",value:function(){var e=this,t=this.$el[0];t&&window.MutationObserver&&(this.mo=new window.MutationObserver((function(){"none"!==t.style.display&&e.isHidden&&(t.style.display="none")})),this.mo.observe(t,{attributes:!0,attributeFilter:["style"]}))}}])&&mc(i.prototype,n),s&&mc(i,s),Object.defineProperty(i,"prototype",{writable:!1}),l}(n.s),wc=_c,Sc=i(9288),Pc=i(1999),Tc=i(9652),Ac=(Sc.View.extend({events:{"click ":"_onClick"},initialize:function(e){this.log=new Tc({unitType:e.unitType,className:"SkipAdButtonView"}),this.container=e.container,this._rendered=!1,this._bindEvents(),this.createStateHandlers=tl.L,this.componentsVisibilityListener=e.componentsVisibilityListener,this.componentsVisibilityListener&&this._setComponentsVisibilityListener()},render:function(){if(!this._rendered){if(this._rendered=!0,this._settings=this.model.get("components.skipAdButton"),this.model.get("components.skipAdButton.newDesign"))this.el.classList.add("_cm-skip-ad-vid-reel"),this.$el.append('Skip <svg style="display:inline-block" width="10" height="10" viewBox="0 0 10 10" fill="none" xmlns="http://www.w3.org/2000/svg"> <path d="M0 10L7.08333 5L0 0V10ZM8.33333 0V10H10V0H8.33333Z" fill="white"/> </svg> ');else{var e=Pc.template('<div class="_cm-skip-ad-border"> <div class="_cm-skip-ad-text">{{skipAdText}}</div> <div class="_cm-skip-ad-icon"> <svg width="14" height="12" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 200"> <line x1="2" y1="2" x2="98" y2="110" style="stroke:#fffefd;stroke-width:40"/> <line x1="2" y1="198" x2="98" y2="90" style="stroke:#fffefd;stroke-width:40"/> Sorry, your browser does not support inline SVG. </svg> </div> </div> ')(this._settings);this.$el.append(e),this.el.classList.add("_cm-skip-ad-area"),this.el.id="_cm-skip-ad-area"}this.container.appendChild(this.el)}},_bindEvents:function(){},_onClick:function(e){e.stopPropagation(),this.model.increaseCounter("skipButtonClicked")},_setComponentsVisibilityListener:function(){this.listenTo(this.model,"change:".concat(this.componentsVisibilityListener),this._onComponentsVisibilityChange.bind(this)),this.model.get(this.componentsVisibilityListener)||this.hide()},_onComponentsVisibilityChange:function(){this.model.get(this.componentsVisibilityListener)?this.show():this.hide()},hide:function(){this.$el.hide()},show:function(){this.$el.show()}}),i(9288)),Ec=(i(1999),i(9652)),Cc=Ac.View.extend({className:"video_controls show",id:"video_controls",initialize:function(e){this.log=new Ec({unitType:e.unitType,className:"progressBarView"}),this.model=e.model,this.container=e.container,this.video=e.video,this._bindEvents(),this.render()},_bindEvents:function(){this.video.addEventListener("ended",this.resetProgress.bind(this)),this.model.listenTo(this.model,"change:mute",this.muteChanged.bind(this)),this.model.listenTo(this.model,"change:content.startProgressBar",this.ManageProgressBarInterval.bind(this))},render:function(){this.container.appendChild(this.el),this.$el.append('<div class="video_controls video_controls_main_area"> <div class="cm_video_controls_progressbar_area"> <div class="cm_video_controls_progressbar_bg white_bg"></div> <div class="cm_video_controls_progressbar blue_bg"></div> </div> <div class="cm_video_controls_mute interactive"> <div class="cm_video_controls_volume display_mute"></div> <div class="cm_video_controls_volume display_unmute"></div> </div> <div class="cm_video_controls_playpause interactive show"> <div class="pause show"></div> <div class="play hide"></div> </div> </div> '),this.setControls(),this.show()},setControls:function(){this.setProgressBarComponent(),this.setPlayPauseButton(),this.setMuteButton()},hide:function(){this.$el.hide()},show:function(){this.$el.show()},setProgressPercent:function(e){this.progressDiv.style.width=e+"%"},resetProgress:function(){this.progressDiv.classList.add("init_bg"),this.setProgressPercent(0)},playClicked:function(){this.model.set("content.playClicked",!0),this.model.set("content.pauseClicked",!1),this.pauseButton.classList.add("show"),this.pauseButton.classList.remove("hide"),this.playButton.classList.remove("show"),this.playButton.classList.add("hide")},pauseClicked:function(){this.model.set("content.pauseClicked",!0),this.playButton.classList.add("show"),this.playButton.classList.remove("hide"),this.pauseButton.classList.remove("show"),this.pauseButton.classList.add("hide")},muteClicked:function(){this.model.get("mute")?this.unMute():this.mute()},muteChanged:function(){this.model.get("mute")?this.setMuteClasses():this.setUnMuteClasses()},mute:function(){this.model.set("mute",!0),this.setMuteClasses()},unMute:function(){this.model.set("mute",!1),this.setUnMuteClasses()},setMuteClasses:function(){this.muteImg.style.display="block",this.unmuteImg.style.display="none"},setUnMuteClasses:function(){this.muteImg.style.display="none",this.unmuteImg.style.display="block"},setProgressBarComponent:function(){this.progressDiv=this.$el.find(".blue_bg")[0],this.progressComponentDiv=this.$el.find(".cm_video_controls_progressbar_area")[0],this.model.get("components.contentVideo.hideProgressBar")&&(this.progressComponentDiv.style.display="none"),this.resetProgress()},setMuteButton:function(){this.muteButton=this.$el.find(".cm_video_controls_mute").get(0),this.model.get("components.contentVideo.hideMuteButton")&&(this.muteButton.style.display="none"),this.muteImg=this.$el.find(".cm_video_controls_mute .display_mute").get(0),this.unmuteImg=this.$el.find(".cm_video_controls_mute .display_unmute").get(0),this.muteImg.style.backgroundImage='url("'.concat(this.model.get("components.contentVideo.muteImgUrl"),'")'),this.unmuteImg.style.backgroundImage='url("'.concat(this.model.get("components.contentVideo.unmuteImgUrl"),'")'),this.muteButton.onclick=this.muteClicked.bind(this),this.muteChanged()},setPlayPauseButton:function(){this.playButton=this.$el.find(".play")[0],this.pauseButton=this.$el.find(".pause")[0],this.pauseButton.style.backgroundImage='url("'.concat(this.model.get("components.contentVideo.pauseImgUrl"),'")'),this.model.get("components.contentVideo.hidePlayButton")&&(this.pauseButton.classList.remove("show"),this.pauseButton.classList.add("hide")),this.playButton.onclick=this.playClicked.bind(this),this.pauseButton.onclick=this.pauseClicked.bind(this)},ManageProgressBarInterval:function(){this.model.get("content.startProgressBar")?this.progressInterval=setInterval(this.setProgress.bind(this),100):this.progressInterval&&(clearInterval(this.progressInterval),this.progressInterval=null)},setProgress:function(){this.setProgressPercent(this.video.currentTime/this.video.duration*100)}}),Oc=i(9288),kc=i(1999),Dc=i(9652),Rc=(Oc.View.extend({className:"_cm-ad-loading-progress",id:"_cm-css-reset",initialize:function(e){e.isActive&&(this.model=e.model,this.container=e.container,this._setInitialParameters(e),this._bindEvents(),this.render(),this._startWatchingViewPort(),this.log.info("ad-loading-progress initialize"))},_bindEvents:function(){this.log.info("ad-loading-progress _bindEvents"),this.listenToOnce(this.model,"change:hasReadyAd",this.close.bind(this)),this.listenTo(this.model,"change:ProgressLoaderRepositioned",this._restart.bind(this))},_setInitialParameters:function(e){this.log=new Dc({unitType:this.model.get("unitType"),className:"adLoadingProgressView",version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.globalModel=e.globalModel||this.model,this.globalModel.set("progressLoaderInit",!0),this.$el=(0,S.default)(this.el),this.viewPercent=this.model.get("components.adLoadingProgress.inViewPortEligibility")||100,this.loadingTimerTime=Number(this.model.get("components.adLoadingProgress.maxProgressTime"))||5e3,this.count=1,this.globalModel.set("loaderCurrCount",this.count),this.progressTik=this.loadingTimerTime/100,this.showProgress=this.model.get("components.adLoadingProgress.showProgressBar")},render:function(){this._initTemplate(),this._customize(),this._renderComponent(),this._show()},_initTemplate:function(){var e=kc.template(rc)(this._settings);this.$el.append(e),this.$loadingPercentElement=(0,S.default)("._cm-ad-loading-progress_percent_span")},_customize:function(){var e=this.model.get("components.adLoadingProgress.additionalCss");this.$el.css(kc.toCssObj(e))},_renderComponent:function(){var e={width:this.model.get("width")+"px",height:this.model.get("height")+"px"};this.$el.css(e),(0,S.default)(this.container).append(this.el),(0,S.default)("._cm-ad-loading-progress_title_span").text(this.model.get("components.adLoadingProgress.title")),this.showProgress&&(0,S.default)("._cm-ad-loading-progress-container").css({display:"block"})},_startWatchingViewPort:function(){this.listenTo(Oc,"window:scroll:change",this._calculateViewPortIntersection.bind(this,!1)),this._calculateViewPortIntersection()},_calculateViewPortIntersection:function(){var e=kc.getViewPercent(this.el,this.$el.width(),this.$el.height(),this.model.get("scrollSelector"));!this.calculationRunning&&this.viewPercent<=e&&this._startLoadingTimer(),this.calculationRunning&&!e&&this.el.getBoundingClientRect().top<0&&this._stopCalculation()},_startLoadingTimer:function(){this.loadingTimer=window.setTimeout(function(){this._stopCalculation()}.bind(this),this.loadingTimerTime),this._startCalculation()},_startCalculation:function(){this.calculationRunning=!0,this.calculationInterval=window.setInterval(function(){this._calculateLoadingProgress()}.bind(this),this.progressTik),(0,S.default)("._cm-ad-loading-progress-bar-loaded").css({width:"100%",transition:"width "+this.loadingTimerTime+"ms","transition-timing-function":"linear"})},_stopLoadingTimer:function(){this.loadingTimer&&clearTimeout(this.loadingTimer)},_stopCalculation:function(){this.calculationRunning=!1,this.globalModel.set("progressLoaderTimerReached",!0),window.clearInterval(this.calculationInterval),this.calculationInterval=null},_calculateLoadingProgress:function(){(0,S.default)("._cm-ad-loading-progress_percent_span").text(this.count+"%"),this.count<100&&(this.count+=1,this.globalModel.set("loaderCurrCount",this.count))},_restart:function(){this._stopLoadingTimer(),this.globalModel.set("progressLoaderTimerReached",!1),this.model.get("ProgressLoaderRepositioned")&&((0,S.default)("._cm-ad-loading-progress_percent_span").text("1%"),this.count=1,(0,S.default)("._cm-ad-loading-progress-bar-loaded").css({transition:"none",width:"0%"}),this.calculationRunning=!1,this.model.set("ProgressLoaderRepositioned",!1))},_show:function(){this.$el.css({display:"flex"}),this.model.set("isProgressLoaderViewRunning",!0)},_hide:function(){this.$el.css({display:"none"})},close:function(){this.log.info("close loader"),this.model.set("isProgressLoaderViewRunning",!1),this.globalModel.set("progressLoaderViewClosed",!0),this._hide(),window.clearInterval(this.calculationInterval),this.calculationInterval=null,this.loadingTimer&&(window.clearTimeout(this.loadingTimer),this.loadingTimer=null),this.stopListening(Oc,"window:scroll:change"),this.model.set("components.adLoadingProgress.isActive",!1)}}),i(9288)),Ic=i(1999),xc=i(9652);Rc.View.extend({className:"_cm-click-blocker-container",initialize:function(e){this.log=new xc({unitType:e.unitType,className:"clickBlockerView"}),this.options=e,this.model=e.model,this.container=e.container,this.render()},render:function(){this.template=Ic.template('<div class="_cm-click-blocker _cm-click-blocker-top"></div> <div class="_cm-click-blocker _cm-click-blocker-bottom"></div> <div class="_cm-click-blocker _cm-click-blocker-left"></div> <div class="_cm-click-blocker _cm-click-blocker-right"></div> '),this.$el.append(this.template(this.options)),this.SetClickBlockerDivStyle(),this.options.style&&this.$el.css(this.options.style),this.container.appendChild(this.el)},SetClickBlockerDivStyle:function(){var e=this;this.containerDimentions=this.container.getBoundingClientRect();var t=this.$el.children();t.forEach((function(t){return e.setBasicBlockerDivStyle(t)}));var i=this.model.get("components.ClickBlocker.blockPercent.vertical"),n=this.model.get("components.ClickBlocker.blockPercent.horizontal");t[0].style.height=this.containerDimentions.height*i+"px",t[1].style.height=this.containerDimentions.height*i+"px",t[2].style.width=this.containerDimentions.width*n+"px",t[3].style.width=this.containerDimentions.width*n+"px"},setBasicBlockerDivStyle:function(e){e.style.width=this.containerDimentions.width+"px",e.style.height=this.containerDimentions.height+"px"}});function Nc(e){return Nc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nc(e)}function Vc(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if("object"!==Nc(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==Nc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===Nc(o)?o:String(o)),n)}var r,o}function Lc(e,t){return Lc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Lc(e,t)}function jc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=Bc(e);if(t){var r=Bc(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return function(e,t){if(t&&("object"===Nc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,i)}}function Bc(e){return Bc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Bc(e)}var Mc=i(1999),Fc="_cm-native-ad",Uc={title:"._cm-native-ad-title",ctaButtone:"._cm-native-ad-cta-button",description:"._cm-native-ad-description",icon:"._cm-native-ad-icon",branding:"._cm-native-ad-branding",adChoice:"._cm-ad-choice",placeholder:"._cm-feed-manager-video-placeHolder",wrapper:"._cm-native-ad-bottom"},Wc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Lc(e,t)}(l,e);var i,n,s,a=jc(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=a.call(this,e)).model=e.model,t.globalModel=e.globalModel,t.shouldHideBrandingText=e.shouldHideBrandingText||!1,t.shouldFitToSize=e.shouldFitToSize||!1,t.sendNasOpp=e.sendNasOpp||!1,t.elasticLogger=t.model.get("elasticLogger"),t.isMultiFloatingNASElements=e.isMultiFloatingNASElements||!1,e.additionalCss&&t._addAdditionalCss(e.additionalCss),t.log=new r.Z({unitType:t.model.get("unitType"),className:constructor.name,version:t.model.get("version"),isDebug:t.model.get("isDebug")}),t.template=t._isTitleOnTop()?'<div class="_cm-native-ad-top"> <div class="_cm-native-ad-title" data-click-name="adTitleClick"></div> <div class="_cm-native-ad-cta-wrapper"> <div class="_cm-native-ad-cta-button" data-click-name="adCtaButtonClick"></div> </div> <div class="_cm-native-ad-description" data-click-name="adDescriptionClick"></div> <div class="_cm-native-ad-icon"></div> <div class="_cm-native-ad-branding" data-click-name="adBrandingClick"></div> <div class="_cm-ad-choice"></div> </div> ':'<div class="_cm-native-ad-bottom"> <div class="_cm-native-ad-title" data-click-name="adTitleClick"></div> <div class="_cm-native-ad-cta-wrapper"> <div class="_cm-native-ad-cta-button" data-click-name="adCtaButtonClick"></div> </div> <div class="_cm-native-ad-description" data-click-name="adDescriptionClick"></div> <div class="_cm-native-ad-icon"></div> <div class="_cm-native-ad-branding" data-click-name="adBrandingClick"></div> <div class="_cm-ad-choice"></div> </div> ',t.container=(0,S.default)(e.container),t.nativeAdMapping=t.globalModel.get("nativeAdMapping"),(t.model.get("stickyCard.isActive")||!t.model.get("detachToSlider.isStartFromSlider")&&!t.model.get("detachToSlider.isDetachToSlider"))&&(t.isSticky=!0,t._setToModel("floatingNAS.isActive",!1)),t.model.get("isPreviewAdSettings")&&(window.setPreviewAdSettings=function(e){var i=e.title,n=e.description,r=e.branding;t.adNativeSettings[t.nativeAdMapping.title]=i,t.adNativeSettings[t.nativeAdMapping.description]=n,t.adNativeSettings[t.nativeAdMapping.branding]=r,t._updateAdData()}),t.bindEvents(),t}return i=l,n=[{key:"_setToModel",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.model.set(e,t,i),this.globalModel&&this.globalModel.set(e,t,i)}},{key:"_render",value:function(){this.renderTemplate(),this._adjustRTL(),this._adjustToDarkMode(),this.$el.addClass(Fc),this.container.append(this.$el),this._addAdChoiceTitle(),this.rendered=!0}},{key:"_adjustRTL",value:function(){var e=this._getCssFromSelector(this.model.get("rboxCssSelectors.title"));e&&"rtl"===e.direction&&(this.ui.wrapper.css({"flex-direction":"row-reverse",direction:"ltr"}),this.ui.icon.addClass("_cm-native-ad-icon-rtl").removeClass("_cm-native-ad-icon"))}},{key:"_adjustToDarkMode",value:function(){this.model.get("adjustToDarkMode.isActive")&&(this._logToElasticLogger("adjust to dark mode"),this.ui.wrapper.css({"background-color":"unset !important"}))}},{key:"_logToElasticLogger",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Jn,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.elasticLogger&&e&&this.elasticLogger.log({message:e,severity:t,extraData:i})}},{key:"bindEvents",value:function(){this.createStateHandlers([{event:"adNativeSettings",funcName:"_updateAdData"},{event:"repeatState:".concat(o.repeatState.hiding),funcName:"show"},{event:"loadingViewState:".concat(o.loadingViewState.hiding),funcName:"show"},{event:"floatingView:".concat(o.floatingView.detach),funcName:"detach"},{event:"floatingView:".concat(o.floatingView.attach),funcName:"attach"},{event:"floatingView:".concat(o.floatingView.postAttach),funcName:"postAttach"},{event:"floatingView:".concat(o.floatingView.permanentClosed),funcName:"permanentClosed"}])}},{key:"_updateAdData",value:function(){this.rendered||this._render(),this.adNativeSettings=this.model.get("adNativeSettings"),this._displayTitleOnTop(),this._setRandomTitle(),this._handleBranding(),this.isClickable=this.adNativeSettings.isClickable;var e=this.model.get("rboxCssSelectors.title");this._updateContainerViewTitleVisibility(),this._adjustDescFontToTitleFont(e),this._updateTitleContainerEl(this.ui.ctaButtone,this.adNativeSettings[this.nativeAdMapping.ctaButtone],"",this.model.get("customization.cta")),this._updateTitleContainerEl(this.ui.title,this.adNativeSettings[this.nativeAdMapping.title],e,this.model.get("customization.title")),this._updateTitleContainerEl(this.ui.description,this.adNativeSettings[this.nativeAdMapping.description],this.model.get("rboxCssSelectors.description"),this.model.get("customization.description")),this._updateTitleContainerEl(this.ui.branding,this.adNativeSettings[this.nativeAdMapping.branding],this.model.get("rboxCssSelectors.branding"),this.model.get("customization.branding")),this._updateIcon(this.adNativeSettings[this.nativeAdMapping.icon]),this._createFloatingNAS(),this._adjustRTLByLanguage(),this._isSuperSlider()?this.hide():this.show(),this._fitToSize(),this._checkSendNasOpp(),this.adDataUpdated=!0,this.model.trigger("nativeAdSettingsUpdated")}},{key:"_adjustRTLByLanguage",value:function(){if(Mc.isLanguageRTL(this.model)){var e={"text-align":"right",direction:"rtl"};this.ui.title.css(e),this.ui.description.css(e),this.ui.branding.css(e),this.ui.wrapper.css(e)}}},{key:"_checkSendNasOpp",value:function(){this.sendNasOpp&&(this.detached?this.model.trigger("displayingNASTitleOnly"):this.model.trigger("displayingFullNAS"))}},{key:"_setRandomTitle",value:function(){this.model.get("getRandomNativeAdTitle")&&!this.adNativeSettings[this.nativeAdMapping.title]&&(this.adNativeSettings[this.nativeAdMapping.title]=Mc.getRandomFromList(this.model.get("randomTitlesList")))}},{key:"_displayTitleOnTop",value:function(){var e=this;this._isTitleOnTop()&&(this.model.set("isTitleOnTop",!0),this.model.set("getRandomNativeAdTitle",!1),this._displayTitleOnly(),(0,S.default)(this.ui.title).css({"max-width":"340px"}),setTimeout((function(){return(0,S.default)(e.ui.title).css({"max-width":"225px"})}),2e3))}},{key:"_isTitleOnTop",value:function(){return this.model.get("unitType").indexOf("RECO_REEL_WIDGET")>-1&&this.model.get("frameType")===t().FRAME_TYPE.amp&&this.model.get("showTitleOnTop")}},{key:"_handleBranding",value:function(){this.shouldHideBrandingText&&(this.containerHeight=this.containerHeight||(0,S.default)("._cm-widget-item").height(),this.model.trigger("change:customization.titleContainer.branding.displayState",this._hasNASTitle()?o.brandingDisplayState.hide:o.brandingDisplayState.show))}},{key:"_fitToSize",value:function(){if(this.shouldFitToSize)if(this.hasNAS=this._hasNASTitle(),this.hasNAS){if(!this.detached){this.fitToSizeDisplaying=t().NATIVE_AD.FIT_TO_SIZE.NONE;var e=this.model.get("videoPlaceholderSize");this.containerHeight&&e&&(this._canFitTitleAndDescription(e)?this._canFitTitleOnly(e)?(this.fitToSizeDisplaying=t().NATIVE_AD.FIT_TO_SIZE.TITLE,this._displayTitleOnly(),this.model.trigger("displayingNASTitleOnly")):this.hide():(this.fitToSizeDisplaying=t().NATIVE_AD.FIT_TO_SIZE.FULL,this.show(),this.model.trigger("displayingFullNAS")))}}else this.hide()}},{key:"_canFitTitleAndDescription",value:function(e){return Number(e.height)+this.$el.height()>this.containerHeight}},{key:"_canFitTitleOnly",value:function(e){return Number(e.height)+this.ui.title.height()<this.containerHeight}},{key:"_displayTitleOnly",value:function(){this.ui.title.show(),this.ui.description.hide(),this.ui.ctaButtone.hide(),this.ui.branding.hide(),this.ui.icon.hide(),this.container.height(this.containerHeight)}},{key:"_isSuperSlider",value:function(){return this.model.get("detachToSlider.isStartFromSlider")&&this.model.get("detachToSlider.isDetachToSlider")}},{key:"_updateContainerViewTitleVisibility",value:function(){var e=this.adNativeSettings.title||this.adNativeSettings.ctatext||this.adNativeSettings.desc||this.adNativeSettings.sponsored,t=this.container.find("._cm-ad-title");e?(t.hide(),this.ui.adChoice.show()):(t.show(),this.ui.adChoice.hide())}},{key:"_adjustDescFontToTitleFont",value:function(e){var i=this.model.get("customization.description");if(!i)try{var n=parseInt(this._getCssFromSelector(e).fontSize);isNaN(n)||(i={},Mc.extend(i,{"font-size":n*t().NATIVE_AD.DESC_TITLE_FONT_RATIO+"px"}),this.model.set("customization.description",i))}catch(e){this.log.info("No title selector found - apply default values")}}},{key:"_updateTitleContainerEl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;e.text(t),t?(this._applyCssFromSelector(e,i,n),e.show()):e===this.ui.ctaButtone&&e.hide(),this._updateTitleContainerClickability(e)}},{key:"_applyCssFromSelector",value:function(e,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Mc.pick(this._getCssFromSelector(i),t().CSS_PROPERTIES_FROM_RBOX);Mc.extend(r,n),e.css(Mc.toCssObj(r))}},{key:"_getCssFromSelector",value:function(e){if(!e)return{};var t="string"==typeof e?document.querySelector(e):e;return t&&getComputedStyle(t)}},{key:"_updateTitleContainerClickability",value:function(e){this.isClickable?(e[0].onclick=this._onClick.bind(this),e.css({cursor:"pointer"}),e.attr("role","link")):(e[0].onclick=null,e.css({cursor:"default"}),e.removeAttr("role"))}},{key:"_onClick",value:function(e){var t=e.target.getAttribute("data-click-name");this.model.set("nativeAdClick",t,{silent:!0}),this.model.trigger("change:nativeAdClick",t)}},{key:"_updateIcon",value:function(e){e?(this.iconImg||this._createIconImg(),this.iconImg.src=e,this._updateTitleContainerClickability(this.ui.icon),this.ui.icon.show()):this.ui.icon.hide()}},{key:"_createIconImg",value:function(){this.iconImg=document.createElement("img"),this.iconImg.className="_cm-native-ad-icon-img",this.iconImg.setAttribute("data-click-name","adIconClick"),this.iconImg.addEventListener("error",this._onError.bind(this)),this.ui.icon.css(Mc.toCssObj(Mc.extend({},this.model.get("customization.icon")))),this.ui.icon.append(this.iconImg)}},{key:"_onError",value:function(){this.log.error("can't load native ad icon"),this.ui.icon.hide()}},{key:"_addAdChoiceTitle",value:function(){this.model.get("components.adChoice.isActive")&&this.model.get("components.adChoice.title.isActive")&&(this.adChoice=new zl({model:this.model,container:this.ui.adChoice,parent:this.el,type:t().AD_CHOICE_TYPE.TITLE}))}},{key:"_addAdditionalCss",value:function(e){(0,S.default)(this.el).addClass(e)}},{key:"hide",value:function(){this.$el.hide()}},{key:"show",value:function(){this._isSuperSlider()||this.$el.show()}},{key:"_createFloatingNAS",value:function(){this.globalModel.get("floatingNAS.isActive")&&(this.hasNAS=this._hasNASTitle(),this.hasNAS&&(this.isMultiFloatingNASElements&&this._removePreviousFloatingNASElement(),this.ui.floatingNAS={},this._createFloatingNASWrapper(),this._createFloatingNASTitle(),this._appendFloatingNAS()))}},{key:"_removePreviousFloatingNASElement",value:function(){this.ui.floatingNAS&&this.ui.floatingNAS.wrapper&&this.ui.floatingNAS.wrapper.parentElement.removeChild(this.ui.floatingNAS.wrapper)}},{key:"_createFloatingNASWrapper",value:function(){this.ui.floatingNAS.wrapper=document.createElement("div"),this.ui.floatingNAS.wrapper.className="".concat(Uc.wrapper.replace(/^\./,"")," _cm-native-ad-bottom-floating"),this.shouldFitToSize&&!this.detached&&(0,S.default)(this.ui.floatingNAS.wrapper).addClass("hide"),this.ui.floatingNAS.wrapper.style.width=this.model.get("detachToSlider.width")+"px"}},{key:"_createFloatingNASTitle",value:function(){this.ui.floatingNAS.title=this.ui.title[0].cloneNode(!0),this.ui.floatingNAS.title.className+=" _cm-native-ad-title-floating"}},{key:"_appendFloatingNAS",value:function(){this.ui.floatingNAS.wrapper.appendChild(this.ui.floatingNAS.title),this._getActiveAd().appendChild(this.ui.floatingNAS.wrapper)}},{key:"_getActiveAd",value:function(){return document.getElementsByClassName("_cm-ad-active")[0]||this.container.get(0)}},{key:"_getFloatingView",value:function(){return document.getElementsByClassName("_cm-floating-view")[0]}},{key:"_hasNASTitle",value:function(){return"string"==typeof this.adNativeSettings[this.nativeAdMapping.title]}},{key:"detach",value:function(){this.isSticky?this.hide():this.shouldFitToSize&&this.fitToSizeDisplaying===t().NATIVE_AD.FIT_TO_SIZE.NONE||(this.detached=!0,this.hasNAS&&(this.ui.floatingNAS.wrapper.style.width=this.model.get("detachToSlider.width")+"px",this.ui.floatingNAS.wrapper.className=this.ui.floatingNAS.wrapper.className.replace(" hide","")))}},{key:"attach",value:function(){this.isSticky||this.shouldFitToSize&&this.fitToSizeDisplaying===t().NATIVE_AD.FIT_TO_SIZE.NONE||this.hasNAS&&this.detached&&(this.ui.floatingNAS.wrapper.style.width=this.model.get("width")+"px")}},{key:"postAttach",value:function(){this.isSticky?this._displayFitToSizeNAS():this.shouldFitToSize&&this.fitToSizeDisplaying===t().NATIVE_AD.FIT_TO_SIZE.NONE||(this.hasNAS&&this.detached&&(this._handleActiveAdWithoutNAS(),this.ui.floatingNAS.wrapper.className+=" hide",this._displayFitToSizeNAS()),this.detached=!1)}},{key:"_displayFitToSizeNAS",value:function(){this.shouldFitToSize&&this.fitToSizeDisplaying!==t().NATIVE_AD.FIT_TO_SIZE.NONE&&(this.fitToSizeDisplaying===t().NATIVE_AD.FIT_TO_SIZE.TITLE?this._displayTitleOnly():this.fitToSizeDisplaying===t().NATIVE_AD.FIT_TO_SIZE.FULL&&this.show())}},{key:"triggerDetachIfRendered",value:function(){this.adDataUpdated&&this.model.trigger("nativeAdSettingsUpdated")}},{key:"getFloatingNASHeight",value:function(){return this.ui.floatingNAS&&this.ui.floatingNAS.wrapper?this.ui.floatingNAS.wrapper.getBoundingClientRect().height:0}},{key:"getNASHeight",value:function(){return this.shouldFitToSize&&this.fitToSizeDisplaying!==t().NATIVE_AD.FIT_TO_SIZE.NONE?this.fitToSizeDisplaying===t().NATIVE_AD.FIT_TO_SIZE.TITLE?this.ui.title.height():this.$el.height():0}},{key:"onAdComplete",value:function(){this.prevAdNAS=this.hasNAS,this.adDataUpdated=!1,this.hasNAS&&this.detached&&this._isSuperSlider()&&this._handleActiveAdWithoutNAS()}},{key:"onAdDisplayChange",value:function(){if(this.hasNAS&&this.detached){if(this.prevAdNAS&&this._isSuperSlider())return;this._handleFloatingViewWithNAS(),this._isSuperSlider()&&this._handleActiveAdWithNAS()}}},{key:"onAdSwapped",value:function(){this.hasNAS=this._hasNASTitle()||this._isActiveAdContainNAS(),this.detached&&this.hasNAS!==this.prevAdNAS&&(this.hasNAS?this._handleFloatingViewWithNAS():this._handleActiveAdWithNAS()),this.adDataUpdated=!0,this.prevAdNAS=this.hasNAS}},{key:"_handleFloatingViewWithNAS",value:function(){var e=this._getFloatingView();e&&(e.style.bottom=parseInt(e.style.bottom)+this.getFloatingNASHeight()+"px")}},{key:"_handleActiveAdWithNAS",value:function(){var e=this._getActiveAd();e&&(e.style.height=parseInt(e.style.height)+this.getFloatingNASHeight()+"px")}},{key:"_handleActiveAdWithoutNAS",value:function(){var e=this._getActiveAd();if(e){var t=parseInt(e.style.height);t>this.model.get("videoPlaceholderSize").height&&(e.style.height=t-this.getFloatingNASHeight()+"px")}}},{key:"_isActiveAdContainNAS",value:function(){var e=this._getActiveAd();return!!e&&e.getElementsByClassName("_cm-native-ad-bottom-floating").length>0}},{key:"permanentClosed",value:function(){this._isSuperSlider()&&this.hide()}},{key:"hideFloatingNAS",value:function(){this.detached&&this.ui.floatingNAS&&(0,S.default)(this.ui.floatingNAS.wrapper).addClass("hide")}},{key:"showFloatingNAS",value:function(){this.detached&&this.ui.floatingNAS&&(0,S.default)(this.ui.floatingNAS.wrapper).removeClass("hide")}},{key:"className",get:function(){return Fc}},{key:"ui",get:function(){return this.UI?this.UI:this.UI=Uc},set:function(e){return this.UI=e}}],n&&Vc(i.prototype,n),s&&Vc(i,s),Object.defineProperty(i,"prototype",{writable:!1}),l}(n.s),Hc=Wc;i(1999);var zc=i(9288),$c=i(1999),Gc=i(9652),qc=zc.View.extend({className:"_cm-content-carousel-item",events:{"click ":"_onClick"},initialize:function(e){this.log=new Gc({unitType:e.unitType,className:"ContentCarouselItemView"}),this.model=e.model,this.itemId=e.itemId,this.container=e.container,this._rendered=!1,this._bindEvents(),this.createStateHandlers=tl.L,(0,S.default)(this.container).append(this.$el),this._setInfo(),this.render()},render:function(){if(!this._rendered){var e=$c.template('<img src="{{image}}" height="70" width="120" class="_cm-content-carousel-item-image"/> <div class="_cm-content-carousel-item-description {{selected}}">{{title}}</div> <div class="_cm-content-carousel-item-play-icon {{selected}}"> <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"> <path d="M8 0C3.6 0 0 3.6 0 8C0 12.4 3.6 16 8 16C12.4 16 16 12.4 16 8C16 3.6 12.4 0 8 0ZM6 12V4L11.5 8L6 12Z" fill="white"/> </svg> </div> <div class="_cm-content-carousel-item-playing-now {{selected}}"> {{playingNowString}} </div> ')(this.itemInfo);this.$el.append(e),this.imageNode=this.$el.find("._cm-content-carousel-item-image"),this.imageNode.css({"background-image":' url("'.concat(this.model.get("components.contentCarousel.backgroundImage"),'")')})}},_bindEvents:function(){},_onClick:function(){this.itemInfo.selected||this.model.set("playlistItemClicked",this.itemId)},_setInfo:function(){this.itemInfo=this.model.get("player.playlist")[this._getItemIndex()],this.itemInfo.description=this.itemInfo.title.replace(/-/g," "),this.itemInfo.playingNowString=this.model.get("playingNowString"),this.updateSelected()},updateSelected:function(){this.itemInfo.selected=this.model.get("player.playlist")[this._getItemIndex()].selected,(0,S.default)(this.$el).removeClass("true"),(0,S.default)(this.$el).removeClass("false"),(0,S.default)(this.$el).addClass(this.itemInfo.selected.toString())},_getItemIndex:function(){for(var e=this.model.get("player.playlist"),t=0,i=0;i<e.length;i++)if(e[i].id===this.itemId){t=i;break}return t}}),Yc=i(9288),Kc=(i(1999),i(9652));Yc.View.extend({className:"_cm-content-carousel-area",id:"_cm-content-carousel-area",initialize:function(e){this.log=new Kc({unitType:e.unitType,className:"ContentCarouselView"}),this.container=e.container,this._rendered=!1,this._bindEvents(),this.createStateHandlers=tl.L,this.componentsVisibilityListener=e.componentsVisibilityListener,this.componentsVisibilityListener&&this._setComponentsVisibilityListener(),(0,S.default)(this.container).append(this.$el)},render:function(){this._rendered?this.updatePlaylistItem():(this._rendered=!0,this.$el.append('<div class="_cm-content-carousel-items-container-wrapper"> <div class="_cm-content-carousel-items-container"></div> </div> <div class="_cm-content-carousel-arrows"> <div class="_cm-content-carousel-arrow _cm-content-carousel-arrow-left"> <svg width="8" height="13" viewBox="0 0 8 13" fill="none" xmlns="http://www.w3.org/2000/svg"> <path d="M0.999999 12L7 6.5L0.999999 1" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" transform="rotate(-180 4,6.5) "/> </svg> </div> <div class="_cm-content-carousel-arrow _cm-content-carousel-arrow-right"> <svg width="8" height="13" viewBox="0 0 8 13" fill="none" xmlns="http://www.w3.org/2000/svg"> <path d="M0.999999 12L7 6.5L0.999999 1" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/> </svg> </div> </div> <div class="_cm-content-carousel-blocker"></div> '),this.listContainer=this.$el.find("._cm-content-carousel-items-container"),this.blockDiv=this.$el.find("._cm-content-carousel-blocker"),this.scrollElement=document.querySelector("div._cm-content-carousel-items-container-wrapper"),this.listItemsArray=[],this.unBlockView(),this._createListItems(),this._setScrollButtons())},_createListItems:function(){for(var e=this.model.get("player.playlist"),t=0;t<e.length;t++)e[t].id=t,e[t].selected=!1;this.model.set("player.playlist",e);for(var i=0;i<e.length;i++){var n=new qc({model:this.model,container:this.listContainer,itemId:i});this.listItemsArray.push(n)}},_bindEvents:function(){},_setComponentsVisibilityListener:function(){this.listenTo(this.model,"change:".concat(this.componentsVisibilityListener),this._onComponentsVisibilityChange.bind(this)),this.model.get(this.componentsVisibilityListener)||this.hide()},_onComponentsVisibilityChange:function(){this.model.get(this.componentsVisibilityListener)?this.show():this.hide()},_setScrollButtons:function(){var e=this.$el.find("._cm-content-carousel-arrow-left"),t=this.$el.find("._cm-content-carousel-arrow-right");e.on("click",this._scrollLeft.bind(this)),t.on("click",this._scrollRight.bind(this))},_scrollLeft:function(){this.scrollElement.scrollBy(-100,0)},_scrollRight:function(){this.scrollElement.scrollBy(100,0)},hide:function(){this.$el.hide()},show:function(){this.$el.show()},blockView:function(){this.blockDiv.css({display:"block"})},unBlockView:function(){this.blockDiv.css({display:"none"})},updatePlaylistItem:function(){for(var e=0;e<this.listItemsArray.length;e++)this.listItemsArray[e].updateSelected()}});function Qc(e){return Qc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qc(e)}function Zc(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if("object"!==Qc(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==Qc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===Qc(o)?o:String(o)),n)}var r,o}var Xc=i(1999),Jc=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.model=t,this.log=new r.Z({unitType:this.model.get("unitType"),className:this.constructor.name,version:this.model.get("version"),isDebug:this.model.get("isDebug")})}var t,i,n;return t=e,(i=[{key:"setReportingObserver",value:function(e){if(!this.reportingObserver&&Xc.isObserverSupported("ReportingObserver")){var t={types:this.model.get("reportingObserver.types"),buffered:!0};this.reportingObserver=new ReportingObserver(e.bind(this),t),this.reportingObserver.observe(),this._bindUnloadEvents(e)}}},{key:"_bindUnloadEvents",value:function(e){var t=this;window.addEventListener("unload",(function(i){var n=t.reportingObserver.takeRecords();e(n)}))}}])&&Zc(t.prototype,i),n&&Zc(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),eu=function(){var e;return function(t){return e||(e=new Jc(t)),e}}(),tu=eu;function iu(e){return iu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iu(e)}function nu(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if("object"!==iu(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==iu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===iu(o)?o:String(o)),n)}var r,o}function ru(e,t){return ru=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ru(e,t)}function ou(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=su(e);if(t){var r=su(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return function(e,t){if(t&&("object"===iu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,i)}}function su(e){return su=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},su(e)}var au=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ru(e,t)}(s,e);var t,i,n,r=ou(s);function s(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),r.call(this,e)}return t=s,(i=[{key:"_initViewabilityHandler",value:function(){this._bindPlay()}},{key:"_bindPlay",value:function(){this.model.get("adState")!==o.adState.playing?this.createStateHandlers([{event:"adState:".concat(o.adState.playing),funcName:"_startTestingViewability",isListenOnce:!0}]):this._startTestingViewability()}},{key:"_startTestingViewability",value:function(){this._updateViewabilityTimes(),this._checkViewability(),this._bindPause()}},{key:"_bindPause",value:function(){this.model.get("adState")!==o.adState.paused?this.createStateHandlers([{event:"adState:".concat(o.adState.paused),funcName:"_stopAllViewability",isListenOnce:!0}]):this._stopAllViewability()}},{key:"_stopAllViewability",value:function(){this._bindPlay()}}])&&nu(t.prototype,i),n&&nu(t,n),Object.defineProperty(t,"prototype",{writable:!1}),s}(ya);function lu(e){return lu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lu(e)}function cu(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if("object"!==lu(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==lu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===lu(o)?o:String(o)),n)}var r,o}function uu(e,t){return uu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},uu(e,t)}function du(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=hu(e);if(t){var r=hu(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return function(e,t){if(t&&("object"===lu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,i)}}function hu(e){return hu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},hu(e)}var fu=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&uu(e,t)}(a,t);var i,n,r,s=du(a);function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),s.call(this,e)}return i=a,(n=[{key:"_initViewabilityHandler",value:function(){this._startViewabilityTimers()}},{key:"_startViewabilityTimers",value:function(){this.model.get("isViewableByOb")?this._startViewabilityTime():this.createStateHandlers([{event:["isViewableByOb:true","isInTab:true"],funcName:"_startViewabilityTime"},{event:"isViewableByOb:false",funcName:"_clearViewabilityTime"}]),this.model.get("isViewableByOb100")&&this._startViewability100Time(),this.createStateHandlers([{event:["isViewableByOb100:true","isInTab:true"],funcName:"_startViewability100Time"},{event:"isViewable100:false",funcName:"_clearViewability100"},{event:"adState:".concat(o.adState.paused),funcName:"clearAllViewabilityTimers",isListenOnce:!0},{event:"isInTab:false",funcName:"_clearViewabilityTime"}])}},{key:"_startViewabilityTime",value:function(){this.activeAd&&!this.activeAd.isViewed&&(this._startViewabilityTimer(e.TIMER_NAMES.viewability,this._onViewability.bind(this),this.traceViewabilitySeconds),this._startViewabilityTimer(e.TIMER_NAMES.viewabilityOneS,this._onViewabilityOneS.bind(this),1))}},{key:"_startViewabilityTimer",value:function(e,t,i){this.timers[e]||(this.timers[e]=setTimeout(t,1e3*i))}},{key:"_onViewability",value:function(){this.timers[e.TIMER_NAMES.viewability]=void 0,this.activeAd.onViewability()}},{key:"_startViewability100Time",value:function(){this.activeAd&&!this.activeAd.isViewed&&this._startViewabilityTimer(e.TIMER_NAMES.viewability100,this._onViewability100.bind(this),this.traceViewability100Seconds)}},{key:"_startViewabilityAMPTime",value:function(){this.activeAd&&!this.activeAd.isViewed&&this._startViewabilityTimer(e.TIMER_NAMES.viewabilityAMP,this._onViewabilityAMP.bind(this),this.traceViewabilitySeconds)}},{key:"clearAllViewabilityTimers",value:function(){this._clearViewabilityTime(),this._clearViewability100()}},{key:"_clearViewabilityTime",value:function(){this._clearViewabilityTimer(e.TIMER_NAMES.viewability),this._clearViewabilityTimer(e.TIMER_NAMES.viewabilityOneS)}},{key:"_clearViewability100",value:function(){this._clearViewabilityTimer(e.TIMER_NAMES.viewability100)}},{key:"_clearViewabilityAMP",value:function(){this._clearViewabilityTimer(e.TIMER_NAMES.viewabilityAMP),this._onNoViewabilityAMP()}},{key:"_clearViewabilityTimer",value:function(e){this.timers[e]&&(clearTimeout(this.timers[e]),this.timers[e]=void 0)}},{key:"_onNoViewabilityAMP",value:function(){this.timers[e.TIMER_NAMES.viewabilityAMP]=void 0,this.activeAd.onNoViewabilityAMP()}},{key:"_onViewabilityOneS",value:function(){this.timers[e.TIMER_NAMES.viewabilityOneS]=void 0,this.activeAd.onViewabilityOneS()}},{key:"_onViewability100",value:function(){this.timers[e.TIMER_NAMES.viewability100]=void 0,this.activeAd.onViewability100()}},{key:"_onViewabilityAMP",value:function(){this.timers[e.TIMER_NAMES.viewabilityAMP]=void 0,this.activeAd.onViewability()}}])&&cu(i.prototype,n),r&&cu(i,r),Object.defineProperty(i,"prototype",{writable:!1}),a}(ya);function pu(e){return pu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pu(e)}function mu(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if("object"!==pu(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==pu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===pu(o)?o:String(o)),n)}var r,o}var yu=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cache={}}var t,i,n;return t=e,i=[{key:"getViewabilityService",value:function(e){var t=e.model,i=e.ad,n=e.onViewabilityCallback,r=i.supportVideoCurrentTimeEvents&&t.get("isUseNewViewabilityCalc")?au:fu,o=this.cache[r];return o||(this.cache[r]=o=new r({model:t,onViewability:n})),o}}],i&&mu(t.prototype,i),n&&mu(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function vu(e){return vu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vu(e)}function gu(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if("object"!==vu(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==vu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===vu(o)?o:String(o)),n)}var r,o}function bu(e,t){return bu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},bu(e,t)}function _u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=wu(e);if(t){var r=wu(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return function(e,t){if(t&&("object"===vu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,i)}}function wu(e){return wu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},wu(e)}var Su=i(1999),Pu=Su.now().toString(),Tu=function(){this.activeAd&&(this.activeAd.unmute(),this.currModel.set("volumeMuted",!1))},Au=function(){this.activeAd&&(this.activeAd.mute(),this.currModel.set("volumeMuted",!0))},Eu={video:"._cm-video-ad"},Cu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bu(e,t)}(l,e);var i,n,o,a=_u(l);function l(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"VideoView",n=arguments.length>2?arguments[2]:void 0;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=a.call(this,e)).eligibilityService=e.eligibilityService||{},t.log=new r.Z({unitType:t.model.get("unitType"),className:i,version:t.model.get("version"),isDebug:t.model.get("isDebug")}),t.model.set("videoAdId",t.videoAdId),t.ad=e.adjs,t.currModel=n||t.model,t._setVolumeAnimationTrigger(),t._bindEvents(),t._bindBlockedByExternalUnitChange(),t._initPerformanceMonitor(),t._viewabilitySerivcesFactory=new yu,t}return i=l,(n=[{key:"_bindEvents",value:function(){}},{key:"_initPerformanceMonitor",value:function(){this.currModel.get("reportingObserver.isActive")&&(this.performanceMonitor=new tu(this.currModel),this.performanceMonitor.setReportingObserver(this.reportingObserverCB.bind(this)))}},{key:"reportingObserverCB",value:function(e){var t=this,i=this.currModel.get("reportingObserver.ids");i&&i.length>0&&(e=Su.filter(e,(function(e){return e.body&&e.body.id&&Su.contains(i,e.body.id)}))),this.activeAd?Su.forEach(e,(function(e){t._setReportingObserverAdData(e),t.activeAd.oppsService.fireBeaconOpp("reportingObserver")})):this.model.get("pixels.reportingObserver.isFire")&&this._fireReportObserverPixel(e)}},{key:"_setReportingObserverAdData",value:function(e){this.activeAd.adData.rot=e.type,this.activeAd.adData.roid=e.body&&e.body.id,this.activeAd.adData.rom=e.body&&e.body.message}},{key:"_fireReportObserverPixel",value:function(e){var t=this;Su.forEach(e,(function(e){var i={debug:"rot:".concat(e.type,"!roid:").concat(e.body.id,"!rom:").concat(e.body.message,"!")},n=t.model.getPixel("pixels.reportingObserver"),r=Su.addParametersToUrl(n,i,-1===n.indexOf("?"));Su.isSendBeaconSupported()&&navigator.sendBeacon(r)}))}},{key:"_setVolumeEvents",value:function(){this.currModel.on("change:volumeMuted",this._handleVolume.bind(this)),this.model.get("components.volume.isActive")&&this.currModel.on("change:onUnMuteClicked",this._fireUserAdUnmuted.bind(this)),this.currModel.get("autoplaySoundOn")?(this._bindOnHoverListeners(),this.checkVolumeStatus()):this.createStateHandlers([{event:"autoplaySoundOn:true",funcName:"_bindOnHoverListeners",isListenOnce:!0},{event:"autoplaySoundOn:true",funcName:"checkVolumeStatus",isListenOnce:!0}])}},{key:"checkVolumeStatus",value:function(){this.currModel.get("autoplaySoundOn")&&"on"===this.currModel.get("volume")?(this.log.info("Unmute first video because volume=on"),this.currModel.set("volumeMuted",!1)):this.currModel.set("volumeMuted",!0)}},{key:"hide",value:function(){this.$el.hide()}},{key:"show",value:function(){this.$el.show()}},{key:"close",value:function(){this.model.set("closeState",s().closeState.videoViewClosed)}},{key:"_customize",value:function(){var e=this.model.get("additionalCss");this.$el.css(Su.toCssObj(e))}},{key:"_rePosition",value:function(e,t){this.$el.css(t)}},{key:"_onLoadingClick",value:function(){this.ui.video[0].id=this.videoAdId,this.replayAd()}},{key:"replayAd",value:function(){this.model.get("isReplayAd")&&this.repeatingAd&&(this.activeAd=this.repeatingAd,this.activeAd.vpaidWrapper.restartAd(),this._resizeRepeatingAd(),this.activeAd.setToModel("adQState",s().adQState.repeating,this.repeatingAd.adId),this.activeAd.setToModel("adState",s().adState.repeating,this.repeatingAd.adId)),this.model.set("isAdClosedByTimer",!1)}},{key:"_onLearnMoreClick",value:function(){this.repeatingAd&&this.repeatingAd.onLearnMoreClick()}},{key:"_onDisplayingFullNAS",value:function(){this.activeAd&&this.activeAd.onDisplayingFullNAS()}},{key:"_onDisplayingNASTitleOnly",value:function(){this.activeAd&&this.activeAd.onDisplayingNASTitleOnly()}},{key:"_setNasOppEvents",value:function(){this.model.listenTo(this.model,"displayingFullNAS",this._onDisplayingFullNAS.bind(this)),this.model.listenTo(this.model,"displayingNASTitleOnly",this._onDisplayingNASTitleOnly.bind(this))}},{key:"_handleVolume",value:function(){this.activeAd&&(this.currModel.get("volumeMuted")?this.activeAd.mute():this.activeAd.unmute())}},{key:"_fireUserAdUnmuted",value:function(){this.currModel.get("onUnMuteClicked")&&this.activeAd&&this.activeAd.oppsService.fireUserAdUnmuted()}},{key:"id",get:function(){return"_cm-css-reset"}},{key:"videoAdId",get:function(){return Pu}},{key:"ui",get:function(){return this.UI?this.UI:this.UI=Eu},set:function(e){return this.UI=e}},{key:"_onMouseEnter",get:function(){return Tu}},{key:"_onMouseLeave",get:function(){return Au}},{key:"onAdComplete",value:function(){this.setRepeatingAd(),this.activeAd=void 0,this.model.get("isMultiAd")?this.checkEligible():this.model.set("closeState",s().closeState.terminate)}},{key:"checkEligible",value:function(){this.model.get("isInTab")&&this.isEligibleToPlay()?(this.activeAd||this.getReadyAd(),this.activeAd&&this.playAd()):this.activeAd&&this.activeAd.pause(t().PAUSE_REASONS.LOST_ELIGIBILITY)}},{key:"isEligibleToPlay",value:function(){return this.model.get("isEligibleToPlay")}},{key:"getReadyAd",value:function(){this.model.get("hasReadyAd")&&(this._onPostRepeatImpression(),this.model.get("volumeMuted")||this.model.get("wurfl.os.name")!==t().OS.IOS||this.model.set("volumeMuted",!0),this.activeAd=this.model.getNextAd(),this.activeAd&&-1===this.model.get("unitType").indexOf("RECO_REEL_WIDGET")&&this.model.set("aspectRatioNum",this.activeAd.getAspectRatioNum()),this.postGetAd())}},{key:"onGotRVAd",value:function(){this.currModel.get("hasReadyAd")&&this.currModel.get("isNextAdRV")&&!this.isCurrentAdRV&&(this.activeAd&&this.isEligibleToPlay()?this.swapToNewReadyAd():this.hadPossibleRV=!0)}},{key:"swapToNewReadyAd",value:function(){var e=this;this.isSwappedAd=!0,this.swappedAd=this.activeAd,this.swappedAd.onAdSwappedOut(),this.pauseAd(t().PAUSE_REASONS.AD_SWAPPED),this.getReadyAd(),this._swapNativeAdSettings(),setTimeout((function(){e.activeAd.onAdSwappedIn()}),0)}},{key:"_swapNativeAdSettings",value:function(){this.nativeAdSettings&&this.nativeAdSettings.onAdSwapped()}},{key:"hasReadyAdChangeSubUnit",value:function(){this.log.info("hasReadyAdChangeSubUnit",this.globalModel.get("hasReadyAd")),!this.isRepeatMode&&this.globalModel.get("hasReadyAd")&&this.isEligibleToPlay()&&this.getReadyAd()}},{key:"setRepeatMode",value:function(e){this.isRepeatMode=e}},{key:"postGetAd",value:function(){}},{key:"playAd",value:function(){this.log.info("@@play ad",this.model.get("unitType")),this.activeAd&&(this.log.info("Play Ad !!!!",this.activeAd),this.activeAd.play(),this.activeAd.isUsed||(this.activeAd.isUsed=!0),this.model.get("components.volume.isActive")&&setTimeout(this._fireVolumeStateCheck.bind(this),0),this.viewabiltyService=this._viewabilitySerivcesFactory.getViewabilityService({model:this.model,ad:this.activeAd,onViewabilityCallback:this._onViewability.bind(this)}),this.viewabiltyService.updateActiveAd(this.activeAd))}},{key:"pauseAd",value:function(e){this.activeAd&&this.activeAd.pause(e)}},{key:"_onViewability",value:function(){this.log.info("Viewability reached"),this.stickyViewCallback&&this.stickyViewCallback()}},{key:"_addDisclosureText",value:function(){(this.model.get("components.disclosureText.isActive")||this.model.get("detachToSlider.components.disclosureText.isActive"))&&(this.disclosureTextView=new Fl({model:this.model,container:this.el}),this.disclosureTextView.render())}},{key:"_fireVolumeStateCheck",value:function(){this._startAnimationOnce(),this._handleVolume(),this.currModel.trigger("lastVolumeStateCheck")}},{key:"_setVolumeAnimationTrigger",value:function(){var e=this;this._startAnimationOnce=Su.once((function(){e.currModel.trigger("startVolumeAnimation")}))}},{key:"_unBindOnHoverListeners",value:function(){this.el.removeEventListener("mouseenter",this._onMouseEnter.bind(this)),this.el.removeEventListener("mouseleave",this._onMouseLeave.bind(this))}},{key:"_bindOnHoverListeners",value:function(){this.currModel.get("autoplaySoundOn")&&"onHover"===this.currModel.get("volume")&&!this.currModel.get("volumeUserInteraction")&&(this.el.addEventListener("mouseenter",this._onMouseEnter.bind(this)),this.el.addEventListener("mouseleave",this._onMouseLeave.bind(this)),this.currModel.on("change:volumeUserInteraction",this._unBindOnHoverListeners.bind(this)))}},{key:"setRepeatingAd",value:function(){this.model.get("isReplayAd")&&this.activeAd&&this.activeAd.vpaidWrapper.isReplayable?this.repeatingAd=this.activeAd:this.repeatingAd=null}},{key:"_bindBlockedByExternalUnitChange",value:function(){this.currModel.on("change:blockedByExternalUnit",this._onBlockedByExternalUnitChange.bind(this))}},{key:"_onBlockedByExternalUnitChange",value:function(){this.currModel.get("blockedByExternalUnit")?(this.pauseAd(t().PAUSE_REASONS.BLOCKED_BY_EXTERNAL_UNIT),this.activeAd&&this.activeAd.fireAdOppOnce("adPausedOtherUnitIsPlaying")):this.checkEligible()}},{key:"_resizeRepeatingAd",value:function(){var e=this;setTimeout((function(){var t=e.isDetached?e.model.get("detachToSlider.width"):e.model.get("width"),i=e.isDetached?e.model.get("detachToSlider.height"):e.model.get("height");e.activeAd.vpaidWrapper.resizeAd(t,i)}),0)}},{key:"_onPostRepeatImpression",value:function(){this.repeatingAd&&(this.repeatingAd.vpaidWrapper&&this.repeatingAd.vpaidWrapper.stop&&this.repeatingAd.vpaidWrapper.stop("post_repeat"),this.repeatingAd=null,this.activeAd=null)}}])&&gu(i.prototype,n),o&&gu(i,o),Object.defineProperty(i,"prototype",{writable:!1}),l}(n.s),Ou=Cu;function ku(e){return ku="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ku(e)}function Du(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if("object"!==ku(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==ku(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===ku(o)?o:String(o)),n)}var r,o}function Ru(){return Ru="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Nu(e)););return e}(e,t);if(n){var r=Object.getOwnPropertyDescriptor(n,t);return r.get?r.get.call(arguments.length<3?e:i):r.value}},Ru.apply(this,arguments)}function Iu(e,t){return Iu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Iu(e,t)}function xu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=Nu(e);if(t){var r=Nu(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return function(e,t){if(t&&("object"===ku(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,i)}}function Nu(e){return Nu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Nu(e)}var Vu=i(1999),Lu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Iu(e,t)}(a,e);var i,n,r,s=xu(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=s.call(this,e)).$el.addClass("_cm-video"),t.template='<div class="_cm-video-ad"></div> ',t.container=e.container||"body",t.tabBehaviorFIMP=t.model.get("tabBehaviorFIMP")||!1,t.render(),t}return i=a,n=[{key:"_bindEvents",value:function(){this.createStateHandlers([{event:"videoPlaceholderSize",funcName:"_resize"},{event:"videoPlaceholderPosition",funcName:"setVideoPlaceholderPosition",withBind:!1},{event:["hasReadyAd:true","blockedByExternalUnit:false"],funcName:"_onAdReady",isListenOnce:!0},{event:"adState:completed",funcName:"onAdComplete"},{event:"isInTab",funcName:"_onTabChange"},{event:"isEligibleToPlay",funcName:"onEligibilityChange"},{event:"repeatState:clicked",funcName:"_onLoadingClick"},{event:"adState:repeating",funcName:"playAd"}]),this.isDetachActive&&this.model.get("detachToSlider").liquidSize.isActive&&(0,S.default)(window).on("resize",this._onResize.bind(this)),this.isContentActive()&&(this.createStateHandlers([{event:"isExternalComponentBlockingAdFromPlay",funcName:"_onContentTimerEnd"}]),this.model.get("displayFiller.beforeAd")!==t().DISPLAY_FILLER.BEFORE_AD.CONTENT&&this.model.set("isExternalComponentBlockingAdFromPlay",!1,{silent:!0}))}},{key:"_onResize",value:function(){if(this.isDetached){var e=this.getDetachPositionAndSize().size;this._resize(e),this.model.trigger("change:videoViewSize",e)}}},{key:"setVideoPlaceholderSize",value:function(){this._resize(arguments[0],arguments[1])}},{key:"setVideoPlaceholderPosition",value:function(){this.isDetached||this._rePosition(arguments[0],arguments[1])}},{key:"render",value:function(){this.renderTemplate(),this._customize(),this.ui.video[0].id=this.videoAdId,this.$el.css({width:this.model.get("width"),height:this.model.get("height")}),(0,S.default)(this.container).append(this.el),this.$el.addClass("_cm-video-with-slider"),this.model.set("videoViewContainer",this.ui.video[0]),this.model.set("targetId",this.videoAdId),this.model.set("videoViewState",o.videoViewState.rendered),Vu.trcPerformanceMeasurement(this.model.get("trcPerformanceMeasurementEnabled"),"videoInitToRender".concat(this.model.get("perfUnitType")),t().TRC_PERFORMANCE_ACTIONS.STOP)}},{key:"isEligibleToPlay",value:function(){var e="pause"!==this.model.get("onOutOfView")||this.model.get("isInTab")||this.tabBehaviorFIMP;return this.tabBehaviorFIMP&&(this.tabBehaviorFIMP=!1),this.model.get("blockedByExternalUnit")&&(e=!1),e}},{key:"getReadyAd",value:function(){this.model.get("hasReadyAd")&&(this.activeAd=this.model.getNextAd(),this._resizeVpaid())}},{key:"_resize",value:function(){var e=this.model.get("videoPlaceholderSize"),t={width:e.width+"px",height:e.height+"px"};this.$el.css(t),this.model.trigger("change:videoViewSize",this.model.get("videoPlaceholderSize"))}},{key:"_resizeVpaid",value:function(){var e=this.model.get("videoPlaceholderSize");this.activeAd.vpaidWrapper.resizeAd(e.width,e.height)}},{key:"_onAdReady",value:function(){this.model.set("isViewable",this.model.get("isInTab")||this.tabBehaviorFIMP),this.model.set("isViewable100",this.model.get("isInTab")),this.checkEligible("adReady")}},{key:"_onTabChange",value:function(){this.model.set("isViewable",this.model.get("isInTab")||this.tabBehaviorFIMP),this.model.set("isViewable100",this.model.get("isInTab")),this.checkEligible("onTabChange")}},{key:"_onContentTimerEnd",value:function(){this.checkEligible("externalComponentTimerIsDone")}},{key:"onEligibilityChange",value:function(){this.checkEligible("onEligibilityChange")}},{key:"checkEligible",value:function(e){this.model.set("playPauseReason",e),this.isEligibleToPlay()?(this.activeAd||this.getReadyAd(),this.activeAd?this.isContentActive()?this.model.get("isExternalComponentBlockingAdFromPlay")||(this.model.set("isFirstAd",!1),this.playAd()):this.playAd():this.model.get("hasReadyAd")||this.createStateHandlers([{event:["hasReadyAd:true","blockedByExternalUnit:false"],funcName:"_onAdReady",isListenOnce:!0}])):this.activeAd&&this.activeAd.pause(t().PAUSE_REASONS.LOST_ELIGIBILITY)}},{key:"isContentActive",value:function(){return this.model.get("displayFiller.beforeAd")===t().DISPLAY_FILLER.BEFORE_AD.CONTENT&&this.model.get("timeBeforeFirstAd")>0||this.model.get("displayFiller.betweenAds")===t().DISPLAY_FILLER.BETWEEN_ADS.CONTENT&&this.model.get("timeBetweenAds")>0}},{key:"onAdComplete",value:function(){this.setRepeatingAd(),this.hide();var e=this.activeAd&&this.activeAd.vpaidData.singleAd;this.activeAd=void 0,this.model.get("isMultiAd")||this.model.get("components.contentVideo.isActive")||e?(this.isViewed=!1,this.checkEligible("adComplete")):this.model.set("closeState",o.closeState.terminate)}},{key:"playAd",value:function(){Ru(Nu(a.prototype),"playAd",this).call(this),this.show()}}],n&&Du(i.prototype,n),r&&Du(i,r),Object.defineProperty(i,"prototype",{writable:!1}),a}(Ou),ju=Lu;function Bu(e){return Bu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bu(e)}function Mu(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if("object"!==Bu(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==Bu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===Bu(o)?o:String(o)),n)}var r,o}function Fu(e,t){return Fu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Fu(e,t)}function Uu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=Wu(e);if(t){var r=Wu(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return function(e,t){if(t&&("object"===Bu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,i)}}function Wu(e){return Wu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Wu(e)}var Hu=i(1999),zu=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fu(e,t)}(l,t);var i,n,s,a=Uu(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=a.call(this,e)).log=new r.Z({unitType:t.model.get("unitType"),className:"SliderContainerView",version:t.model.get("version"),isDebug:t.model.get("isDebug")}),t.log.info("constructor"),t.states=o,t.container=e.container||"body",t.model.set("containerViewState",o.readyState),t._bindEvents(),t.render(),t}return i=l,(n=[{key:"render",value:function(){this._customize(),this.el.id="_cm-css-reset",this._setInitialCSS(),(0,S.default)(this.container).append(this.el),this._loadComponents()}},{key:"_bindEvents",value:function(){this.createStateHandlers([{event:["adQState:impression","blockedByExternalUnit:false"],funcName:"_onFirstAdImpression",isListenOnce:!0},{event:"adState",funcName:"_adStateChange"},{event:"closeState:terminate",funcName:"_onCloseState"},{event:"d2dLoaded:true",funcName:"_ond2dLoaded"},{event:"content.isContentPlay",funcName:"_onResize"},{event:"adState:playing",funcName:"_onResize"},{event:"blockedByExternalUnit",funcName:"_blockedByExternalUnitChange"},{event:"adQState:completed",funcName:"_onAdComplete"},{event:"repeatState:clicked",funcName:"_onRepeatClick"}]),this.model.get("liquidSize.isActive")&&(0,S.default)(window).on("resize",this._onResize.bind(this))}},{key:"_onFirstAdImpression",value:function(){this.model.set("isIgnoreTab",!0),this.model.get("isEligibleToPlay")?this._showSlider():this.createStateHandlers([{event:"isEligibleToPlay:true",funcName:"_showSlider",isListenOnce:!0}])}},{key:"_setInitialCSS",value:function(){this.$el.css(this._getSliderPositionAndSize()),this._onResize(),this._hideSlider()}},{key:"_onResize",value:function(){var e,t=this._getSliderSize();this.model.set("videoPlaceholderSize",t),!this.model.get("adNativeSettings")||Hu.isEmpty(this.model.get("adNativeSettings"))||this.model.get("content.isContentPlay")?(e={width:t.width+"px",height:t.height+"px"},(0,S.default)(this.el).removeClass("_cm_native_ad_background_color")):(e={width:t.width+"px",height:t.height+(0,S.default)(".cmNativeAdSlider").height()+3+"px"},(0,S.default)(this.el).addClass("_cm_native_ad_background_color")),this.$el.css(e)}},{key:"_getSliderPositionAndSize",value:function(){var e=this._getSliderSize(),t={top:"auto",bottom:"auto",left:"auto",right:"auto",width:e.width,height:e.height,transition:"right 1s,left 1s !important"};return t[this.model.get("position.vertical")]=this.model.get("position.verticalOffset")+"px",t}},{key:"_getSliderSize",value:function(){var e=this.model.get("width"),t=Math.floor(this.model.get("liquidSize.isActive")?this._calcLiquidWidth():e);e!==t&&this.model.set("width",t);var i=Hu.getVideoHeight(t);return this.model.set("height",i),{width:t,height:i}}},{key:"_hideSlider",value:function(){var t={};this.model.get("isSliderVisibilityHidden")&&window.setTimeout((function(){t.visibility="hidden"}),e.ANIMATION_TIMER.sliderClose),t[this.model.get("position.horizontal")]=-1*this.model.get("width")+"px",this.$el.css(t)}},{key:"_showSlider",value:function(){Hu.dispatchTRC("videoSliderOn",this.model);var e={};e[this.model.get("position.horizontal")]=this.model.get("position.horizontalOffset")+"px",e.visibility="visible",this.$el.css(e)}},{key:"_customize",value:function(){var e=this.model.get("additionalCss");this.$el.css(Hu.toCssObj(e))}},{key:"_loadComponents",value:function(){this.loadingView=new gl({model:this.model,container:this.el}),this.videoView=new ju({model:this.model,container:this.el}),this.repeatView=new Rl({model:this.model,container:this.el}),this._loadD2D("beforeAd"),this._addContentVideoView(),this._addAdChoice()}},{key:"_calcLiquidWidth",value:function(){var e=this.model.get("liquidSize.minWidth"),t=this.model.get("liquidSize.maxWidth"),i=window.innerWidth*(this.model.get("liquidSize.widthPercent")/100);return t&&i>t&&(i=t),i<e&&(i=e),i}},{key:"_loadD2D",value:function(e){e&&!this.isLoadD2D(e)||(this.d2dBanner=new ml({model:this.model,container:this.el}),this.d2dWrapperCreated=!0,this.d2dBanner.$el.addClass("_cm-d2d-slider"))}},{key:"isLoadD2D",value:function(e){return"D2D"===this.model.get("isShowOnAd")&&this.model.isLoadcomponent("d2d",e)&&!this.d2dLoaded&&!this.d2dWrapperCreated}},{key:"_ond2dLoaded",value:function(){this.d2dLoaded=!0,this.model.isLoadcomponent("d2d","betweenAds")&&this._closeLoadingView(),this._checkD2DisEligible()}},{key:"_closeLoadingView",value:function(){this.loadingViewRemoved||(this.loadingView.remove(),this.loadingViewRemoved=!0)}},{key:"_checkD2DisEligible",value:function(){this.model.get("adState")!==this.states.adState.playing&&this.model.get("isShowD2DOnLoading")||this._hideD2D()}},{key:"_adStateChange",value:function(){this.log.info("Add State Changed to: ",this.model.get("adState")),this.model.get("isReplayAd")?this.model.get("adState")===this.states.adState.completed&&(this._shouldHideContentVideo(),this._hideD2D()):this._loadD2D("betweenAds"),this._isHideD2D&&this._hideD2D(),this._isShowD2D()&&this._showD2D()}},{key:"_shouldHideContentVideo",value:function(){this.contentVideo&&this.contentVideo.hide()}},{key:"_isHideD2D",value:function(){return this.model.get("adState")===this.states.adState.playing&&this.model.get("adManagerState")!==this.states.adManagerState.stopped}},{key:"_isShowD2D",value:function(){return this.model.get("adState")===this.states.adState.completed&&!this.model.get("isReplayAd")&&this.model.isLoadcomponent("d2d","betweenAds")&&this.d2dLoaded}},{key:"_showD2D",value:function(){this.d2dBanner&&this.d2dBanner.hide(!1)}},{key:"_hideD2D",value:function(){this.d2dBanner&&this.d2dBanner.hide(!0)}},{key:"close",value:function(){var t=this;this._hideSlider(),window.setTimeout((function(){Hu.dispatchTRC("videoSliderOff",t.model),t.model.set("closeState",o.closeState.containerViewClosed),t.$el.hide()}),e.ANIMATION_TIMER.sliderClose)}},{key:"_addAdChoice",value:function(){this.model.get("components.adChoice.isActive")&&this.model.get("components.adChoice.videoAd.isActive")&&(this.adChoice=new zl({model:this.model,container:this.el,type:e.AD_CHOICE_TYPE.VIDEO_AD}))}},{key:"_addContentVideoView",value:function(){this.model.get("components.contentVideo.isActive")&&(this._loadContentVideo(),this.model.get("displayFiller.beforeAd")===e.DISPLAY_FILLER.BEFORE_AD.CONTENT&&this.model.once("contentReadySliderShow",this._showSlider.bind(this)))}},{key:"_loadContentVideo",value:function(){this.contentVideo=new wc({model:this.model,container:this.el})}},{key:"_onCloseState",value:function(){if(!this.model.get("isClosedByUser")){var e="onTimeout";(this.model.isLoadcomponent("d2d",e)||this.model.isLoadcomponent("content",e))&&(this.model.isLoadcomponent("d2d",e)?(this._loadD2D(e),this._showD2D()):this._hideD2D(),this._showSlider(),this._closeLoadingView())}this._shouldHideContentVideo()}},{key:"_blockedByExternalUnitChange",value:function(){this.model.get("blockedByExternalUnit")?this._hideSlider():this._showSlider()}},{key:"className",get:function(){return"_cm-os-slider"}},{key:"_onAdComplete",value:function(){this.model.get("isReplayAd")&&(this._shouldHideContentVideo(),this.repeatView.show(),this.limitRepeatSliderByTimer=setTimeout(this._closeSliderByTimer.bind(this),this.model.get("limitRepeatSliderTimerBySec")||5e3))}},{key:"_onContentResize",value:function(){this.model.get("isReplayAd")||this._onResize()}},{key:"_closeSliderByTimer",value:function(){this.close()}},{key:"_onRepeatClick",value:function(){this.limitRepeatSliderByTimer&&clearTimeout(this.limitRepeatSliderByTimer)}}])&&Mu(i.prototype,n),s&&Mu(i,s),Object.defineProperty(i,"prototype",{writable:!1}),l}(n.s),$u=zu;function Gu(e){return Gu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gu(e)}function qu(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if("object"!==Gu(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==Gu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===Gu(o)?o:String(o)),n)}var r,o}function Yu(e,t){return Yu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Yu(e,t)}function Ku(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=Qu(e);if(t){var r=Qu(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return function(e,t){if(t&&("object"===Gu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,i)}}function Qu(e){return Qu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Qu(e)}var Zu=i(1999),Xu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yu(e,t)}(a,e);var i,n,r,s=Ku(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=s.call(this,e)).states=o,t.createStateHandlers([{event:"playerState:ready",funcName:"_onPlayerStateReady"},{event:"playerState:restarted",funcName:"_onPlayerStateReady"},{event:"adState",funcName:"_adStateChange"},{event:"crossUnitInfo",funcName:"_crossUnitInfo"}]),t.windowEventManager=Ra(),t.tabStatusService=new ws(t.model),t.model.set("isViewable",t.model.get("isInTab")),t.model.set("isViewable100",t.model.get("isInTab")),t.adService=new es(t.model),t.seerService=new Tr({model:t.model,onPredictCallback:t.adService.adPredict.bind(t.adService)}),t.playerLoader=new Bo(t.model),t.pixelsService=new jr(t.model),t.containerView=new $u({model:t.model}),t.eligibilityService=new Oo({model:t.model,container:t.containerView}),t.playerService=new lo(t.model),t.model.get("components.nativeAd.isActive")&&(t.nativeAdView=new Hc({model:t.model,globalModel:t.model,container:"._cm-os-slider",additionalCss:"cmNativeAdSlider"})),t._addCloseButton(),t}return i=a,(n=[{key:"handleCloseState",value:function(e,t){t===o.closeState.terminate&&this._onStateTerminate(),t===o.closeState.containerViewClosed&&this._onStateContainerViewClosed(),t===o.closeState.videoViewClosed&&this._onStateVideoViewClosed(),t===o.closeState.adManagerStop&&this._onStateAdManagerStop()}},{key:"_onStateTerminate",value:function(){this.containerView&&this._isCloseUnit()?this.containerView.close():this.model.set("closeState",o.closeState.videoViewClosed)}},{key:"_onStateContainerViewClosed",value:function(){this.model.set("closeState",o.closeState.videoViewClosed)}},{key:"_onStateVideoViewClosed",value:function(){this.adService?this.adService.close():this.model.set("closeState",o.closeState.adManagerStop)}},{key:"_onStateAdManagerStop",value:function(){this.playerService&&(this.playerService.close(),this._isCloseUnit()&&this._stopListening())}},{key:"_isCloseUnit",value:function(){if(this.isClosedByUser)return this.model.set("isClosedByUser",!0),!0;var e=this.model.get("displayFiller.onTimeout"),i=this.model.get("activeAdData");return!(e&&e===t().DISPLAY_FILLER.ON_TIMEOUT.D2D&&this.model.get("d2dLoaded")||e&&e===t().DISPLAY_FILLER.ON_TIMEOUT.CONTENT||i&&i.singleAd&&!this.model.get("components.contentVideo.isActive"))}},{key:"_addCloseButton",value:function(){!0===Zu.parseBool(this.model.get("closeButton.hasCloseButton"))&&(this.closeButtonView=new al({model:this.model,container:this.containerView.el})),this.model.get("displayFiller.beforeAd")===t().DISPLAY_FILLER.BEFORE_AD.CONTENT&&this.closeButtonView.render()}},{key:"_crossUnitInfo",value:function(){this.model.get("crossUnitInfo")&&this.model.get("crossUnitInfo.state")===o.externalUnit.playing?this._blockedByExternalUnit():this._resumeByExternalUnit()}},{key:"_blockedByExternalUnit",value:function(){this.model.set("blockedByExternalUnit",!0)}},{key:"_resumeByExternalUnit",value:function(){this.model.set("blockedByExternalUnit",!1)}}])&&qu(i.prototype,n),r&&qu(i,r),Object.defineProperty(i,"prototype",{writable:!1}),a}(Za),Ju=Xu;window.startCMTagMain=function(e,t){Wa(e,t,{model:e.isMobile?i(6789).Z:i(3049).Z,unitController:Ju})}}()}();